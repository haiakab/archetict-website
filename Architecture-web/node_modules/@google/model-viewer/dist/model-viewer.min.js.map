{"version":3,"file":"model-viewer.min.js","sources":["model-viewer.js"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\n`{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\nwindow.trustedTypes &&\n    trustedTypes.createPolicy('lit-html', { createHTML: (s) => s });\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n// Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n(() => {\n    try {\n        const options = {\n            get capture() {\n                eventOptionsSupported = true;\n                return false;\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.addEventListener('test', options, options);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.removeEventListener('test', options, options);\n    }\n    catch (_e) {\n        // event options not supported\n    }\n})();\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\nif (typeof window !== 'undefined') {\n    (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.3.0');\n}\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nif (typeof window.ShadyCSS === 'undefined') ;\nelse if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n    console.warn(`Incompatible ShadyCSS version detected. ` +\n        `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n        `@webcomponents/shadycss@1.3.1.`);\n}\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar _a$c;\n/**\n * Use this module if you want to create your own base class extending\n * [[UpdatingElement]].\n * @packageDocumentation\n */\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    (prop, _obj) => prop;\nconst defaultConverter = {\n    toAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value ? '' : null;\n            case Object:\n            case Array:\n                // if the value is `null` or `undefined` pass this through\n                // to allow removing/no change behavior.\n                return value == null ? value : JSON.stringify(value);\n        }\n        return value;\n    },\n    fromAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value !== null;\n            case Number:\n                return value === null ? null : Number(value);\n            case Object:\n            case Array:\n                return JSON.parse(value);\n        }\n        return value;\n    }\n};\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nconst notEqual = (value, old) => {\n    // This ensures (old==NaN, value==NaN) always returns false\n    return old !== value && (old === old || value === value);\n};\nconst defaultPropertyDeclaration = {\n    attribute: true,\n    type: String,\n    converter: defaultConverter,\n    reflect: false,\n    hasChanged: notEqual\n};\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n * @noInheritDoc\n */\nclass UpdatingElement extends HTMLElement {\n    constructor() {\n        super();\n        this.initialize();\n    }\n    /**\n     * Returns a list of attributes corresponding to the registered properties.\n     * @nocollapse\n     */\n    static get observedAttributes() {\n        // note: piggy backing on this to ensure we're finalized.\n        this.finalize();\n        const attributes = [];\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this._classProperties.forEach((v, p) => {\n            const attr = this._attributeNameForProperty(p, v);\n            if (attr !== undefined) {\n                this._attributeToPropertyMap.set(attr, p);\n                attributes.push(attr);\n            }\n        });\n        return attributes;\n    }\n    /**\n     * Ensures the private `_classProperties` property metadata is created.\n     * In addition to `finalize` this is also called in `createProperty` to\n     * ensure the `@property` decorator can add property metadata.\n     */\n    /** @nocollapse */\n    static _ensureClassProperties() {\n        // ensure private storage for property declarations.\n        if (!this.hasOwnProperty(JSCompiler_renameProperty('_classProperties', this))) {\n            this._classProperties = new Map();\n            // NOTE: Workaround IE11 not supporting Map constructor argument.\n            const superProperties = Object.getPrototypeOf(this)._classProperties;\n            if (superProperties !== undefined) {\n                superProperties.forEach((v, k) => this._classProperties.set(k, v));\n            }\n        }\n    }\n    /**\n     * Creates a property accessor on the element prototype if one does not exist\n     * and stores a PropertyDeclaration for the property with the given options.\n     * The property setter calls the property's `hasChanged` property option\n     * or uses a strict identity check to determine whether or not to request\n     * an update.\n     *\n     * This method may be overridden to customize properties; however,\n     * when doing so, it's important to call `super.createProperty` to ensure\n     * the property is setup correctly. This method calls\n     * `getPropertyDescriptor` internally to get a descriptor to install.\n     * To customize what properties do when they are get or set, override\n     * `getPropertyDescriptor`. To customize the options for a property,\n     * implement `createProperty` like this:\n     *\n     * static createProperty(name, options) {\n     *   options = Object.assign(options, {myOption: true});\n     *   super.createProperty(name, options);\n     * }\n     *\n     * @nocollapse\n     */\n    static createProperty(name, options = defaultPropertyDeclaration) {\n        // Note, since this can be called by the `@property` decorator which\n        // is called before `finalize`, we ensure storage exists for property\n        // metadata.\n        this._ensureClassProperties();\n        this._classProperties.set(name, options);\n        // Do not generate an accessor if the prototype already has one, since\n        // it would be lost otherwise and that would never be the user's intention;\n        // Instead, we expect users to call `requestUpdate` themselves from\n        // user-defined accessors. Note that if the super has an accessor we will\n        // still overwrite it\n        if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n            return;\n        }\n        const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n        const descriptor = this.getPropertyDescriptor(name, key, options);\n        if (descriptor !== undefined) {\n            Object.defineProperty(this.prototype, name, descriptor);\n        }\n    }\n    /**\n     * Returns a property descriptor to be defined on the given named property.\n     * If no descriptor is returned, the property will not become an accessor.\n     * For example,\n     *\n     *   class MyElement extends LitElement {\n     *     static getPropertyDescriptor(name, key, options) {\n     *       const defaultDescriptor =\n     *           super.getPropertyDescriptor(name, key, options);\n     *       const setter = defaultDescriptor.set;\n     *       return {\n     *         get: defaultDescriptor.get,\n     *         set(value) {\n     *           setter.call(this, value);\n     *           // custom action.\n     *         },\n     *         configurable: true,\n     *         enumerable: true\n     *       }\n     *     }\n     *   }\n     *\n     * @nocollapse\n     */\n    static getPropertyDescriptor(name, key, options) {\n        return {\n            // tslint:disable-next-line:no-any no symbol in index\n            get() {\n                return this[key];\n            },\n            set(value) {\n                const oldValue = this[name];\n                this[key] = value;\n                this\n                    .requestUpdateInternal(name, oldValue, options);\n            },\n            configurable: true,\n            enumerable: true\n        };\n    }\n    /**\n     * Returns the property options associated with the given property.\n     * These options are defined with a PropertyDeclaration via the `properties`\n     * object or the `@property` decorator and are registered in\n     * `createProperty(...)`.\n     *\n     * Note, this method should be considered \"final\" and not overridden. To\n     * customize the options for a given property, override `createProperty`.\n     *\n     * @nocollapse\n     * @final\n     */\n    static getPropertyOptions(name) {\n        return this._classProperties && this._classProperties.get(name) ||\n            defaultPropertyDeclaration;\n    }\n    /**\n     * Creates property accessors for registered properties and ensures\n     * any superclasses are also finalized.\n     * @nocollapse\n     */\n    static finalize() {\n        // finalize any superclasses\n        const superCtor = Object.getPrototypeOf(this);\n        if (!superCtor.hasOwnProperty(finalized)) {\n            superCtor.finalize();\n        }\n        this[finalized] = true;\n        this._ensureClassProperties();\n        // initialize Map populated in observedAttributes\n        this._attributeToPropertyMap = new Map();\n        // make any properties\n        // Note, only process \"own\" properties since this element will inherit\n        // any properties defined on the superClass, and finalization ensures\n        // the entire prototype chain is finalized.\n        if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n            const props = this.properties;\n            // support symbols in properties (IE11 does not support this)\n            const propKeys = [\n                ...Object.getOwnPropertyNames(props),\n                ...(typeof Object.getOwnPropertySymbols === 'function') ?\n                    Object.getOwnPropertySymbols(props) :\n                    []\n            ];\n            // This for/of is ok because propKeys is an array\n            for (const p of propKeys) {\n                // note, use of `any` is due to TypeSript lack of support for symbol in\n                // index types\n                // tslint:disable-next-line:no-any no symbol in index\n                this.createProperty(p, props[p]);\n            }\n        }\n    }\n    /**\n     * Returns the property name for the given attribute `name`.\n     * @nocollapse\n     */\n    static _attributeNameForProperty(name, options) {\n        const attribute = options.attribute;\n        return attribute === false ?\n            undefined :\n            (typeof attribute === 'string' ?\n                attribute :\n                (typeof name === 'string' ? name.toLowerCase() : undefined));\n    }\n    /**\n     * Returns true if a property should request an update.\n     * Called when a property value is set and uses the `hasChanged`\n     * option for the property if present or a strict identity check.\n     * @nocollapse\n     */\n    static _valueHasChanged(value, old, hasChanged = notEqual) {\n        return hasChanged(value, old);\n    }\n    /**\n     * Returns the property value for the given attribute value.\n     * Called via the `attributeChangedCallback` and uses the property's\n     * `converter` or `converter.fromAttribute` property option.\n     * @nocollapse\n     */\n    static _propertyValueFromAttribute(value, options) {\n        const type = options.type;\n        const converter = options.converter || defaultConverter;\n        const fromAttribute = (typeof converter === 'function' ? converter : converter.fromAttribute);\n        return fromAttribute ? fromAttribute(value, type) : value;\n    }\n    /**\n     * Returns the attribute value for the given property value. If this\n     * returns undefined, the property will *not* be reflected to an attribute.\n     * If this returns null, the attribute will be removed, otherwise the\n     * attribute will be set to the value.\n     * This uses the property's `reflect` and `type.toAttribute` property options.\n     * @nocollapse\n     */\n    static _propertyValueToAttribute(value, options) {\n        if (options.reflect === undefined) {\n            return;\n        }\n        const type = options.type;\n        const converter = options.converter;\n        const toAttribute = converter && converter.toAttribute ||\n            defaultConverter.toAttribute;\n        return toAttribute(value, type);\n    }\n    /**\n     * Performs element initialization. By default captures any pre-set values for\n     * registered properties.\n     */\n    initialize() {\n        this._updateState = 0;\n        this._updatePromise =\n            new Promise((res) => this._enableUpdatingResolver = res);\n        this._changedProperties = new Map();\n        this._saveInstanceProperties();\n        // ensures first update will be caught by an early access of\n        // `updateComplete`\n        this.requestUpdateInternal();\n    }\n    /**\n     * Fixes any properties set on the instance before upgrade time.\n     * Otherwise these would shadow the accessor and break these properties.\n     * The properties are stored in a Map which is played back after the\n     * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n     * (<=41), properties created for native platform properties like (`id` or\n     * `name`) may not have default values set in the element constructor. On\n     * these browsers native properties appear on instances and therefore their\n     * default value will overwrite any element default (e.g. if the element sets\n     * this.id = 'id' in the constructor, the 'id' will become '' since this is\n     * the native platform default).\n     */\n    _saveInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this.constructor\n            ._classProperties.forEach((_v, p) => {\n            if (this.hasOwnProperty(p)) {\n                const value = this[p];\n                delete this[p];\n                if (!this._instanceProperties) {\n                    this._instanceProperties = new Map();\n                }\n                this._instanceProperties.set(p, value);\n            }\n        });\n    }\n    /**\n     * Applies previously saved instance properties.\n     */\n    _applyInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        // tslint:disable-next-line:no-any\n        this._instanceProperties.forEach((v, p) => this[p] = v);\n        this._instanceProperties = undefined;\n    }\n    connectedCallback() {\n        // Ensure first connection completes an update. Updates cannot complete\n        // before connection.\n        this.enableUpdating();\n    }\n    enableUpdating() {\n        if (this._enableUpdatingResolver !== undefined) {\n            this._enableUpdatingResolver();\n            this._enableUpdatingResolver = undefined;\n        }\n    }\n    /**\n     * Allows for `super.disconnectedCallback()` in extensions while\n     * reserving the possibility of making non-breaking feature additions\n     * when disconnecting at some point in the future.\n     */\n    disconnectedCallback() {\n    }\n    /**\n     * Synchronizes property values when attributes change.\n     */\n    attributeChangedCallback(name, old, value) {\n        if (old !== value) {\n            this._attributeToProperty(name, value);\n        }\n    }\n    _propertyToAttribute(name, value, options = defaultPropertyDeclaration) {\n        const ctor = this.constructor;\n        const attr = ctor._attributeNameForProperty(name, options);\n        if (attr !== undefined) {\n            const attrValue = ctor._propertyValueToAttribute(value, options);\n            // an undefined value does not change the attribute.\n            if (attrValue === undefined) {\n                return;\n            }\n            // Track if the property is being reflected to avoid\n            // setting the property again via `attributeChangedCallback`. Note:\n            // 1. this takes advantage of the fact that the callback is synchronous.\n            // 2. will behave incorrectly if multiple attributes are in the reaction\n            // stack at time of calling. However, since we process attributes\n            // in `update` this should not be possible (or an extreme corner case\n            // that we'd like to discover).\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n            if (attrValue == null) {\n                this.removeAttribute(attr);\n            }\n            else {\n                this.setAttribute(attr, attrValue);\n            }\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n        }\n    }\n    _attributeToProperty(name, value) {\n        // Use tracking info to avoid deserializing attribute value if it was\n        // just set from a property setter.\n        if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n            return;\n        }\n        const ctor = this.constructor;\n        // Note, hint this as an `AttributeMap` so closure clearly understands\n        // the type; it has issues with tracking types through statics\n        // tslint:disable-next-line:no-unnecessary-type-assertion\n        const propName = ctor._attributeToPropertyMap.get(name);\n        if (propName !== undefined) {\n            const options = ctor.getPropertyOptions(propName);\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n            this[propName] =\n                // tslint:disable-next-line:no-any\n                ctor._propertyValueFromAttribute(value, options);\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n        }\n    }\n    /**\n     * This protected version of `requestUpdate` does not access or return the\n     * `updateComplete` promise. This promise can be overridden and is therefore\n     * not free to access.\n     */\n    requestUpdateInternal(name, oldValue, options) {\n        let shouldRequestUpdate = true;\n        // If we have a property key, perform property update steps.\n        if (name !== undefined) {\n            const ctor = this.constructor;\n            options = options || ctor.getPropertyOptions(name);\n            if (ctor._valueHasChanged(this[name], oldValue, options.hasChanged)) {\n                if (!this._changedProperties.has(name)) {\n                    this._changedProperties.set(name, oldValue);\n                }\n                // Add to reflecting properties set.\n                // Note, it's important that every change has a chance to add the\n                // property to `_reflectingProperties`. This ensures setting\n                // attribute + property reflects correctly.\n                if (options.reflect === true &&\n                    !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n                    if (this._reflectingProperties === undefined) {\n                        this._reflectingProperties = new Map();\n                    }\n                    this._reflectingProperties.set(name, options);\n                }\n            }\n            else {\n                // Abort the request if the property should not be considered changed.\n                shouldRequestUpdate = false;\n            }\n        }\n        if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n            this._updatePromise = this._enqueueUpdate();\n        }\n    }\n    /**\n     * Requests an update which is processed asynchronously. This should\n     * be called when an element should update based on some state not triggered\n     * by setting a property. In this case, pass no arguments. It should also be\n     * called when manually implementing a property setter. In this case, pass the\n     * property `name` and `oldValue` to ensure that any configured property\n     * options are honored. Returns the `updateComplete` Promise which is resolved\n     * when the update completes.\n     *\n     * @param name {PropertyKey} (optional) name of requesting property\n     * @param oldValue {any} (optional) old value of requesting property\n     * @returns {Promise} A Promise that is resolved when the update completes.\n     */\n    requestUpdate(name, oldValue) {\n        this.requestUpdateInternal(name, oldValue);\n        return this.updateComplete;\n    }\n    /**\n     * Sets up the element to asynchronously update.\n     */\n    async _enqueueUpdate() {\n        this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n        try {\n            // Ensure any previous update has resolved before updating.\n            // This `await` also ensures that property changes are batched.\n            await this._updatePromise;\n        }\n        catch (e) {\n            // Ignore any previous errors. We only care that the previous cycle is\n            // done. Any error should have been handled in the previous update.\n        }\n        const result = this.performUpdate();\n        // If `performUpdate` returns a Promise, we await it. This is done to\n        // enable coordinating updates with a scheduler. Note, the result is\n        // checked to avoid delaying an additional microtask unless we need to.\n        if (result != null) {\n            await result;\n        }\n        return !this._hasRequestedUpdate;\n    }\n    get _hasRequestedUpdate() {\n        return (this._updateState & STATE_UPDATE_REQUESTED);\n    }\n    get hasUpdated() {\n        return (this._updateState & STATE_HAS_UPDATED);\n    }\n    /**\n     * Performs an element update. Note, if an exception is thrown during the\n     * update, `firstUpdated` and `updated` will not be called.\n     *\n     * You can override this method to change the timing of updates. If this\n     * method is overridden, `super.performUpdate()` must be called.\n     *\n     * For instance, to schedule updates to occur just before the next frame:\n     *\n     * ```\n     * protected async performUpdate(): Promise<unknown> {\n     *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n     *   super.performUpdate();\n     * }\n     * ```\n     */\n    performUpdate() {\n        // Abort any update if one is not pending when this is called.\n        // This can happen if `performUpdate` is called early to \"flush\"\n        // the update.\n        if (!this._hasRequestedUpdate) {\n            return;\n        }\n        // Mixin instance properties once, if they exist.\n        if (this._instanceProperties) {\n            this._applyInstanceProperties();\n        }\n        let shouldUpdate = false;\n        const changedProperties = this._changedProperties;\n        try {\n            shouldUpdate = this.shouldUpdate(changedProperties);\n            if (shouldUpdate) {\n                this.update(changedProperties);\n            }\n            else {\n                this._markUpdated();\n            }\n        }\n        catch (e) {\n            // Prevent `firstUpdated` and `updated` from running when there's an\n            // update exception.\n            shouldUpdate = false;\n            // Ensure element can accept additional updates after an exception.\n            this._markUpdated();\n            throw e;\n        }\n        if (shouldUpdate) {\n            if (!(this._updateState & STATE_HAS_UPDATED)) {\n                this._updateState = this._updateState | STATE_HAS_UPDATED;\n                this.firstUpdated(changedProperties);\n            }\n            this.updated(changedProperties);\n        }\n    }\n    _markUpdated() {\n        this._changedProperties = new Map();\n        this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n    }\n    /**\n     * Returns a Promise that resolves when the element has completed updating.\n     * The Promise value is a boolean that is `true` if the element completed the\n     * update without triggering another update. The Promise result is `false` if\n     * a property was set inside `updated()`. If the Promise is rejected, an\n     * exception was thrown during the update.\n     *\n     * To await additional asynchronous work, override the `_getUpdateComplete`\n     * method. For example, it is sometimes useful to await a rendered element\n     * before fulfilling this Promise. To do this, first await\n     * `super._getUpdateComplete()`, then any subsequent state.\n     *\n     * @returns {Promise} The Promise returns a boolean that indicates if the\n     * update resolved without triggering another update.\n     */\n    get updateComplete() {\n        return this._getUpdateComplete();\n    }\n    /**\n     * Override point for the `updateComplete` promise.\n     *\n     * It is not safe to override the `updateComplete` getter directly due to a\n     * limitation in TypeScript which means it is not possible to call a\n     * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n     * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n     * This method should be overridden instead. For example:\n     *\n     *   class MyElement extends LitElement {\n     *     async _getUpdateComplete() {\n     *       await super._getUpdateComplete();\n     *       await this._myChild.updateComplete;\n     *     }\n     *   }\n     */\n    _getUpdateComplete() {\n        return this._updatePromise;\n    }\n    /**\n     * Controls whether or not `update` should be called when the element requests\n     * an update. By default, this method always returns `true`, but this can be\n     * customized to control when to update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    shouldUpdate(_changedProperties) {\n        return true;\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes.\n     * It can be overridden to render and keep updated element DOM.\n     * Setting properties inside this method will *not* trigger\n     * another update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    update(_changedProperties) {\n        if (this._reflectingProperties !== undefined &&\n            this._reflectingProperties.size > 0) {\n            // Use forEach so this works even if for/of loops are compiled to for\n            // loops expecting arrays\n            this._reflectingProperties.forEach((v, k) => this._propertyToAttribute(k, this[k], v));\n            this._reflectingProperties = undefined;\n        }\n        this._markUpdated();\n    }\n    /**\n     * Invoked whenever the element is updated. Implement to perform\n     * post-updating tasks via DOM APIs, for example, focusing an element.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    updated(_changedProperties) {\n    }\n    /**\n     * Invoked when the element is first updated. Implement to perform one time\n     * work on the element after update.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    firstUpdated(_changedProperties) {\n    }\n}\n_a$c = finalized;\n/**\n * Marks class as having finished creating properties.\n */\nUpdatingElement[_a$c] = true;\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst standardProperty = (options, element) => {\n    // When decorating an accessor, pass it through and add property metadata.\n    // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n    // stomp over the user's accessor.\n    if (element.kind === 'method' && element.descriptor &&\n        !('value' in element.descriptor)) {\n        return Object.assign(Object.assign({}, element), { finisher(clazz) {\n                clazz.createProperty(element.key, options);\n            } });\n    }\n    else {\n        // createProperty() takes care of defining the property, but we still\n        // must return some kind of descriptor, so return a descriptor for an\n        // unused prototype field. The finisher calls createProperty().\n        return {\n            kind: 'field',\n            key: Symbol(),\n            placement: 'own',\n            descriptor: {},\n            // When @babel/plugin-proposal-decorators implements initializers,\n            // do this instead of the initializer below. See:\n            // https://github.com/babel/babel/issues/9260 extras: [\n            //   {\n            //     kind: 'initializer',\n            //     placement: 'own',\n            //     initializer: descriptor.initializer,\n            //   }\n            // ],\n            initializer() {\n                if (typeof element.initializer === 'function') {\n                    this[element.key] = element.initializer.call(this);\n                }\n            },\n            finisher(clazz) {\n                clazz.createProperty(element.key, options);\n            }\n        };\n    }\n};\nconst legacyProperty = (options, proto, name) => {\n    proto.constructor\n        .createProperty(name, options);\n};\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A [[`PropertyDeclaration`]] may optionally be\n * supplied to configure property features.\n *\n * This decorator should only be used for public fields. Private or protected\n * fields should use the [[`internalProperty`]] decorator.\n *\n * @example\n * ```ts\n * class MyElement {\n *   @property({ type: Boolean })\n *   clicked = false;\n * }\n * ```\n * @category Decorator\n * @ExportDecoratedItems\n */\nfunction property(options) {\n    // tslint:disable-next-line:no-any decorator\n    return (protoOrDescriptor, name) => (name !== undefined) ?\n        legacyProperty(options, protoOrDescriptor, name) :\n        standardProperty(options, protoOrDescriptor);\n}\n\n/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\n(window.ShadowRoot) &&\n    (window.ShadyCSS === undefined || window.ShadyCSS.nativeShadow) &&\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.4.0');\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// NOTE(cdata): The HAS_WEBXR_* constants can be enabled in Chrome by turning on\n// the appropriate flags. However, just because we have the API does not\n// guarantee that AR will work.\nconst HAS_WEBXR_DEVICE_API = navigator.xr != null &&\n    self.XRSession != null && navigator.xr.isSessionSupported != null;\nconst HAS_WEBXR_HIT_TEST_API = HAS_WEBXR_DEVICE_API && self.XRSession.prototype.requestHitTestSource;\nconst HAS_RESIZE_OBSERVER = self.ResizeObserver != null;\nconst HAS_INTERSECTION_OBSERVER = self.IntersectionObserver != null;\nconst IS_WEBXR_AR_CANDIDATE = HAS_WEBXR_HIT_TEST_API;\n(() => {\n    const userAgent = navigator.userAgent || navigator.vendor || self.opera;\n    let check = false;\n    // eslint-disable-next-line\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i\n        .test(userAgent) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i\n            .test(userAgent.substr(0, 4))) {\n        check = true;\n    }\n    return check;\n})();\n/\\bCrOS\\b/.test(navigator.userAgent);\n// Disabling offscreen canvas for now because it is slower and has bugs relating\n// to janky updates and out of sync frames.\nconst USE_OFFSCREEN_CANVAS = false;\n// Boolean((self as any).OffscreenCanvas) &&\n//     Boolean((self as any).OffscreenCanvas.prototype.transferToImageBitmap) &&\n//     !IS_CHROMEOS;  // TODO(elalish): file a bug on inverted renders\nconst IS_ANDROID = /android/i.test(navigator.userAgent);\n// Prior to iOS 13, detecting iOS Safari was relatively straight-forward.\n// As of iOS 13, Safari on iPad (in its default configuration) reports the same\n// user-agent string as Safari on desktop MacOS. Strictly speaking, we only care\n// about iOS for the purposes if selecting for cases where Quick Look is known\n// to be supported. However, for API correctness purposes, we must rely on\n// known, detectable signals to distinguish iOS Safari from MacOS Safari. At the\n// time of this writing, there are no non-iOS/iPadOS Apple devices with\n// multi-touch displays.\n// @see https://stackoverflow.com/questions/57765958/how-to-detect-ipad-and-ipad-os-version-in-ios-13-and-up\n// @see https://forums.developer.apple.com/thread/119186\n// @see https://github.com/google/model-viewer/issues/758\nconst IS_IOS = (/iPad|iPhone|iPod/.test(navigator.userAgent) && !self.MSStream) ||\n    (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\nconst IS_AR_QUICKLOOK_CANDIDATE = (() => {\n    const tempAnchor = document.createElement('a');\n    return Boolean(tempAnchor.relList && tempAnchor.relList.supports &&\n        tempAnchor.relList.supports('ar'));\n})();\n// @see https://developer.chrome.com/multidevice/user-agent\n/Safari\\//.test(navigator.userAgent);\nconst IS_FIREFOX = /firefox/i.test(navigator.userAgent);\nconst IS_OCULUS = /OculusBrowser/.test(navigator.userAgent);\nIS_IOS && /CriOS\\//.test(navigator.userAgent);\nconst IS_SCENEVIEWER_CANDIDATE = IS_ANDROID && !IS_FIREFOX && !IS_OCULUS;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CloseIcon = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" fill=\"#000000\">\n    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\n         support for dynamic re-coloring of UI components -->\n    <defs>\n      <filter id=\"drop-shadow\" x=\"-100%\" y=\"-100%\" width=\"300%\" height=\"300%\">\n        <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"1\"/>\n        <feOffset dx=\"0\" dy=\"0\" result=\"offsetblur\"/>\n        <feFlood flood-color=\"#000000\"/>\n        <feComposite in2=\"offsetblur\" operator=\"in\"/>\n        <feMerge>\n          <feMergeNode/>\n          <feMergeNode in=\"SourceGraphic\"/>\n        </feMerge>\n      </filter>\n    </defs>\n    <path filter=\"url(#drop-shadow)\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ControlsPrompt = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"36\">\n    <defs>\n        <path id=\"A\" d=\"M.001.232h24.997V36H.001z\" />\n    </defs>\n    <g transform=\"translate(-11 -4)\" fill=\"none\" fill-rule=\"evenodd\">\n        <path fill-opacity=\"0\" fill=\"#fff\" d=\"M0 0h44v44H0z\" />\n        <g transform=\"translate(11 3)\">\n            <path d=\"M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z\" fill-opacity=\".5\" fill=\"#e4e4e4\" />\n            <path d=\"M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91\" fill-opacity=\".6\" fill=\"#000\" />\n            <path d=\"M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z\" fill=\"#fff\" />\n            <g transform=\"translate(0 .769)\">\n                <mask id=\"B\" fill=\"#fff\">\n                    <use xlink:href=\"#A\" />\n                </mask>\n                <path d=\"M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325\" fill-opacity=\".05\" fill=\"#000\" mask=\"url(#B)\" />\n            </g>\n        </g>\n    </g>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ARGlyph = `\n<svg version=\"1.1\" id=\"view_x5F_in_x5F_AR_x5F_icon\"\n\t xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\"\n\t viewBox=\"0 0 24 24\" enable-background=\"new 0 0 24 24\" xml:space=\"preserve\">\n<rect id=\"Bounding_Box\" x=\"0\" y=\"0\" fill=\"none\" width=\"24\" height=\"24\"/>\n<g id=\"Art_layer\">\n\t<path d=\"M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z\"/>\n\t<path d=\"M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z\"/>\n\t<path d=\"M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z\"/>\n\t<path d=\"M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z\"/>\n\t<g>\n\t\t<path d=\"M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\n\t\t\tl5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\n\t\t\tl4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z\"/>\n\t</g>\n</g>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n<style>\n:host {\n  display: block;\n  position: relative;\n  contain: strict;\n  width: 300px;\n  height: 150px;\n}\n\n/* NOTE: This ruleset is our integration surface area with the\n * :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196 */\n:host([data-js-focus-visible]:focus:not(.focus-visible)),\n:host([data-js-focus-visible]) :focus:not(.focus-visible) {\n  outline: none;\n}\n\n.container {\n  position: relative;\n}\n\n.userInput {\n  width: 100%;\n  height: 100%;\n  display: block;\n  position: relative;\n  overflow: hidden;\n}\n\ncanvas {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\n   * that causes our canvas not to display pixels unless it is\n   * on its own render layer\n   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893\n   */\n  transform: translateZ(0);\n}\n\ncanvas.show {\n  display: block;\n}\n\n/* Adapted from HTML5 Boilerplate\n *\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\n.screen-reader-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n\n.slot {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.slot > * {\n  pointer-events: initial;\n}\n\n.annotation-wrapper ::slotted(*) {\n  opacity: var(--max-hotspot-opacity, 1);\n  transition: opacity 0.3s;\n}\n\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\n  pointer-events: none;\n}\n\n.annotation-wrapper ::slotted(*) {\n  pointer-events: initial;\n}\n\n.annotation-wrapper.hide ::slotted(*) {\n  opacity: var(--min-hotspot-opacity, 0.25);\n}\n\n.slot.poster {\n  opacity: 0;\n  transition: opacity 0.3s 0.3s;\n  background-color: inherit;\n}\n\n.slot.poster.show {\n  opacity: 1;\n  transition: none;\n}\n\n.slot.poster > * {\n  pointer-events: initial;\n}\n\n.slot.poster:not(.show) > * {\n  pointer-events: none;\n}\n\n#default-poster {\n  width: 100%;\n  height: 100%;\n  /* The default poster is a <button> so we need to set display\n   * to prevent it from being affected by text-align: */\n  display: block;\n  position: absolute;\n  border: none;\n  padding: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: var(--poster-color, #fff);\n  background-image: var(--poster-image, none);\n}\n\n#default-progress-bar {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n#default-progress-bar > .mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: var(--progress-mask, #fff);\n  transition: opacity 0.3s;\n  opacity: 0.2;\n}\n\n#default-progress-bar > .bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress-bar-height, 5px);\n  transition: transform 0.09s;\n  transform-origin: top left;\n  transform: scaleX(0);\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar:before {\n  content: '';\n  display: block;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\n\n  transition: none;\n  transform-origin: top left;\n  transform: translateY(0);\n}\n\n#default-progress-bar > .bar.hide:before {\n  transition: transform 0.3s 1s;\n  transform: translateY(-100%);\n}\n\n.slot.interaction-prompt {\n  display: var(--interaction-prompt-display, flex);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  align-items: center;\n  justify-content: center;\n\n  opacity: 0;\n  will-change: opacity;\n  overflow: hidden;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt.visible {\n  opacity: 1;\n}\n\n.slot.interaction-prompt > .animated-container {\n  will-change: transform, opacity;\n}\n\n.slot.interaction-prompt > * {\n  pointer-events: none;\n}\n\n.slot.ar-button {\n  -moz-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n\n  display: var(--ar-button-display, block);\n}\n\n.slot.ar-button:not(.enabled) {\n  display: none;\n}\n\n.fab {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background-color: #fff;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  border-radius: 100px;\n}\n\n.fab > * {\n  opacity: 0.87;\n}\n\n#default-ar-button {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  transform: scale(var(--ar-button-scale, 1));\n  transform-origin: bottom right;\n}\n\n.slot.default {\n  pointer-events: none;\n}\n\n.slot.progress-bar {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button:not(.enabled) {\n  display: none;\n}\n\n#default-exit-webxr-ar-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n}\n\n#default-exit-webxr-ar-button > svg {\n  fill: #fff;\n}\n</style>\n<div class=\"container\">\n  <div class=\"userInput\" tabindex=\"0\" role=\"img\"\n      aria-label=\"A depiction of a 3D model\"\n      aria-live=\"polite\">\n    <canvas></canvas>\n  </div>\n\n  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\n        will have their <slot> elements removed by ShadyCSS -->\n  <div class=\"slot poster\">\n    <slot name=\"poster\">\n      <button type=\"button\" id=\"default-poster\" aria-hidden=\"true\" aria-label=\"Activate to view in 3D!\"></button>\n    </slot>\n  </div>\n\n  <div class=\"slot ar-button\">\n    <slot name=\"ar-button\">\n      <a id=\"default-ar-button\" class=\"fab\"\n          tabindex=\"2\"\n          aria-label=\"View this 3D model up close\">\n        ${ARGlyph}\n      </a>\n    </slot>\n  </div>\n\n  <div class=\"slot interaction-prompt\">\n    <div class=\"animated-container\" part=\"interaction-prompt\">\n      <slot name=\"interaction-prompt\" aria-hidden=\"true\">\n        ${ControlsPrompt}\n      </slot>\n    </div>\n  </div>\n\n  <div class=\"slot default\">\n    <slot></slot>\n\n    <div class=\"slot progress-bar\">\n      <slot name=\"progress-bar\">\n        <div id=\"default-progress-bar\" aria-hidden=\"true\">\n          <div class=\"mask\"></div>\n          <div class=\"bar\"></div>\n        </div>\n      </slot>\n    </div>\n    \n    <div class=\"slot exit-webxr-ar-button\">\n      <slot name=\"exit-webxr-ar-button\">\n        <a id=\"default-exit-webxr-ar-button\"\n            tabindex=\"3\"\n            aria-label=\"Exit AR\"\n            aria-hidden=\"true\">\n          ${CloseIcon}\n        </a>\n      </slot>\n    </div>\n  </div>\n</div>`;\nconst makeTemplate = (tagName) => {\n    const clone = document.createElement('template');\n    clone.innerHTML = template.innerHTML;\n    if (window.ShadyCSS) {\n        window.ShadyCSS.prepareTemplate(clone, tagName);\n    }\n    return clone;\n};\n\n// threejs.org/license\nconst REVISION = '126';\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst FlatShading = 1;\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst CubeUVRefractionMapping = 307;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedShort565Type = 1019;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBFormat = 1022;\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst RGBEFormat = RGBAFormat;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBIntegerFormat = 1032;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nconst SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nconst SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nconst SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nconst SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nconst SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nconst SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nconst SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nconst SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nconst SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nconst SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nconst SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nconst SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nconst SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\nconst LinearEncoding = 3000;\nconst sRGBEncoding = 3001;\nconst GammaEncoding = 3007;\nconst RGBEEncoding = 3002;\nconst LogLuvEncoding = 3003;\nconst RGBM7Encoding = 3004;\nconst RGBM16Encoding = 3005;\nconst RGBDEncoding = 3006;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\nconst KeepStencilOp = 7680;\nconst AlwaysStencilFunc = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst GLSL3 = '300 es';\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nconst _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\nconst MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\n\n\tdamp: function ( x, y, lambda, dt ) {\n\n\t\treturn MathUtils.lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n\t},\n\n\t// https://www.desmos.com/calculator/vcsjnyz7x4\n\n\tpingpong: function ( x, length = 1 ) {\n\n\t\treturn length - Math.abs( MathUtils.euclideanModulo( x, length * 2 ) - length );\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\t// Deterministic pseudo-random float in the interval [ 0, 1 ]\n\n\tseededRandom: function ( s ) {\n\n\t\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t\t// Park-Miller algorithm\n\n\t\t_seed = _seed * 16807 % 2147483647;\n\n\t\treturn ( _seed - 1 ) / 2147483646;\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c2 = cos( b / 2 );\n\t\tconst s2 = sin( b / 2 );\n\n\t\tconst c13 = cos( ( a + c ) / 2 );\n\t\tconst s13 = sin( ( a + c ) / 2 );\n\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYX':\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZY':\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXZ':\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZX':\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXY':\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYZ':\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t}\n\n};\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector2.prototype.isVector2 = true;\n\nclass Matrix3 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nMatrix3.prototype.isMatrix3 = true;\n\nlet _canvas;\n\nconst ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nlet textureId = 0;\n\nclass Texture$1 extends EventDispatcher {\n\n\tconstructor( image = Texture$1.DEFAULT_IMAGE, mapping = Texture$1.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipmapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = 1, encoding = LinearEncoding ) {\n\n\t\tsuper();\n\n\t\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\tthis.name = '';\n\n\t\tthis.image = image;\n\t\tthis.mipmaps = [];\n\n\t\tthis.mapping = mapping;\n\n\t\tthis.wrapS = wrapS;\n\t\tthis.wrapT = wrapT;\n\n\t\tthis.magFilter = magFilter;\n\t\tthis.minFilter = minFilter;\n\n\t\tthis.anisotropy = anisotropy;\n\n\t\tthis.format = format;\n\t\tthis.internalFormat = null;\n\t\tthis.type = type;\n\n\t\tthis.offset = new Vector2( 0, 0 );\n\t\tthis.repeat = new Vector2( 1, 1 );\n\t\tthis.center = new Vector2( 0, 0 );\n\t\tthis.rotation = 0;\n\n\t\tthis.matrixAutoUpdate = true;\n\t\tthis.matrix = new Matrix3();\n\n\t\tthis.generateMipmaps = true;\n\t\tthis.premultiplyAlpha = false;\n\t\tthis.flipY = true;\n\t\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t\t//\n\t\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\t\tthis.encoding = encoding;\n\n\t\tthis.version = 0;\n\t\tthis.onUpdate = null;\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tconst image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tlet url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t// check cube texture with data textures\n\n\t\t\t\t\t\tif ( image[ i ].isDataTexture ) {\n\n\t\t\t\t\t\t\turl.push( serializeImage( image[ i ].image ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\turl.push( serializeImage( image[ i ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = serializeImage( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\ttransformUv( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n}\n\nTexture$1.DEFAULT_IMAGE = undefined;\nTexture$1.DEFAULT_MAPPING = UVMapping;\n\nTexture$1.prototype.isTexture = true;\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.prototype.slice.call( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector4.prototype.isVector4 = true;\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nclass WebGLRenderTarget extends EventDispatcher {\n\n\tconstructor( width, height, options ) {\n\n\t\tsuper();\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = 1;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\toptions = options || {};\n\n\t\tthis.texture = new Texture$1( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\tthis.texture.image = {};\n\t\tthis.texture.image.width = width;\n\t\tthis.texture.image.height = height;\n\t\tthis.texture.image.depth = 1;\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n\t\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n\t}\n\n\tsetTexture( texture ) {\n\n\t\ttexture.image = {\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\tdepth: this.depth\n\t\t};\n\n\t\tthis.texture = texture;\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\t\t\tthis.texture.image.depth = depth;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nWebGLRenderTarget.prototype.isWebGLRenderTarget = true;\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tconst EPS = 0.000001;\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nQuaternion.prototype.isQuaternion = true;\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector3.prototype.isVector3 = true;\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nclass Box3 {\n\n\tconstructor( min = new Vector3( + Infinity, + Infinity, + Infinity ), max = new Vector3( - Infinity, - Infinity, - Infinity ) ) {\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$1.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box );\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$1 );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$1.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1, _v0 );\n\t\t_f1.subVectors( _v2, _v1 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1, _v2, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$1.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector$1 ).length() * 0.5;\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nBox3.prototype.isBox3 = true;\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector$1 = /*@__PURE__*/ new Vector3();\n\nconst _box = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _box$1 = /*@__PURE__*/ new Box3();\n\nclass Sphere {\n\n\tconstructor( center = new Vector3(), radius = - 1 ) {\n\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$1.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$2 = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin = new Vector3(), direction = new Vector3( 0, 0, - 1 ) ) {\n\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$2 ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector$2.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$2.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector$2.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector$2.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$2.dot( this.direction );\n\t\tconst d2 = _vector$2.dot( _vector$2 ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector$2 ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1$1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1$1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1$1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1$1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1$1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1$1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nMatrix4.prototype.isMatrix4 = true;\n\nconst _v1$1 = /*@__PURE__*/ new Vector3();\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nconst _matrix = /*@__PURE__*/ new Matrix4();\nconst _quaternion$1 = /*@__PURE__*/ new Quaternion();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order, update ) {\n\n\t\tconst clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t}\n\n\tsetFromVector3( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$1.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$1, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\ttoVector3( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nEuler.prototype.isEuler = true;\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nclass Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n}\n\nlet _object3DId = 0;\n\nconst _v1$2 = new Vector3();\nconst _q1 = new Quaternion();\nconst _m1$1 = new Matrix4();\nconst _target = new Vector3();\n\nconst _position = new Vector3();\nconst _scale = new Vector3();\nconst _quaternion$2 = new Quaternion();\n\nconst _xAxis = new Vector3( 1, 0, 0 );\nconst _yAxis = new Vector3( 0, 1, 0 );\nconst _zAxis = new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tconst position = new Vector3();\n\tconst rotation = new Euler();\n\tconst quaternion = new Quaternion();\n\tconst scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.animations = [];\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$2.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$2.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1$1.copy( this.matrixWorld ).invert() );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclear: function () {\n\n\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\tconst object = this.children[ i ];\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\tthis.children.length = 0;\n\n\t\treturn this;\n\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tthis.add( object );\n\n\t\tobject.updateWorldMatrix( false, true );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion$2, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {},\n\t\t\t\tskeletons: {},\n\t\t\t\tanimations: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tobject.bindMode = this.bindMode;\n\t\t\tobject.bindMatrix = this.bindMatrix.toArray();\n\n\t\t\tif ( this.skeleton !== undefined ) {\n\n\t\t\t\tserialize( meta.skeletons, this.skeleton );\n\n\t\t\t\tobject.skeleton = this.skeleton.uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.animations.length > 0 ) {\n\n\t\t\tobject.animations = [];\n\n\t\t\tfor ( let i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\t\tconst animation = this.animations[ i ];\n\n\t\t\t\tobject.animations.push( serialize( meta.animations, animation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\t\t\tconst skeletons = extractFromCache( meta.skeletons );\n\t\t\tconst animations = extractFromCache( meta.animations );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\t\t\tif ( skeletons.length > 0 ) output.skeletons = skeletons;\n\t\t\tif ( animations.length > 0 ) output.animations = animations;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive = true ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal = new Vector3( 1, 0, 0 ), constant = 0 ) {\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = normal;\n\t\tthis.constant = constant;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nPlane.prototype.isPlane = true;\n\nconst _v0$1 = /*@__PURE__*/ new Vector3();\nconst _v1$3 = /*@__PURE__*/ new Vector3();\nconst _v2$1 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nclass Triangle {\n\n\tconstructor( a = new Vector3(), b = new Vector3(), c = new Vector3() ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$1.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$1 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$1 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nlet materialId = 0;\n\nfunction Material$1() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.vertexColors = false;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial$1.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material$1,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\n\n\tcustomProgramCacheKey: function () {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Material: \\'' + key + '\\' parameter is undefined.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': \\'' + key + '\\' is not a property of this material.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\n\t\tif ( this.lightMap && this.lightMap.isTexture ) {\n\n\t\t\tdata.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\t\tdata.lightMapIntensity = this.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material$1.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopyGammaToLinear( color, gammaFactor = 2.0 ) {\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToGamma( color, gammaFactor = 2.0 ) {\n\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t}\n\n\tconvertGammaToLinear( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToGamma( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex() {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t}\n\n\tgetHexString() {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle() {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\tif ( attribute.normalized === true ) {\n\n\t\t\t// assuming Uint8Array\n\n\t\t\tthis.r /= 255;\n\t\t\tthis.g /= 255;\n\t\t\tthis.b /= 255;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\n\nColor.prototype.isColor = true;\nColor.prototype.r = 1;\nColor.prototype.g = 1;\nColor.prototype.b = 1;\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nclass MeshBasicMaterial extends Material$1 {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'MeshBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // emissive\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\treturn this;\n\n\t}\n\n}\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nconst _vector$3 = new Vector3();\nconst _vector2$1 = new Vector2();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tlet color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$3.fromBufferAttribute( this, i );\n\t\t\t\t_vector$3.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\nfunction Float16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nFloat16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat16BufferAttribute.prototype.constructor = Float16BufferAttribute;\nFloat16BufferAttribute.prototype.isFloat16BufferAttribute = true;\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tlet max = array[ 0 ];\n\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nlet _id = 0;\n\nconst _m1$2 = new Matrix4();\nconst _obj = new Object3D();\nconst _offset = new Vector3();\nconst _box$2 = new Box3();\nconst _boxMorphTargets = new Box3();\nconst _vector$4 = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _id ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\thasAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ] !== undefined;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex = 0 ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$2.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$2.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$2.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$2.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$2.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.min, _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.max, _box$2.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$2.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$2.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$4.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$4.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$4.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\tconst index = this.index;\n\t\tconst attributes = this.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst indices = index.array;\n\t\tconst positions = attributes.position.array;\n\t\tconst normals = attributes.normal.array;\n\t\tconst uvs = attributes.uv.array;\n\n\t\tconst nVertices = positions.length / 3;\n\n\t\tif ( attributes.tangent === undefined ) {\n\n\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tconst tangents = attributes.tangent.array;\n\n\t\tconst tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new Vector3();\n\t\t\ttan2[ i ] = new Vector3();\n\n\t\t}\n\n\t\tconst vA = new Vector3(),\n\t\t\tvB = new Vector3(),\n\t\t\tvC = new Vector3(),\n\n\t\t\tuvA = new Vector2(),\n\t\t\tuvB = new Vector2(),\n\t\t\tuvC = new Vector2(),\n\n\t\t\tsdir = new Vector3(),\n\t\t\ttdir = new Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvB.sub( vA );\n\t\t\tvC.sub( vA );\n\n\t\t\tuvB.sub( uvA );\n\t\t\tuvC.sub( uvA );\n\n\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\n\n\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\n\n\t\t\tif ( ! isFinite( r ) ) return;\n\n\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\n\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tlet groups = this.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\n\t\tconst n = new Vector3(), n2 = new Vector3();\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tconst t = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\tconst test = tmp2.dot( tan2[ v ] );\n\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tconst attribute1 = attributes[ key ];\n\t\t\tconst attributeArray1 = attribute1.array;\n\n\t\t\tconst attribute2 = geometry.attributes[ key ];\n\t\t\tconst attributeArray2 = attribute2.array;\n\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$4.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$4.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$4.x, _vector$4.y, _vector$4.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _tempA = new Vector3();\nconst _tempB = new Vector3();\nconst _tempC = new Vector3();\n\nconst _morphA = new Vector3();\nconst _morphB = new Vector3();\nconst _morphC = new Vector3();\n\nconst _uvA = new Vector2();\nconst _uvB = new Vector2();\nconst _uvC = new Vector2();\n\nconst _intersectionPoint = new Vector3();\nconst _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry = new BufferGeometry(), material = new MeshBasicMaterial() ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry;\n\tthis.material = material;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tconst uv = geometry.attributes.uv;\n\t\t\tconst uv2 = geometry.attributes.uv2;\n\t\t\tconst groups = geometry.groups;\n\t\t\tconst drawRange = geometry.drawRange;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = i;\n\t\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tconst morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tconst influence = morphInfluences[ i ];\n\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tif ( object.isSkinnedMesh && material.skinning ) {\n\n\t\tobject.boneTransform( a, _vA );\n\t\tobject.boneTransform( b, _vB );\n\t\tobject.boneTransform( c, _vC );\n\n\t}\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: a,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nclass BoxGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture || property.isQuaternion ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\n/**\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial$1.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tthis.glslVersion = null;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material$1.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial$1.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = Object.assign( {}, source.extensions );\n\n\tthis.glslVersion = source.glslVersion;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tconst data = Material$1.prototype.toJSON.call( this, meta );\n\n\tdata.glslVersion = this.glslVersion;\n\tdata.uniforms = {};\n\n\tfor ( const name in this.uniforms ) {\n\n\t\tconst uniform = this.uniforms[ name ];\n\t\tconst value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tconst extensions = {};\n\n\tfor ( const key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nfunction PerspectiveCamera( fov = 50, aspect = 1, near = 0.1, far = 2000 ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov;\n\tthis.zoom = 1;\n\n\tthis.near = near;\n\tthis.far = far;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nconst fov = 90, aspect = 1;\n\nclass CubeCamera extends Object3D {\n\n\tconstructor( near, far, renderTarget ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CubeCamera';\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\n\n\t\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPX.layers = this.layers;\n\t\tcameraPX.up.set( 0, - 1, 0 );\n\t\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\t\tthis.add( cameraPX );\n\n\t\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNX.layers = this.layers;\n\t\tcameraNX.up.set( 0, - 1, 0 );\n\t\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\t\tthis.add( cameraNX );\n\n\t\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPY.layers = this.layers;\n\t\tcameraPY.up.set( 0, 0, 1 );\n\t\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\t\tthis.add( cameraPY );\n\n\t\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNY.layers = this.layers;\n\t\tcameraNY.up.set( 0, 0, - 1 );\n\t\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\t\tthis.add( cameraNY );\n\n\t\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPZ.layers = this.layers;\n\t\tcameraPZ.up.set( 0, - 1, 0 );\n\t\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\t\tthis.add( cameraPZ );\n\n\t\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNZ.layers = this.layers;\n\t\tcameraNZ.up.set( 0, - 1, 0 );\n\t\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\t\tthis.add( cameraNZ );\n\n\t}\n\n\tupdate( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst renderTarget = this.renderTarget;\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = this.children;\n\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t}\n\n}\n\nclass CubeTexture extends Texture$1 {\n\n\tconstructor( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\t\timages = images !== undefined ? images : [];\n\t\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\t\tformat = format !== undefined ? format : RGBFormat;\n\n\t\tsuper( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\t// Why CubeTexture._needsFlipEnvMap is necessary:\n\t\t//\n\t\t// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n\t\t// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n\t\t// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n\n\t\t// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n\t\t// and the flag _needsFlipEnvMap controls this conversion. The flip is not required (and thus _needsFlipEnvMap is set to false)\n\t\t// when using WebGLCubeRenderTarget.texture as a cube texture.\n\n\t\tthis._needsFlipEnvMap = true;\n\n\t\tthis.flipY = false;\n\n\t}\n\n\tget images() {\n\n\t\treturn this.image;\n\n\t}\n\n\tset images( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n}\n\nCubeTexture.prototype.isCubeTexture = true;\n\nclass WebGLCubeRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( size, options, dummy ) {\n\n\t\tif ( Number.isInteger( options ) ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\n\n\t\t\toptions = dummy;\n\n\t\t}\n\n\t\tsuper( size, size, options );\n\n\t\toptions = options || {};\n\n\t\tthis.texture = new CubeTexture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t\tthis.texture._needsFlipEnvMap = false;\n\n\t}\n\n\tfromEquirectangularTexture( renderer, texture ) {\n\n\t\tthis.texture.type = texture.type;\n\t\tthis.texture.format = RGBAFormat; // see #18859\n\t\tthis.texture.encoding = texture.encoding;\n\n\t\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\t\tthis.texture.minFilter = texture.minFilter;\n\t\tthis.texture.magFilter = texture.magFilter;\n\n\t\tconst shader = {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`\n\t\t};\n\n\t\tconst geometry = new BoxGeometry( 5, 5, 5 );\n\n\t\tconst material = new ShaderMaterial( {\n\n\t\t\tname: 'CubemapFromEquirect',\n\n\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tblending: NoBlending\n\n\t\t} );\n\n\t\tmaterial.uniforms.tEquirect.value = texture;\n\n\t\tconst mesh = new Mesh( geometry, material );\n\n\t\tconst currentMinFilter = texture.minFilter;\n\n\t\t// Avoid blurred poles\n\t\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\t\tconst camera = new CubeCamera( 1, 10, this );\n\t\tcamera.update( renderer, mesh );\n\n\t\ttexture.minFilter = currentMinFilter;\n\n\t\tmesh.geometry.dispose();\n\t\tmesh.material.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tclear( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( this, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n}\n\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\n\nclass DataTexture extends Texture$1 {\n\n\tconstructor( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nDataTexture.prototype.isDataTexture = true;\n\nconst _sphere$1 = /*@__PURE__*/ new Sphere();\nconst _vector$5 = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane() ) {\n\n\t\tthis.planes = [ p0, p1, p2, p3, p4, p5 ];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere$1.center.set( 0, 0, 0 );\n\t\t_sphere$1.radius = 0.7071067811865476;\n\t\t_sphere$1.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$5 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type = 5126;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = 5126;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\tif ( attribute.isFloat16BufferAttribute ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\ttype = 5131;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttype = 5123;\n\n\t\t\t}\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = 5122;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = 5125;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = 5124;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = 5120;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = 5121;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tconst cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\nclass PlaneGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, widthSegments = 1, heightSegments = 1 ) {\n\n\t\tsuper();\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments );\n\t\tconst gridY = Math.floor( heightSegments );\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t//\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor.xyz *= color.xyz;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_maxMipLevel 8.0\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_maxTileSize 256.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\\n\\t\\tvec2 f = fract( uv );\\n\\t\\tuv += 0.5 - f;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tif ( mipInt < cubeUV_maxMipLevel ) {\\n\\t\\t\\tuv.y += 2.0 * cubeUV_maxTileSize;\\n\\t\\t}\\n\\t\\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n\\t\\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\\n\\t\\tuv *= texelSize;\\n\\t\\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x += texelSize;\\n\\t\\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.y += texelSize;\\n\\t\\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x -= texelSize;\\n\\t\\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tvec3 tm = mix( tl, tr, f.x );\\n\\t\\tvec3 bm = mix( bl, br, f.x );\\n\\t\\treturn mix( tm, bm, f.y );\\n\\t}\\n\\t#define r0 1.0\\n\\t#define v0 0.339\\n\\t#define m0 - 2.0\\n\\t#define r1 0.8\\n\\t#define v1 0.276\\n\\t#define m1 - 1.0\\n\\t#define r4 0.4\\n\\t#define v4 0.046\\n\\t#define m4 2.0\\n\\t#define r5 0.305\\n\\t#define v5 0.016\\n\\t#define m5 3.0\\n\\t#define r6 0.21\\n\\t#define v6 0.0038\\n\\t#define m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= r1 ) {\\n\\t\\t\\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\\n\\t\\t} else if ( roughness >= r4 ) {\\n\\t\\t\\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\\n\\t\\t} else if ( roughness >= r5 ) {\\n\\t\\t\\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\\n\\t\\t} else if ( roughness >= r6 ) {\\n\\t\\t\\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value ) {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * faceDirection;\\n\\t\\t\\tbitangent = bitangent * faceDirection;\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\\n\\t\\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\\n\\t#endif\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar transmissionmap_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\\n#endif\";\n\nvar transmissionmap_pars_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\tuniform sampler2D transmissionMap;\\n#endif\";\n\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\n\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nvar background_frag = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar background_vert = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nvar cube_frag = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar cube_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar equirect_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshmatcap_frag = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshmatcap_vert = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nvar meshtoon_frag = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshtoon_vert = \"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSMISSION\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSMISSION\\n\\tuniform float transmission;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <transmissionmap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#ifdef TRANSMISSION\\n\\t\\tfloat totalTransmission = transmission;\\n\\t#endif\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <transmissionmap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSMISSION\\n\\t\\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshphysical_vert = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\";\n\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nvar shadow_vert = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar sprite_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nvar sprite_vert = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmissionmap_fragment: transmissionmap_fragment,\n\ttransmissionmap_pars_fragment: transmissionmap_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\nfunction WebGLBackground( renderer, cubemaps, state, objects, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = 0;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tbackground = cubemaps.get( background );\n\n\t\t}\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tif ( background.isWebGLCubeRenderTarget ) {\n\n\t\t\t\t// TODO Deprecate\n\n\t\t\t\tbackground = background.texture;\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background._needsFlipEnvMap ) ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha = 1 ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( geometry, index );\n\n\t\t\tif ( updateBuffers ) saveCache( geometry, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh === true ) {\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, 34963 );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( geometry, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tfor ( const key in geometryAttributes ) {\n\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\n\n\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\tattributesNum ++;\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( geometry, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst data = {};\n\t\t\tdata.attribute = attribute;\n\n\t\t\tif ( attribute.data ) {\n\n\t\t\t\tdata.data = attribute.data;\n\n\t\t\t}\n\n\t\t\tcache[ key ] = data;\n\n\t\t\tattributesNum ++;\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( name === 'instanceColor' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceColor );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute, 1 );\n\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute, 3, type, false, 12, 0 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatilibity\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( 34930 );\n\tconst maxVertexTextures = gl.getParameter( 35660 );\n\tconst maxTextureSize = gl.getParameter( 3379 );\n\tconst maxCubemapSize = gl.getParameter( 34076 );\n\n\tconst maxAttributes = gl.getParameter( 34921 );\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\n\tconst maxVaryings = gl.getParameter( 36348 );\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || extensions.has( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemap = cubemaps.get( texture );\n\n\t\tif ( cubemap !== undefined ) {\n\n\t\t\tcubemaps.delete( texture );\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\tfunction getExtension( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tlet extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t}\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\treturn getExtension( name ) !== null;\n\n\t\t},\n\n\t\tinit: function ( capabilities ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgetExtension( 'EXT_color_buffer_float' );\n\n\t\t\t} else {\n\n\t\t\t\tgetExtension( 'WEBGL_depth_texture' );\n\t\t\t\tgetExtension( 'OES_texture_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float_linear' );\n\t\t\t\tgetExtension( 'OES_standard_derivatives' );\n\t\t\t\tgetExtension( 'OES_element_index_uint' );\n\t\t\t\tgetExtension( 'OES_vertex_array_object' );\n\t\t\t\tgetExtension( 'ANGLE_instanced_arrays' );\n\n\t\t\t}\n\n\t\t\tgetExtension( 'OES_texture_float_linear' );\n\t\t\tgetExtension( 'EXT_color_buffer_half_float' );\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tconst extension = getExtension( name );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = {};\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\tattributes.remove( geometry.index );\n\n\t\t}\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tattributes.remove( geometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\tconst attribute = wireframeAttributes.get( geometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( geometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tif ( geometries[ geometry.id ] === true ) return geometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries[ geometry.id ] = true;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 4:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tlet influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tworkInfluences.sort( numericalSort );\n\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\tlet morphInfluencesSum = 0;\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst influence = workInfluences[ i ];\n\t\t\tconst index = influence[ 0 ];\n\t\t\tconst value = influence[ 1 ];\n\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t} else {\n\n\t\t\t\tif ( morphTargets && geometry.hasAttribute( 'morphTarget' + i ) === true ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.hasAttribute( 'morphNormal' + i ) === true ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\nclass DataTexture2DArray extends Texture$1 {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( null );\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nclass DataTexture3D extends Texture$1 {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\t// We're going to add .setXXX() methods for setting properties later.\n\t\t// Users can still set in DataTexture3D directly.\n\t\t//\n\t\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t\t// \ttexture.anisotropy = 16;\n\t\t//\n\t\t// See #14839\n\n\t\tsuper( null );\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nDataTexture3D.prototype.isDataTexture3D = true;\n\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nconst emptyTexture = new Texture$1();\nconst emptyTexture2dArray = new DataTexture2DArray();\nconst emptyTexture3d = new DataTexture3D();\nconst emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// uint\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tconst cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tconst seq = this.seq;\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tconst n = gl.getProgramParameter( program, 35718 );\n\n\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tconst u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tconst v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tconst r = [];\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nlet programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tconst lines = string.split( '\\n' );\n\n\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, 35713 );\n\tconst log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tconst source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, 35721 );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string\n\t\t.replace( unrollLoopPattern, loopReplacer )\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\n\n}\n\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\n\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\n\treturn loopReplacer( match, start, end, snippet );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = 'precision ' + parameters.precision + ' float;\\nprecision ' + parameters.precision + ' int;';\n\n\tif ( parameters.precision === 'highp' ) {\n\n\t\tprecisionstring += '\\n#define HIGH_PRECISION';\n\n\t} else if ( parameters.precision === 'mediump' ) {\n\n\t\tprecisionstring += '\\n#define MEDIUM_PRECISION';\n\n\t} else if ( parameters.precision === 'lowp' ) {\n\n\t\tprecisionstring += '\\n#define LOW_PRECISION';\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter( program, 35715 ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nfunction WebGLPrograms( renderer, cubemaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\n\tconst vertexTextures = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tconst parameterNames = [\n\t\t'precision', 'isWebGL2', 'supportsVertexTextures', 'outputEncoding', 'instancing', 'instancingColor',\n\t\t'map', 'mapEncoding', 'matcap', 'matcapEncoding', 'envMap', 'envMapMode', 'envMapEncoding', 'envMapCubeUV',\n\t\t'lightMap', 'lightMapEncoding', 'aoMap', 'emissiveMap', 'emissiveMapEncoding', 'bumpMap', 'normalMap', 'objectSpaceNormalMap', 'tangentSpaceNormalMap', 'clearcoatMap', 'clearcoatRoughnessMap', 'clearcoatNormalMap', 'displacementMap', 'specularMap',\n\t\t'roughnessMap', 'metalnessMap', 'gradientMap',\n\t\t'alphaMap', 'combine', 'vertexColors', 'vertexTangents', 'vertexUvs', 'uvsVertexOnly', 'fog', 'useFog', 'fogExp2',\n\t\t'flatShading', 'sizeAttenuation', 'logarithmicDepthBuffer', 'skinning',\n\t\t'maxBones', 'useVertexTexture', 'morphTargets', 'morphNormals',\n\t\t'maxMorphTargets', 'maxMorphNormals', 'premultipliedAlpha',\n\t\t'numDirLights', 'numPointLights', 'numSpotLights', 'numHemiLights', 'numRectAreaLights',\n\t\t'numDirLightShadows', 'numPointLightShadows', 'numSpotLightShadows',\n\t\t'shadowMapEnabled', 'shadowMapType', 'toneMapping', 'physicallyCorrectLights',\n\t\t'alphaTest', 'doubleSided', 'flipSided', 'numClippingPlanes', 'numClipIntersection', 'depthPacking', 'dithering',\n\t\t'sheen', 'transmissionMap'\n\t];\n\n\tfunction getMaxBones( object ) {\n\n\t\tconst skeleton = object.skeleton;\n\t\tconst bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tlet encoding;\n\n\t\tif ( map && map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map && map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLPrograms.getTextureEncodingFromMap: don\\'t use render targets as textures. Use their .texture property instead.' );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t} else {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tconst maxBones = object.isSkinnedMesh ? getMaxBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet vertexShader, fragmentShader;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatMap: !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\ttransmissionMap: !! material.transmissionMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap || !! material.transmissionMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.transmissionMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: !! material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.fragmentShader );\n\t\t\tarray.push( parameters.vertexShader );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( renderer.outputEncoding );\n\t\t\tarray.push( renderer.gammaFactor );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs\n\t};\n\n}\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList( properties ) {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transparent = [];\n\n\tconst defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: materialProperties.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = materialProperties.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.program = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists( properties ) {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, renderCallDepth ) {\n\n\t\tlet list;\n\n\t\tif ( lists.has( scene ) === false ) {\n\n\t\t\tlist = new WebGLRenderList( properties );\n\t\t\tlists.set( scene, [ list ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= lists.get( scene ).length ) {\n\n\t\t\t\tlist = new WebGLRenderList( properties );\n\t\t\t\tlists.get( scene ).push( list );\n\n\t\t\t} else {\n\n\t\t\t\tlist = lists.get( scene )[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights( extensions, capabilities ) {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t// WebGL 2\n\n\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t} else {\n\n\t\t\t\t// WebGL 1\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else if ( extensions.has( 'OES_texture_half_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\tfunction setupView( lights, camera ) {\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = state.directional[ directionalLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = state.spot[ spotLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = state.rectArea[ rectAreaLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = state.point[ pointLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = state.hemi[ hemiLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tsetupView: setupView,\n\t\tstate: state\n\t};\n\n}\n\nfunction WebGLRenderState( extensions, capabilities ) {\n\n\tconst lights = new WebGLLights( extensions, capabilities );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights() {\n\n\t\tlights.setup( lightsArray );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions, capabilities ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tlet renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\trenderStates.set( scene, [ renderState ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStates.get( scene ).length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\t\trenderStates.get( scene ).push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene )[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nclass MeshDepthMaterial extends Material$1 {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'MeshDepthMaterial';\n\n\t\tthis.depthPacking = BasicDepthPacking;\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.depthPacking = source.depthPacking;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\treturn this;\n\n\t}\n\n}\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\n/**\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nclass MeshDistanceMaterial extends Material$1 {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'MeshDistanceMaterial';\n\n\t\tthis.referencePosition = new Vector3();\n\t\tthis.nearDistance = 1;\n\t\tthis.farDistance = 1000;\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.fog = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.referencePosition.copy( source.referencePosition );\n\t\tthis.nearDistance = source.nearDistance;\n\t\tthis.farDistance = source.farDistance;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\treturn this;\n\n\t}\n\n}\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\\n\\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean * HALF_SAMPLE_RATE;\\n\\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tconst shadowMaterialHorizontal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t'position',\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizontal pass\n\n\t\tshadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\n\t\tlet customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tlet useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t}\n\n\t\t\tlet useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( 2929 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( 2929 );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( 2960 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( 2960 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = false;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( 35661 );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( 7938 );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL ES (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst currentScissor = new Vector4();\n\tconst currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, 10241, 9728 );\n\t\tgl.texParameteri( type, 10240, 9728 );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( 2929 );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( 2884 );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: 32774,\n\t\t[ SubtractEquation ]: 32778,\n\t\t[ ReverseSubtractEquation ]: 32779\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = 32775;\n\t\tequationToGL[ MaxEquation ] = 32776;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: 0,\n\t\t[ OneFactor ]: 1,\n\t\t[ SrcColorFactor ]: 768,\n\t\t[ SrcAlphaFactor ]: 770,\n\t\t[ SrcAlphaSaturateFactor ]: 776,\n\t\t[ DstColorFactor ]: 774,\n\t\t[ DstAlphaFactor ]: 772,\n\t\t[ OneMinusSrcColorFactor ]: 769,\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\n\t\t[ OneMinusDstColorFactor ]: 775,\n\t\t[ OneMinusDstAlphaFactor ]: 773\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled === true ) {\n\n\t\t\t\tdisable( 3042 );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( currentBlendingEnabled === false ) {\n\n\t\t\tenable( 3042 );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( 32774 );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 0, 769, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 769 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( 2884 )\n\t\t\t: enable( 2884 );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( 2304 );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( 2305 );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( 2884 );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( 1029 );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( 1028 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( 1032 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 2884 );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( 32823 );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 32823 );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( 3089 );\n\n\t\t} else {\n\n\t\t\tdisable( 3089 );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\t// reset state\n\n\t\tgl.disable( 3042 );\n\t\tgl.disable( 2884 );\n\t\tgl.disable( 2929 );\n\t\tgl.disable( 32823 );\n\t\tgl.disable( 3089 );\n\t\tgl.disable( 2960 );\n\n\t\tgl.blendEquation( 32774 );\n\t\tgl.blendFunc( 1, 0 );\n\t\tgl.blendFuncSeparate( 1, 0, 1, 0 );\n\n\t\tgl.colorMask( true, true, true, true );\n\t\tgl.clearColor( 0, 0, 0, 0 );\n\n\t\tgl.depthMask( true );\n\t\tgl.depthFunc( 513 );\n\t\tgl.clearDepth( 1 );\n\n\t\tgl.stencilMask( 0xffffffff );\n\t\tgl.stencilFunc( 519, 0, 0xffffffff );\n\t\tgl.stencilOp( 7680, 7680, 7680 );\n\t\tgl.clearStencil( 0 );\n\n\t\tgl.cullFace( 1029 );\n\t\tgl.frontFace( 2305 );\n\n\t\tgl.polygonOffset( 0, 0 );\n\n\t\tgl.activeTexture( 33984 );\n\n\t\tgl.useProgram( null );\n\n\t\tgl.lineWidth( 1 );\n\n\t\tgl.scissor( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tgl.viewport( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\t// reset internals\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlendingEnabled = false;\n\t\tcurrentBlending = null;\n\t\tcurrentBlendEquation = null;\n\t\tcurrentBlendSrc = null;\n\t\tcurrentBlendDst = null;\n\t\tcurrentBlendEquationAlpha = null;\n\t\tcurrentBlendSrcAlpha = null;\n\t\tcurrentBlendDstAlpha = null;\n\t\tcurrentPremultipledAlpha = false;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcurrentLineWidth = null;\n\n\t\tcurrentPolygonOffsetFactor = null;\n\t\tcurrentPolygonOffsetUnits = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( '2d' ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\ttextureProperties.__maxMipLevel = Math.log2( Math.max( width, height ) );\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === 6403 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\n\n\t\t}\n\n\t\tif ( glFormat === 6407 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34837;\n\t\t\tif ( glType === 5131 ) internalFormat = 34843;\n\t\t\tif ( glType === 5121 ) internalFormat = 32849;\n\n\t\t}\n\n\t\tif ( glFormat === 6408 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\n\t\t\tif ( glType === 5121 ) internalFormat = 32856;\n\n\t\t}\n\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn 9728;\n\n\t\t}\n\n\t\treturn 9729;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: 10497,\n\t\t[ ClampToEdgeWrapping ]: 33071,\n\t\t[ MirroredRepeatWrapping ]: 33648\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: 9728,\n\t\t[ NearestMipmapNearestFilter ]: 9984,\n\t\t[ NearestMipmapLinearFilter ]: 9986,\n\n\t\t[ LinearFilter ]: 9729,\n\t\t[ LinearMipmapNearestFilter ]: 9985,\n\t\t[ LinearMipmapLinearFilter ]: 9987\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( texture.type === FloatType && extensions.has( 'OES_texture_float_linear' ) === false ) return; // verify extension for WebGL 1 and WebGL 2\n\t\t\tif ( isWebGL2 === false && ( texture.type === HalfFloatType && extensions.has( 'OES_texture_half_float_linear' ) === false ) ) return; // verify extension for WebGL 1 only\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = 3553;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = 35866;\n\t\tif ( texture.isDataTexture3D ) textureType = 32879;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\t\t_gl.pixelStorei( 37443, 0 );\n\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format );\n\n\t\tlet glType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tlet mipmap;\n\t\tconst mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = 6402;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\tglInternalFormat = 35056;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// validation checks for WebGL 1\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tglInternalFormat = 34041;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\t\t_gl.pixelStorei( 37443, 0 );\n\n\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\n\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\tconst cubeImage = [];\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t} else {\n\n\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst image = cubeImage[ 0 ],\n\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\tlet mipmaps;\n\n\t\tif ( isCompressed ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else {\n\n\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t// We assume images for cube map have the same size.\n\t\t\tgenerateMipmap( 34067, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst glFormat = utils.convert( texture.format );\n\t\tconst glType = utils.convert( texture.type );\n\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tif ( textureTarget === 32879 || textureTarget === 35866 ) {\n\n\t\t\tstate.texImage3D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, renderTarget.depth, 0, glFormat, glType, null );\n\n\t\t} else {\n\n\t\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = 33189;\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst texture = renderTarget.texture;\n\n\t\t\tconst glFormat = utils.convert( texture.format );\n\t\t\tconst glType = utils.convert( texture.type );\n\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tconst isRenderTarget3D = texture.isDataTexture3D || texture.isDataTexture2DArray;\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\n\n\t\tif ( isWebGL2 && texture.format === RGBFormat && ( texture.type === FloatType || texture.type === HalfFloatType ) ) {\n\n\t\t\ttexture.format = RGBAFormat;\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\n\n\t\t}\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tconst glFormat = utils.convert( texture.format );\n\t\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, 36064, 34069 + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 34067, texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 34067, null );\n\n\t\t} else {\n\n\t\t\tlet glTextureType = 3553;\n\n\t\t\tif ( isRenderTarget3D ) {\n\n\t\t\t\t// Render targets containing layers, i.e: Texture 3D and 2d arrays\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tconst isTexture3D = texture.isDataTexture3D;\n\t\t\t\t\tglTextureType = isTexture3D ? 32879 : 35866;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( glTextureType, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( glTextureType, texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, 36064, glTextureType );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 3553, texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 3553, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tconst width = renderTarget.width;\n\t\t\t\tconst height = renderTarget.height;\n\t\t\t\tlet mask = 16384;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tlet warnedTexture2D = false;\n\tlet warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLTextures.safeSetTexture2D: don\\'t use render targets as textures. Use their .texture property instead.' );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLTextures.safeSetTextureCube: don\\'t use cube render targets as textures. Use their .texture property instead.' );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\n\t\tsetTextureCube( texture, slot );\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return 5121;\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\n\t\tif ( p === UnsignedShort565Type ) return 33635;\n\n\t\tif ( p === ByteType ) return 5120;\n\t\tif ( p === ShortType ) return 5122;\n\t\tif ( p === UnsignedShortType ) return 5123;\n\t\tif ( p === IntType ) return 5124;\n\t\tif ( p === UnsignedIntType ) return 5125;\n\t\tif ( p === FloatType ) return 5126;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return 5131;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return 6406;\n\t\tif ( p === RGBFormat ) return 6407;\n\t\tif ( p === RGBAFormat ) return 6408;\n\t\tif ( p === LuminanceFormat ) return 6409;\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\n\t\tif ( p === DepthFormat ) return 6402;\n\t\tif ( p === DepthStencilFormat ) return 34041;\n\t\tif ( p === RedFormat ) return 6403;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return 36244;\n\t\tif ( p === RGFormat ) return 33319;\n\t\tif ( p === RGIntegerFormat ) return 33320;\n\t\tif ( p === RGBIntegerFormat ) return 36248;\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return 34042;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nfunction ArrayCamera( array = [] ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array;\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\nclass Group extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'Group';\n\n\t}\n\n}\n\nGroup.prototype.isGroup = true;\n\nfunction WebXRController() {\n\n\tthis._targetRay = null;\n\tthis._grip = null;\n\tthis._hand = null;\n\n}\n\nObject.assign( WebXRController.prototype, {\n\n\tconstructor: WebXRController,\n\n\tgetHandSpace: function () {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = {};\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t},\n\n\tgetTargetRaySpace: function () {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t},\n\n\tgetGripSpace: function () {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function ( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdate: function ( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource && frame.session.visibilityState !== 'visible-blurred' ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\tconst jointPose = frame.getJointPose( inputjoint, referenceSpace );\n\n\t\t\t\t\tif ( hand.joints[ inputjoint.jointName ] === undefined ) {\n\n\t\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\t\tconst joint = new Group();\n\t\t\t\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\t\t\t\tjoint.visible = false;\n\t\t\t\t\t\thand.joints[ inputjoint.jointName ] = joint;\n\t\t\t\t\t\t// ??\n\t\t\t\t\t\thand.add( joint );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst joint = hand.joints[ inputjoint.jointName ];\n\n\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t}\n\n\t\t\t\t// Custom events\n\n\t\t\t\t// Check pinchz\n\t\t\t\tconst indexTip = hand.joints[ 'index-finger-tip' ];\n\t\t\t\tconst thumbTip = hand.joints[ 'thumb-tip' ];\n\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchend',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchstart',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction WebXRManager( renderer, gl ) {\n\n\tconst scope = this;\n\n\tlet session = null;\n\n\tlet framebufferScaleFactor = 1.0;\n\n\tlet referenceSpace = null;\n\tlet referenceSpaceType = 'local-floor';\n\n\tlet pose = null;\n\n\tconst controllers = [];\n\tconst inputSourcesMap = new Map();\n\n\t//\n\n\tconst cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tconst cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tconst cameras = [ cameraL, cameraR ];\n\n\tconst cameraVR = new ArrayCamera();\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\tlet _currentDepthNear = null;\n\tlet _currentDepthFar = null;\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.isPresenting = false;\n\n\tthis.getController = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getTargetRaySpace();\n\n\t};\n\n\tthis.getControllerGrip = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getGripSpace();\n\n\t};\n\n\tthis.getHand = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getHandSpace();\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\n\n\t\tif ( controller ) {\n\n\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\n\n\t\t\tcontroller.disconnect( inputSource );\n\n\t\t} );\n\n\t\tinputSourcesMap.clear();\n\n\t\t_currentDepthNear = null;\n\t\t_currentDepthFar = null;\n\n\t\t//\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.isPresenting = false;\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\tframebufferScaleFactor = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.getReferenceSpace = function () {\n\n\t\treturn referenceSpace;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = async function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\t\t\tsession.addEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\tconst attributes = gl.getContextAttributes();\n\n\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\tawait gl.makeXRCompatible();\n\n\t\t\t}\n\n\t\t\tconst layerInit = {\n\t\t\t\tantialias: attributes.antialias,\n\t\t\t\talpha: attributes.alpha,\n\t\t\t\tdepth: attributes.depth,\n\t\t\t\tstencil: attributes.stencil,\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\n\n\t\t\treferenceSpace = await session.requestReferenceSpace( referenceSpaceType );\n\n\t\t\tanimation.setContext( session );\n\t\t\tanimation.start();\n\n\t\t\tscope.isPresenting = true;\n\n\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t}\n\n\t};\n\n\tfunction onInputSourcesChange( event ) {\n\n\t\tconst inputSources = session.inputSources;\n\n\t\t// Assign inputSources to available controllers\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\n\n\t\t}\n\n\t\t// Notify disconnected\n\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\tconst inputSource = event.removed[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tinputSourcesMap.delete( inputSource );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Notify connected\n\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\tconst inputSource = event.added[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst cameraLPos = new Vector3();\n\tconst cameraRPos = new Vector3();\n\n\t/**\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t * the cameras' projection and world matrices have already been set.\n\t * And that near and far planes are identical for both cameras.\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t */\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t// VR systems will have identical far and near planes, and\n\t\t// most likely identical top and bottom frustum extents.\n\t\t// Use the left camera for these values.\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\tconst left = near * leftFov;\n\t\tconst right = near * rightFov;\n\n\t\t// Calculate the new camera's position offset from the\n\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t// TODO: Better way to apply this offset?\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.translateX( xOffset );\n\t\tcamera.translateZ( zOffset );\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t// Find the union of the frustum values of the cameras and scale\n\t\t// the values so that the near plane's position does not change in world space,\n\t\t// although must now be relative to the new union camera.\n\t\tconst near2 = near + zOffset;\n\t\tconst far2 = far + zOffset;\n\t\tconst left2 = left - xOffset;\n\t\tconst right2 = right + ( ipd - xOffset );\n\t\tconst top2 = topFov * far / far2 * near2;\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t}\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\tsession.updateRenderState( {\n\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\tdepthFar: cameraVR.far\n\t\t\t} );\n\n\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t}\n\n\t\tconst parent = camera.parent;\n\t\tconst cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\t\tcamera.matrix.copy( cameraVR.matrix );\n\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\n\t\tconst children = camera.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\t// update projection matrix for proper view frustum culling\n\n\t\tif ( cameras.length === 2 ) {\n\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t} else {\n\n\t\t\t// assume single camera setup (AR)\n\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tconst views = pose.views;\n\t\t\tconst baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tconst view = views[ i ];\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\n\n\t\t\t\tconst camera = cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst inputSources = session.inputSources;\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tconst controller = controllers[ i ];\n\t\t\tconst inputSource = inputSources[ i ];\n\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\nfunction WebGLMaterials( properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsLambert( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material );\n\n\t\t\t} else {\n\n\t\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDepth( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsNormal( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap._needsFlipEnvMap ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tconst maxMipLevel = properties.get( envMap ).__maxMipLevel;\n\n\t\t\tif ( maxMipLevel !== undefined ) {\n\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if ( material.clearcoatMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if ( material.clearcoatNormalMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transmission.value = material.transmission;\n\n\t\tif ( material.transmissionMap ) {\n\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nfunction createCanvasElement() {\n\n\tconst canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\tcanvas.style.display = 'block';\n\treturn canvas;\n\n}\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : createCanvasElement(),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// render() can be called from within a callback triggered by another render.\n\t// We track this so that the nested render call gets its list and state isolated from the parent render call.\n\n\tconst renderListStack = [];\n\tconst renderStateStack = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _framebuffer = null;\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentFramebuffer = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, cubemaps, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates, clipping;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\textensions.init( capabilities );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tclipping = new WebGLClipping( properties );\n\t\tprogramCache = new WebGLPrograms( _this, cubemaps, extensions, capabilities, bindingStates, clipping );\n\t\tmaterials = new WebGLMaterials( properties );\n\t\trenderLists = new WebGLRenderLists( properties );\n\t\trenderStates = new WebGLRenderStates( extensions, capabilities );\n\t\tbackground = new WebGLBackground( _this, cubemaps, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// shadow map\n\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getClearColor() now requires a Color as an argument' );\n\n\t\t\ttarget = new Color();\n\n\t\t}\n\n\t\treturn target.copy( background.getClearColor() );\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= 16384;\n\t\tif ( depth === undefined || depth ) bits |= 256;\n\t\tif ( stencil === undefined || stencil ) bits |= 1024;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tcubemaps.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tconst programInfo = properties.get( material ).program;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tbindingStates.initAttributes();\n\n\t\tconst buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.position );\n\t\t\t_gl.bufferData( 34962, object.positionArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.normal );\n\t\t\t_gl.bufferData( 34962, object.normalArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.uv );\n\t\t\t_gl.bufferData( 34962, object.uvArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.color );\n\t\t\t_gl.bufferData( 34962, object.colorArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tbindingStates.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( 4, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tif ( material.morphTargets || material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 4 );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( 2 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 3 );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( 0 );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( 4 );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights();\n\n\t\tconst compiled = new WeakMap();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\n\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\n\t\t\t\t\t\t\tcompiled.set( material2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\n\n\t\t\t\t\tinitMaterial( material, scene, object );\n\t\t\t\t\tcompiled.set( material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tlet renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// reset caching for this frame\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, renderStateStack.length );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, renderListStack.length );\n\t\tcurrentRenderList.init();\n\n\t\trenderListStack.push( currentRenderList );\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights();\n\t\tcurrentRenderState.setupLightsView( camera );\n\n\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\t// _gl.finish();\n\n\t\trenderStateStack.pop();\n\n\t\tif ( renderStateStack.length > 0 ) {\n\n\t\t\tcurrentRenderState = renderStateStack[ renderStateStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderState = null;\n\n\t\t}\n\n\t\trenderListStack.pop();\n\n\t\tif ( renderListStack.length > 0 ) {\n\n\t\t\tcurrentRenderList = renderListStack[ renderListStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderList = null;\n\n\t\t}\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\tconst cameras = camera.cameras;\n\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\tcurrentRenderState.setupLightsView( camera2 );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tbindingStates.reset();\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet program = materialProperties.program;\n\t\tlet programChange = true;\n\n\t\t// always update environment and fog - changing these trigger an initMaterial call, but it's possible that the program doesn't change\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\t\tmaterialProperties.envMap = cubemaps.get( material.envMap || materialProperties.environment );\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t}\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = materialProperties.program.getUniforms();\n\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tconst bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === null ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height );\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( 36160, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tlet framebuffer = _framebuffer;\n\t\tlet isCube = false;\n\t\tlet isRenderTarget3D = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst texture = renderTarget.texture;\n\n\t\t\tif ( texture.isDataTexture3D || texture.isDataTexture2DArray ) {\n\n\t\t\t\tisRenderTarget3D = true;\n\n\t\t\t}\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t} else if ( isRenderTarget3D ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\tconst layer = activeCubeFace || 0;\n\t\t\t_gl.framebufferTextureLayer( 36160, 36064, textureProperties.__webglTexture, activeMipmapLevel || 0, layer );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tlet restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tconst halfFloatSupportedByExt = ( textureType === HalfFloatType ) && ( extensions.has( 'EXT_color_buffer_half_float' ) || ( capabilities.isWebGL2 && extensions.has( 'EXT_color_buffer_float' ) ) );\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.has( 'OES_texture_float' ) || extensions.has( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! halfFloatSupportedByExt ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level = 0 ) {\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\t\tconst glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( 3553, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture3D = function ( sourceBox, position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tif ( _this.isWebGL1Renderer ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst { width, height, data } = srcTexture.image;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\t\tlet glTarget;\n\n\t\tif ( dstTexture.isDataTexture3D ) {\n\n\t\t\ttextures.setTexture3D( dstTexture, 0 );\n\t\t\tglTarget = 32879;\n\n\t\t} else if ( dstTexture.isDataTexture2DArray ) {\n\n\t\t\ttextures.setTexture2DArray( dstTexture, 0 );\n\t\t\tglTarget = 35866;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tconst unpackRowLen = _gl.getParameter( 3314 );\n\t\tconst unpackImageHeight = _gl.getParameter( 32878 );\n\t\tconst unpackSkipPixels = _gl.getParameter( 3316 );\n\t\tconst unpackSkipRows = _gl.getParameter( 3315 );\n\t\tconst unpackSkipImages = _gl.getParameter( 32877 );\n\n\t\t_gl.pixelStorei( 3314, width );\n\t\t_gl.pixelStorei( 32878, height );\n\t\t_gl.pixelStorei( 3316, sourceBox.min.x );\n\t\t_gl.pixelStorei( 3315, sourceBox.min.y );\n\t\t_gl.pixelStorei( 32877, sourceBox.min.z );\n\n\t\t_gl.texSubImage3D(\n\t\t\tglTarget,\n\t\t\tlevel,\n\t\t\tposition.x,\n\t\t\tposition.y,\n\t\t\tposition.z,\n\t\t\tsourceBox.max.x - sourceBox.min.x + 1,\n\t\t\tsourceBox.max.y - sourceBox.min.y + 1,\n\t\t\tsourceBox.max.z - sourceBox.min.z + 1,\n\t\t\tglFormat,\n\t\t\tglType,\n\t\t\tdata\n\t\t);\n\n\t\t_gl.pixelStorei( 3314, unpackRowLen );\n\t\t_gl.pixelStorei( 32878, unpackImageHeight );\n\t\t_gl.pixelStorei( 3316, unpackSkipPixels );\n\t\t_gl.pixelStorei( 3315, unpackSkipRows );\n\t\t_gl.pixelStorei( 32877, unpackSkipImages );\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( glTarget );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.resetState = function () {\n\n\t\tstate.reset();\n\t\tbindingStates.reset();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nclass WebGL1Renderer extends WebGLRenderer {}\n\nWebGL1Renderer.prototype.isWebGL1Renderer = true;\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tthis.autoUpdate = true; // checked by the renderer\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nScene.prototype.isScene = true;\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n} );\n\nconst _vector$6 = new Vector3();\n\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\tthis.name = '';\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n\tthis.normalized = normalized === true;\n\n}\n\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\tcount: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.count;\n\n\t\t}\n\n\t},\n\n\tarray: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.array;\n\n\t\t}\n\n\t},\n\n\tneedsUpdate: {\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.data.needsUpdate = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( InterleavedBufferAttribute.prototype, {\n\n\tisInterleavedBufferAttribute: true,\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.x = this.getX( i );\n\t\t\t_vector$6.y = this.getY( i );\n\t\t\t_vector$6.z = this.getZ( i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interlaved attribtue\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n} );\n\nconst _v1$4 = /*@__PURE__*/ new Vector3();\nconst _v2$2 = /*@__PURE__*/ new Vector3();\n\nclass LOD extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis._currentLevel = 0;\n\n\t\tthis.type = 'LOD';\n\n\t\tObject.defineProperties( this, {\n\t\t\tlevels: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: []\n\t\t\t},\n\t\t\tisLOD: {\n\t\t\t\tvalue: true,\n\t\t\t}\n\t\t} );\n\n\t\tthis.autoUpdate = true;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\taddLevel( object, distance = 0 ) {\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t}\n\n\tgetCurrentLevel() {\n\n\t\treturn this._currentLevel;\n\n\t}\n\n\tgetObjectForDistance( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$4 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$4.distanceTo( _v2$2 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _basePosition = new Vector3();\n\nconst _skinIndex = new Vector4();\nconst _skinWeight = new Vector4();\n\nconst _vector$7 = new Vector3();\nconst _matrix$1 = new Matrix4();\n\nfunction SkinnedMesh( geometry, material ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = 'attached';\n\tthis.bindMatrix = new Matrix4();\n\tthis.bindMatrixInverse = new Matrix4();\n\n}\n\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: SkinnedMesh,\n\n\tisSkinnedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\treturn this;\n\n\t},\n\n\tbind: function ( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.copy( bindMatrix ).invert();\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.x = skinWeight.getX( i );\n\t\t\tvector.y = skinWeight.getY( i );\n\t\t\tvector.z = skinWeight.getZ( i );\n\t\t\tvector.w = skinWeight.getW( i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.matrixWorld ).invert();\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.bindMatrix ).invert();\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tboneTransform: function ( index, target ) {\n\n\t\tconst skeleton = this.skeleton;\n\t\tconst geometry = this.geometry;\n\n\t\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t_basePosition.fromBufferAttribute( geometry.attributes.position, index ).applyMatrix4( this.bindMatrix );\n\n\t\ttarget.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tconst weight = _skinWeight.getComponent( i );\n\n\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\tconst boneIndex = _skinIndex.getComponent( i );\n\n\t\t\t\t_matrix$1.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\ttarget.addScaledVector( _vector$7.copy( _basePosition ).applyMatrix4( _matrix$1 ), weight );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn target.applyMatrix4( this.bindMatrixInverse );\n\n\t}\n\n} );\n\nfunction Bone() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Bone';\n\n}\n\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Bone,\n\n\tisBone: true\n\n} );\n\nconst _offsetMatrix = /*@__PURE__*/ new Matrix4();\nconst _identityMatrix = /*@__PURE__*/ new Matrix4();\n\nclass Skeleton {\n\n\tconstructor( bones = [], boneInverses = [] ) {\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\tthis.bones = bones.slice( 0 );\n\t\tthis.boneInverses = boneInverses;\n\t\tthis.boneMatrices = null;\n\n\t\tthis.boneTexture = null;\n\t\tthis.boneTextureSize = 0;\n\n\t\tthis.frame = - 1;\n\n\t\tthis.init();\n\n\t}\n\n\tinit() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tthis.boneMatrices = new Float32Array( bones.length * 16 );\n\n\t\t// calculate inverse bone matrices if necessary\n\n\t\tif ( boneInverses.length === 0 ) {\n\n\t\t\tthis.calculateInverses();\n\n\t\t} else {\n\n\t\t\t// handle special case\n\n\t\t\tif ( bones.length !== boneInverses.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.' );\n\n\t\t\t\tthis.boneInverses = [];\n\n\t\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcalculateInverses() {\n\n\t\tthis.boneInverses.length = 0;\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.copy( this.bones[ i ].matrixWorld ).invert();\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t}\n\n\tpose() {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.copy( this.boneInverses[ i ] ).invert();\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== null ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t}\n\n\tgetBoneByName( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tdispose( ) {\n\n\t\tif ( this.boneTexture !== null ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = null;\n\n\t\t}\n\n\t}\n\n\tfromJSON( json, bones ) {\n\n\t\tthis.uuid = json.uuid;\n\n\t\tfor ( let i = 0, l = json.bones.length; i < l; i ++ ) {\n\n\t\t\tconst uuid = json.bones[ i ];\n\t\t\tlet bone = bones[ uuid ];\n\n\t\t\tif ( bone === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: No bone found with UUID:', uuid );\n\t\t\t\tbone = new Bone();\n\n\t\t\t}\n\n\t\t\tthis.bones.push( bone );\n\t\t\tthis.boneInverses.push( new Matrix4().fromArray( json.boneInverses[ i ] ) );\n\n\t\t}\n\n\t\tthis.init();\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Skeleton',\n\t\t\t\tgenerator: 'Skeleton.toJSON'\n\t\t\t},\n\t\t\tbones: [],\n\t\t\tboneInverses: []\n\t\t};\n\n\t\tdata.uuid = this.uuid;\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tfor ( let i = 0, l = bones.length; i < l; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tdata.bones.push( bone.uuid );\n\n\t\t\tconst boneInverse = boneInverses[ i ];\n\t\t\tdata.boneInverses.push( boneInverse.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _instanceLocalMatrix = new Matrix4();\nconst _instanceWorldMatrix = new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _mesh$1 = new Mesh();\n\nfunction InstancedMesh( geometry, material, count ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\n\tthis.instanceColor = null;\n\n\tthis.count = count;\n\n\tthis.frustumCulled = false;\n\n}\n\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: InstancedMesh,\n\n\tisInstancedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\n\t\tif ( source.instanceColor !== null ) this.instanceColor = source.instanceColor.clone();\n\n\t\tthis.count = source.count;\n\n\t\treturn this;\n\n\t},\n\n\tgetColorAt: function ( index, color ) {\n\n\t\tcolor.fromArray( this.instanceColor.array, index * 3 );\n\n\t},\n\n\tgetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh$1.geometry = this.geometry;\n\t\t_mesh$1.material = this.material;\n\n\t\tif ( _mesh$1.material === undefined ) return;\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh$1.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh$1.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t},\n\n\tsetColorAt: function ( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new BufferAttribute( new Float32Array( this.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t},\n\n\tsetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nclass LineBasicMaterial extends Material$1 {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'LineBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.linewidth = 1;\n\t\tthis.linecap = 'round';\n\t\tthis.linejoin = 'round';\n\n\t\tthis.morphTargets = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.linewidth = source.linewidth;\n\t\tthis.linecap = source.linecap;\n\t\tthis.linejoin = source.linejoin;\n\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\treturn this;\n\n\t}\n\n}\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nconst _start = new Vector3();\nconst _end = new Vector3();\nconst _inverseMatrix$1 = new Matrix4();\nconst _ray$1 = new Ray();\nconst _sphere$2 = new Sphere();\n\nfunction Line( geometry = new BufferGeometry(), material = new LineBasicMaterial() ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry;\n\tthis.material = material;\n\n\tthis.updateMorphTargets();\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$2.copy( geometry.boundingSphere );\n\t\t_sphere$2.applyMatrix4( matrixWorld );\n\t\t_sphere$2.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$2 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.copy( matrixWorld ).invert();\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = this.isLineSegments ? 2 : 1;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positionAttribute = attributes.position;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\t\t\t\t\tconst b = indices[ i + 1 ];\n\n\t\t\t\t\tvStart.fromBufferAttribute( positionAttribute, a );\n\t\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, b );\n\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count - 1; i < l; i += step ) {\n\n\t\t\t\t\tvStart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nconst _start$1 = new Vector3();\nconst _end$1 = new Vector3();\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [];\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nclass LineLoop extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'LineLoop';\n\n\t}\n\n}\n\nLineLoop.prototype.isLineLoop = true;\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n *  morphTargets: <bool>\n * }\n */\n\nclass PointsMaterial extends Material$1 {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PointsMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.size = 1;\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.morphTargets = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.size = source.size;\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\treturn this;\n\n\t}\n\n}\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nconst _inverseMatrix$2 = new Matrix4();\nconst _ray$2 = new Ray();\nconst _sphere$3 = new Sphere();\nconst _position$1 = new Vector3();\n\nfunction Points( geometry = new BufferGeometry(), material = new PointsMaterial() ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry;\n\tthis.material = material;\n\n\tthis.updateMorphTargets();\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$3.copy( geometry.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\t\t_sphere$3.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$2.copy( matrixWorld ).invert();\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positionAttribute = attributes.position;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\n\t\t\t\t\t_position$1.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\t\ttestPoint( _position$1, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_position$1.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\ttestPoint( _position$1, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray$2.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray$2.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nclass CompressedTexture extends Texture$1 {\n\n\tconstructor( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.image = { width: width, height: height };\n\t\tthis.mipmaps = mipmaps;\n\n\t\t// no flipping for cube textures\n\t\t// (also flipping doesn't work for compressed textures )\n\n\t\tthis.flipY = false;\n\n\t\t// can't generate mipmaps for compressed textures\n\t\t// mips must be embedded in DDS files\n\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n}\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\nclass CanvasTexture extends Texture$1 {\n\n\tconstructor( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nCanvasTexture.prototype.isCanvasTexture = true;\n\n/**\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\n */\n\nfunction ParametricGeometry( func, slices, stacks ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\tconst EPS = 0.00001;\n\n\tconst normal = new Vector3();\n\n\tconst p0 = new Vector3(), p1 = new Vector3();\n\tconst pu = new Vector3(), pv = new Vector3();\n\n\tif ( func.length < 3 ) {\n\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\n\n\t}\n\n\t// generate vertices, normals and uvs\n\n\tconst sliceCount = slices + 1;\n\n\tfor ( let i = 0; i <= stacks; i ++ ) {\n\n\t\tconst v = i / stacks;\n\n\t\tfor ( let j = 0; j <= slices; j ++ ) {\n\n\t\t\tconst u = j / slices;\n\n\t\t\t// vertex\n\n\t\t\tfunc( u, v, p0 );\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\n\n\t\t\t// normal\n\n\t\t\t// approximate tangent vectors via finite differences\n\n\t\t\tif ( u - EPS >= 0 ) {\n\n\t\t\t\tfunc( u - EPS, v, p1 );\n\t\t\t\tpu.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u + EPS, v, p1 );\n\t\t\t\tpu.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\tif ( v - EPS >= 0 ) {\n\n\t\t\t\tfunc( u, v - EPS, p1 );\n\t\t\t\tpv.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u, v + EPS, p1 );\n\t\t\t\tpv.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\t// cross product of tangent vectors returns surface normal\n\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, v );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( let i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( let j = 0; j < slices; j ++ ) {\n\n\t\t\tconst a = i * sliceCount + j;\n\t\t\tconst b = i * sliceCount + j + 1;\n\t\t\tconst c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\tconst d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t// faces one and two\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nParametricGeometry.prototype = Object.create( BufferGeometry.prototype );\nParametricGeometry.prototype.constructor = ParametricGeometry;\n\n/**\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nclass ShadowMaterial extends Material$1 {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ShadowMaterial';\n\n\t\tthis.color = new Color( 0x000000 );\n\t\tthis.transparent = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\treturn this;\n\n\t}\n\n}\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nclass RawShaderMaterial extends ShaderMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper( parameters );\n\n\t\tthis.type = 'RawShaderMaterial';\n\n\t}\n\n}\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n/**\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *  flatShading: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial$1.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 1.0;\n\tthis.metalness = 0.0;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.flatShading = false;\n\n\tthis.vertexTangents = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material$1.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial$1.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.flatShading = source.flatShading;\n\n\tthis.vertexTangents = source.vertexTangents;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  clearcoat: <float>,\n *  clearcoatMap: new THREE.Texture( <Image> ),\n *  clearcoatRoughness: <float>,\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\n *  clearcoatNormalScale: <Vector2>,\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\n *\n *  reflectivity: <float>,\n *  ior: <float>,\n *\n *  sheen: <Color>,\n *\n *  transmission: <float>,\n *  transmissionMap: new THREE.Texture( <Image> )\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.clearcoat = 0.0;\n\tthis.clearcoatMap = null;\n\tthis.clearcoatRoughness = 0.0;\n\tthis.clearcoatRoughnessMap = null;\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\tthis.clearcoatNormalMap = null;\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tObject.defineProperty( this, 'ior', {\n\t\tget: function () {\n\n\t\t\treturn ( 1 + 0.4 * this.reflectivity ) / ( 1 - 0.4 * this.reflectivity );\n\n\t\t},\n\t\tset: function ( ior ) {\n\n\t\t\tthis.reflectivity = MathUtils.clamp( 2.5 * ( ior - 1 ) / ( ior + 1 ), 0, 1 );\n\n\t\t}\n\t} );\n\n\tthis.sheen = null; // null will disable sheen bsdf\n\n\tthis.transmission = 0.0;\n\tthis.transmissionMap = null;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.clearcoat = source.clearcoat;\n\tthis.clearcoatMap = source.clearcoatMap;\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\tthis.reflectivity = source.reflectivity;\n\n\tif ( source.sheen ) {\n\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\n\n\t} else {\n\n\t\tthis.sheen = null;\n\n\t}\n\n\tthis.transmission = source.transmission;\n\tthis.transmissionMap = source.transmissionMap;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.MultiplyOperation,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>,\n *\n *  flatShading: <bool>\n * }\n */\n\nclass MeshPhongMaterial extends Material$1 {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'MeshPhongMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.specular = new Color( 0x111111 );\n\t\tthis.shininess = 30;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\t\tthis.morphNormals = false;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.specular.copy( source.specular );\n\t\tthis.shininess = source.shininess;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\t\tthis.morphNormals = source.morphNormals;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\treturn this;\n\n\t}\n\n}\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nconst AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tconst n = times.length;\n\t\tconst result = new Array( n );\n\t\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tconst nValues = values.length;\n\t\tconst result = new values.constructor( nValues );\n\n\t\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tconst srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tlet i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tlet value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t},\n\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps = 30 ) {\n\n\t\tconst clip = sourceClip.clone();\n\n\t\tclip.name = name;\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tconst track = clip.tracks[ i ];\n\t\t\tconst valueSize = track.getValueSize();\n\n\t\t\tconst times = [];\n\t\t\tconst values = [];\n\n\t\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( times.length === 0 ) continue;\n\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\t// find minimum .times value across all tracks in the trimmed clip\n\n\t\tlet minStartTime = Infinity;\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// shift all tracks such that clip begins at t=0\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t\t}\n\n\t\tclip.resetDuration();\n\n\t\treturn clip;\n\n\t},\n\n\tmakeClipAdditive: function ( targetClip, referenceFrame = 0, referenceClip = targetClip, fps = 30 ) {\n\n\t\tif ( fps <= 0 ) fps = 30;\n\n\t\tconst numTracks = referenceClip.tracks.length;\n\t\tconst referenceTime = referenceFrame / fps;\n\n\t\t// Make each track's values relative to the values at the reference frame\n\t\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t\t// Skip this track if it's non-numeric\n\t\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t\t} );\n\n\t\t\tif ( targetTrack === undefined ) continue;\n\n\t\t\tlet referenceOffset = 0;\n\t\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t\t}\n\n\t\t\tlet targetOffset = 0;\n\t\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t\t}\n\n\t\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\t\tlet referenceValue;\n\n\t\t\t// Find the value to subtract out of the track\n\t\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\t\tconst startIndex = referenceOffset;\n\t\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t\t} else {\n\n\t\t\t\t// Interpolate to the reference value\n\t\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\t\tconst startIndex = referenceOffset;\n\t\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( interpolant.resultBuffer, startIndex, endIndex );\n\n\t\t\t}\n\n\t\t\t// Conjugate the quaternion\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t\t}\n\n\t\t\t// Subtract the reference value from all of the track values\n\n\t\t\tconst numTimes = targetTrack.times.length;\n\t\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart,\n\t\t\t\t\t\treferenceValue,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\t\treturn targetClip;\n\n\t}\n\n};\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\nclass KeyframeTrack {\n\n\tconstructor( name, times, values, interpolation ) {\n\n\t\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\t\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\t\tthis.name = name;\n\n\t\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\t\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\t\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\t}\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tstatic toJSON( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== this.toJSON ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n\tInterpolantFactoryMethodDiscrete( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodSmooth( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tsetInterpolation( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = 'unsupported interpolation for ' +\n\t\t\t\tthis.ValueTypeName + ' keyframe track named ' + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t}\n\n\tgetInterpolation() {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t}\n\n\tgetValueSize() {\n\n\t\treturn this.values.length / this.times.length;\n\n\t}\n\n\t// move all keyframes either forwards or backwards in time\n\tshift( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize() {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = AnimationUtils.arraySlice( this.times ),\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== times[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst times = AnimationUtils.arraySlice( this.times, 0 );\n\t\tconst values = AnimationUtils.arraySlice( this.values, 0 );\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n}\n\nKeyframeTrack.prototype.TimeBufferType = Float32Array;\nKeyframeTrack.prototype.ValueBufferType = Float32Array;\nKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\n\n/**\n * A Track of Boolean keyframe values.\n */\nclass BooleanKeyframeTrack extends KeyframeTrack {}\n\nBooleanKeyframeTrack.prototype.ValueTypeName = 'bool';\nBooleanKeyframeTrack.prototype.ValueBufferType = Array;\nBooleanKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of keyframe values that represent color.\n */\nclass ColorKeyframeTrack extends KeyframeTrack {}\n\nColorKeyframeTrack.prototype.ValueTypeName = 'color';\n\n/**\n * A Track of numeric keyframe values.\n */\nclass NumberKeyframeTrack extends KeyframeTrack {}\n\nNumberKeyframeTrack.prototype.ValueTypeName = 'number';\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n * A Track of quaternion keyframe values.\n */\nclass QuaternionKeyframeTrack extends KeyframeTrack {\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n}\n\nQuaternionKeyframeTrack.prototype.ValueTypeName = 'quaternion';\n// ValueBufferType is inherited\nQuaternionKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\nQuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track that interpolates Strings\n */\nclass StringKeyframeTrack extends KeyframeTrack {}\n\nStringKeyframeTrack.prototype.ValueTypeName = 'string';\nStringKeyframeTrack.prototype.ValueBufferType = Array;\nStringKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of vectored keyframe values.\n */\nclass VectorKeyframeTrack extends KeyframeTrack {}\n\nVectorKeyframeTrack.prototype.ValueTypeName = 'vector';\n\nclass AnimationClip {\n\n\tconstructor( name, duration = - 1, tracks, blendMode = NormalAnimationBlendMode ) {\n\n\t\tthis.name = name;\n\t\tthis.tracks = tracks;\n\t\tthis.duration = duration;\n\t\tthis.blendMode = blendMode;\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\t// this means it should figure out its duration by scanning the tracks\n\t\tif ( this.duration < 0 ) {\n\n\t\t\tthis.resetDuration();\n\n\t\t}\n\n\t}\n\n\n\tstatic parse( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\tconst clip = new this( json.name, json.duration, tracks, json.blendMode );\n\t\tclip.uuid = json.uuid;\n\n\t\treturn clip;\n\n\t}\n\n\tstatic toJSON( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t}\n\n\tstatic CreateFromMorphTargetSequence( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new this( name, - 1, tracks );\n\n\t}\n\n\tstatic findByName( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tstatic CreateClipsFromMorphTargetSequences( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( this.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t}\n\n\t// parse the animation.hierarchy format\n\tstatic parseAnimation( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new this( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n\tresetDuration() {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t}\n\n\ttrim() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\toptimize() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new this.constructor( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.constructor.toJSON( this );\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tconst scope = this;\n\n\tlet isLoading = false;\n\tlet itemsLoaded = 0;\n\tlet itemsTotal = 0;\n\tlet urlModifier = undefined;\n\tconst handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tconst index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tconst regex = handlers[ i ];\n\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nconst DefaultLoadingManager = new LoadingManager();\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.withCredentials = false;\n\tthis.path = '';\n\tthis.resourcePath = '';\n\tthis.requestHeader = {};\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tloadAsync: function ( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n} );\n\nconst loading = {};\n\nfunction FileLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FileLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tconst dataUriRegexResult = url.match( dataUriRegex );\n\t\tlet request;\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tconst mimeType = dataUriRegexResult[ 1 ];\n\t\t\tconst isBase64 = !! dataUriRegexResult[ 2 ];\n\n\t\t\tlet data = dataUriRegexResult[ 3 ];\n\t\t\tdata = decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tlet response;\n\t\t\t\tconst responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tconst view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\trequest = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tconst response = this.response;\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( const header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction CompressedTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) texture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.image = images;\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.image = images;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\nclass ImageLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n}\n\nclass CubeTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction DataTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DataTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tconst texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.encoding !== undefined ) {\n\n\t\t\t\ttexture.encoding = texData.encoding;\n\n\t\t\t}\n\n\t\t\tif ( texData.flipY !== undefined ) {\n\n\t\t\t\ttexture.flipY = texData.flipY;\n\n\t\t\t}\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture$1();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t},\n\n\tgetTangentAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nclass Light extends Object3D {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Light';\n\n\t\tthis.color = new Color( color );\n\t\tthis.intensity = intensity;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nLight.prototype.isLight = true;\n\nconst _projScreenMatrix = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld = /*@__PURE__*/ new Vector3();\nconst _lookTarget = /*@__PURE__*/ new Vector3();\n\nclass LightShadow {\n\n\tconstructor( camera ) {\n\n\t\tthis.camera = camera;\n\n\t\tthis.bias = 0;\n\t\tthis.normalBias = 0;\n\t\tthis.radius = 1;\n\n\t\tthis.mapSize = new Vector2( 512, 512 );\n\n\t\tthis.map = null;\n\t\tthis.mapPass = null;\n\t\tthis.matrix = new Matrix4();\n\n\t\tthis.autoUpdate = true;\n\t\tthis.needsUpdate = false;\n\n\t\tthis._frustum = new Frustum();\n\t\tthis._frameExtents = new Vector2( 1, 1 );\n\n\t\tthis._viewportCount = 1;\n\n\t\tthis._viewports = [\n\n\t\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t\t];\n\n\t}\n\n\tgetViewportCount() {\n\n\t\treturn this._viewportCount;\n\n\t}\n\n\tgetFrustum() {\n\n\t\treturn this._frustum;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst shadowCamera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( _lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t}\n\n\tgetViewport( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t}\n\n\tgetFrameExtents() {\n\n\t\treturn this._frameExtents;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n}\n\nclass SpotLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\t\tthis.focus = 1;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = MathUtils.RAD2DEG * 2 * light.angle * this.focus;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tsuper.updateMatrices( light );\n\n\t}\n\n}\n\nSpotLightShadow.prototype.isSpotLightShadow = true;\n\nclass SpotLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, angle = Math.PI / 3, penumbra = 0, decay = 1 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.type = 'SpotLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.distance = distance;\n\t\tthis.angle = angle;\n\t\tthis.penumbra = penumbra;\n\t\tthis.decay = decay; // for physically correct lights, should be 2.\n\n\t\tthis.shadow = new SpotLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// intensity = power per solid angle.\n\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\treturn this.intensity * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// intensity = power per solid angle.\n\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\tthis.intensity = power / Math.PI;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nSpotLight.prototype.isSpotLight = true;\n\nconst _projScreenMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld$1 = /*@__PURE__*/ new Vector3();\nconst _lookTarget$1 = /*@__PURE__*/ new Vector3();\n\nclass PointLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\t\tthis._frameExtents = new Vector2( 4, 2 );\n\n\t\tthis._viewportCount = 6;\n\n\t\tthis._viewports = [\n\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t// following orientation:\n\t\t\t//\n\t\t\t//  xzXZ\n\t\t\t//   y Y\n\t\t\t//\n\t\t\t// X - Positive x direction\n\t\t\t// x - Negative x direction\n\t\t\t// Y - Positive y direction\n\t\t\t// y - Negative y direction\n\t\t\t// Z - Positive z direction\n\t\t\t// z - Negative z direction\n\n\t\t\t// positive X\n\t\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t\t// negative X\n\t\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t\t// positive Z\n\t\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t\t// negative Z\n\t\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t\t// positive Y\n\t\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t\t// negative Y\n\t\t\tnew Vector4( 1, 0, 1, 1 )\n\t\t];\n\n\t\tthis._cubeDirections = [\n\t\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t\t];\n\n\t\tthis._cubeUps = [\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t\t];\n\n\t}\n\n\tupdateMatrices( light, viewportIndex = 0 ) {\n\n\t\tconst camera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld$1.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( _lightPositionWorld$1 );\n\n\t\t_lookTarget$1.copy( camera.position );\n\t\t_lookTarget$1.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( _lookTarget$1 );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - _lightPositionWorld$1.x, - _lightPositionWorld$1.y, - _lightPositionWorld$1.z );\n\n\t\t_projScreenMatrix$1.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix$1 );\n\n\t}\n\n}\n\nPointLightShadow.prototype.isPointLightShadow = true;\n\nclass PointLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, decay = 1 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.type = 'PointLight';\n\n\t\tthis.distance = distance;\n\t\tthis.decay = decay; // for physically correct lights, should be 2.\n\n\t\tthis.shadow = new PointLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// intensity = power per solid angle.\n\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\treturn this.intensity * 4 * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// intensity = power per solid angle.\n\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nPointLight.prototype.isPointLight = true;\n\nclass OrthographicCamera extends Camera {\n\n\tconstructor( left = - 1, right = 1, top = 1, bottom = - 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'OrthographicCamera';\n\n\t\tthis.zoom = 1;\n\t\tthis.view = null;\n\n\t\tthis.left = left;\n\t\tthis.right = right;\n\t\tthis.top = top;\n\t\tthis.bottom = bottom;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t}\n\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n}\n\nOrthographicCamera.prototype.isOrthographicCamera = true;\n\nclass DirectionalLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n\t}\n\n}\n\nDirectionalLightShadow.prototype.isDirectionalLightShadow = true;\n\nclass DirectionalLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.type = 'DirectionalLight';\n\n\t\tthis.position.copy( Object3D.DefaultUp );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.shadow = new DirectionalLightShadow();\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.target = source.target.clone();\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nDirectionalLight.prototype.isDirectionalLight = true;\n\nconst LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\nfunction InstancedBufferGeometry() {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.instanceCount = Infinity;\n\n}\n\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\tconstructor: InstancedBufferGeometry,\n\n\tisInstancedBufferGeometry: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferGeometry.prototype.copy.call( this, source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\n\n\tif ( typeof ( normalized ) === 'number' ) {\n\n\t\tmeshPerAttribute = normalized;\n\n\t\tnormalized = false;\n\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t}\n\n\tBufferAttribute.call( this, array, itemSize, normalized );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\tconstructor: InstancedBufferAttribute,\n\n\tisInstancedBufferAttribute: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ()\t{\n\n\t\tconst data = BufferAttribute.prototype.toJSON.call( this );\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction ImageBitmapLoader( manager ) {\n\n\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t}\n\n\tif ( typeof fetch === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t}\n\n\tLoader.call( this, manager );\n\n\tthis.options = { premultiplyAlpha: 'none' };\n\n}\n\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageBitmapLoader,\n\n\tisImageBitmapLoader: true,\n\n\tsetOptions: function setOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\t\tfetchOptions.headers = this.requestHeader;\n\n\t\tfetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, Object.assign( scope.options, { colorSpaceConversion: 'none' } ) );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n} );\n\nlet _context;\n\nconst AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\t_context = value;\n\n\t}\n\n};\n\nclass AudioLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n}\n\nnew Matrix4();\nnew Matrix4();\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay = 0 ) {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value.slice();\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value.slice();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass PropertyMixer {\n\n\tconstructor( binding, typeName, valueSize ) {\n\n\t\tthis.binding = binding;\n\t\tthis.valueSize = valueSize;\n\n\t\tlet mixFunction,\n\t\t\tmixFunctionAdditive,\n\t\t\tsetIdentity;\n\n\t\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t\t//\n\t\t// interpolators can use .buffer as their .result\n\t\t// the data then goes to 'incoming'\n\t\t//\n\t\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t\t// the cumulative result and are compared to detect\n\t\t// changes\n\t\t//\n\t\t// 'orig' stores the original state of the property\n\t\t//\n\t\t// 'add' is used for additive cumulative results\n\t\t//\n\t\t// 'work' is optional and is only present for quaternion types. It is used\n\t\t// to store intermediate quaternion multiplication results\n\n\t\tswitch ( typeName ) {\n\n\t\t\tcase 'quaternion':\n\t\t\t\tmixFunction = this._slerp;\n\t\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\t\tthis._workIndex = 5;\n\t\t\t\tbreak;\n\n\t\t\tcase 'string':\n\t\t\tcase 'bool':\n\t\t\t\tmixFunction = this._select;\n\n\t\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t\t// additive is not relevant for non-numeric types\n\t\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tmixFunction = this._lerp;\n\t\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t\t}\n\n\t\tthis._mixBufferRegion = mixFunction;\n\t\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\t\tthis._setIdentity = setIdentity;\n\t\tthis._origIndex = 3;\n\t\tthis._addIndex = 4;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tthis.useCount = 0;\n\t\tthis.referenceCount = 0;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t}\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState() {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t}\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState() {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t}\n\n\t_setAdditiveIdentityNumeric() {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\t_setAdditiveIdentityQuaternion() {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t}\n\n\t_setAdditiveIdentityOther() {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t}\n\n\n\t// mix functions\n\n\t_select( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_slerp( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t}\n\n\t_slerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t}\n\n\t_lerp( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n\t_lerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n}\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n}\n\nObject.assign( Composite.prototype, {\n\n\tgetValue: function ( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function ( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n} );\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: function ( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t},\n\n\tparseTrackName: function ( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( ! matches ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === '' || nodeName === '.' || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tconst source = this.resolvedProperty;\n\n\t\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === 'morphTargetInfluences' ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot = null, blendMode = clip.blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot;\n\t\tthis.blendMode = blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass AnimationMixer extends EventDispatcher {\n\n\tconstructor( root ) {\n\n\t\tsuper();\n\n\t\tthis._root = root;\n\t\tthis._initMemoryManager();\n\t\tthis._accuIndex = 0;\n\t\tthis.time = 0;\n\t\tthis.timeScale = 1.0;\n\n\t}\n\n\t_bindAction( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t}\n\n\t_activateAction( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t}\n\n\t_deactivateAction( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t}\n\n\t// Memory manager\n\n\t_initMemoryManager() {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t}\n\n\t_addInactiveAction( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t}\n\n\t_removeInactiveAction( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t}\n\n\t_removeInactiveBindingsForAction( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_lendAction( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t}\n\n\t_takeBackAction( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t}\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t}\n\n\t_removeInactiveBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t}\n\n\t_lendBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t}\n\n\t_takeBackBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t}\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant() {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t}\n\n\t_takeBackControlInterpolant( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t}\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t}\n\n\t// get an existing action\n\texistingAction( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction() {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// advance the time and update apply the animation\n\tupdate( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t}\n\n\t// return this mixer's root target object\n\tgetRoot() {\n\n\t\treturn this._root;\n\n\t}\n\n\t// free all resources specific to a particular clip\n\tuncacheClip( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t}\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remove a targeted clip from the cache\n\tuncacheAction( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n}\n\nAnimationMixer.prototype._controlInterpolantsResultBuffer = new Float32Array( 1 );\n\nclass Uniform {\n\n\tconstructor( value ) {\n\n\t\tif ( typeof value === 'string' ) {\n\n\t\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\t\tvalue = arguments[ 1 ];\n\n\t\t}\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\n\n\tInterleavedBuffer.call( this, array, stride );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\n\n\tconstructor: InstancedInterleavedBuffer,\n\n\tisInstancedInterleavedBuffer: true,\n\n\tcopy: function ( source ) {\n\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tconst ib = InterleavedBuffer.prototype.clone.call( this, data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tconst json = InterleavedBuffer.prototype.toJSON.call( this, data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n} );\n\nfunction GLBufferAttribute( buffer, type, itemSize, elementSize, count ) {\n\n\tthis.buffer = buffer;\n\tthis.type = type;\n\tthis.itemSize = itemSize;\n\tthis.elementSize = elementSize;\n\tthis.count = count;\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( GLBufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( GLBufferAttribute.prototype, {\n\n\tisGLBufferAttribute: true,\n\n\tsetBuffer: function ( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t},\n\n\tsetType: function ( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t},\n\n\tsetItemSize: function ( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t},\n\n\tsetCount: function ( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t},\n\n} );\n\nfunction Raycaster( origin, direction, near = 0, far = Infinity ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near;\n\tthis.far = far;\n\tthis.camera = null;\n\tthis.layers = new Layers();\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: { threshold: 1 },\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( camera && camera.isPerspectiveCamera ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( camera && camera.isOrthographicCamera ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type: ' + camera.type );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive = false, intersects = [] ) {\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive = false, intersects = [] ) {\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nfunction ImmediateRenderObject( material ) {\n\n\tObject3D.call( this );\n\n\tthis.material = material;\n\tthis.render = function ( /* renderCallback */ ) {};\n\n\tthis.hasPositions = false;\n\tthis.hasNormals = false;\n\tthis.hasColors = false;\n\tthis.hasUvs = false;\n\n\tthis.positionArray = null;\n\tthis.normalArray = null;\n\tthis.colorArray = null;\n\tthis.uvArray = null;\n\n\tthis.count = 0;\n\n}\n\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\n\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\nconst _vector$a = /*@__PURE__*/ new Vector3();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'SkeletonHelper';\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.copy( this.root.matrixWorld ).invert();\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector$a.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector$a.x, _vector$a.y, _vector$a.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector$a.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector$a.x, _vector$a.y, _vector$a.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object && object.isBone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nconst _floatView = new Float32Array( 1 );\nconst _int32View = new Int32Array( _floatView.buffer );\n\nconst DataUtils = {\n\n\t// Converts float32 to float16 (stored as uint16 value).\n\n\ttoHalfFloat: function ( val ) {\n\n\t\t// Source: http://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\n\n\t\t/* This method is faster than the OpenEXR implementation (very often\n\t\t* used, eg. in Ogre), with the additional benefit of rounding, inspired\n\t\t* by James Tursa?s half-precision code. */\n\n\t\t_floatView[ 0 ] = val;\n\t\tconst x = _int32View[ 0 ];\n\n\t\tlet bits = ( x >> 16 ) & 0x8000; /* Get the sign */\n\t\tlet m = ( x >> 12 ) & 0x07ff; /* Keep one extra bit for rounding */\n\t\tconst e = ( x >> 23 ) & 0xff; /* Using int is faster here */\n\n\t\t/* If zero, or denormal, or exponent underflows too much for a denormal\n\t\t\t* half, return signed zero. */\n\t\tif ( e < 103 ) return bits;\n\n\t\t/* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n\t\tif ( e > 142 ) {\n\n\t\t\tbits |= 0x7c00;\n\t\t\t/* If exponent was 0xff and one mantissa bit was set, it means NaN,\n\t\t\t\t\t\t* not Inf, so make sure we set one mantissa bit too. */\n\t\t\tbits |= ( ( e == 255 ) ? 0 : 1 ) && ( x & 0x007fffff );\n\t\t\treturn bits;\n\n\t\t}\n\n\t\t/* If exponent underflows but not too much, return a denormal */\n\t\tif ( e < 113 ) {\n\n\t\t\tm |= 0x0800;\n\t\t\t/* Extra rounding may overflow and set mantissa to 0 and exponent\n\t\t\t\t* to 1, which is OK. */\n\t\t\tbits |= ( m >> ( 114 - e ) ) + ( ( m >> ( 113 - e ) ) & 1 );\n\t\t\treturn bits;\n\n\t\t}\n\n\t\tbits |= ( ( e - 112 ) << 10 ) | ( m >> 1 );\n\t\t/* Extra rounding. An overflow will set mantissa to 0 and increment\n\t\t\t* the exponent, which is OK. */\n\t\tbits += m & 1;\n\t\treturn bits;\n\n\t}\n\n};\n\nconst LOD_MIN = 4;\nconst LOD_MAX = 8;\nconst SIZE_MAX = Math.pow( 2, LOD_MAX );\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\nconst TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst ENCODINGS = {\n\t[ LinearEncoding ]: 0,\n\t[ sRGBEncoding ]: 1,\n\t[ RGBEEncoding ]: 2,\n\t[ RGBM7Encoding ]: 3,\n\t[ RGBM16Encoding ]: 4,\n\t[ RGBDEncoding ]: 5,\n\t[ GammaEncoding ]: 6\n};\n\nconst backgroundMaterial = new MeshBasicMaterial( {\n\tside: BackSide,\n\tdepthWrite: false,\n\tdepthTest: false,\n} );\nconst backgroundBox = new Mesh( new BoxGeometry(), backgroundMaterial );\n\nconst _flatCamera$1 = /*@__PURE__*/ new OrthographicCamera();\nconst { _lodPlanes, _sizeLods, _sigmas } = /*@__PURE__*/ _createPlanes();\nconst _clearColor = /*@__PURE__*/ new Color();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\t/*@__PURE__*/ new Vector3( 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, INV_PHI ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, - INV_PHI ),\n\t/*@__PURE__*/ new Vector3( INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( - INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( PHI, INV_PHI, 0 ),\n\t/*@__PURE__*/ new Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n */\n\nfunction convertLinearToRGBE( color ) {\n\n\tconst maxComponent = Math.max( color.r, color.g, color.b );\n\tconst fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\n\tcolor.multiplyScalar( Math.pow( 2.0, - fExp ) );\n\n\tconst alpha = ( fExp + 128.0 ) / 255.0;\n\treturn alpha;\n\n}\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._blurMaterial = _getBlurShader( MAX_SAMPLES );\n\t\tthis._equirectShader = null;\n\t\tthis._cubemapShader = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular ) {\n\n\t\treturn this._fromTexture( equirectangular );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap ) {\n\n\t\treturn this._fromTexture( cubemap );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapShader === null ) {\n\n\t\t\tthis._cubemapShader = _getCubemapShader();\n\t\t\tthis._compileMaterial( this._cubemapShader );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectShader === null ) {\n\n\t\t\tthis._equirectShader = _getEquirectShader();\n\t\t\tthis._compileMaterial( this._equirectShader );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._blurMaterial.dispose();\n\n\t\tif ( this._cubemapShader !== null ) this._cubemapShader.dispose();\n\t\tif ( this._equirectShader !== null ) this._equirectShader.dispose();\n\n\t\tfor ( let i = 0; i < _lodPlanes.length; i ++ ) {\n\n\t\t\t_lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t// private interface\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._pingPongRenderTarget.dispose();\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets( texture );\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets( texture ) { // warning: null texture is valid\n\n\t\tconst params = {\n\t\t\tmagFilter: NearestFilter,\n\t\t\tminFilter: NearestFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: UnsignedByteType,\n\t\t\tformat: RGBEFormat,\n\t\t\tencoding: _isLDR( texture ) ? texture.encoding : RGBEEncoding,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( params );\n\t\tcubeUVRenderTarget.depthBuffer = texture ? false : true;\n\t\tthis._pingPongRenderTarget = _createRenderTarget( params );\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( _lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera$1 );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst originalAutoClear = renderer.autoClear;\n\t\tconst outputEncoding = renderer.outputEncoding;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\trenderer.getClearColor( _clearColor );\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.outputEncoding = LinearEncoding;\n\t\trenderer.autoClear = false;\n\n\t\tlet useSolidColor = false;\n\t\tconst background = scene.background;\n\t\tif ( background ) {\n\n\t\t\tif ( background.isColor ) {\n\n\t\t\t\tbackgroundMaterial.color.copy( background ).convertSRGBToLinear();\n\t\t\t\tscene.background = null;\n\n\t\t\t\tconst alpha = convertLinearToRGBE( backgroundMaterial.color );\n\t\t\t\tbackgroundMaterial.opacity = alpha;\n\t\t\t\tuseSolidColor = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tbackgroundMaterial.color.copy( _clearColor ).convertSRGBToLinear();\n\n\t\t\tconst alpha = convertLinearToRGBE( backgroundMaterial.color );\n\t\t\tbackgroundMaterial.opacity = alpha;\n\t\t\tuseSolidColor = true;\n\n\t\t}\n\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\t\t\tif ( col == 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col == 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\t_setViewport( cubeUVRenderTarget,\n\t\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\n\t\t\tif ( useSolidColor ) {\n\n\t\t\t\trenderer.render( backgroundBox, cubeCamera );\n\n\t\t\t}\n\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.outputEncoding = outputEncoding;\n\t\trenderer.autoClear = originalAutoClear;\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tif ( texture.isCubeTexture ) {\n\n\t\t\tif ( this._cubemapShader == null ) {\n\n\t\t\t\tthis._cubemapShader = _getCubemapShader();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( this._equirectShader == null ) {\n\n\t\t\t\tthis._equirectShader = _getEquirectShader();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\n\t\tconst mesh = new Mesh( _lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tif ( ! texture.isCubeTexture ) {\n\n\t\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\n\n\t\t}\n\n\t\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\t\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ cubeUVRenderTarget.texture.encoding ];\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera$1 );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < TOTAL_LODS; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( _sigmas[ i ] * _sigmas[ i ] - _sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( _lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = _sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i == 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\n\t\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\t\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\n\t\tconst outputSize = _sizeLods[ lodOut ];\n\t\tconst x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\n\t\tconst y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) + 2 * outputSize * ( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera$1 );\n\n\t}\n\n}\n\nfunction _isLDR( texture ) {\n\n\tif ( texture === undefined || texture.type !== UnsignedByteType ) return false;\n\n\treturn texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\n\n}\n\nfunction _createPlanes() {\n\n\tconst _lodPlanes = [];\n\tconst _sizeLods = [];\n\tconst _sigmas = [];\n\n\tlet lod = LOD_MAX;\n\n\tfor ( let i = 0; i < TOTAL_LODS; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\t_sizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\n\n\t\t} else if ( i == 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\t_sigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 1 );\n\t\tconst min = - texelSize / 2;\n\t\tconst max = 1 + texelSize / 2;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\t_lodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { _lodPlanes, _sizeLods, _sigmas };\n\n}\n\nfunction _createRenderTarget( params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( maxSamples ) {\n\n\tconst weights = new Float32Array( maxSamples );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: { 'n': maxSamples },\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectShader() {\n\n\tconst texelSize = new Vector2( 1, 1 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'texelSize': { value: texelSize },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCubemapShader() {\n\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction _getEncodings() {\n\n\treturn /* glsl */`\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t`;\n\n}\n\n//\n\nCurve.create = function ( construct, getPoint ) {\n\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\n\n\tconstruct.prototype = Object.create( Curve.prototype );\n\tconstruct.prototype.constructor = construct;\n\tconstruct.prototype.getPoint = getPoint;\n\n\treturn construct;\n\n};\n\nSkeletonHelper.prototype.update = function () {\n\n\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\n\n};\n\n//\n\nLoader.prototype.extractUrlBase = function ( url ) {\n\n\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\n\treturn LoaderUtils.extractUrlBase( url );\n\n};\n\nLoader.Handlers = {\n\n\tadd: function ( /* regex, loader */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\n\n\t},\n\n\tget: function ( /* file */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\n\n\t}\n\n};\n\n//\n\nBox3.prototype.center = function ( optionalTarget ) {\n\n\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\n\treturn this.getCenter( optionalTarget );\n\n};\n\nBox3.prototype.empty = function () {\n\n\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\treturn this.isEmpty();\n\n};\n\nBox3.prototype.isIntersectionBox = function ( box ) {\n\n\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\treturn this.intersectsBox( box );\n\n};\n\nBox3.prototype.isIntersectionSphere = function ( sphere ) {\n\n\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\treturn this.intersectsSphere( sphere );\n\n};\n\nBox3.prototype.size = function ( optionalTarget ) {\n\n\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\n\treturn this.getSize( optionalTarget );\n\n};\n\n//\n\nSphere.prototype.empty = function () {\n\n\tconsole.warn( 'THREE.Sphere: .empty() has been renamed to .isEmpty().' );\n\treturn this.isEmpty();\n\n};\n\n//\n\nFrustum.prototype.setFromMatrix = function ( m ) {\n\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\n\treturn this.setFromProjectionMatrix( m );\n\n};\n\n//\n\nMathUtils.random16 = function () {\n\n\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\n\treturn Math.random();\n\n};\n\nMathUtils.nearestPowerOfTwo = function ( value ) {\n\n\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\n\treturn MathUtils.floorPowerOfTwo( value );\n\n};\n\nMathUtils.nextPowerOfTwo = function ( value ) {\n\n\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\n\treturn MathUtils.ceilPowerOfTwo( value );\n\n};\n\n//\n\nMatrix3.prototype.flattenToArrayOffset = function ( array, offset ) {\n\n\tconsole.warn( 'THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.' );\n\treturn this.toArray( array, offset );\n\n};\n\nMatrix3.prototype.multiplyVector3 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\treturn vector.applyMatrix3( this );\n\n};\n\nMatrix3.prototype.multiplyVector3Array = function ( /* a */ ) {\n\n\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\n\n};\n\nMatrix3.prototype.applyToBufferAttribute = function ( attribute ) {\n\n\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\n\treturn attribute.applyMatrix3( this );\n\n};\n\nMatrix3.prototype.applyToVector3Array = function ( /* array, offset, length */ ) {\n\n\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\n\n};\n\nMatrix3.prototype.getInverse = function ( matrix ) {\n\n\tconsole.warn( 'THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.' );\n\treturn this.copy( matrix ).invert();\n\n};\n\n//\n\nMatrix4.prototype.extractPosition = function ( m ) {\n\n\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\treturn this.copyPosition( m );\n\n};\n\nMatrix4.prototype.flattenToArrayOffset = function ( array, offset ) {\n\n\tconsole.warn( 'THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.' );\n\treturn this.toArray( array, offset );\n\n};\n\nMatrix4.prototype.getPosition = function () {\n\n\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\treturn new Vector3().setFromMatrixColumn( this, 3 );\n\n};\n\nMatrix4.prototype.setRotationFromQuaternion = function ( q ) {\n\n\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\treturn this.makeRotationFromQuaternion( q );\n\n};\n\nMatrix4.prototype.multiplyToArray = function () {\n\n\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\n\n};\n\nMatrix4.prototype.multiplyVector3 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\treturn vector.applyMatrix4( this );\n\n};\n\nMatrix4.prototype.multiplyVector4 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\treturn vector.applyMatrix4( this );\n\n};\n\nMatrix4.prototype.multiplyVector3Array = function ( /* a */ ) {\n\n\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\n\n};\n\nMatrix4.prototype.rotateAxis = function ( v ) {\n\n\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\tv.transformDirection( this );\n\n};\n\nMatrix4.prototype.crossVector = function ( vector ) {\n\n\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\treturn vector.applyMatrix4( this );\n\n};\n\nMatrix4.prototype.translate = function () {\n\n\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\n};\n\nMatrix4.prototype.rotateX = function () {\n\n\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n};\n\nMatrix4.prototype.rotateY = function () {\n\n\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n};\n\nMatrix4.prototype.rotateZ = function () {\n\n\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n};\n\nMatrix4.prototype.rotateByAxis = function () {\n\n\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n};\n\nMatrix4.prototype.applyToBufferAttribute = function ( attribute ) {\n\n\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\n\treturn attribute.applyMatrix4( this );\n\n};\n\nMatrix4.prototype.applyToVector3Array = function ( /* array, offset, length */ ) {\n\n\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\n\n};\n\nMatrix4.prototype.makeFrustum = function ( left, right, bottom, top, near, far ) {\n\n\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\n\treturn this.makePerspective( left, right, top, bottom, near, far );\n\n};\n\nMatrix4.prototype.getInverse = function ( matrix ) {\n\n\tconsole.warn( 'THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.' );\n\treturn this.copy( matrix ).invert();\n\n};\n\n//\n\nPlane.prototype.isIntersectionLine = function ( line ) {\n\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\treturn this.intersectsLine( line );\n\n};\n\n//\n\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\treturn vector.applyQuaternion( this );\n\n};\n\nQuaternion.prototype.inverse = function ( ) {\n\n\tconsole.warn( 'THREE.Quaternion: .inverse() has been renamed to invert().' );\n\treturn this.invert();\n\n};\n\n//\n\nRay.prototype.isIntersectionBox = function ( box ) {\n\n\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\treturn this.intersectsBox( box );\n\n};\n\nRay.prototype.isIntersectionPlane = function ( plane ) {\n\n\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\n\treturn this.intersectsPlane( plane );\n\n};\n\nRay.prototype.isIntersectionSphere = function ( sphere ) {\n\n\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\treturn this.intersectsSphere( sphere );\n\n};\n\n//\n\nTriangle.prototype.area = function () {\n\n\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\n\treturn this.getArea();\n\n};\n\nTriangle.prototype.barycoordFromPoint = function ( point, target ) {\n\n\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\treturn this.getBarycoord( point, target );\n\n};\n\nTriangle.prototype.midpoint = function ( target ) {\n\n\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\n\treturn this.getMidpoint( target );\n\n};\n\nTriangle.prototypenormal = function ( target ) {\n\n\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\treturn this.getNormal( target );\n\n};\n\nTriangle.prototype.plane = function ( target ) {\n\n\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\n\treturn this.getPlane( target );\n\n};\n\nTriangle.barycoordFromPoint = function ( point, a, b, c, target ) {\n\n\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\treturn Triangle.getBarycoord( point, a, b, c, target );\n\n};\n\nTriangle.normal = function ( a, b, c, target ) {\n\n\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\treturn Triangle.getNormal( a, b, c, target );\n\n};\n\n//\n\nVector2.prototype.fromAttribute = function ( attribute, index, offset ) {\n\n\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\treturn this.fromBufferAttribute( attribute, index, offset );\n\n};\n\nVector2.prototype.distanceToManhattan = function ( v ) {\n\n\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\treturn this.manhattanDistanceTo( v );\n\n};\n\nVector2.prototype.lengthManhattan = function () {\n\n\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\n\treturn this.manhattanLength();\n\n};\n\n//\n\nVector3.prototype.setEulerFromRotationMatrix = function () {\n\n\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n};\n\nVector3.prototype.setEulerFromQuaternion = function () {\n\n\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n};\n\nVector3.prototype.getPositionFromMatrix = function ( m ) {\n\n\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\treturn this.setFromMatrixPosition( m );\n\n};\n\nVector3.prototype.getScaleFromMatrix = function ( m ) {\n\n\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\treturn this.setFromMatrixScale( m );\n\n};\n\nVector3.prototype.getColumnFromMatrix = function ( index, matrix ) {\n\n\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\treturn this.setFromMatrixColumn( matrix, index );\n\n};\n\nVector3.prototype.applyProjection = function ( m ) {\n\n\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\n\treturn this.applyMatrix4( m );\n\n};\n\nVector3.prototype.fromAttribute = function ( attribute, index, offset ) {\n\n\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\treturn this.fromBufferAttribute( attribute, index, offset );\n\n};\n\nVector3.prototype.distanceToManhattan = function ( v ) {\n\n\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\treturn this.manhattanDistanceTo( v );\n\n};\n\nVector3.prototype.lengthManhattan = function () {\n\n\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\n\treturn this.manhattanLength();\n\n};\n\n//\n\nVector4.prototype.fromAttribute = function ( attribute, index, offset ) {\n\n\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\treturn this.fromBufferAttribute( attribute, index, offset );\n\n};\n\nVector4.prototype.lengthManhattan = function () {\n\n\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\n\treturn this.manhattanLength();\n\n};\n\n//\n\nObject3D.prototype.getChildByName = function ( name ) {\n\n\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\treturn this.getObjectByName( name );\n\n};\n\nObject3D.prototype.renderDepth = function () {\n\n\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\n};\n\nObject3D.prototype.translate = function ( distance, axis ) {\n\n\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\treturn this.translateOnAxis( axis, distance );\n\n};\n\nObject3D.prototype.getWorldRotation = function () {\n\n\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\n\n};\n\nObject3D.prototype.applyMatrix = function ( matrix ) {\n\n\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\n\treturn this.applyMatrix4( matrix );\n\n};\n\nObject.defineProperties( Object3D.prototype, {\n\n\teulerOrder: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\treturn this.rotation.order;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\tthis.rotation.order = value;\n\n\t\t}\n\t},\n\tuseQuaternion: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t}\n\t}\n\n} );\n\nMesh.prototype.setDrawMode = function () {\n\n\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n};\n\nObject.defineProperties( Mesh.prototype, {\n\n\tdrawMode: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\n\t\t\treturn TrianglesDrawMode;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( LOD.prototype, {\n\n\tobjects: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\treturn this.levels;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t},\n\tset: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t}\n\n} );\n\nSkinnedMesh.prototype.initBones = function () {\n\n\tconsole.error( 'THREE.SkinnedMesh: initBones() has been removed.' );\n\n};\n\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\treturn this.arcLengthDivisions;\n\n\t},\n\tset: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\tthis.arcLengthDivisions = value;\n\n\t}\n\n} );\n\n//\n\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\tconsole.warn( 'THREE.PerspectiveCamera.setLens is deprecated. ' +\n\t\t\t'Use .setFocalLength and .filmGauge for a photographic setup.' );\n\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\tthis.setFocalLength( focalLength );\n\n};\n\n//\n\nObject.defineProperties( Light.prototype, {\n\tonlyShadow: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\n\t\t}\n\t},\n\tshadowCameraFov: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\tthis.shadow.camera.fov = value;\n\n\t\t}\n\t},\n\tshadowCameraLeft: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\tthis.shadow.camera.left = value;\n\n\t\t}\n\t},\n\tshadowCameraRight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\tthis.shadow.camera.right = value;\n\n\t\t}\n\t},\n\tshadowCameraTop: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\tthis.shadow.camera.top = value;\n\n\t\t}\n\t},\n\tshadowCameraBottom: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\tthis.shadow.camera.bottom = value;\n\n\t\t}\n\t},\n\tshadowCameraNear: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\tthis.shadow.camera.near = value;\n\n\t\t}\n\t},\n\tshadowCameraFar: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\tthis.shadow.camera.far = value;\n\n\t\t}\n\t},\n\tshadowCameraVisible: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\n\t\t}\n\t},\n\tshadowBias: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\tthis.shadow.bias = value;\n\n\t\t}\n\t},\n\tshadowDarkness: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\n\t\t}\n\t},\n\tshadowMapWidth: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\tthis.shadow.mapSize.width = value;\n\n\t\t}\n\t},\n\tshadowMapHeight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\tthis.shadow.mapSize.height = value;\n\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( BufferAttribute.prototype, {\n\n\tlength: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\n\t\t\treturn this.array.length;\n\n\t\t}\n\t},\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( DynamicDrawUsage );\n\n\t\t}\n\t}\n\n} );\n\nBufferAttribute.prototype.setDynamic = function ( value ) {\n\n\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\treturn this;\n\n};\n\nBufferAttribute.prototype.copyIndicesArray = function ( /* indices */ ) {\n\n\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\n\n},\n\nBufferAttribute.prototype.setArray = function ( /* array */ ) {\n\n\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n};\n\n//\n\nBufferGeometry.prototype.addIndex = function ( index ) {\n\n\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\tthis.setIndex( index );\n\n};\n\nBufferGeometry.prototype.addAttribute = function ( name, attribute ) {\n\n\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\n\n\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t}\n\n\tif ( name === 'index' ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\tthis.setIndex( attribute );\n\n\t\treturn this;\n\n\t}\n\n\treturn this.setAttribute( name, attribute );\n\n};\n\nBufferGeometry.prototype.addDrawCall = function ( start, count, indexOffset ) {\n\n\tif ( indexOffset !== undefined ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\n\t}\n\n\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\tthis.addGroup( start, count );\n\n};\n\nBufferGeometry.prototype.clearDrawCalls = function () {\n\n\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\tthis.clearGroups();\n\n};\n\nBufferGeometry.prototype.computeOffsets = function () {\n\n\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\n};\n\nBufferGeometry.prototype.removeAttribute = function ( name ) {\n\n\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\n\n\treturn this.deleteAttribute( name );\n\n};\n\nBufferGeometry.prototype.applyMatrix = function ( matrix ) {\n\n\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\treturn this.applyMatrix4( matrix );\n\n};\n\nObject.defineProperties( BufferGeometry.prototype, {\n\n\tdrawcalls: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t},\n\toffsets: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InstancedBufferGeometry.prototype, {\n\n\tmaxInstancedCount: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\treturn this.instanceCount;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\tthis.instanceCount = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( Raycaster.prototype, {\n\n\tlinePrecision: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\treturn this.params.Line.threshold;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\tthis.params.Line.threshold = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InterleavedBuffer.prototype, {\n\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( value );\n\n\t\t}\n\t}\n\n} );\n\nInterleavedBuffer.prototype.setDynamic = function ( value ) {\n\n\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\treturn this;\n\n};\n\nInterleavedBuffer.prototype.setArray = function ( /* array */ ) {\n\n\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n};\n\n//\n\nScene.prototype.dispose = function () {\n\n\tconsole.error( 'THREE.Scene: .dispose() has been removed.' );\n\n};\n\n//\n\nObject.defineProperties( Uniform.prototype, {\n\n\tdynamic: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\n\n\t\t}\n\t},\n\tonUpdate: {\n\t\tvalue: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\n\t\t\treturn this;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Material$1.prototype, {\n\n\twrapAround: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t}\n\t},\n\n\toverdraw: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t}\n\t},\n\n\twrapRGB: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\n\t\t\treturn new Color();\n\n\t\t}\n\t},\n\n\tshading: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\tthis.flatShading = ( value === FlatShading );\n\n\t\t}\n\t},\n\n\tstencilMask: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\treturn this.stencilFuncMask;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\tthis.stencilFuncMask = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhongMaterial.prototype, {\n\n\tmetal: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhysicalMaterial.prototype, {\n\n\ttransparency: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\n\t\t\treturn this.transmission;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\n\t\t\tthis.transmission = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( ShaderMaterial.prototype, {\n\n\tderivatives: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\treturn this.extensions.derivatives;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\tthis.extensions.derivatives = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nWebGLRenderer.prototype.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\n\tthis.setRenderTarget( renderTarget );\n\tthis.clear( color, depth, stencil );\n\n};\n\nWebGLRenderer.prototype.animate = function ( callback ) {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\n\tthis.setAnimationLoop( callback );\n\n};\n\nWebGLRenderer.prototype.getCurrentRenderTarget = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\n\treturn this.getRenderTarget();\n\n};\n\nWebGLRenderer.prototype.getMaxAnisotropy = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\n\treturn this.capabilities.getMaxAnisotropy();\n\n};\n\nWebGLRenderer.prototype.getPrecision = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\n\treturn this.capabilities.precision;\n\n};\n\nWebGLRenderer.prototype.resetGLState = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\n\treturn this.state.reset();\n\n};\n\nWebGLRenderer.prototype.supportsFloatTextures = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\treturn this.extensions.get( 'OES_texture_float' );\n\n};\n\nWebGLRenderer.prototype.supportsHalfFloatTextures = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\treturn this.extensions.get( 'OES_texture_half_float' );\n\n};\n\nWebGLRenderer.prototype.supportsStandardDerivatives = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\treturn this.extensions.get( 'OES_standard_derivatives' );\n\n};\n\nWebGLRenderer.prototype.supportsCompressedTextureS3TC = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n};\n\nWebGLRenderer.prototype.supportsCompressedTexturePVRTC = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n};\n\nWebGLRenderer.prototype.supportsBlendMinMax = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\treturn this.extensions.get( 'EXT_blend_minmax' );\n\n};\n\nWebGLRenderer.prototype.supportsVertexTextures = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\n\treturn this.capabilities.vertexTextures;\n\n};\n\nWebGLRenderer.prototype.supportsInstancedArrays = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\n};\n\nWebGLRenderer.prototype.enableScissorTest = function ( boolean ) {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\tthis.setScissorTest( boolean );\n\n};\n\nWebGLRenderer.prototype.initMaterial = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.addPrePlugin = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.addPostPlugin = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.updateShadowMap = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.setFaceCulling = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.allocTextureUnit = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.setTexture = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.setTexture2D = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.setTextureCube = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\n\n};\n\nWebGLRenderer.prototype.getActiveMipMapLevel = function () {\n\n\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\n\treturn this.getActiveMipmapLevel();\n\n};\n\nObject.defineProperties( WebGLRenderer.prototype, {\n\n\tshadowMapEnabled: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.enabled;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\tthis.shadowMap.enabled = value;\n\n\t\t}\n\t},\n\tshadowMapType: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\tthis.shadowMap.type = value;\n\n\t\t}\n\t},\n\tshadowMapCullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\tcontext: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\n\t\t\treturn this.getContext();\n\n\t\t}\n\t},\n\tvr: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\n\t\t\treturn this.xr;\n\n\t\t}\n\t},\n\tgammaInput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\n\t\t}\n\t},\n\tgammaOutput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\n\n\t\t}\n\t},\n\ttoneMappingWhitePoint: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\t\t\treturn 1.0;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\n\t\t}\n\t},\n\n} );\n\nObject.defineProperties( WebGLShadowMap.prototype, {\n\n\tcullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* cullFace */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderReverseSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderSingleSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( WebGLRenderTarget.prototype, {\n\n\twrapS: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\treturn this.texture.wrapS;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\tthis.texture.wrapS = value;\n\n\t\t}\n\t},\n\twrapT: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\treturn this.texture.wrapT;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\tthis.texture.wrapT = value;\n\n\t\t}\n\t},\n\tmagFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\treturn this.texture.magFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\tthis.texture.magFilter = value;\n\n\t\t}\n\t},\n\tminFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\treturn this.texture.minFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\tthis.texture.minFilter = value;\n\n\t\t}\n\t},\n\tanisotropy: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\treturn this.texture.anisotropy;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\tthis.texture.anisotropy = value;\n\n\t\t}\n\t},\n\toffset: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\treturn this.texture.offset;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\tthis.texture.offset = value;\n\n\t\t}\n\t},\n\trepeat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\treturn this.texture.repeat;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\tthis.texture.repeat = value;\n\n\t\t}\n\t},\n\tformat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\treturn this.texture.format;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\tthis.texture.format = value;\n\n\t\t}\n\t},\n\ttype: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\treturn this.texture.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\tthis.texture.type = value;\n\n\t\t}\n\t},\n\tgenerateMipmaps: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\treturn this.texture.generateMipmaps;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\tthis.texture.generateMipmaps = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Audio.prototype, {\n\n\tload: {\n\t\tvalue: function ( file ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\n\t\t\tconst scope = this;\n\t\t\tconst audioLoader = new AudioLoader();\n\t\t\taudioLoader.load( file, function ( buffer ) {\n\n\t\t\t\tscope.setBuffer( buffer );\n\n\t\t\t} );\n\t\t\treturn this;\n\n\t\t}\n\t},\n\tstartTime: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\n\n\t\t}\n\t}\n\n} );\n\n//\n\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\n\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\n\treturn this.update( renderer, scene );\n\n};\n\nCubeCamera.prototype.clear = function ( renderer, color, depth, stencil ) {\n\n\tconsole.warn( 'THREE.CubeCamera: .clear() is now .renderTarget.clear().' );\n\treturn this.renderTarget.clear( renderer, color, depth, stencil );\n\n};\n\nImageUtils.crossOrigin = undefined;\n\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\n\n\tconst loader = new TextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( url, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\n\n\tconst loader = new CubeTextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( urls, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadCompressedTexture = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nImageUtils.loadCompressedTextureCube = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t/* eslint-disable no-undef */\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\t/* eslint-enable no-undef */\n\n}\n\nif ( typeof window !== 'undefined' ) {\n\n\tif ( window.__THREE__ ) {\n\n\t\tconsole.warn( 'WARNING: Multiple instances of Three.js being imported.' );\n\n\t} else {\n\n\t\twindow.__THREE__ = REVISION;\n\n\t}\n\n}\n\nvar DRACOLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.decoderPath = '';\n\tthis.decoderConfig = {};\n\tthis.decoderBinary = null;\n\tthis.decoderPending = null;\n\n\tthis.workerLimit = 4;\n\tthis.workerPool = [];\n\tthis.workerNextTaskID = 1;\n\tthis.workerSourceURL = '';\n\n\tthis.defaultAttributeIDs = {\n\t\tposition: 'POSITION',\n\t\tnormal: 'NORMAL',\n\t\tcolor: 'COLOR',\n\t\tuv: 'TEX_COORD'\n\t};\n\tthis.defaultAttributeTypes = {\n\t\tposition: 'Float32Array',\n\t\tnormal: 'Float32Array',\n\t\tcolor: 'Float32Array',\n\t\tuv: 'Float32Array'\n\t};\n\n};\n\nDRACOLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DRACOLoader,\n\n\tsetDecoderPath: function ( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t},\n\n\tsetDecoderConfig: function ( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t},\n\n\tsetWorkerLimit: function ( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t},\n\n\t/** @deprecated */\n\tsetVerbosity: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setVerbosity() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetDrawMode: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setDrawMode() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetSkipDequantization: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setSkipDequantization() method has been removed.' );\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tvar taskConfig = {\n\t\t\t\tattributeIDs: this.defaultAttributeIDs,\n\t\t\t\tattributeTypes: this.defaultAttributeTypes,\n\t\t\t\tuseUniqueIDs: false\n\t\t\t};\n\n\t\t\tthis.decodeGeometry( buffer, taskConfig )\n\t\t\t\t.then( onLoad )\n\t\t\t\t.catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\tdecodeDracoFile: function ( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tvar taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\tthis.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t},\n\n\tdecodeGeometry: function ( buffer, taskConfig ) {\n\n\t\t// TODO: For backward-compatibility, support 'attributeTypes' objects containing\n\t\t// references (rather than names) to typed array constructors. These must be\n\t\t// serialized before sending them to the worker.\n\t\tfor ( var attribute in taskConfig.attributeTypes ) {\n\n\t\t\tvar type = taskConfig.attributeTypes[ attribute ];\n\n\t\t\tif ( type.BYTES_PER_ELEMENT !== undefined ) {\n\n\t\t\t\ttaskConfig.attributeTypes[ attribute ] = type.name;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( DRACOLoader.taskCache.has( buffer ) ) {\n\n\t\t\tvar cachedTask = DRACOLoader.taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar worker;\n\t\tvar taskID = this.workerNextTaskID ++;\n\t\tvar taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tvar geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\tDRACOLoader.taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t},\n\n\t_createGeometry: function ( geometryData ) {\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tvar attribute = geometryData.attributes[ i ];\n\t\t\tvar name = attribute.name;\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\t_loadLibrary: function ( url, responseType ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t},\n\n\tpreload: function () {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t},\n\n\t_initDecoder: function () {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tvar useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tvar librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tvar jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tvar fn = DRACOLoader.DRACOWorker.toString();\n\n\t\t\t\tvar body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t},\n\n\t_getWorker: function ( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tvar worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tvar message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t},\n\n\t_releaseTask: function ( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t},\n\n\tdebug: function () {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t},\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/* WEB WORKER */\n\nDRACOLoader.DRACOWorker = function () {\n\n\tvar decoderConfig;\n\tvar decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tvar message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tvar buffer = message.buffer;\n\t\t\t\tvar taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tvar draco = module.draco;\n\t\t\t\t\tvar decoder = new draco.Decoder();\n\t\t\t\t\tvar decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tvar buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tvar attributeIDs = taskConfig.attributeIDs;\n\t\tvar attributeTypes = taskConfig.attributeTypes;\n\n\t\tvar dracoGeometry;\n\t\tvar decodingStatus;\n\n\t\tvar geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tvar geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( var attributeName in attributeIDs ) {\n\n\t\t\tvar attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tvar attribute;\n\t\t\tvar attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tvar numFaces = dracoGeometry.num_faces();\n\t\tvar numIndices = numFaces * 3;\n\t\tvar byteLength = numIndices * 4;\n\n\t\tvar ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tvar index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tvar numComponents = attribute.num_components();\n\t\tvar numPoints = dracoGeometry.num_points();\n\t\tvar numValues = numPoints * numComponents;\n\t\tvar byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tvar dataType = getDracoDataType( draco, attributeType );\n\n\t\tvar ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tvar array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n};\n\nDRACOLoader.taskCache = new WeakMap();\n\n/** Deprecated static methods */\n\n/** @deprecated */\nDRACOLoader.setDecoderPath = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.setDecoderConfig = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.releaseDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.getDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function () {\n\n\t\t\tthrow new Error(\n\n\t\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t\t);\n\n\t\t},\n\n\t\tsetKTX2Loader: function ( ktx2Loader ) {\n\n\t\t\tthis.ktx2Loader = ktx2Loader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetMeshoptDecoder: function ( meshoptDecoder ) {\n\n\t\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\t\t\tvar plugins = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\trequestHeader: this.requestHeader,\n\t\t\t\tmanager: this.manager,\n\t\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t\t} );\n\n\t\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\t\tfor ( var i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\t\tvar plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t\t// Remove this workaround if we move all the existing\n\t\t\t\t// extension handlers to plugin system\n\t\t\t\textensions[ plugin.name ] = true;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.setExtensions( extensions );\n\t\t\tparser.setPlugins( plugins );\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\t\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n\t};\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\tGLTFLightsExtension.prototype._markDefs = function () {\n\n\t\tvar parser = this.parser;\n\t\tvar nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tGLTFLightsExtension.prototype._loadLight = function ( lightIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar cacheKey = 'light:' + lightIndex;\n\t\tvar dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tvar json = parser.json;\n\t\tvar extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tvar lightDefs = extensions.lights || [];\n\t\tvar lightDef = lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t};\n\n\tGLTFLightsExtension.prototype.createNodeAttachment = function ( nodeIndex ) {\n\n\t\tvar self = this;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\t\tvar lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tvar lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\tfunction GLTFMaterialsClearcoatExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsClearcoatExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, - scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Transmission Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n\t * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n\t */\n\tfunction GLTFMaterialsTransmissionExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tGLTFMaterialsTransmissionExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsTransmissionExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * BasisU Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n\t */\n\tfunction GLTFTextureBasisUExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tGLTFTextureBasisUExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ this.name ];\n\t\tvar source = json.images[ extension.source ];\n\t\tvar loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\t/**\n\t * WebP Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n\t */\n\tfunction GLTFTextureWebPExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tGLTFTextureWebPExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar name = this.name;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ name ];\n\t\tvar source = json.images[ extension.source ];\n\n\t\tvar loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tvar handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t};\n\n\tGLTFTextureWebPExtension.prototype.detectSupport = function () {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tvar image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t};\n\n\t/**\n\t* meshopt BufferView Compression Extension\n\t*\n\t* Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n\t*/\n\tfunction GLTFMeshoptCompression( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tGLTFMeshoptCompression.prototype.loadBufferView = function ( index ) {\n\n\t\tvar json = this.parser.json;\n\t\tvar bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tvar extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tvar buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tvar decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tvar byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tvar byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tvar count = extensionDef.count;\n\t\t\t\tvar stride = extensionDef.byteStride;\n\n\t\t\t\tvar result = new ArrayBuffer( count * stride );\n\t\t\t\tvar source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.setExtensions = function ( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t};\n\n\tGLTFParser.prototype.setPlugins = function ( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t};\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype._markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\tGLTFParser.prototype._addNodeRef = function ( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t};\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\tGLTFParser.prototype._getNodeRef = function ( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tvar ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t};\n\n\tGLTFParser.prototype._invokeOne = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t};\n\n\tGLTFParser.prototype._invokeAll = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\t\tvar textureDef = json.textures[ textureIndex ];\n\t\tvar source = json.images[ textureDef.source ];\n\n\t\tvar loader = this.textureLoader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tvar handler = options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\tGLTFParser.prototype.loadTextureImage = function ( textureIndex, source, loader ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar URL = self.URL || self.webkitURL;\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\t\tvar hasAlpha = true;\n\n\t\tif ( source.mimeType === 'image/jpeg' ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n\t\t\t\t\t// alpha channel. This check is conservative  the image could have an alpha\n\t\t\t\t\t// channel with all values == 1, and the indexed type (colorType == 3) only\n\t\t\t\t\t// sometimes contains alpha.\n\t\t\t\t\t//\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\tvar colorType = new DataView( bufferView, 25, 1 ).getUint8( 0, false );\n\t\t\t\t\thasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( source.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tvar onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tresolve( new CanvasTexture( imageBitmap ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = RGBFormat;\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tvar gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial$1.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial$1.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tif ( useVertexTangents ) {\n\n\t\t\t\t\tcachedMaterial.vertexTangents = true;\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\tGLTFParser.prototype.getMaterialType = function ( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\tmaterialParams.normalScale = new Vector2( 1, - 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, - materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tGLTFParser.prototype.createUniqueName = function ( originalName ) {\n\n\t\tvar sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tvar name = sanitizedName;\n\n\t\tfor ( var i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar maxDisplacement = new Vector3();\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\tbox.expandByVector( maxDisplacement );\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tvar nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\n/**\n * Loader for Basis Universal GPU Texture Codec.\n *\n * Basis Universal is a \"supercompressed\" GPU texture and texture video\n * compression system that outputs a highly compressed intermediate file format\n * (.basis) that can be quickly transcoded to a wide variety of GPU texture\n * compression formats.\n *\n * This loader parallelizes the transcoding process across a configurable number\n * of web workers, before transferring the transcoded compressed texture back\n * to the main thread.\n */\nvar BasisTextureLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.transcoderPath = '';\n\tthis.transcoderBinary = null;\n\tthis.transcoderPending = null;\n\n\tthis.workerLimit = 4;\n\tthis.workerPool = [];\n\tthis.workerNextTaskID = 1;\n\tthis.workerSourceURL = '';\n\tthis.workerConfig = null;\n\n};\n\nBasisTextureLoader.taskCache = new WeakMap();\n\nBasisTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: BasisTextureLoader,\n\n\tsetTranscoderPath: function ( path ) {\n\n\t\tthis.transcoderPath = path;\n\n\t\treturn this;\n\n\t},\n\n\tsetWorkerLimit: function ( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t},\n\n\tdetectSupport: function ( renderer ) {\n\n\t\tthis.workerConfig = {\n\t\t\tastcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' ),\n\t\t\tetc1Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc1' ),\n\t\t\tetc2Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc' ),\n\t\t\tdxtSupported: renderer.extensions.has( 'WEBGL_compressed_texture_s3tc' ),\n\t\t\tbptcSupported: renderer.extensions.has( 'EXT_texture_compression_bptc' ),\n\t\t\tpvrtcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_pvrtc' )\n\t\t\t\t|| renderer.extensions.has( 'WEBKIT_WEBGL_compressed_texture_pvrtc' )\n\t\t};\n\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tvar texture = new CompressedTexture();\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t\t// again from this thread.\n\t\t\tif ( BasisTextureLoader.taskCache.has( buffer ) ) {\n\n\t\t\t\tvar cachedTask = BasisTextureLoader.taskCache.get( buffer );\n\n\t\t\t\treturn cachedTask.promise.then( onLoad ).catch( onError );\n\n\t\t\t}\n\n\t\t\tthis._createTexture( [ buffer ] )\n\t\t\t\t.then( function ( _texture ) {\n\n\t\t\t\t\ttexture.copy( _texture );\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t} )\n\t\t\t\t.catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t},\n\n\t/** Low-level transcoding API, exposed for use by KTX2Loader. */\n\tparseInternalAsync: function ( options ) {\n\n\t\tvar { levels } = options;\n\n\t\tvar buffers = new Set();\n\n\t\tfor ( var i = 0; i < levels.length; i ++ ) {\n\n\t\t\tbuffers.add( levels[ i ].data.buffer );\n\n\t\t}\n\n\t\treturn this._createTexture( Array.from( buffers ), { ...options, lowLevel: true } );\n\n\t},\n\n\t/**\n\t * @param {ArrayBuffer[]} buffers\n\t * @param {object?} config\n\t * @return {Promise<CompressedTexture>}\n\t */\n\t_createTexture: function ( buffers, config ) {\n\n\t\tvar worker;\n\t\tvar taskID;\n\n\t\tvar taskConfig = config || {};\n\t\tvar taskCost = 0;\n\n\t\tfor ( var i = 0; i < buffers.length; i ++ ) {\n\n\t\t\ttaskCost += buffers[ i ].byteLength;\n\n\t\t}\n\n\t\tvar texturePending = this._allocateWorker( taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\t\t\t\ttaskID = this.workerNextTaskID ++;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'transcode', id: taskID, buffers: buffers, taskConfig: taskConfig }, buffers );\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => {\n\n\t\t\t\tvar { mipmaps, width, height, format } = message;\n\n\t\t\t\tvar texture = new CompressedTexture( mipmaps, width, height, format, UnsignedByteType );\n\t\t\t\ttexture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\treturn texture;\n\n\t\t\t} );\n\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\ttexturePending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tworker._taskLoad -= taskCost;\n\t\t\t\t\tdelete worker._callbacks[ taskID ];\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\tBasisTextureLoader.taskCache.set( buffers[ 0 ], { promise: texturePending } );\n\n\t\treturn texturePending;\n\n\t},\n\n\t_initTranscoder: function () {\n\n\t\tif ( ! this.transcoderPending ) {\n\n\t\t\t// Load transcoder wrapper.\n\t\t\tvar jsLoader = new FileLoader( this.manager );\n\t\t\tjsLoader.setPath( this.transcoderPath );\n\t\t\tjsLoader.setWithCredentials( this.withCredentials );\n\t\t\tvar jsContent = new Promise( ( resolve, reject ) => {\n\n\t\t\t\tjsLoader.load( 'basis_transcoder.js', resolve, undefined, reject );\n\n\t\t\t} );\n\n\t\t\t// Load transcoder WASM binary.\n\t\t\tvar binaryLoader = new FileLoader( this.manager );\n\t\t\tbinaryLoader.setPath( this.transcoderPath );\n\t\t\tbinaryLoader.setResponseType( 'arraybuffer' );\n\t\t\tbinaryLoader.setWithCredentials( this.withCredentials );\n\t\t\tvar binaryContent = new Promise( ( resolve, reject ) => {\n\n\t\t\t\tbinaryLoader.load( 'basis_transcoder.wasm', resolve, undefined, reject );\n\n\t\t\t} );\n\n\t\t\tthis.transcoderPending = Promise.all( [ jsContent, binaryContent ] )\n\t\t\t\t.then( ( [ jsContent, binaryContent ] ) => {\n\n\t\t\t\t\tvar fn = BasisTextureLoader.BasisWorker.toString();\n\n\t\t\t\t\tvar body = [\n\t\t\t\t\t\t'/* constants */',\n\t\t\t\t\t\t'var _EngineFormat = ' + JSON.stringify( BasisTextureLoader.EngineFormat ),\n\t\t\t\t\t\t'var _TranscoderFormat = ' + JSON.stringify( BasisTextureLoader.TranscoderFormat ),\n\t\t\t\t\t\t'var _BasisFormat = ' + JSON.stringify( BasisTextureLoader.BasisFormat ),\n\t\t\t\t\t\t'/* basis_transcoder.js */',\n\t\t\t\t\t\tjsContent,\n\t\t\t\t\t\t'/* worker */',\n\t\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t\t].join( '\\n' );\n\n\t\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\t\t\t\t\tthis.transcoderBinary = binaryContent;\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\treturn this.transcoderPending;\n\n\t},\n\n\t_allocateWorker: function ( taskCost ) {\n\n\t\treturn this._initTranscoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tvar worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( {\n\t\t\t\t\ttype: 'init',\n\t\t\t\t\tconfig: this.workerConfig,\n\t\t\t\t\ttranscoderBinary: this.transcoderBinary,\n\t\t\t\t} );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tvar message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'transcode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.BasisTextureLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar worker = this.workerPool[ this.workerPool.length - 1 ];\n\n\t\t\tworker._taskLoad += taskCost;\n\n\t\t\treturn worker;\n\n\t\t} );\n\n\t},\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.workerPool.length; i ++ ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/* CONSTANTS */\n\nBasisTextureLoader.BasisFormat = {\n\tETC1S: 0,\n\tUASTC_4x4: 1,\n};\n\nBasisTextureLoader.TranscoderFormat = {\n\tETC1: 0,\n\tETC2: 1,\n\tBC1: 2,\n\tBC3: 3,\n\tBC4: 4,\n\tBC5: 5,\n\tBC7_M6_OPAQUE_ONLY: 6,\n\tBC7_M5: 7,\n\tPVRTC1_4_RGB: 8,\n\tPVRTC1_4_RGBA: 9,\n\tASTC_4x4: 10,\n\tATC_RGB: 11,\n\tATC_RGBA_INTERPOLATED_ALPHA: 12,\n\tRGBA32: 13,\n\tRGB565: 14,\n\tBGR565: 15,\n\tRGBA4444: 16,\n};\n\nBasisTextureLoader.EngineFormat = {\n\tRGBAFormat: RGBAFormat,\n\tRGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\n\tRGBA_BPTC_Format: RGBA_BPTC_Format,\n\tRGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\n\tRGB_ETC1_Format: RGB_ETC1_Format,\n\tRGB_ETC2_Format: RGB_ETC2_Format,\n\tRGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\n\tRGB_S3TC_DXT1_Format: RGB_S3TC_DXT1_Format,\n};\n\n\n/* WEB WORKER */\n\nBasisTextureLoader.BasisWorker = function () {\n\n\tvar config;\n\tvar transcoderPending;\n\tvar BasisModule;\n\n\tvar EngineFormat = _EngineFormat; // eslint-disable-line no-undef\n\tvar TranscoderFormat = _TranscoderFormat; // eslint-disable-line no-undef\n\tvar BasisFormat = _BasisFormat; // eslint-disable-line no-undef\n\n\tonmessage = function ( e ) {\n\n\t\tvar message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tconfig = message.config;\n\t\t\t\tinit( message.transcoderBinary );\n\t\t\t\tbreak;\n\n\t\t\tcase 'transcode':\n\t\t\t\ttranscoderPending.then( () => {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar { width, height, hasAlpha, mipmaps, format } = message.taskConfig.lowLevel\n\t\t\t\t\t\t\t? transcodeLowLevel( message.taskConfig )\n\t\t\t\t\t\t\t: transcode( message.buffers[ 0 ] );\n\n\t\t\t\t\t\tvar buffers = [];\n\n\t\t\t\t\t\tfor ( var i = 0; i < mipmaps.length; ++ i ) {\n\n\t\t\t\t\t\t\tbuffers.push( mipmaps[ i ].data.buffer );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself.postMessage( { type: 'transcode', id: message.id, width, height, hasAlpha, mipmaps, format }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction init( wasmBinary ) {\n\n\t\ttranscoderPending = new Promise( ( resolve ) => {\n\n\t\t\tBasisModule = { wasmBinary, onRuntimeInitialized: resolve };\n\t\t\tBASIS( BasisModule ); // eslint-disable-line no-undef\n\n\t\t} ).then( () => {\n\n\t\t\tBasisModule.initializeBasis();\n\n\t\t} );\n\n\t}\n\n\tfunction transcodeLowLevel( taskConfig ) {\n\n\t\tvar { basisFormat, width, height, hasAlpha } = taskConfig;\n\n\t\tvar { transcoderFormat, engineFormat } = getTranscoderFormat( basisFormat, width, height, hasAlpha );\n\n\t\tvar blockByteLength = BasisModule.getBytesPerBlockOrPixel( transcoderFormat );\n\n\t\tassert( BasisModule.isFormatSupported( transcoderFormat ), 'THREE.BasisTextureLoader: Unsupported format.' );\n\n\t\tvar mipmaps = [];\n\n\t\tif ( basisFormat === BasisFormat.ETC1S ) {\n\n\t\t\tvar transcoder = new BasisModule.LowLevelETC1SImageTranscoder();\n\n\t\t\tvar { endpointCount, endpointsData, selectorCount, selectorsData, tablesData } = taskConfig.globalData;\n\n\t\t\ttry {\n\n\t\t\t\tvar ok;\n\n\t\t\t\tok = transcoder.decodePalettes( endpointCount, endpointsData, selectorCount, selectorsData );\n\n\t\t\t\tassert( ok, 'THREE.BasisTextureLoader: decodePalettes() failed.' );\n\n\t\t\t\tok = transcoder.decodeTables( tablesData );\n\n\t\t\t\tassert( ok, 'THREE.BasisTextureLoader: decodeTables() failed.' );\n\n\t\t\t\tfor ( var i = 0; i < taskConfig.levels.length; i ++ ) {\n\n\t\t\t\t\tvar level = taskConfig.levels[ i ];\n\t\t\t\t\tvar imageDesc = taskConfig.globalData.imageDescs[ i ];\n\n\t\t\t\t\tvar dstByteLength = getTranscodedImageByteLength( transcoderFormat, level.width, level.height );\n\t\t\t\t\tvar dst = new Uint8Array( dstByteLength );\n\n\t\t\t\t\tok = transcoder.transcodeImage(\n\t\t\t\t\t\ttranscoderFormat,\n\t\t\t\t\t\tdst, dstByteLength / blockByteLength,\n\t\t\t\t\t\tlevel.data,\n\t\t\t\t\t\tgetWidthInBlocks( transcoderFormat, level.width ),\n\t\t\t\t\t\tgetHeightInBlocks( transcoderFormat, level.height ),\n\t\t\t\t\t\tlevel.width, level.height, level.index,\n\t\t\t\t\t\timageDesc.rgbSliceByteOffset, imageDesc.rgbSliceByteLength,\n\t\t\t\t\t\timageDesc.alphaSliceByteOffset, imageDesc.alphaSliceByteLength,\n\t\t\t\t\t\timageDesc.imageFlags,\n\t\t\t\t\t\thasAlpha,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t0, 0\n\t\t\t\t\t);\n\n\t\t\t\t\tassert( ok, 'THREE.BasisTextureLoader: transcodeImage() failed for level ' + level.index + '.' );\n\n\t\t\t\t\tmipmaps.push( { data: dst, width: level.width, height: level.height } );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\ttranscoder.delete();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < taskConfig.levels.length; i ++ ) {\n\n\t\t\t\tvar level = taskConfig.levels[ i ];\n\n\t\t\t\tvar dstByteLength = getTranscodedImageByteLength( transcoderFormat, level.width, level.height );\n\t\t\t\tvar dst = new Uint8Array( dstByteLength );\n\n\t\t\t\tvar ok = BasisModule.transcodeUASTCImage(\n\t\t\t\t\ttranscoderFormat,\n\t\t\t\t\tdst, dstByteLength / blockByteLength,\n\t\t\t\t\tlevel.data,\n\t\t\t\t\tgetWidthInBlocks( transcoderFormat, level.width ),\n\t\t\t\t\tgetHeightInBlocks( transcoderFormat, level.height ),\n\t\t\t\t\tlevel.width, level.height, level.index,\n\t\t\t\t\t0,\n\t\t\t\t\tlevel.data.byteLength,\n\t\t\t\t\t0,\n\t\t\t\t\thasAlpha,\n\t\t\t\t\tfalse,\n\t\t\t\t\t0, 0,\n\t\t\t\t\t- 1, - 1\n\t\t\t\t);\n\n\t\t\t\tassert( ok, 'THREE.BasisTextureLoader: transcodeUASTCImage() failed for level ' + level.index + '.' );\n\n\t\t\t\tmipmaps.push( { data: dst, width: level.width, height: level.height } );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn { width, height, hasAlpha, mipmaps, format: engineFormat };\n\n\t}\n\n\tfunction transcode( buffer ) {\n\n\t\tvar basisFile = new BasisModule.BasisFile( new Uint8Array( buffer ) );\n\n\t\tvar basisFormat = basisFile.isUASTC() ? BasisFormat.UASTC_4x4 : BasisFormat.ETC1S;\n\t\tvar width = basisFile.getImageWidth( 0, 0 );\n\t\tvar height = basisFile.getImageHeight( 0, 0 );\n\t\tvar levels = basisFile.getNumLevels( 0 );\n\t\tvar hasAlpha = basisFile.getHasAlpha();\n\n\t\tfunction cleanup() {\n\n\t\t\tbasisFile.close();\n\t\t\tbasisFile.delete();\n\n\t\t}\n\n\t\tvar { transcoderFormat, engineFormat } = getTranscoderFormat( basisFormat, width, height, hasAlpha );\n\n\t\tif ( ! width || ! height || ! levels ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.BasisTextureLoader:\tInvalid texture' );\n\n\t\t}\n\n\t\tif ( ! basisFile.startTranscoding() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.BasisTextureLoader: .startTranscoding failed' );\n\n\t\t}\n\n\t\tvar mipmaps = [];\n\n\t\tfor ( var mip = 0; mip < levels; mip ++ ) {\n\n\t\t\tvar mipWidth = basisFile.getImageWidth( 0, mip );\n\t\t\tvar mipHeight = basisFile.getImageHeight( 0, mip );\n\t\t\tvar dst = new Uint8Array( basisFile.getImageTranscodedSizeInBytes( 0, mip, transcoderFormat ) );\n\n\t\t\tvar status = basisFile.transcodeImage(\n\t\t\t\tdst,\n\t\t\t\t0,\n\t\t\t\tmip,\n\t\t\t\ttranscoderFormat,\n\t\t\t\t0,\n\t\t\t\thasAlpha\n\t\t\t);\n\n\t\t\tif ( ! status ) {\n\n\t\t\t\tcleanup();\n\t\t\t\tthrow new Error( 'THREE.BasisTextureLoader: .transcodeImage failed.' );\n\n\t\t\t}\n\n\t\t\tmipmaps.push( { data: dst, width: mipWidth, height: mipHeight } );\n\n\t\t}\n\n\t\tcleanup();\n\n\t\treturn { width, height, hasAlpha, mipmaps, format: engineFormat };\n\n\t}\n\n\t//\n\n\t// Optimal choice of a transcoder target format depends on the Basis format (ETC1S or UASTC),\n\t// device capabilities, and texture dimensions. The list below ranks the formats separately\n\t// for ETC1S and UASTC.\n\t//\n\t// In some cases, transcoding UASTC to RGBA32 might be preferred for higher quality (at\n\t// significant memory cost) compared to ETC1/2, BC1/3, and PVRTC. The transcoder currently\n\t// chooses RGBA32 only as a last resort and does not expose that option to the caller.\n\tvar FORMAT_OPTIONS = [\n\t\t{\n\t\t\tif: 'astcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC_4x4 ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format ],\n\t\t\tpriorityETC1S: Infinity,\n\t\t\tpriorityUASTC: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format ],\n\t\t\tpriorityETC1S: 3,\n\t\t\tpriorityUASTC: 2,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'dxtSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC1, TranscoderFormat.BC3 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format ],\n\t\t\tpriorityETC1S: 4,\n\t\t\tpriorityUASTC: 5,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc2Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC2 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format ],\n\t\t\tpriorityETC1S: 1,\n\t\t\tpriorityUASTC: 3,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc1Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC1 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC1_Format, EngineFormat.RGB_ETC1_Format ],\n\t\t\tpriorityETC1S: 2,\n\t\t\tpriorityUASTC: 4,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'pvrtcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC_4x4 ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA ],\n\t\t\tengineFormat: [ EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format ],\n\t\t\tpriorityETC1S: 5,\n\t\t\tpriorityUASTC: 6,\n\t\t\tneedsPowerOfTwo: true,\n\t\t},\n\t];\n\n\tvar ETC1S_OPTIONS = FORMAT_OPTIONS.sort( function ( a, b ) {\n\n\t\treturn a.priorityETC1S - b.priorityETC1S;\n\n\t} );\n\tvar UASTC_OPTIONS = FORMAT_OPTIONS.sort( function ( a, b ) {\n\n\t\treturn a.priorityUASTC - b.priorityUASTC;\n\n\t} );\n\n\tfunction getTranscoderFormat( basisFormat, width, height, hasAlpha ) {\n\n\t\tvar transcoderFormat;\n\t\tvar engineFormat;\n\n\t\tvar options = basisFormat === BasisFormat.ETC1S ? ETC1S_OPTIONS : UASTC_OPTIONS;\n\n\t\tfor ( var i = 0; i < options.length; i ++ ) {\n\n\t\t\tvar opt = options[ i ];\n\n\t\t\tif ( ! config[ opt.if ] ) continue;\n\t\t\tif ( ! opt.basisFormat.includes( basisFormat ) ) continue;\n\t\t\tif ( opt.needsPowerOfTwo && ! ( isPowerOfTwo( width ) && isPowerOfTwo( height ) ) ) continue;\n\n\t\t\ttranscoderFormat = opt.transcoderFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tengineFormat = opt.engineFormat[ hasAlpha ? 1 : 0 ];\n\n\t\t\treturn { transcoderFormat, engineFormat };\n\n\t\t}\n\n\t\tconsole.warn( 'THREE.BasisTextureLoader: No suitable compressed texture format found. Decoding to RGBA32.' );\n\n\t\ttranscoderFormat = TranscoderFormat.RGBA32;\n\t\tengineFormat = EngineFormat.RGBAFormat;\n\n\t\treturn { transcoderFormat, engineFormat };\n\n\t}\n\n\tfunction assert( ok, message ) {\n\n\t\tif ( ! ok ) throw new Error( message );\n\n\t}\n\n\tfunction getWidthInBlocks( transcoderFormat, width ) {\n\n\t\treturn Math.ceil( width / BasisModule.getFormatBlockWidth( transcoderFormat ) );\n\n\t}\n\n\tfunction getHeightInBlocks( transcoderFormat, height ) {\n\n\t\treturn Math.ceil( height / BasisModule.getFormatBlockHeight( transcoderFormat ) );\n\n\t}\n\n\tfunction getTranscodedImageByteLength( transcoderFormat, width, height ) {\n\n\t\tvar blockByteLength = BasisModule.getBytesPerBlockOrPixel( transcoderFormat );\n\n\t\tif ( BasisModule.formatIsUncompressed( transcoderFormat ) ) {\n\n\t\t\treturn width * height * blockByteLength;\n\n\t\t}\n\n\t\tif ( transcoderFormat === TranscoderFormat.PVRTC1_4_RGB\n\t\t\t\t|| transcoderFormat === TranscoderFormat.PVRTC1_4_RGBA ) {\n\n\t\t\t// GL requires extra padding for very small textures:\n\t\t\t// https://www.khronos.org/registry/OpenGL/extensions/IMG/IMG_texture_compression_pvrtc.txt\n\t\t\tvar paddedWidth = ( width + 3 ) & ~ 3;\n\t\t\tvar paddedHeight = ( height + 3 ) & ~ 3;\n\n\t\t\treturn ( Math.max( 8, paddedWidth ) * Math.max( 8, paddedHeight ) * 4 + 7 ) / 8;\n\n\t\t}\n\n\t\treturn ( getWidthInBlocks( transcoderFormat, width )\n\t\t\t* getHeightInBlocks( transcoderFormat, height )\n\t\t\t* blockByteLength );\n\n\t}\n\n\tfunction isPowerOfTwo( value ) {\n\n\t\tif ( value <= 2 ) return true;\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t}\n\n};\n\n/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nlet init, instance, heap;\n\nconst importObject = {\n\n\tenv: {\n\n\t\temscripten_notify_memory_growth: function ( index ) {\n\n\t\t\theap = new Uint8Array( instance.exports.memory.buffer );\n\n\t\t}\n\n\t}\n\n};\n\n/**\n * ZSTD (Zstandard) decoder.\n *\n * Compiled from https://github.com/facebook/zstd/tree/dev/contrib/single_file_libs, with the\n * following steps:\n *\n * ```\n * ./combine.sh -r ../../lib -o zstddeclib.c zstddeclib-in.c\n * emcc zstddeclib.c -Oz -s EXPORTED_FUNCTIONS=\"['_ZSTD_decompress', '_ZSTD_findDecompressedSize', '_ZSTD_isError', '_malloc', '_free']\" -s ALLOW_MEMORY_GROWTH=1 -s MALLOC=emmalloc -o zstddec.wasm\n * base64 zstddec.wasm > zstddec.txt\n * ```\n *\n * The base64 string written to `zstddec.txt` is embedded as the `wasm` variable at the bottom\n * of this file. The rest of this file is written by hand, in order to avoid an additional JS\n * wrapper generated by Emscripten.\n */\nclass ZSTDDecoder {\n\n\tinit () {\n\n\t\tif ( ! init ) {\n\n\t\t\tinit = fetch( 'data:application/wasm;base64,' + wasm )\n\t\t\t\t.then( ( response ) => response.arrayBuffer() )\n\t\t\t\t.then( ( arrayBuffer ) => WebAssembly.instantiate( arrayBuffer, importObject ) )\n\t\t\t\t.then( ( result ) => {\n\n\t\t\t\t\tinstance = result.instance;\n\n\t\t\t\t\timportObject.env.emscripten_notify_memory_growth( 0 ); // initialize heap.\n\n\t\t\t\t});\n\n\t\t}\n\n\t\treturn init;\n\n\t}\n\n\tdecode ( array, uncompressedSize = 0 ) {\n\n\t\t// Write compressed data into WASM memory.\n\t\tconst compressedSize = array.byteLength;\n\t\tconst compressedPtr = instance.exports.malloc( compressedSize );\n\t\theap.set( array, compressedPtr );\n\n\t\t// Decompress into WASM memory.\n\t\tuncompressedSize = uncompressedSize || Number( instance.exports.ZSTD_findDecompressedSize( compressedPtr, compressedSize ) );\n\t\tconst uncompressedPtr = instance.exports.malloc( uncompressedSize );\n\t\tconst actualSize = instance.exports.ZSTD_decompress( uncompressedPtr, uncompressedSize, compressedPtr, compressedSize );\n\n\t\t// Read decompressed data and free WASM memory.\n\t\tconst dec = heap.slice( uncompressedPtr, uncompressedPtr + actualSize );\n\t\tinstance.exports.free( compressedPtr );\n\t\tinstance.exports.free( uncompressedPtr );\n\n\t\treturn dec;\n\n\t}\n\n}\n\n/**\n * BSD License\n *\n * For Zstandard software\n *\n * Copyright (c) 2016-present, Yann Collet, Facebook, Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n *  * Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n *  * Neither the name Facebook nor the names of its contributors may be used to\n *    endorse or promote products derived from this software without specific\n *    prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\nconst wasm = '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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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';\n\nconst e=[171,75,84,88,32,50,48,187,13,10,26,10];var n,i,s,a,r,o,l,f;!function(t){t[t.NONE=0]=\"NONE\",t[t.BASISLZ=1]=\"BASISLZ\",t[t.ZSTD=2]=\"ZSTD\",t[t.ZLIB=3]=\"ZLIB\";}(n||(n={})),function(t){t[t.BASICFORMAT=0]=\"BASICFORMAT\";}(i||(i={})),function(t){t[t.UNSPECIFIED=0]=\"UNSPECIFIED\",t[t.ETC1S=163]=\"ETC1S\",t[t.UASTC=166]=\"UASTC\";}(s||(s={})),function(t){t[t.UNSPECIFIED=0]=\"UNSPECIFIED\",t[t.SRGB=1]=\"SRGB\";}(a||(a={})),function(t){t[t.UNSPECIFIED=0]=\"UNSPECIFIED\",t[t.LINEAR=1]=\"LINEAR\",t[t.SRGB=2]=\"SRGB\",t[t.ITU=3]=\"ITU\",t[t.NTSC=4]=\"NTSC\",t[t.SLOG=5]=\"SLOG\",t[t.SLOG2=6]=\"SLOG2\";}(r||(r={})),function(t){t[t.ALPHA_STRAIGHT=0]=\"ALPHA_STRAIGHT\",t[t.ALPHA_PREMULTIPLIED=1]=\"ALPHA_PREMULTIPLIED\";}(o||(o={})),function(t){t[t.RGB=0]=\"RGB\",t[t.RRR=3]=\"RRR\",t[t.GGG=4]=\"GGG\",t[t.AAA=15]=\"AAA\";}(l||(l={})),function(t){t[t.RGB=0]=\"RGB\",t[t.RGBA=3]=\"RGBA\",t[t.RRR=4]=\"RRR\",t[t.RRRG=5]=\"RRRG\";}(f||(f={}));class U{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=n.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:i.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:s.UNSPECIFIED,colorPrimaries:a.SRGB,transferFunction:a.SRGB,flags:o.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null;}}class c{constructor(t,e,n,i){this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0;}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}function _(t){return \"undefined\"!=typeof TextDecoder?(new TextDecoder).decode(t):Buffer.from(t).toString(\"utf8\")}function p(t){const n=new Uint8Array(t.buffer,t.byteOffset,e.length);if(n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]||n[6]!==e[6]||n[7]!==e[7]||n[8]!==e[8]||n[9]!==e[9]||n[10]!==e[10]||n[11]!==e[11])throw new Error(\"Missing KTX 2.0 identifier.\");const i=new U,s=17*Uint32Array.BYTES_PER_ELEMENT,a=new c(t,e.length,s,!0);i.vkFormat=a._nextUint32(),i.typeSize=a._nextUint32(),i.pixelWidth=a._nextUint32(),i.pixelHeight=a._nextUint32(),i.pixelDepth=a._nextUint32(),i.layerCount=a._nextUint32(),i.faceCount=a._nextUint32();const r=a._nextUint32();i.supercompressionScheme=a._nextUint32();const o=a._nextUint32(),l=a._nextUint32(),f=a._nextUint32(),h=a._nextUint32(),g=a._nextUint64(),p=a._nextUint64(),x=new c(t,e.length+s,3*r*8,!0);for(let e=0;e<r;e++)i.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+x._nextUint64(),x._nextUint64()),uncompressedByteLength:x._nextUint64()});const u=new c(t,o,l,!0),y={vendorId:u._skip(4)._nextUint16(),descriptorType:u._nextUint16(),versionNumber:u._nextUint16(),descriptorBlockSize:u._nextUint16(),colorModel:u._nextUint8(),colorPrimaries:u._nextUint8(),transferFunction:u._nextUint8(),flags:u._nextUint8(),texelBlockDimension:{x:u._nextUint8()+1,y:u._nextUint8()+1,z:u._nextUint8()+1,w:u._nextUint8()+1},bytesPlane:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],samples:[]},D=(y.descriptorBlockSize/4-6)/4;for(let t=0;t<D;t++)y.samples[t]={bitOffset:u._nextUint16(),bitLength:u._nextUint8(),channelID:u._nextUint8(),samplePosition:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],sampleLower:u._nextUint32(),sampleUpper:u._nextUint32()};i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(y);const b=new c(t,f,h,!0);for(;b._offset<h;){const t=b._nextUint32(),e=b._scan(t),n=_(e),s=b._scan(t-e.byteLength);i.keyValue[n]=n.match(/^ktx/i)?_(s):s,b._offset%4&&b._skip(4-b._offset%4);}if(p<=0)return i;const d=new c(t,g,p,!0),B=d._nextUint16(),w=d._nextUint16(),A=d._nextUint32(),S=d._nextUint32(),m=d._nextUint32(),L=d._nextUint32(),I=[];for(let t=0;t<r;t++)I.push({imageFlags:d._nextUint32(),rgbSliceByteOffset:d._nextUint32(),rgbSliceByteLength:d._nextUint32(),alphaSliceByteOffset:d._nextUint32(),alphaSliceByteLength:d._nextUint32()});const R=g+d._offset,E=R+A,T=E+S,O=T+m,P=new Uint8Array(t.buffer,t.byteOffset+R,A),C=new Uint8Array(t.buffer,t.byteOffset+E,S),F=new Uint8Array(t.buffer,t.byteOffset+T,m),G=new Uint8Array(t.buffer,t.byteOffset+O,L);return i.globalData={endpointCount:B,selectorCount:w,imageDescs:I,endpointsData:P,selectorsData:C,tablesData:F,extendedData:G},i}\n\n/**\n * Loader for KTX 2.0 GPU Texture containers.\n *\n * KTX 2.0 is a container format for various GPU texture formats. The loader\n * supports Basis Universal GPU textures, which can be quickly transcoded to\n * a wide variety of GPU texture compression formats. While KTX 2.0 also allows\n * other hardware-specific formats, this loader does not yet parse them.\n *\n * This loader parses the KTX 2.0 container and then relies on\n * THREE.BasisTextureLoader to complete the transcoding process.\n *\n * References:\n * - KTX: http://github.khronos.org/KTX-Specification/\n * - DFD: https://www.khronos.org/registry/DataFormat/specs/1.3/dataformat.1.3.html#basicdescriptor\n */\n\n// KTX 2.0 constants.\n\nvar DFDModel = {\n\tETC1S: 163,\n\tUASTC: 166,\n};\n\nvar DFDChannel = {\n\tETC1S: {\n\t\tRGB: 0,\n\t\tRRR: 3,\n\t\tGGG: 4,\n\t\tAAA: 15,\n\t},\n\tUASTC: {\n\t\tRGB: 0,\n\t\tRGBA: 3,\n\t\tRRR: 4,\n\t\tRRRG: 5\n\t},\n};\n\nvar SupercompressionScheme = {\n\tZSTD: 2\n};\n\nvar Transfer = {\n\tSRGB: 2\n};\n\n//\n\nclass KTX2Loader extends CompressedTextureLoader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.basisLoader = new BasisTextureLoader( manager );\n\t\tthis.zstd = new ZSTDDecoder();\n\n\t\tthis.zstd.init();\n\n\t\tif ( typeof MSC_TRANSCODER !== 'undefined' ) {\n\n\t\t\tconsole.warn(\n\n\t\t\t\t'THREE.KTX2Loader: Please update to latest \"basis_transcoder\".'\n\t\t\t\t+ ' \"msc_basis_transcoder\" is no longer supported in three.js r125+.'\n\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\tsetTranscoderPath( path ) {\n\n\t\tthis.basisLoader.setTranscoderPath( path );\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( path ) {\n\n\t\tthis.basisLoader.setWorkerLimit( path );\n\n\t\treturn this;\n\n\t}\n\n\tdetectSupport( renderer ) {\n\n\t\tthis.basisLoader.detectSupport( renderer );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.basisLoader.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texture = new CompressedTexture();\n\n\t\tvar bufferPending = new Promise( function ( resolve, reject ) {\n\n\t\t\tnew FileLoader( scope.manager )\n\t\t\t\t.setPath( scope.path )\n\t\t\t\t.setResponseType( 'arraybuffer' )\n\t\t\t\t.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t\tbufferPending\n\t\t\t.then( function ( buffer ) {\n\n\t\t\t\tscope.parse( buffer, function ( _texture ) {\n\n\t\t\t\t\ttexture.copy( _texture );\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}, onError );\n\n\t\t\t} )\n\t\t\t.catch( onError );\n\n\t\treturn texture;\n\n\t}\n\n\tparse( buffer, onLoad, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar ktx = p( new Uint8Array( buffer ) );\n\n\t\tif ( ktx.pixelDepth > 0 ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Only 2D textures are currently supported.' );\n\n\t\t}\n\n\t\tif ( ktx.layerCount > 1 ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Array textures are not currently supported.' );\n\n\t\t}\n\n\t\tif ( ktx.faceCount > 1 ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Cube textures are not currently supported.' );\n\n\t\t}\n\n\t\tvar dfd = KTX2Utils.getBasicDFD( ktx );\n\n\t\tKTX2Utils.createLevels( ktx, this.zstd ).then( function ( levels ) {\n\n\t\t\tvar basisFormat = dfd.colorModel === DFDModel.UASTC\n\t\t\t\t? BasisTextureLoader.BasisFormat.UASTC_4x4\n\t\t\t\t: BasisTextureLoader.BasisFormat.ETC1S;\n\n\t\t\tvar parseConfig = {\n\n\t\t\t\tlevels: levels,\n\t\t\t\twidth: ktx.pixelWidth,\n\t\t\t\theight: ktx.pixelHeight,\n\t\t\t\tbasisFormat: basisFormat,\n\t\t\t\thasAlpha: KTX2Utils.getAlpha( ktx ),\n\n\t\t\t};\n\n\t\t\tif ( basisFormat === BasisTextureLoader.BasisFormat.ETC1S ) {\n\n\t\t\t\tparseConfig.globalData = ktx.globalData;\n\n\t\t\t}\n\n\t\t\treturn scope.basisLoader.parseInternalAsync( parseConfig );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\ttexture.encoding = dfd.transferFunction === Transfer.SRGB\n\t\t\t\t? sRGBEncoding\n\t\t\t\t: LinearEncoding;\n\t\t\ttexture.premultiplyAlpha = KTX2Utils.getPremultiplyAlpha( ktx );\n\n\t\t\tonLoad( texture );\n\n\t\t} ).catch( onError );\n\n\t\treturn this;\n\n\t}\n\n}\n\nvar KTX2Utils = {\n\n\tcreateLevels: async function ( ktx, zstd ) {\n\n\t\tif ( ktx.supercompressionScheme === SupercompressionScheme.ZSTD ) {\n\n\t\t\tawait zstd.init();\n\n\t\t}\n\n\t\tvar levels = [];\n\t\tvar width = ktx.pixelWidth;\n\t\tvar height = ktx.pixelHeight;\n\n\t\tfor ( var levelIndex = 0; levelIndex < ktx.levels.length; levelIndex ++ ) {\n\n\t\t\tvar levelWidth = Math.max( 1, Math.floor( width / Math.pow( 2, levelIndex ) ) );\n\t\t\tvar levelHeight = Math.max( 1, Math.floor( height / Math.pow( 2, levelIndex ) ) );\n\t\t\tvar levelData = ktx.levels[ levelIndex ].levelData;\n\n\t\t\tif ( ktx.supercompressionScheme === SupercompressionScheme.ZSTD ) {\n\n\t\t\t\tlevelData = zstd.decode( levelData, ktx.levels[ levelIndex ].uncompressedByteLength );\n\n\t\t\t}\n\n\t\t\tlevels.push( {\n\n\t\t\t\tindex: levelIndex,\n\t\t\t\twidth: levelWidth,\n\t\t\t\theight: levelHeight,\n\t\t\t\tdata: levelData,\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn levels;\n\n\t},\n\n\tgetBasicDFD: function ( ktx ) {\n\n\t\t// Basic Data Format Descriptor Block is always the first DFD.\n\t\treturn ktx.dataFormatDescriptor[ 0 ];\n\n\t},\n\n\tgetAlpha: function ( ktx ) {\n\n\t\tvar dfd = this.getBasicDFD( ktx );\n\n\t\t// UASTC\n\n\t\tif ( dfd.colorModel === DFDModel.UASTC ) {\n\n\t\t\tif ( ( dfd.samples[ 0 ].channelID & 0xF ) === DFDChannel.UASTC.RGBA ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// ETC1S\n\n\t\tif ( dfd.samples.length === 2\n\t\t\t&& ( dfd.samples[ 1 ].channelID & 0xF ) === DFDChannel.ETC1S.AAA ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetPremultiplyAlpha: function ( ktx ) {\n\n\t\tvar dfd = this.getBasicDFD( ktx );\n\n\t\treturn !! ( dfd.flags & 1 /* KHR_DF_FLAG_ALPHA_PREMULTIPLIED */ );\n\n\t},\n\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$b, _b$9;\nconst $retainerCount = Symbol('retainerCount');\nconst $recentlyUsed = Symbol('recentlyUsed');\nconst $evict = Symbol('evict');\nconst $evictionThreshold = Symbol('evictionThreshold');\nconst $cache = Symbol('cache');\n/**\n * The CacheEvictionPolicy manages the lifecycle for items in a cache,\n * evicting any items outside some threshold bounds in \"recently used\" order,\n * if they are evictable.\n *\n * Items are considered cached as they are retained. When all retainers\n * of an item release it, that item is considered evictable.\n */\nclass CacheEvictionPolicy {\n    constructor(cache, evictionThreshold = 5) {\n        this[_a$b] = new Map();\n        this[_b$9] = [];\n        this[$cache] = cache;\n        this[$evictionThreshold] = evictionThreshold;\n    }\n    /**\n     * The eviction threshold is the maximum number of items to hold\n     * in cache indefinitely. Items within the threshold (in recently\n     * used order) will continue to be cached even if they have zero\n     * retainers.\n     */\n    set evictionThreshold(value) {\n        this[$evictionThreshold] = value;\n        this[$evict]();\n    }\n    get evictionThreshold() {\n        return this[$evictionThreshold];\n    }\n    /**\n     * A reference to the cache that operates under this policy\n     */\n    get cache() {\n        return this[$cache];\n    }\n    /**\n     * Given an item key, returns the number of retainers of that item\n     */\n    retainerCount(key) {\n        return this[$retainerCount].get(key) || 0;\n    }\n    /**\n     * Resets the internal tracking of cache item retainers. Use only in cases\n     * where it is certain that all retained cache items have been accounted for!\n     */\n    reset() {\n        this[$retainerCount].clear();\n        this[$recentlyUsed] = [];\n    }\n    /**\n     * Mark a given cache item as retained, where the item is represented\n     * by its key. An item can have any number of retainers.\n     */\n    retain(key) {\n        if (!this[$retainerCount].has(key)) {\n            this[$retainerCount].set(key, 0);\n        }\n        this[$retainerCount].set(key, this[$retainerCount].get(key) + 1);\n        const recentlyUsedIndex = this[$recentlyUsed].indexOf(key);\n        if (recentlyUsedIndex !== -1) {\n            this[$recentlyUsed].splice(recentlyUsedIndex, 1);\n        }\n        this[$recentlyUsed].unshift(key);\n        // Evict, in case retaining a new item pushed an evictable item beyond the\n        // eviction threshold\n        this[$evict]();\n    }\n    /**\n     * Mark a given cache item as released by one of its retainers, where the item\n     * is represented by its key. When all retainers of an item have released it,\n     * the item is considered evictable.\n     */\n    release(key) {\n        if (this[$retainerCount].has(key)) {\n            this[$retainerCount].set(key, Math.max(this[$retainerCount].get(key) - 1, 0));\n        }\n        this[$evict]();\n    }\n    [(_a$b = $retainerCount, _b$9 = $recentlyUsed, $evict)]() {\n        if (this[$recentlyUsed].length < this[$evictionThreshold]) {\n            return;\n        }\n        for (let i = this[$recentlyUsed].length - 1; i >= this[$evictionThreshold]; --i) {\n            const key = this[$recentlyUsed][i];\n            const retainerCount = this[$retainerCount].get(key);\n            if (retainerCount === 0) {\n                this[$cache].delete(key);\n                this[$recentlyUsed].splice(i, 1);\n            }\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$a, _b$8;\n/**\n * A helper to Promise-ify a Three.js GLTFLoader\n */\nconst loadWithLoader = (url, loader, progressCallback = () => { }) => {\n    const onProgress = (event) => {\n        const fraction = event.loaded / event.total;\n        progressCallback(Math.max(0, Math.min(1, isFinite(fraction) ? fraction : 1)));\n    };\n    return new Promise((resolve, reject) => {\n        loader.load(url, resolve, onProgress, reject);\n    });\n};\nconst cache = new Map();\nconst preloaded = new Map();\nlet dracoDecoderLocation;\nconst dracoLoader = new DRACOLoader();\nlet ktx2TranscoderLocation;\nconst ktx2Loader = new KTX2Loader();\nconst $loader = Symbol('loader');\nconst $evictionPolicy = Symbol('evictionPolicy');\nconst $GLTFInstance = Symbol('GLTFInstance');\nclass CachingGLTFLoader extends EventDispatcher {\n    constructor(GLTFInstance) {\n        super();\n        this[_b$8] = new GLTFLoader();\n        this[$GLTFInstance] = GLTFInstance;\n        this[$loader].setDRACOLoader(dracoLoader);\n        this[$loader].setKTX2Loader(ktx2Loader);\n    }\n    static setDRACODecoderLocation(url) {\n        dracoDecoderLocation = url;\n        dracoLoader.setDecoderPath(url);\n    }\n    static getDRACODecoderLocation() {\n        return dracoDecoderLocation;\n    }\n    static setKTX2TranscoderLocation(url) {\n        ktx2TranscoderLocation = url;\n        ktx2Loader.setTranscoderPath(url);\n    }\n    static getKTX2TranscoderLocation() {\n        return ktx2TranscoderLocation;\n    }\n    static initializeKTX2Loader(renderer) {\n        ktx2Loader.detectSupport(renderer);\n    }\n    static get cache() {\n        return cache;\n    }\n    /** @nocollapse */\n    static clearCache() {\n        cache.forEach((_value, url) => {\n            this.delete(url);\n        });\n        this[$evictionPolicy].reset();\n    }\n    static has(url) {\n        return cache.has(url);\n    }\n    /** @nocollapse */\n    static async delete(url) {\n        if (!this.has(url)) {\n            return;\n        }\n        const gltfLoads = cache.get(url);\n        preloaded.delete(url);\n        cache.delete(url);\n        const gltf = await gltfLoads;\n        // Dispose of the cached glTF's materials and geometries:\n        gltf.dispose();\n    }\n    /**\n     * Returns true if the model that corresponds to the specified url is\n     * available in our local cache.\n     */\n    static hasFinishedLoading(url) {\n        return !!preloaded.get(url);\n    }\n    get [(_a$a = $evictionPolicy, _b$8 = $loader, $evictionPolicy)]() {\n        return this.constructor[$evictionPolicy];\n    }\n    /**\n     * Preloads a glTF, populating the cache. Returns a promise that resolves\n     * when the cache is populated.\n     */\n    async preload(url, element, progressCallback = () => { }) {\n        this.dispatchEvent({ type: 'preload', element: element, src: url });\n        if (!cache.has(url)) {\n            const rawGLTFLoads = loadWithLoader(url, this[$loader], (progress) => {\n                progressCallback(progress * 0.8);\n            });\n            const GLTFInstance = this[$GLTFInstance];\n            const gltfInstanceLoads = rawGLTFLoads\n                .then((rawGLTF) => {\n                return GLTFInstance.prepare(rawGLTF);\n            })\n                .then((preparedGLTF) => {\n                progressCallback(0.9);\n                return new GLTFInstance(preparedGLTF);\n            });\n            cache.set(url, gltfInstanceLoads);\n        }\n        await cache.get(url);\n        preloaded.set(url, true);\n        if (progressCallback) {\n            progressCallback(1.0);\n        }\n    }\n    /**\n     * Loads a glTF from the specified url and resolves a unique clone of the\n     * glTF. If the glTF has already been loaded, makes a clone of the cached\n     * copy.\n     */\n    async load(url, element, progressCallback = () => { }) {\n        await this.preload(url, element, progressCallback);\n        const gltf = await cache.get(url);\n        const clone = await gltf.clone();\n        this[$evictionPolicy].retain(url);\n        // Patch dispose so that we can properly account for instance use\n        // in the caching layer:\n        clone.dispose = (() => {\n            const originalDispose = clone.dispose;\n            let disposed = false;\n            return () => {\n                if (disposed) {\n                    return;\n                }\n                disposed = true;\n                originalDispose.apply(clone);\n                this[$evictionPolicy].release(url);\n            };\n        })();\n        return clone;\n    }\n}\nCachingGLTFLoader[_a$a] = new CacheEvictionPolicy(CachingGLTFLoader);\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$9;\nconst SETTLING_TIME = 10000; // plenty long enough\nconst DECAY_MILLISECONDS = 50;\nconst NATURAL_FREQUENCY = 1 / DECAY_MILLISECONDS;\nconst NIL_SPEED = 0.0002 * NATURAL_FREQUENCY;\nconst $velocity = Symbol('velocity');\n/**\n * The Damper class is a generic second-order critically damped system that does\n * one linear step of the desired length of time. The only parameter is\n * DECAY_MILLISECONDS, which should be adjustable: TODO(#580). This common\n * parameter makes all states converge at the same rate regardless of scale.\n * xNormalization is a number to provide the rough scale of x, such that\n * NIL_SPEED clamping also happens at roughly the same convergence for all\n * states.\n */\nclass Damper {\n    constructor() {\n        this[_a$9] = 0;\n    }\n    update(x, xGoal, timeStepMilliseconds, xNormalization) {\n        if (x == null || xNormalization === 0) {\n            return xGoal;\n        }\n        if (x === xGoal && this[$velocity] === 0) {\n            return xGoal;\n        }\n        if (timeStepMilliseconds < 0) {\n            return x;\n        }\n        // Exact solution to a critically damped second-order system, where:\n        // acceleration = NATURAL_FREQUENCY * NATURAL_FREQUENCY * (xGoal - x) -\n        // 2 * NATURAL_FREQUENCY * this[$velocity];\n        const deltaX = (x - xGoal);\n        const intermediateVelocity = this[$velocity] + NATURAL_FREQUENCY * deltaX;\n        const intermediateX = deltaX + timeStepMilliseconds * intermediateVelocity;\n        const decay = Math.exp(-NATURAL_FREQUENCY * timeStepMilliseconds);\n        const newVelocity = (intermediateVelocity - NATURAL_FREQUENCY * intermediateX) * decay;\n        const acceleration = -NATURAL_FREQUENCY * (newVelocity + intermediateVelocity * decay);\n        if (Math.abs(newVelocity) < NIL_SPEED * Math.abs(xNormalization) &&\n            acceleration * deltaX >= 0) {\n            // This ensures the controls settle and stop calling this function instead\n            // of asymptotically approaching their goal.\n            this[$velocity] = 0;\n            return xGoal;\n        }\n        else {\n            this[$velocity] = newVelocity;\n            return xGoal + intermediateX * decay;\n        }\n    }\n}\n_a$9 = $velocity;\n\nvar CSS2DObject = function ( element ) {\n\n\tObject3D.call( this );\n\n\tthis.element = element || document.createElement( 'div' );\n\n\tthis.element.style.position = 'absolute';\n\n\tthis.addEventListener( 'removed', function () {\n\n\t\tthis.traverse( function ( object ) {\n\n\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n};\n\nCSS2DObject.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: CSS2DObject,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n//\n\nvar CSS2DRenderer = function () {\n\n\tvar _this = this;\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar vector = new Vector3();\n\tvar viewMatrix = new Matrix4();\n\tvar viewProjectionMatrix = new Matrix4();\n\n\tvar cache = {\n\t\tobjects: new WeakMap()\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tthis.domElement = domElement;\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t};\n\n\tvar renderObject = function ( object, scene, camera ) {\n\n\t\tif ( object instanceof CSS2DObject ) {\n\n\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\tvector.setFromMatrixPosition( object.matrixWorld );\n\t\t\tvector.applyMatrix4( viewProjectionMatrix );\n\n\t\t\tvar element = object.element;\n\n\t\t\telement.style.transform = 'translate(-50%,-50%) translate(' + ( vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - vector.y * _heightHalf + _heightHalf ) + 'px)';\n\t\t\telement.style.display = ( object.visible && vector.z >= - 1 && vector.z <= 1 ) ? '' : 'none';\n\n\t\t\tvar objectData = {\n\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\n\t\t\t};\n\n\t\t\tcache.objects.set( object, objectData );\n\n\t\t\tif ( element.parentNode !== domElement ) {\n\n\t\t\t\tdomElement.appendChild( element );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], scene, camera );\n\n\t\t}\n\n\t};\n\n\tvar getDistanceToSquared = function () {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\n\t\treturn function ( object1, object2 ) {\n\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn a.distanceToSquared( b );\n\n\t\t};\n\n\t}();\n\n\tvar filterAndFlatten = function ( scene ) {\n\n\t\tvar result = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof CSS2DObject ) result.push( object );\n\n\t\t} );\n\n\t\treturn result;\n\n\t};\n\n\tvar zOrder = function ( scene ) {\n\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\treturn distanceA - distanceB;\n\n\t\t} );\n\n\t\tvar zMax = sorted.length;\n\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t}\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tviewMatrix.copy( camera.matrixWorldInverse );\n\t\tviewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, viewMatrix );\n\n\t\trenderObject( scene, scene, camera );\n\t\tzOrder( scene );\n\n\t};\n\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst numberNode = (value, unit) => ({ type: 'number', number: value, unit });\n/**\n * Given a string representing a comma-separated set of CSS-like expressions,\n * parses and returns an array of ASTs that correspond to those expressions.\n *\n * Currently supported syntax includes:\n *\n *  - functions (top-level and nested)\n *  - calc() arithmetic operators\n *  - numbers with units\n *  - hexidecimal-encoded colors in 3, 6 or 8 digit form\n *  - idents\n *\n * All syntax is intended to match the parsing rules and semantics of the actual\n * CSS spec as closely as possible.\n *\n * @see https://www.w3.org/TR/CSS2/\n * @see https://www.w3.org/TR/css-values-3/\n */\nconst parseExpressions = (() => {\n    const cache = {};\n    const MAX_PARSE_ITERATIONS = 1000; // Arbitrarily large\n    return (inputString) => {\n        const cacheKey = inputString;\n        if (cacheKey in cache) {\n            return cache[cacheKey];\n        }\n        const expressions = [];\n        let parseIterations = 0;\n        while (inputString) {\n            if (++parseIterations > MAX_PARSE_ITERATIONS) {\n                // Avoid a potentially infinite loop due to typos:\n                inputString = '';\n                break;\n            }\n            const expressionParseResult = parseExpression(inputString);\n            const expression = expressionParseResult.nodes[0];\n            if (expression == null || expression.terms.length === 0) {\n                break;\n            }\n            expressions.push(expression);\n            inputString = expressionParseResult.remainingInput;\n        }\n        return cache[cacheKey] = expressions;\n    };\n})();\n/**\n * Parse a single expression. For the purposes of our supported syntax, an\n * expression is the set of semantically meaningful terms that appear before the\n * next comma, or between the parens of a function invokation.\n */\nconst parseExpression = (() => {\n    const IS_IDENT_RE = /^(\\-\\-|[a-z\\u0240-\\uffff])/i;\n    const IS_OPERATOR_RE = /^([\\*\\+\\/]|[\\-]\\s)/i;\n    const IS_EXPRESSION_END_RE = /^[\\),]/;\n    const FUNCTION_ARGUMENTS_FIRST_TOKEN = '(';\n    const HEX_FIRST_TOKEN = '#';\n    return (inputString) => {\n        const terms = [];\n        while (inputString.length) {\n            inputString = inputString.trim();\n            if (IS_EXPRESSION_END_RE.test(inputString)) {\n                break;\n            }\n            else if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n                const { nodes, remainingInput } = parseFunctionArguments(inputString);\n                inputString = remainingInput;\n                terms.push({\n                    type: 'function',\n                    name: { type: 'ident', value: 'calc' },\n                    arguments: nodes\n                });\n            }\n            else if (IS_IDENT_RE.test(inputString)) {\n                const identParseResult = parseIdent(inputString);\n                const identNode = identParseResult.nodes[0];\n                inputString = identParseResult.remainingInput;\n                if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n                    const { nodes, remainingInput } = parseFunctionArguments(inputString);\n                    terms.push({ type: 'function', name: identNode, arguments: nodes });\n                    inputString = remainingInput;\n                }\n                else {\n                    terms.push(identNode);\n                }\n            }\n            else if (IS_OPERATOR_RE.test(inputString)) {\n                // Operators are always a single character, so just pluck them out:\n                terms.push({ type: 'operator', value: inputString[0] });\n                inputString = inputString.slice(1);\n            }\n            else {\n                const { nodes, remainingInput } = inputString[0] === HEX_FIRST_TOKEN ?\n                    parseHex(inputString) :\n                    parseNumber(inputString);\n                // The remaining string may not have had any meaningful content. Exit\n                // early if this is the case:\n                if (nodes.length === 0) {\n                    break;\n                }\n                terms.push(nodes[0]);\n                inputString = remainingInput;\n            }\n        }\n        return { nodes: [{ type: 'expression', terms }], remainingInput: inputString };\n    };\n})();\n/**\n * An ident is something like a function name or the keyword \"auto\".\n */\nconst parseIdent = (() => {\n    const NOT_IDENT_RE = /[^a-z^0-9^_^\\-^\\u0240-\\uffff]/i;\n    return (inputString) => {\n        const match = inputString.match(NOT_IDENT_RE);\n        const ident = match == null ? inputString : inputString.substr(0, match.index);\n        const remainingInput = match == null ? '' : inputString.substr(match.index);\n        return { nodes: [{ type: 'ident', value: ident }], remainingInput };\n    };\n})();\n/**\n * Parses a number. A number value can be expressed with an integer or\n * non-integer syntax, and usually includes a unit (but does not strictly\n * require one for our purposes).\n */\nconst parseNumber = (() => {\n    // @see https://www.w3.org/TR/css-syntax/#number-token-diagram\n    const VALUE_RE = /[\\+\\-]?(\\d+[\\.]\\d+|\\d+|[\\.]\\d+)([eE][\\+\\-]?\\d+)?/;\n    const UNIT_RE = /^[a-z%]+/i;\n    const ALLOWED_UNITS = /^(m|mm|cm|rad|deg|[%])$/;\n    return (inputString) => {\n        const valueMatch = inputString.match(VALUE_RE);\n        const value = valueMatch == null ? '0' : valueMatch[0];\n        inputString = value == null ? inputString : inputString.slice(value.length);\n        const unitMatch = inputString.match(UNIT_RE);\n        let unit = unitMatch != null && unitMatch[0] !== '' ? unitMatch[0] : null;\n        const remainingInput = unitMatch == null ? inputString : inputString.slice(unit.length);\n        if (unit != null && !ALLOWED_UNITS.test(unit)) {\n            unit = null;\n        }\n        return {\n            nodes: [{\n                    type: 'number',\n                    number: parseFloat(value) || 0,\n                    unit: unit\n                }],\n            remainingInput\n        };\n    };\n})();\n/**\n * Parses a hexidecimal-encoded color in 3, 6 or 8 digit form.\n */\nconst parseHex = (() => {\n    // TODO(cdata): right now we don't actually enforce the number of digits\n    const HEX_RE = /^[a-f0-9]*/i;\n    return (inputString) => {\n        inputString = inputString.slice(1).trim();\n        const hexMatch = inputString.match(HEX_RE);\n        const nodes = hexMatch == null ? [] : [{ type: 'hex', value: hexMatch[0] }];\n        return {\n            nodes,\n            remainingInput: hexMatch == null ? inputString :\n                inputString.slice(hexMatch[0].length)\n        };\n    };\n})();\n/**\n * Parses arguments passed to a function invokation (e.g., the expressions\n * within a matched set of parens).\n */\nconst parseFunctionArguments = (inputString) => {\n    const expressionNodes = [];\n    // Consume the opening paren\n    inputString = inputString.slice(1).trim();\n    while (inputString.length) {\n        const expressionParseResult = parseExpression(inputString);\n        expressionNodes.push(expressionParseResult.nodes[0]);\n        inputString = expressionParseResult.remainingInput.trim();\n        if (inputString[0] === ',') {\n            inputString = inputString.slice(1).trim();\n        }\n        else if (inputString[0] === ')') {\n            // Consume the closing paren and stop parsing\n            inputString = inputString.slice(1);\n            break;\n        }\n    }\n    return { nodes: expressionNodes, remainingInput: inputString };\n};\nconst $visitedTypes = Symbol('visitedTypes');\n/**\n * An ASTWalker walks an array of ASTs such as the type produced by\n * parseExpressions and invokes a callback for a configured set of nodes that\n * the user wishes to \"visit\" during the walk.\n */\nclass ASTWalker {\n    constructor(visitedTypes) {\n        this[$visitedTypes] = visitedTypes;\n    }\n    /**\n     * Walk the given set of ASTs, and invoke the provided callback for nodes that\n     * match the filtered set that the ASTWalker was constructed with.\n     */\n    walk(ast, callback) {\n        const remaining = ast.slice();\n        while (remaining.length) {\n            const next = remaining.shift();\n            if (this[$visitedTypes].indexOf(next.type) > -1) {\n                callback(next);\n            }\n            switch (next.type) {\n                case 'expression':\n                    remaining.unshift(...next.terms);\n                    break;\n                case 'function':\n                    remaining.unshift(next.name, ...next.arguments);\n                    break;\n            }\n        }\n    }\n}\nconst ZERO = Object.freeze({ type: 'number', number: 0, unit: null });\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Ensures that a given number is expressed in radians. If the number is already\n * in radians, does nothing. If the value is in degrees, converts it to radians.\n * If the value has no specified unit, the unit is assumed to be radians. If the\n * value is not in radians or degrees, the value is resolved as 0 radians.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst degreesToRadians = (numberNode, fallbackRadianValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackRadianValue;\n        unit = 'rad';\n    }\n    else if (numberNode.unit === 'rad' || numberNode.unit == null) {\n        return numberNode;\n    }\n    const valueIsDegrees = unit === 'deg' && number != null;\n    const value = valueIsDegrees ? number : 0;\n    const radians = value * Math.PI / 180;\n    return { type: 'number', number: radians, unit: 'rad' };\n};\n/**\n * Converts a given length to meters. Currently supported input units are\n * meters, centimeters and millimeters.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst lengthToBaseMeters = (numberNode, fallbackMeterValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackMeterValue;\n        unit = 'm';\n    }\n    else if (numberNode.unit === 'm') {\n        return numberNode;\n    }\n    let scale;\n    switch (unit) {\n        default:\n            scale = 1;\n            break;\n        case 'cm':\n            scale = 1 / 100;\n            break;\n        case 'mm':\n            scale = 1 / 1000;\n            break;\n    }\n    const value = scale * number;\n    return { type: 'number', number: value, unit: 'm' };\n};\n/**\n * Normalizes the unit of a given input number so that it is expressed in a\n * preferred unit. For length nodes, the return value will be expressed in\n * meters. For angle nodes, the return value will be expressed in radians.\n *\n * Also takes a fallback number that is used when the number value is not a\n * valid number or when the unit of the given number cannot be normalized.\n */\nconst normalizeUnit = (() => {\n    const identity = (node) => node;\n    const unitNormalizers = {\n        'rad': identity,\n        'deg': degreesToRadians,\n        'm': identity,\n        'mm': lengthToBaseMeters,\n        'cm': lengthToBaseMeters\n    };\n    return (node, fallback = ZERO) => {\n        let { number, unit } = node;\n        if (!isFinite(number)) {\n            number = fallback.number;\n            unit = fallback.unit;\n        }\n        if (unit == null) {\n            return node;\n        }\n        const normalize = unitNormalizers[unit];\n        if (normalize == null) {\n            return fallback;\n        }\n        return normalize(node);\n    };\n})();\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The Hotspot object is a reference-counted slot. If decrement() returns true,\n * it should be removed from the tree so it can be garbage-collected.\n */\nclass Hotspot extends CSS2DObject {\n    constructor(config) {\n        super(document.createElement('div'));\n        this.normal = new Vector3(0, 1, 0);\n        this.initialized = false;\n        this.referenceCount = 1;\n        this.pivot = document.createElement('div');\n        this.slot = document.createElement('slot');\n        this.element.classList.add('annotation-wrapper');\n        this.slot.name = config.name;\n        this.element.appendChild(this.pivot);\n        this.pivot.appendChild(this.slot);\n        this.updatePosition(config.position);\n        this.updateNormal(config.normal);\n    }\n    get facingCamera() {\n        return !this.element.classList.contains('hide');\n    }\n    /**\n     * Sets the hotspot to be in the highly visible foreground state.\n     */\n    show() {\n        if (!this.facingCamera || !this.initialized) {\n            this.updateVisibility(true);\n        }\n    }\n    /**\n     * Sets the hotspot to be in the diminished background state.\n     */\n    hide() {\n        if (this.facingCamera || !this.initialized) {\n            this.updateVisibility(false);\n        }\n    }\n    /**\n     * Call this when adding elements to the same slot to keep track.\n     */\n    increment() {\n        this.referenceCount++;\n    }\n    /**\n     * Call this when removing elements from the slot; returns true when the slot\n     * is unused.\n     */\n    decrement() {\n        if (this.referenceCount > 0) {\n            --this.referenceCount;\n        }\n        return this.referenceCount === 0;\n    }\n    /**\n     * Change the position of the hotspot to the input string, in the same format\n     * as the data-position attribute.\n     */\n    updatePosition(position) {\n        if (position == null)\n            return;\n        const positionNodes = parseExpressions(position)[0].terms;\n        for (let i = 0; i < 3; ++i) {\n            this.position.setComponent(i, normalizeUnit(positionNodes[i]).number);\n        }\n        this.updateMatrixWorld();\n    }\n    /**\n     * Change the hotspot's normal to the input string, in the same format as the\n     * data-normal attribute.\n     */\n    updateNormal(normal) {\n        if (normal == null)\n            return;\n        const normalNodes = parseExpressions(normal)[0].terms;\n        for (let i = 0; i < 3; ++i) {\n            this.normal.setComponent(i, normalizeUnit(normalNodes[i]).number);\n        }\n    }\n    orient(radians) {\n        this.pivot.style.transform = `rotate(${radians}rad)`;\n    }\n    updateVisibility(show) {\n        // NOTE: IE11 doesn't support a second arg for classList.toggle\n        if (show) {\n            this.element.classList.remove('hide');\n        }\n        else {\n            this.element.classList.add('hide');\n        }\n        // NOTE: ShadyDOM doesn't support slot.assignedElements, otherwise we could\n        // use that here.\n        this.slot.assignedNodes().forEach((node) => {\n            if (node.nodeType !== Node.ELEMENT_NODE) {\n                return;\n            }\n            const element = node;\n            // Visibility attribute can be configured per-node in the hotspot:\n            const visibilityAttribute = element.dataset.visibilityAttribute;\n            if (visibilityAttribute != null) {\n                const attributeName = `data-${visibilityAttribute}`;\n                // NOTE: IE11 doesn't support toggleAttribute\n                if (show) {\n                    element.setAttribute(attributeName, '');\n                }\n                else {\n                    element.removeAttribute(attributeName);\n                }\n            }\n            element.dispatchEvent(new CustomEvent('hotspot-visibility', {\n                detail: {\n                    visible: show,\n                },\n            }));\n        });\n        this.initialized = true;\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Performs a reduction across all the vertices of the input model and all its\n * children. The supplied function takes the reduced value and a vertex and\n * returns the newly reduced value. The value is initialized as zero.\n *\n * Adapted from Three.js, @see https://github.com/mrdoob/three.js/blob/7e0a78beb9317e580d7fa4da9b5b12be051c6feb/src/math/Box3.js#L241\n */\nconst reduceVertices = (model, func, initialValue) => {\n    let value = initialValue;\n    const vertex = new Vector3();\n    model.traverse((object) => {\n        let i, l;\n        object.updateWorldMatrix(false, false);\n        const geometry = object.geometry;\n        if (geometry !== undefined) {\n            if (geometry.isGeometry) {\n                const vertices = geometry.vertices;\n                for (i = 0, l = vertices.length; i < l; i++) {\n                    vertex.copy(vertices[i]);\n                    vertex.applyMatrix4(object.matrixWorld);\n                    value = func(value, vertex);\n                }\n            }\n            else if (geometry.isBufferGeometry) {\n                const { position } = geometry.attributes;\n                if (position !== undefined) {\n                    for (i = 0, l = position.count; i < l; i++) {\n                        vertex.fromBufferAttribute(position, i)\n                            .applyMatrix4(object.matrixWorld);\n                        value = func(value, vertex);\n                    }\n                }\n            }\n        }\n    });\n    return value;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Nothing within Offset of the bottom of the scene casts a shadow\n// (this is to avoid having a baked-in shadow plane cast its own shadow).\nconst OFFSET = 0.002;\n// The softness [0, 1] of the shadow is mapped to a resolution between\n// 2^LOG_MAX_RESOLUTION and 2^LOG_MIN_RESOLUTION.\nconst LOG_MAX_RESOLUTION = 9;\nconst LOG_MIN_RESOLUTION = 6;\n// Animated models are not in general contained in their bounding box, as this\n// is calculated only for their resting pose. We create a cubic shadow volume\n// for animated models sized to their largest bounding box dimesion multiplied\n// by this scale factor.\nconst ANIMATION_SCALING = 2;\n/**\n * The Shadow class creates a shadow that fits a given scene and follows a\n * target. This shadow will follow the scene without any updates needed so long\n * as the shadow and scene are both parented to the same object (call it the\n * scene) and this scene is passed as the target parameter to the shadow's\n * constructor. We also must constrain the scene to motion within the horizontal\n * plane and call the setRotation() method whenever the scene's Y-axis rotation\n * changes. For motion outside of the horizontal plane, this.needsUpdate must be\n * set to true.\n *\n * The softness of the shadow is controlled by changing its resolution, making\n * softer shadows faster, but less precise.\n */\nclass Shadow extends DirectionalLight {\n    constructor(scene, softness, side) {\n        super();\n        this.shadowMaterial = new ShadowMaterial;\n        this.boundingBox = new Box3;\n        this.size = new Vector3;\n        this.isAnimated = false;\n        this.side = 'bottom';\n        this.needsUpdate = false;\n        // We use the light only to cast a shadow, not to light the scene.\n        this.intensity = 0;\n        this.castShadow = true;\n        this.frustumCulled = false;\n        this.floor = new Mesh(new PlaneGeometry, this.shadowMaterial);\n        this.floor.rotateX(-Math.PI / 2);\n        this.floor.receiveShadow = true;\n        this.floor.castShadow = false;\n        this.floor.frustumCulled = false;\n        this.add(this.floor);\n        scene.target.add(this);\n        this.target = scene.target;\n        this.setScene(scene, softness, side);\n    }\n    /**\n     * Update the shadow's size and position for a new scene. Softness is also\n     * needed, as this controls the shadow's resolution.\n     */\n    setScene(scene, softness, side) {\n        this.side = side;\n        this.isAnimated = scene.animationNames.length > 0;\n        this.boundingBox.copy(scene.boundingBox);\n        this.size.copy(scene.size);\n        if (this.side === 'back') {\n            const { min, max } = this.boundingBox;\n            [min.y, min.z] = [min.z, min.y];\n            [max.y, max.z] = [max.z, max.y];\n            [this.size.y, this.size.z] = [this.size.z, this.size.y];\n            this.rotation.x = Math.PI / 2;\n            this.rotation.y = Math.PI;\n        }\n        const { boundingBox, size } = this;\n        if (this.isAnimated) {\n            const maxDimension = Math.max(size.x, size.y, size.z) * ANIMATION_SCALING;\n            size.y = maxDimension;\n            boundingBox.expandByVector(size.subScalar(maxDimension).multiplyScalar(-0.5));\n            boundingBox.max.y = boundingBox.min.y + maxDimension;\n            size.set(maxDimension, maxDimension, maxDimension);\n        }\n        boundingBox.getCenter(this.floor.position);\n        const shadowOffset = boundingBox.max.y + size.y * OFFSET;\n        if (side === 'bottom') {\n            this.position.y = shadowOffset;\n            this.shadow.camera.up.set(0, 0, 1);\n        }\n        else {\n            this.position.y = 0;\n            this.position.z = shadowOffset;\n            this.shadow.camera.up.set(0, 1, 0);\n        }\n        this.setSoftness(softness);\n    }\n    /**\n     * Update the shadow's resolution based on softness (between 0 and 1). Should\n     * not be called frequently, as this results in reallocation.\n     */\n    setSoftness(softness) {\n        const resolution = Math.pow(2, LOG_MAX_RESOLUTION -\n            softness * (LOG_MAX_RESOLUTION - LOG_MIN_RESOLUTION));\n        this.setMapSize(resolution);\n    }\n    /**\n     * Lower-level version of the above function.\n     */\n    setMapSize(maxMapSize) {\n        const { camera, mapSize, map } = this.shadow;\n        const { size, boundingBox } = this;\n        if (map != null) {\n            map.dispose();\n            this.shadow.map = null;\n        }\n        if (this.isAnimated) {\n            maxMapSize *= ANIMATION_SCALING;\n        }\n        const width = Math.floor(size.x > size.z ? maxMapSize : maxMapSize * size.x / size.z);\n        const height = Math.floor(size.x > size.z ? maxMapSize * size.z / size.x : maxMapSize);\n        mapSize.set(width, height);\n        // These pads account for the softening radius around the shadow.\n        const widthPad = 2.5 * size.x / width;\n        const heightPad = 2.5 * size.z / height;\n        camera.left = -boundingBox.max.x - widthPad;\n        camera.right = -boundingBox.min.x + widthPad;\n        camera.bottom = boundingBox.min.z - heightPad;\n        camera.top = boundingBox.max.z + heightPad;\n        this.setScaleAndOffset(camera.zoom, 0);\n        this.shadow.updateMatrices(this);\n        this.floor.scale.set(size.x + 2 * widthPad, size.z + 2 * heightPad, 1);\n        this.needsUpdate = true;\n    }\n    /**\n     * Set the shadow's intensity (0 to 1), which is just its opacity. Turns off\n     * shadow rendering if zero.\n     */\n    setIntensity(intensity) {\n        this.shadowMaterial.opacity = intensity;\n        if (intensity > 0) {\n            this.visible = true;\n            this.floor.visible = true;\n        }\n        else {\n            this.visible = false;\n            this.floor.visible = false;\n        }\n    }\n    getIntensity() {\n        return this.shadowMaterial.opacity;\n    }\n    /**\n     * The shadow does not rotate with its parent transforms, so the rotation must\n     * be manually updated here if it rotates in world space. The input is its\n     * absolute orientation about the Y-axis (other rotations are not supported).\n     */\n    setRotation(radiansY) {\n        if (this.side !== 'bottom') {\n            // We don't support rotation about a horizontal axis yet.\n            this.shadow.updateMatrices(this);\n            return;\n        }\n        this.shadow.camera.up.set(Math.sin(radiansY), 0, Math.cos(radiansY));\n        this.shadow.updateMatrices(this);\n    }\n    /**\n     * The scale is also not inherited from parents, so it must be set here in\n     * accordance with any transforms. An offset can also be specified to move the\n     * shadow vertically relative to the bottom of the scene. Positive is up, so\n     * values are generally negative.\n     */\n    setScaleAndOffset(scale, offset) {\n        const sizeY = this.size.y;\n        const inverseScale = 1 / scale;\n        // Floor plane is up slightly from the bottom of the bounding box to avoid\n        // Z-fighting with baked-in shadows and to stay inside the shadow camera.\n        const shadowOffset = sizeY * OFFSET;\n        this.floor.position.y = 2 * shadowOffset - sizeY + offset * inverseScale;\n        const { camera } = this.shadow;\n        camera.zoom = scale;\n        camera.near = 0;\n        camera.far = sizeY * scale - offset;\n        camera.projectionMatrix.makeOrthographic(camera.left * scale, camera.right * scale, camera.top * scale, camera.bottom * scale, camera.near, camera.far);\n        camera.projectionMatrixInverse.copy(camera.projectionMatrix).invert();\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_FOV_DEG = 45;\nconst DEFAULT_HALF_FOV = (DEFAULT_FOV_DEG / 2) * Math.PI / 180;\nconst SAFE_RADIUS_RATIO = Math.sin(DEFAULT_HALF_FOV);\nconst DEFAULT_TAN_FOV = Math.tan(DEFAULT_HALF_FOV);\nconst view = new Vector3();\nconst target = new Vector3();\nconst normalWorld = new Vector3();\nconst raycaster = new Raycaster();\nconst vector3$1 = new Vector3();\n/**\n * A THREE.Scene object that takes a Model and CanvasHTMLElement and\n * constructs a framed scene based off of the canvas dimensions.\n * Provides lights and cameras to be used in a renderer.\n */\nclass ModelScene extends Scene {\n    constructor({ canvas, element, width, height }) {\n        super();\n        this.context = null;\n        this.width = 1;\n        this.height = 1;\n        this.aspect = 1;\n        this.isDirty = false;\n        this.renderCount = 0;\n        // These default camera values are never used, as they are reset once the\n        // model is loaded and framing is computed.\n        this.camera = new PerspectiveCamera(45, 1, 0.1, 100);\n        this.url = null;\n        this.target = new Object3D();\n        this.modelContainer = new Object3D();\n        this.animationNames = [];\n        this.boundingBox = new Box3();\n        this.size = new Vector3();\n        this.idealCameraDistance = 0;\n        this.fieldOfViewAspect = 0;\n        this.framedFieldOfView = DEFAULT_FOV_DEG;\n        this.shadow = null;\n        this.shadowIntensity = 0;\n        this.shadowSoftness = 1;\n        this.exposure = 1;\n        this.canScale = true;\n        this.tightBounds = false;\n        this.goalTarget = new Vector3();\n        this.targetDamperX = new Damper();\n        this.targetDamperY = new Damper();\n        this.targetDamperZ = new Damper();\n        this._currentGLTF = null;\n        this.cancelPendingSourceChange = null;\n        this.animationsByName = new Map();\n        this.currentAnimationAction = null;\n        this.name = 'ModelScene';\n        this.element = element;\n        this.canvas = canvas;\n        // These default camera values are never used, as they are reset once the\n        // model is loaded and framing is computed.\n        this.camera = new PerspectiveCamera(45, 1, 0.1, 100);\n        this.camera.name = 'MainCamera';\n        this.activeCamera = this.camera;\n        this.add(this.target);\n        this.setSize(width, height);\n        this.target.name = 'Target';\n        this.modelContainer.name = 'ModelContainer';\n        this.target.add(this.modelContainer);\n        this.mixer = new AnimationMixer(this.modelContainer);\n    }\n    /**\n     * Function to create the context lazily, as when there is only one\n     * <model-viewer> element, the renderer's 3D context can be displayed\n     * directly. This extra context is necessary to copy the renderings into when\n     * there are more than one.\n     */\n    createContext() {\n        {\n            this.context = this.canvas.getContext('2d');\n        }\n    }\n    /**\n     * Pass in a THREE.Object3D to be controlled\n     * by this model.\n     */\n    async setObject(model) {\n        this.reset();\n        this.modelContainer.add(model);\n        await this.setupScene();\n    }\n    /**\n     * Sets the model via URL.\n     */\n    async setSource(url, progressCallback) {\n        if (!url || url === this.url) {\n            if (progressCallback) {\n                progressCallback(1);\n            }\n            return;\n        }\n        this.reset();\n        this.url = url;\n        // If we have pending work due to a previous source change in progress,\n        // cancel it so that we do not incur a race condition:\n        if (this.cancelPendingSourceChange != null) {\n            this.cancelPendingSourceChange();\n            this.cancelPendingSourceChange = null;\n        }\n        let gltf;\n        try {\n            gltf = await new Promise(async (resolve, reject) => {\n                this.cancelPendingSourceChange = () => reject();\n                try {\n                    const result = await this.element[$renderer].loader.load(url, this.element, progressCallback);\n                    resolve(result);\n                }\n                catch (error) {\n                    reject(error);\n                }\n            });\n        }\n        catch (error) {\n            if (error == null) {\n                // Loading was cancelled, so silently return\n                return;\n            }\n            throw error;\n        }\n        this.reset();\n        this.url = url;\n        this._currentGLTF = gltf;\n        if (gltf != null) {\n            this.modelContainer.add(gltf.scene);\n        }\n        const { animations } = gltf;\n        const animationsByName = new Map();\n        const animationNames = [];\n        for (const animation of animations) {\n            animationsByName.set(animation.name, animation);\n            animationNames.push(animation.name);\n        }\n        this.animations = animations;\n        this.animationsByName = animationsByName;\n        this.animationNames = animationNames;\n        await this.setupScene();\n    }\n    async setupScene() {\n        this.updateBoundingBox();\n        let target = null;\n        if (this.tightBounds === true) {\n            await this.element.requestUpdate('cameraTarget');\n            target = this.getTarget();\n        }\n        this.updateFraming(target);\n        this.frameModel();\n        this.setShadowIntensity(this.shadowIntensity);\n        this.isDirty = true;\n        this.dispatchEvent({ type: 'model-load', url: this.url });\n    }\n    reset() {\n        this.url = null;\n        const gltf = this._currentGLTF;\n        // Remove all current children\n        if (gltf != null) {\n            for (const child of this.modelContainer.children) {\n                this.modelContainer.remove(child);\n            }\n            gltf.dispose();\n            this._currentGLTF = null;\n        }\n        if (this.currentAnimationAction != null) {\n            this.currentAnimationAction.stop();\n            this.currentAnimationAction = null;\n        }\n        this.mixer.stopAllAction();\n        this.mixer.uncacheRoot(this);\n    }\n    get currentGLTF() {\n        return this._currentGLTF;\n    }\n    /**\n     * Updates the ModelScene for a new container size in CSS pixels.\n     */\n    setSize(width, height) {\n        if (this.width === width && this.height === height) {\n            return;\n        }\n        this.width = Math.max(width, 1);\n        this.height = Math.max(height, 1);\n        this.aspect = this.width / this.height;\n        this.frameModel();\n        this.isDirty = true;\n    }\n    updateBoundingBox() {\n        this.target.remove(this.modelContainer);\n        if (this.tightBounds === true) {\n            const bound = (box, vertex) => {\n                return box.expandByPoint(vertex);\n            };\n            this.boundingBox = reduceVertices(this.modelContainer, bound, new Box3());\n        }\n        else {\n            this.boundingBox.setFromObject(this.modelContainer);\n        }\n        this.boundingBox.getSize(this.size);\n        this.target.add(this.modelContainer);\n    }\n    /**\n     * Calculates the idealCameraDistance and fieldOfViewAspect that allows the 3D\n     * object to be framed tightly in a 2D window of any aspect ratio without\n     * clipping at any camera orbit. The camera's center target point can be\n     * optionally specified. If no center is specified, it defaults to the center\n     * of the bounding box, which means asymmetric models will tend to be tight on\n     * one side instead of both. Proper choice of center can correct this.\n     */\n    updateFraming(center = null) {\n        this.target.remove(this.modelContainer);\n        if (center == null) {\n            center = this.boundingBox.getCenter(new Vector3);\n        }\n        const radiusSquared = (value, vertex) => {\n            return Math.max(value, center.distanceToSquared(vertex));\n        };\n        const framedRadius = Math.sqrt(reduceVertices(this.modelContainer, radiusSquared, 0));\n        this.idealCameraDistance = framedRadius / SAFE_RADIUS_RATIO;\n        const horizontalFov = (value, vertex) => {\n            vertex.sub(center);\n            const radiusXZ = Math.sqrt(vertex.x * vertex.x + vertex.z * vertex.z);\n            return Math.max(value, radiusXZ / (this.idealCameraDistance - Math.abs(vertex.y)));\n        };\n        this.fieldOfViewAspect =\n            reduceVertices(this.modelContainer, horizontalFov, 0) / DEFAULT_TAN_FOV;\n        this.target.add(this.modelContainer);\n    }\n    /**\n     * Set's the framedFieldOfView based on the aspect ratio of the window in\n     * order to keep the model fully visible at any camera orientation.\n     */\n    frameModel() {\n        const vertical = DEFAULT_TAN_FOV * Math.max(1, this.fieldOfViewAspect / this.aspect);\n        this.framedFieldOfView = 2 * Math.atan(vertical) * 180 / Math.PI;\n    }\n    /**\n     * Returns the size of the corresponding canvas element.\n     */\n    getSize() {\n        return { width: this.width, height: this.height };\n    }\n    /**\n     * Returns the current camera.\n     */\n    getCamera() {\n        return this.activeCamera;\n    }\n    /**\n     * Sets the passed in camera to be used for rendering.\n     */\n    setCamera(camera) {\n        this.activeCamera = camera;\n    }\n    /**\n     * Sets the point in model coordinates the model should orbit/pivot around.\n     */\n    setTarget(modelX, modelY, modelZ) {\n        this.goalTarget.set(-modelX, -modelY, -modelZ);\n    }\n    /**\n     * Gets the point in model coordinates the model should orbit/pivot around.\n     */\n    getTarget() {\n        return vector3$1.copy(this.goalTarget).multiplyScalar(-1);\n    }\n    /**\n     * Shifts the model to the target point immediately instead of easing in.\n     */\n    jumpToGoal() {\n        this.updateTarget(SETTLING_TIME);\n    }\n    /**\n     * This should be called every frame with the frame delta to cause the target\n     * to transition to its set point.\n     */\n    updateTarget(delta) {\n        const goal = this.goalTarget;\n        const target = this.target.position;\n        if (!goal.equals(target)) {\n            const radius = this.idealCameraDistance;\n            let { x, y, z } = target;\n            x = this.targetDamperX.update(x, goal.x, delta, radius);\n            y = this.targetDamperY.update(y, goal.y, delta, radius);\n            z = this.targetDamperZ.update(z, goal.z, delta, radius);\n            this.target.position.set(x, y, z);\n            this.target.updateMatrixWorld();\n            this.setShadowRotation(this.yaw);\n            this.isDirty = true;\n        }\n    }\n    /**\n     * Yaw the +z (front) of the model toward the indicated world coordinates.\n     */\n    pointTowards(worldX, worldZ) {\n        const { x, z } = this.position;\n        this.yaw = Math.atan2(worldX - x, worldZ - z);\n    }\n    /**\n     * Yaw is the scene's orientation about the y-axis, around the rotation\n     * center.\n     */\n    set yaw(radiansY) {\n        this.rotation.y = radiansY;\n        this.updateMatrixWorld(true);\n        this.setShadowRotation(radiansY);\n        this.isDirty = true;\n    }\n    get yaw() {\n        return this.rotation.y;\n    }\n    set animationTime(value) {\n        this.mixer.setTime(value);\n    }\n    get animationTime() {\n        if (this.currentAnimationAction != null) {\n            return this.currentAnimationAction.time;\n        }\n        return 0;\n    }\n    get duration() {\n        if (this.currentAnimationAction != null &&\n            this.currentAnimationAction.getClip()) {\n            return this.currentAnimationAction.getClip().duration;\n        }\n        return 0;\n    }\n    get hasActiveAnimation() {\n        return this.currentAnimationAction != null;\n    }\n    /**\n     * Plays an animation if there are any associated with the current model.\n     * Accepts an optional string name of an animation to play. If no name is\n     * provided, or if no animation is found by the given name, always falls back\n     * to playing the first animation.\n     */\n    playAnimation(name = null, crossfadeTime = 0) {\n        if (this._currentGLTF == null) {\n            return;\n        }\n        const { animations } = this;\n        if (animations == null || animations.length === 0) {\n            console.warn(`Cannot play animation (model does not have any animations)`);\n            return;\n        }\n        let animationClip = null;\n        if (name != null) {\n            animationClip = this.animationsByName.get(name);\n        }\n        if (animationClip == null) {\n            animationClip = animations[0];\n        }\n        try {\n            const { currentAnimationAction: lastAnimationAction } = this;\n            this.currentAnimationAction =\n                this.mixer.clipAction(animationClip, this).play();\n            this.currentAnimationAction.enabled = true;\n            if (lastAnimationAction != null &&\n                this.currentAnimationAction !== lastAnimationAction) {\n                this.currentAnimationAction.crossFadeFrom(lastAnimationAction, crossfadeTime, false);\n            }\n        }\n        catch (error) {\n            console.error(error);\n        }\n    }\n    stopAnimation() {\n        if (this.currentAnimationAction != null) {\n            this.currentAnimationAction.stop();\n            this.currentAnimationAction.reset();\n            this.currentAnimationAction = null;\n        }\n        this.mixer.stopAllAction();\n    }\n    updateAnimation(step) {\n        this.mixer.update(step);\n    }\n    /**\n     * Call if the object has been changed in such a way that the shadow's shape\n     * has changed (not a rotation about the Y axis).\n     */\n    updateShadow() {\n        const shadow = this.shadow;\n        if (shadow != null) {\n            const side = this.element.arPlacement === 'wall' ? 'back' : 'bottom';\n            shadow.setScene(this, this.shadowSoftness, side);\n        }\n    }\n    /**\n     * Sets the shadow's intensity, lazily creating the shadow as necessary.\n     */\n    setShadowIntensity(shadowIntensity) {\n        this.shadowIntensity = shadowIntensity;\n        let shadow = this.shadow;\n        const side = this.element.arPlacement === 'wall' ? 'back' : 'bottom';\n        if (shadow != null) {\n            shadow.setIntensity(shadowIntensity);\n            shadow.setScene(this, this.shadowSoftness, side);\n        }\n        else if (shadowIntensity > 0) {\n            shadow = new Shadow(this, this.shadowSoftness, side);\n            shadow.setIntensity(shadowIntensity);\n            this.shadow = shadow;\n        }\n    }\n    /**\n     * Sets the shadow's softness by mapping a [0, 1] softness parameter to the\n     * shadow's resolution. This involves reallocation, so it should not be\n     * changed frequently. Softer shadows are cheaper to render.\n     */\n    setShadowSoftness(softness) {\n        this.shadowSoftness = softness;\n        const shadow = this.shadow;\n        if (shadow != null) {\n            shadow.setSoftness(softness);\n        }\n    }\n    /**\n     * The shadow must be rotated manually to match any global rotation applied to\n     * this model. The input is the global orientation about the Y axis.\n     */\n    setShadowRotation(radiansY) {\n        const shadow = this.shadow;\n        if (shadow != null) {\n            shadow.setRotation(radiansY);\n        }\n    }\n    /**\n     * Call to check if the shadow needs an updated render; returns true if an\n     * update is needed and resets the state.\n     */\n    isShadowDirty() {\n        const shadow = this.shadow;\n        if (shadow == null) {\n            return false;\n        }\n        else {\n            const { needsUpdate } = shadow;\n            shadow.needsUpdate = false;\n            return needsUpdate;\n        }\n    }\n    /**\n     * Shift the floor vertically from the bottom of the model's bounding box by\n     * offset (should generally be negative).\n     */\n    setShadowScaleAndOffset(scale, offset) {\n        const shadow = this.shadow;\n        if (shadow != null) {\n            shadow.setScaleAndOffset(scale, offset);\n        }\n    }\n    /**\n     * This method returns the world position and model-space normal of the point\n     * on the mesh corresponding to the input pixel coordinates given relative to\n     * the model-viewer element. If the mesh is not hit, the result is null.\n     */\n    positionAndNormalFromPoint(pixelPosition, object = this) {\n        raycaster.setFromCamera(pixelPosition, this.getCamera());\n        const hits = raycaster.intersectObject(object, true);\n        if (hits.length === 0) {\n            return null;\n        }\n        const hit = hits[0];\n        if (hit.face == null) {\n            return null;\n        }\n        hit.face.normal.applyNormalMatrix(new Matrix3().getNormalMatrix(hit.object.matrixWorld));\n        return { position: hit.point, normal: hit.face.normal };\n    }\n    /**\n     * The following methods are for operating on the set of Hotspot objects\n     * attached to the scene. These come from DOM elements, provided to slots by\n     * the Annotation Mixin.\n     */\n    addHotspot(hotspot) {\n        this.target.add(hotspot);\n    }\n    removeHotspot(hotspot) {\n        this.target.remove(hotspot);\n    }\n    /**\n     * Helper method to apply a function to all hotspots.\n     */\n    forHotspots(func) {\n        const { children } = this.target;\n        for (let i = 0, l = children.length; i < l; i++) {\n            const hotspot = children[i];\n            if (hotspot instanceof Hotspot) {\n                func(hotspot);\n            }\n        }\n    }\n    /**\n     * Update the CSS visibility of the hotspots based on whether their normals\n     * point toward the camera.\n     */\n    updateHotspots(viewerPosition) {\n        this.forHotspots((hotspot) => {\n            view.copy(viewerPosition);\n            target.setFromMatrixPosition(hotspot.matrixWorld);\n            view.sub(target);\n            normalWorld.copy(hotspot.normal)\n                .transformDirection(this.target.matrixWorld);\n            if (view.dot(normalWorld) < 0) {\n                hotspot.hide();\n            }\n            else {\n                hotspot.show();\n            }\n        });\n    }\n    /**\n     * Rotate all hotspots to an absolute orientation given by the input number of\n     * radians. Zero returns them to upright.\n     */\n    orientHotspots(radians) {\n        this.forHotspots((hotspot) => {\n            hotspot.orient(radians);\n        });\n    }\n    /**\n     * Set the rendering visibility of all hotspots. This is used to hide them\n     * during transitions and such.\n     */\n    setHotspotsVisibility(visible) {\n        this.forHotspots((hotspot) => {\n            hotspot.visible = visible;\n        });\n    }\n}\n\n/**\n * This class generates custom mipmaps for a roughness map by encoding the lost variation in the\n * normal map mip levels as increased roughness in the corresponding roughness mip levels. This\n * helps with rendering accuracy for MeshStandardMaterial, and also helps with anti-aliasing when\n * using PMREM. If the normal map is larger than the roughness map, the roughness map will be\n * enlarged to match the dimensions of the normal map.\n */\n\nvar _mipmapMaterial = _getMipmapMaterial();\n\nvar _mesh = new Mesh( new PlaneGeometry( 2, 2 ), _mipmapMaterial );\n\nvar _flatCamera = new OrthographicCamera( 0, 1, 0, 1, 0, 1 );\n\nvar _tempTarget = null;\n\nvar _renderer = null;\n\nfunction RoughnessMipmapper( renderer ) {\n\n\t_renderer = renderer;\n\n\t_renderer.compile( _mesh, _flatCamera );\n\n}\n\nRoughnessMipmapper.prototype = {\n\n\tconstructor: RoughnessMipmapper,\n\n\tgenerateMipmaps: function ( material ) {\n\n\t\tif ( 'roughnessMap' in material === false ) return;\n\n\t\tvar { roughnessMap, normalMap } = material;\n\n\t\tif ( roughnessMap === null || normalMap === null || ! roughnessMap.generateMipmaps || material.userData.roughnessUpdated ) return;\n\n\t\tmaterial.userData.roughnessUpdated = true;\n\n\t\tvar width = Math.max( roughnessMap.image.width, normalMap.image.width );\n\n\t\tvar height = Math.max( roughnessMap.image.height, normalMap.image.height );\n\n\t\tif ( ! MathUtils.isPowerOfTwo( width ) || ! MathUtils.isPowerOfTwo( height ) ) return;\n\n\t\tvar oldTarget = _renderer.getRenderTarget();\n\n\t\tvar autoClear = _renderer.autoClear;\n\n\t\t_renderer.autoClear = false;\n\n\t\tif ( _tempTarget === null || _tempTarget.width !== width || _tempTarget.height !== height ) {\n\n\t\t\tif ( _tempTarget !== null ) _tempTarget.dispose();\n\n\t\t\t_tempTarget = new WebGLRenderTarget( width, height, { depthBuffer: false } );\n\n\t\t\t_tempTarget.scissorTest = true;\n\n\t\t}\n\n\t\tif ( width !== roughnessMap.image.width || height !== roughnessMap.image.height ) {\n\n\t\t\tvar params = {\n\t\t\t\twrapS: roughnessMap.wrapS,\n\t\t\t\twrapT: roughnessMap.wrapT,\n\t\t\t\tmagFilter: roughnessMap.magFilter,\n\t\t\t\tminFilter: roughnessMap.minFilter,\n\t\t\t\tdepthBuffer: false\n\t\t\t};\n\n\t\t\tvar newRoughnessTarget = new WebGLRenderTarget( width, height, params );\n\n\t\t\tnewRoughnessTarget.texture.generateMipmaps = true;\n\n\t\t\t// Setting the render target causes the memory to be allocated.\n\n\t\t\t_renderer.setRenderTarget( newRoughnessTarget );\n\n\t\t\tmaterial.roughnessMap = newRoughnessTarget.texture;\n\n\t\t\tif ( material.metalnessMap == roughnessMap ) material.metalnessMap = material.roughnessMap;\n\n\t\t\tif ( material.aoMap == roughnessMap ) material.aoMap = material.roughnessMap;\n\n\t\t}\n\n\t\t_mipmapMaterial.uniforms.roughnessMap.value = roughnessMap;\n\n\t\t_mipmapMaterial.uniforms.normalMap.value = normalMap;\n\n\t\tvar position = new Vector2( 0, 0 );\n\n\t\tvar texelSize = _mipmapMaterial.uniforms.texelSize.value;\n\n\t\tfor ( var mip = 0; width >= 1 && height >= 1; ++ mip, width /= 2, height /= 2 ) {\n\n\t\t\t// Rendering to a mip level is not allowed in webGL1. Instead we must set\n\t\t\t// up a secondary texture to write the result to, then copy it back to the\n\t\t\t// proper mipmap level.\n\n\t\t\ttexelSize.set( 1.0 / width, 1.0 / height );\n\n\t\t\tif ( mip == 0 ) texelSize.set( 0.0, 0.0 );\n\n\t\t\t_tempTarget.viewport.set( position.x, position.y, width, height );\n\n\t\t\t_tempTarget.scissor.set( position.x, position.y, width, height );\n\n\t\t\t_renderer.setRenderTarget( _tempTarget );\n\n\t\t\t_renderer.render( _mesh, _flatCamera );\n\n\t\t\t_renderer.copyFramebufferToTexture( position, material.roughnessMap, mip );\n\n\t\t\t_mipmapMaterial.uniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( roughnessMap !== material.roughnessMap ) roughnessMap.dispose();\n\n\t\t_renderer.setRenderTarget( oldTarget );\n\n\t\t_renderer.autoClear = autoClear;\n\n\t},\n\n\tdispose: function () {\n\n\t\t_mipmapMaterial.dispose();\n\n\t\t_mesh.geometry.dispose();\n\n\t\tif ( _tempTarget != null ) _tempTarget.dispose();\n\n\t}\n\n};\n\nfunction _getMipmapMaterial() {\n\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\troughnessMap: { value: null },\n\t\t\tnormalMap: { value: null },\n\t\t\ttexelSize: { value: new Vector2( 1, 1 ) }\n\t\t},\n\n\t\tvertexShader: /* glsl */`\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t`,\n\n\t\tfragmentShader: /* glsl */`\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'RoughnessMipmapper';\n\n\treturn shaderMaterial;\n\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst deserializeUrl = (url) => (!!url && url !== 'null') ? toFullUrl(url) : null;\nconst assertIsArCandidate = () => {\n    if (IS_WEBXR_AR_CANDIDATE) {\n        return;\n    }\n    const missingApis = [];\n    if (!HAS_WEBXR_DEVICE_API) {\n        missingApis.push('WebXR Device API');\n    }\n    if (!HAS_WEBXR_HIT_TEST_API) {\n        missingApis.push('WebXR Hit Test API');\n    }\n    throw new Error(`The following APIs are required for AR, but are missing in this browser: ${missingApis.join(', ')}`);\n};\n/**\n * Converts a partial URL string to a fully qualified URL string.\n *\n * @param {String} url\n * @return {String}\n */\nconst toFullUrl = (partialUrl) => {\n    const url = new URL(partialUrl, window.location.toString());\n    return url.toString();\n};\n/**\n * Returns a throttled version of a given function that is only invoked at most\n * once within a given threshold of time in milliseconds.\n *\n * The throttled version of the function has a \"flush\" property that resets the\n * threshold for cases when immediate invokation is desired.\n */\nconst throttle = (fn, ms) => {\n    let timer = null;\n    const throttled = (...args) => {\n        if (timer != null) {\n            return;\n        }\n        fn(...args);\n        timer = self.setTimeout(() => timer = null, ms);\n    };\n    throttled.flush = () => {\n        if (timer != null) {\n            self.clearTimeout(timer);\n            timer = null;\n        }\n    };\n    return throttled;\n};\nconst debounce = (fn, ms) => {\n    let timer = null;\n    return (...args) => {\n        if (timer != null) {\n            self.clearTimeout(timer);\n        }\n        timer = self.setTimeout(() => {\n            timer = null;\n            fn(...args);\n        }, ms);\n    };\n};\n/**\n * @param {Number} value\n * @param {Number} lowerLimit\n * @param {Number} upperLimit\n * @return {Number} value clamped within lowerLimit..upperLimit\n */\nconst clamp = (value, lowerLimit, upperLimit) => Math.max(lowerLimit, Math.min(upperLimit, value));\n// The DPR we use for a \"capped\" scenario (see resolveDpr below):\nconst CAPPED_DEVICE_PIXEL_RATIO = 1;\n/**\n * This helper analyzes the layout of the current page to decide if we should\n * use the natural device pixel ratio, or a capped value.\n *\n * We cap DPR if there is no meta viewport (suggesting that user is not\n * consciously specifying how to scale the viewport relative to the device\n * screen size).\n *\n * The rationale is that this condition typically leads to a pathological\n * outcome on mobile devices. When the window dimensions are scaled up on a\n * device with a high DPR, we create a canvas that is much larger than\n * appropriate to accomodate for the pixel density if we naively use the\n * reported DPR.\n *\n * This value needs to be measured in real time, as device pixel ratio can\n * change over time (e.g., when a user zooms the page). Also, in some cases\n * (such as Firefox on Android), the window's innerWidth is initially reported\n * as the same as the screen's availWidth but changes later.\n *\n * A user who specifies a meta viewport, thereby consciously creating scaling\n * conditions where <model-viewer> is slow, will be encouraged to live their\n * best life.\n */\nconst resolveDpr = (() => {\n    // If true, implies that the user is conscious of the viewport scaling\n    // relative to the device screen size.\n    const HAS_META_VIEWPORT_TAG = (() => {\n        const metas = document.head != null ?\n            Array.from(document.head.querySelectorAll('meta')) :\n            [];\n        for (const meta of metas) {\n            if (meta.name === 'viewport') {\n                return true;\n            }\n        }\n        return false;\n    })();\n    if (!HAS_META_VIEWPORT_TAG) {\n        console.warn('No <meta name=\"viewport\"> detected; <model-viewer> will cap pixel density at 1.');\n    }\n    return () => HAS_META_VIEWPORT_TAG ? window.devicePixelRatio :\n        CAPPED_DEVICE_PIXEL_RATIO;\n})();\n/**\n * Debug mode is enabled when one of the two following conditions is true:\n *\n *  1. A 'model-viewer-debug-mode' query parameter is present in the current\n *     search string\n *  2. There is a global object ModelViewerElement with a debugMode property set\n *     to true\n */\nconst isDebugMode = (() => {\n    const debugQueryParameterName = 'model-viewer-debug-mode';\n    const debugQueryParameter = new RegExp(`[\\?&]${debugQueryParameterName}(&|$)`);\n    return () => (self.ModelViewerElement &&\n        self.ModelViewerElement.debugMode) ||\n        (self.location && self.location.search &&\n            self.location.search.match(debugQueryParameter));\n})();\n/**\n * Returns the first key in a Map in iteration order.\n *\n * NOTE(cdata): This is necessary because IE11 does not implement iterator\n * methods of Map, and polymer-build does not polyfill these methods for\n * compatibility and performance reasons. This helper proposes that it is\n * a reasonable compromise to sacrifice a very small amount of runtime\n * performance in IE11 for the sake of code clarity.\n */\nconst getFirstMapKey = (map) => {\n    if (map.keys != null) {\n        return map.keys().next().value || null;\n    }\n    let firstKey = null;\n    try {\n        map.forEach((_value, key, _map) => {\n            firstKey = key;\n            // Stop iterating the Map with forEach:\n            throw new Error();\n        });\n    }\n    catch (_error) {\n    }\n    return firstKey;\n};\nconst timePasses = (ms = 0) => new Promise(resolve => setTimeout(resolve, ms));\n/**\n * @param {EventTarget|EventDispatcher} target\n * @param {string} eventName\n * @param {?Function} predicate\n */\nconst waitForEvent = (target, eventName, predicate = null) => new Promise(resolve => {\n    function handler(event) {\n        if (!predicate || predicate(event)) {\n            resolve(event);\n            target.removeEventListener(eventName, handler);\n        }\n    }\n    target.addEventListener(eventName, handler);\n});\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst RADIUS = 0.2;\nconst LINE_WIDTH = 0.03;\nconst MAX_OPACITY = 0.75;\nconst SEGMENTS = 12;\nconst DELTA_PHI = Math.PI / (2 * SEGMENTS);\nconst vector2 = new Vector2();\n/**\n * Adds a quarter-annulus of vertices to the array, centered on cornerX,\n * cornerY.\n */\nconst addCorner = (vertices, cornerX, cornerY) => {\n    let phi = cornerX > 0 ? (cornerY > 0 ? 0 : -Math.PI / 2) :\n        (cornerY > 0 ? Math.PI / 2 : Math.PI);\n    for (let i = 0; i <= SEGMENTS; ++i) {\n        vertices.push(cornerX + (RADIUS - LINE_WIDTH) * Math.cos(phi), cornerY + (RADIUS - LINE_WIDTH) * Math.sin(phi), 0, cornerX + RADIUS * Math.cos(phi), cornerY + RADIUS * Math.sin(phi), 0);\n        phi += DELTA_PHI;\n    }\n};\n/**\n * This class is a set of two coincident planes. The first is just a cute box\n * outline with rounded corners and damped opacity to indicate the floor extents\n * of a scene. It is purposely larger than the scene's bounding box by RADIUS on\n * all sides so that small scenes are still visible / selectable. Its center is\n * actually carved out by vertices to ensure its fragment shader doesn't add\n * much time.\n *\n * The child plane is a simple plane with the same extents for use in hit\n * testing (translation is triggered when the touch hits the plane, rotation\n * otherwise).\n */\nclass PlacementBox extends Mesh {\n    constructor(scene, side) {\n        const geometry = new BufferGeometry();\n        const triangles = [];\n        const vertices = [];\n        const { size, boundingBox } = scene;\n        const x = size.x / 2;\n        const y = (side === 'back' ? size.y : size.z) / 2;\n        addCorner(vertices, x, y);\n        addCorner(vertices, -x, y);\n        addCorner(vertices, -x, -y);\n        addCorner(vertices, x, -y);\n        const numVertices = vertices.length / 3;\n        for (let i = 0; i < numVertices - 2; i += 2) {\n            triangles.push(i, i + 1, i + 3, i, i + 3, i + 2);\n        }\n        const i = numVertices - 2;\n        triangles.push(i, i + 1, 1, i, 1, 0);\n        geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n        geometry.setIndex(triangles);\n        super(geometry);\n        this.side = side;\n        const material = this.material;\n        material.side = DoubleSide;\n        material.transparent = true;\n        material.opacity = 0;\n        this.goalOpacity = 0;\n        this.opacityDamper = new Damper();\n        this.hitPlane =\n            new Mesh(new PlaneGeometry(2 * (x + RADIUS), 2 * (y + RADIUS)));\n        this.hitPlane.visible = false;\n        this.add(this.hitPlane);\n        boundingBox.getCenter(this.position);\n        switch (side) {\n            case 'bottom':\n                this.rotateX(-Math.PI / 2);\n                this.shadowHeight = boundingBox.min.y;\n                this.position.y = this.shadowHeight;\n                break;\n            case 'back':\n                this.shadowHeight = boundingBox.min.z;\n                this.position.z = this.shadowHeight;\n        }\n        scene.target.add(this);\n    }\n    /**\n     * Get the world hit position if the touch coordinates hit the box, and null\n     * otherwise. Pass the scene in to get access to its raycaster.\n     */\n    getHit(scene, screenX, screenY) {\n        vector2.set(screenX, -screenY);\n        this.hitPlane.visible = true;\n        const hitResult = scene.positionAndNormalFromPoint(vector2, this.hitPlane);\n        this.hitPlane.visible = false;\n        return hitResult == null ? null : hitResult.position;\n    }\n    /**\n     * Offset the height of the box relative to the bottom of the scene. Positive\n     * is up, so generally only negative values are used.\n     */\n    set offsetHeight(offset) {\n        if (this.side === 'back') {\n            this.position.z = this.shadowHeight + offset;\n        }\n        else {\n            this.position.y = this.shadowHeight + offset;\n        }\n    }\n    get offsetHeight() {\n        if (this.side === 'back') {\n            return this.position.z - this.shadowHeight;\n        }\n        else {\n            return this.position.y - this.shadowHeight;\n        }\n    }\n    /**\n     * Set the box's visibility; it will fade in and out.\n     */\n    set show(visible) {\n        this.goalOpacity = visible ? MAX_OPACITY : 0;\n    }\n    /**\n     * Call on each frame with the frame delta to fade the box.\n     */\n    updateOpacity(delta) {\n        const material = this.material;\n        material.opacity =\n            this.opacityDamper.update(material.opacity, this.goalOpacity, delta, 1);\n        this.visible = material.opacity > 0;\n    }\n    /**\n     * Call this to clean up Three's cache when you remove the box.\n     */\n    dispose() {\n        const { geometry, material } = this.hitPlane;\n        geometry.dispose();\n        material.dispose();\n        this.geometry.dispose();\n        this.material.dispose();\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// AR shadow is not user-configurable. This is to pave the way for AR lighting\n// estimation, which will be used once available in WebXR.\nconst AR_SHADOW_INTENSITY = 0.3;\nconst ROTATION_RATE = 1.5;\n// Angle down (towards bottom of screen) from camera center ray to use for hit\n// testing against the floor. This makes placement faster and more intuitive\n// assuming the phone is in portrait mode. This seems to be a reasonable\n// assumption for the start of the session and UI will lack landscape mode to\n// encourage upright use.\nconst HIT_ANGLE_DEG = 20;\n// Slow down the dampers for initial placement.\nconst INTRO_DAMPER_RATE = 0.4;\nconst SCALE_SNAP_HIGH = 1.2;\nconst SCALE_SNAP_LOW = 1 / SCALE_SNAP_HIGH;\n// For automatic dynamic viewport scaling, don't let the scale drop below this\n// limit.\nconst MIN_VIEWPORT_SCALE = 0.25;\nconst ARStatus = {\n    NOT_PRESENTING: 'not-presenting',\n    SESSION_STARTED: 'session-started',\n    OBJECT_PLACED: 'object-placed',\n    FAILED: 'failed'\n};\nconst vector3 = new Vector3();\nconst matrix4 = new Matrix4();\nconst hitPosition = new Vector3();\nclass ARRenderer extends EventDispatcher {\n    constructor(renderer) {\n        super();\n        this.renderer = renderer;\n        this.camera = new PerspectiveCamera();\n        this.currentSession = null;\n        this.placeOnWall = false;\n        this.placementBox = null;\n        this.lastTick = null;\n        this.turntableRotation = null;\n        this.oldShadowIntensity = null;\n        this.oldBackground = null;\n        this.rafId = null;\n        this.refSpace = null;\n        this.viewerRefSpace = null;\n        this.frame = null;\n        this.initialHitSource = null;\n        this.transientHitTestSource = null;\n        this.inputSource = null;\n        this._presentedScene = null;\n        this.resolveCleanup = null;\n        this.exitWebXRButtonContainer = null;\n        this.initialModelToWorld = null;\n        this.initialized = false;\n        this.oldTarget = new Vector3();\n        this.placementComplete = false;\n        this.isTranslating = false;\n        this.isRotating = false;\n        this.isScaling = false;\n        this.lastDragPosition = new Vector3();\n        this.lastScalar = 0;\n        this.goalPosition = new Vector3();\n        this.goalYaw = 0;\n        this.goalScale = 1;\n        this.xDamper = new Damper();\n        this.yDamper = new Damper();\n        this.zDamper = new Damper();\n        this.yawDamper = new Damper();\n        this.scaleDamper = new Damper();\n        this.damperRate = 1;\n        this.onExitWebXRButtonContainerClick = () => this.stopPresenting();\n        this.onUpdateScene = () => {\n            if (this.placementBox != null && this.isPresenting) {\n                this.placementBox.dispose();\n                this.placementBox = new PlacementBox(this.presentedScene, this.placeOnWall ? 'back' : 'bottom');\n            }\n        };\n        this.onSelectStart = (event) => {\n            const hitSource = this.transientHitTestSource;\n            if (hitSource == null) {\n                return;\n            }\n            const fingers = this.frame.getHitTestResultsForTransientInput(hitSource);\n            const scene = this.presentedScene;\n            const box = this.placementBox;\n            if (fingers.length === 1) {\n                this.inputSource = event.inputSource;\n                const { axes } = this.inputSource.gamepad;\n                const hitPosition = box.getHit(this.presentedScene, axes[0], axes[1]);\n                box.show = true;\n                if (hitPosition != null) {\n                    this.isTranslating = true;\n                    this.lastDragPosition.copy(hitPosition);\n                }\n                else if (this.placeOnWall === false) {\n                    this.isRotating = true;\n                    this.lastScalar = axes[0];\n                }\n            }\n            else if (fingers.length === 2 && scene.canScale) {\n                box.show = true;\n                this.isScaling = true;\n                this.lastScalar = this.fingerSeparation(fingers) / scene.scale.x;\n            }\n        };\n        this.onSelectEnd = () => {\n            this.isTranslating = false;\n            this.isRotating = false;\n            this.isScaling = false;\n            this.inputSource = null;\n            this.goalPosition.y +=\n                this.placementBox.offsetHeight * this.presentedScene.scale.x;\n            this.placementBox.show = false;\n        };\n        this.threeRenderer = renderer.threeRenderer;\n        // Turn this off, as the matrix is set directly from webXR rather than using\n        // postion, rotation, scale.\n        this.camera.matrixAutoUpdate = false;\n    }\n    async resolveARSession(scene) {\n        assertIsArCandidate();\n        const session = await navigator.xr.requestSession('immersive-ar', {\n            requiredFeatures: ['hit-test'],\n            optionalFeatures: ['dom-overlay'],\n            domOverlay: { root: scene.element.shadowRoot.querySelector('div.default') }\n        });\n        const gl = this.threeRenderer.getContext();\n        // `makeXRCompatible` replaced `setCompatibleXRDevice` in Chrome M73 @TODO\n        // #293, handle WebXR API changes. WARNING: this can cause a GL context\n        // loss according to the spec, though current implementations don't do so.\n        await gl.makeXRCompatible();\n        session.updateRenderState({ baseLayer: new XRWebGLLayer(session, gl, { alpha: true }) });\n        // The render state update takes effect on the next animation frame. Wait\n        // for it so that we get a framebuffer.\n        let waitForXRAnimationFrame = new Promise((resolve, _reject) => {\n            session.requestAnimationFrame(() => resolve());\n        });\n        await waitForXRAnimationFrame;\n        scene.element[$onResize](window.screen);\n        const { framebuffer, framebufferWidth, framebufferHeight } = session.renderState.baseLayer;\n        // Redirect rendering to the WebXR offscreen framebuffer.\n        // TODO: this method should be added to three.js's exported interface.\n        this.threeRenderer.setFramebuffer(framebuffer);\n        this.threeRenderer.setPixelRatio(1);\n        this.threeRenderer.setSize(framebufferWidth, framebufferHeight, false);\n        const exitButton = scene.element.shadowRoot.querySelector('.slot.exit-webxr-ar-button');\n        exitButton.classList.add('enabled');\n        exitButton.addEventListener('click', this.onExitWebXRButtonContainerClick);\n        this.exitWebXRButtonContainer = exitButton;\n        return session;\n    }\n    /**\n     * The currently presented scene, if any\n     */\n    get presentedScene() {\n        return this._presentedScene;\n    }\n    /**\n     * Resolves to true if the renderer has detected all the necessary qualities\n     * to support presentation in AR.\n     */\n    async supportsPresentation() {\n        try {\n            assertIsArCandidate();\n            return await navigator.xr.isSessionSupported('immersive-ar');\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    /**\n     * Present a scene in AR\n     */\n    async present(scene) {\n        if (this.isPresenting) {\n            console.warn('Cannot present while a model is already presenting');\n        }\n        let waitForAnimationFrame = new Promise((resolve, _reject) => {\n            requestAnimationFrame(() => resolve());\n        });\n        scene.setHotspotsVisibility(false);\n        scene.isDirty = true;\n        // Render a frame to turn off the hotspots\n        await waitForAnimationFrame;\n        // This sets isPresenting to true\n        this._presentedScene = scene;\n        const currentSession = await this.resolveARSession(scene);\n        currentSession.addEventListener('end', () => {\n            this.postSessionCleanup();\n        }, { once: true });\n        this.refSpace = await currentSession.requestReferenceSpace('local');\n        this.viewerRefSpace = await currentSession.requestReferenceSpace('viewer');\n        scene.setCamera(this.camera);\n        this.initialized = false;\n        this.damperRate = INTRO_DAMPER_RATE;\n        this.turntableRotation = scene.yaw;\n        scene.yaw = 0;\n        this.goalYaw = 0;\n        this.goalScale = 1;\n        this.oldBackground = scene.background;\n        scene.background = null;\n        this.oldShadowIntensity = scene.shadowIntensity;\n        scene.setShadowIntensity(0);\n        this.oldTarget.copy(scene.getTarget());\n        scene.addEventListener('model-load', this.onUpdateScene);\n        const radians = HIT_ANGLE_DEG * Math.PI / 180;\n        const ray = this.placeOnWall === true ?\n            undefined :\n            new XRRay(new DOMPoint(0, 0, 0), { x: 0, y: -Math.sin(radians), z: -Math.cos(radians) });\n        currentSession\n            .requestHitTestSource({ space: this.viewerRefSpace, offsetRay: ray })\n            .then(hitTestSource => {\n            this.initialHitSource = hitTestSource;\n        });\n        this.currentSession = currentSession;\n        this.placementBox =\n            new PlacementBox(scene, this.placeOnWall ? 'back' : 'bottom');\n        this.placementComplete = false;\n        this.lastTick = performance.now();\n        // Start the event loop.\n        this.tick();\n    }\n    /**\n     * If currently presenting a scene in AR, stops presentation and exits AR.\n     */\n    async stopPresenting() {\n        if (!this.isPresenting) {\n            return;\n        }\n        const cleanupPromise = new Promise((resolve) => {\n            this.resolveCleanup = resolve;\n        });\n        try {\n            await this.currentSession.end();\n            await cleanupPromise;\n        }\n        catch (error) {\n            console.warn('Error while trying to end AR session');\n            console.warn(error);\n            this.postSessionCleanup();\n        }\n    }\n    /**\n     * True if a scene is currently in the process of being presented in AR\n     */\n    get isPresenting() {\n        return this.presentedScene != null;\n    }\n    get target() {\n        return this.oldTarget;\n    }\n    updateTarget() {\n        const scene = this.presentedScene;\n        if (scene != null) {\n            const target = scene.getTarget();\n            this.oldTarget.copy(target);\n            if (this.placeOnWall) {\n                // Move the scene's target to the center of the back of the model's\n                // bounding box.\n                scene.setTarget(target.x, target.y, scene.boundingBox.min.z);\n            }\n            else {\n                // Move the scene's target to the model's floor height.\n                scene.setTarget(target.x, scene.boundingBox.min.y, target.z);\n            }\n        }\n    }\n    postSessionCleanup() {\n        // The offscreen WebXR framebuffer is now invalid, switch\n        // back to the default framebuffer for canvas output.\n        // TODO: this method should be added to three.js's exported interface.\n        this.threeRenderer.setFramebuffer(null);\n        const session = this.currentSession;\n        if (session != null) {\n            session.removeEventListener('selectstart', this.onSelectStart);\n            session.removeEventListener('selectend', this.onSelectEnd);\n            session.cancelAnimationFrame(this.rafId);\n            this.currentSession = null;\n        }\n        const scene = this.presentedScene;\n        if (scene != null) {\n            const { target, element } = scene;\n            scene.setCamera(scene.camera);\n            target.remove(this.placementBox);\n            scene.position.set(0, 0, 0);\n            scene.scale.set(1, 1, 1);\n            scene.setShadowScaleAndOffset(1, 0);\n            const yaw = this.turntableRotation;\n            if (yaw != null) {\n                scene.yaw = yaw;\n            }\n            const intensity = this.oldShadowIntensity;\n            if (intensity != null) {\n                scene.setShadowIntensity(intensity);\n            }\n            const background = this.oldBackground;\n            if (background != null) {\n                scene.background = background;\n            }\n            const point = this.oldTarget;\n            scene.setTarget(point.x, point.y, point.z);\n            scene.removeEventListener('model-load', this.onUpdateScene);\n            scene.orientHotspots(0);\n            element.requestUpdate('cameraTarget');\n            element[$onResize](element.getBoundingClientRect());\n        }\n        // Force the Renderer to update its size\n        this.renderer.height = 0;\n        const exitButton = this.exitWebXRButtonContainer;\n        if (exitButton != null) {\n            exitButton.classList.remove('enabled');\n            exitButton.removeEventListener('click', this.onExitWebXRButtonContainerClick);\n            this.exitWebXRButtonContainer = null;\n        }\n        const hitSource = this.transientHitTestSource;\n        if (hitSource != null) {\n            hitSource.cancel();\n            this.transientHitTestSource = null;\n        }\n        const hitSourceInitial = this.initialHitSource;\n        if (hitSourceInitial != null) {\n            hitSourceInitial.cancel();\n            this.initialHitSource = null;\n        }\n        if (this.placementBox != null) {\n            this.placementBox.dispose();\n            this.placementBox = null;\n        }\n        this.lastTick = null;\n        this.turntableRotation = null;\n        this.oldShadowIntensity = null;\n        this.oldBackground = null;\n        this.rafId = null;\n        this.refSpace = null;\n        this._presentedScene = null;\n        this.viewerRefSpace = null;\n        this.frame = null;\n        this.inputSource = null;\n        if (this.resolveCleanup != null) {\n            this.resolveCleanup();\n        }\n        this.dispatchEvent({ type: 'status', status: ARStatus.NOT_PRESENTING });\n    }\n    updateCamera(view) {\n        const { camera } = this;\n        const { matrix: cameraMatrix } = camera;\n        cameraMatrix.fromArray(view.transform.matrix);\n        camera.updateMatrixWorld(true);\n        // position is not updated when matrix is updated.\n        camera.position.setFromMatrixPosition(cameraMatrix);\n        if (!this.initialized) {\n            camera.projectionMatrix.fromArray(view.projectionMatrix);\n            // Have to set the inverse manually when setting matrix directly. This is\n            // needed for raycasting.\n            camera.projectionMatrixInverse.copy(camera.projectionMatrix).invert();\n            // Orient model toward camera on first frame.\n            const scene = this.presentedScene;\n            camera.getWorldDirection(vector3);\n            scene.yaw = Math.atan2(-vector3.x, -vector3.z);\n            this.goalYaw = scene.yaw;\n            this.initialModelToWorld = new Matrix4().copy(scene.matrixWorld);\n            scene.setHotspotsVisibility(true);\n            this.initialized = true;\n            this.dispatchEvent({ type: 'status', status: ARStatus.SESSION_STARTED });\n        }\n        if (this.initialHitSource != null) {\n            // Target locked to screen center\n            const { position, idealCameraDistance: radius } = this.presentedScene;\n            camera.getWorldDirection(position);\n            position.multiplyScalar(radius);\n            position.add(camera.position);\n        }\n        // Use automatic dynamic viewport scaling if supported.\n        if (view.requestViewportScale && view.recommendedViewportScale) {\n            const scale = view.recommendedViewportScale;\n            view.requestViewportScale(Math.max(scale, MIN_VIEWPORT_SCALE));\n        }\n        const layer = this.currentSession.renderState.baseLayer;\n        const viewport = layer.getViewport(view);\n        this.threeRenderer.setViewport(viewport.x, viewport.y, viewport.width, viewport.height);\n        this.presentedScene.orientHotspots(Math.atan2(cameraMatrix.elements[1], cameraMatrix.elements[5]));\n    }\n    placeInitially(frame) {\n        const hitSource = this.initialHitSource;\n        if (hitSource == null) {\n            return;\n        }\n        const hitTestResults = frame.getHitTestResults(hitSource);\n        if (hitTestResults.length == 0) {\n            return;\n        }\n        const hit = hitTestResults[0];\n        const hitPoint = this.getHitPoint(hit);\n        if (hitPoint == null) {\n            return;\n        }\n        this.placeModel(hitPoint);\n        hitSource.cancel();\n        this.initialHitSource = null;\n        const { session } = frame;\n        session.addEventListener('selectstart', this.onSelectStart);\n        session.addEventListener('selectend', this.onSelectEnd);\n        session\n            .requestHitTestSourceForTransientInput({ profile: 'generic-touchscreen' })\n            .then(hitTestSource => {\n            this.transientHitTestSource = hitTestSource;\n        });\n    }\n    getHitPoint(hitResult) {\n        const pose = hitResult.getPose(this.refSpace);\n        if (pose == null) {\n            return null;\n        }\n        const hitMatrix = matrix4.fromArray(pose.transform.matrix);\n        if (this.placeOnWall === true) {\n            // Orient the model to the wall's normal vector.\n            this.goalYaw = Math.atan2(hitMatrix.elements[4], hitMatrix.elements[6]);\n        }\n        // Check that the y-coordinate of the normal is large enough that the normal\n        // is pointing up for floor placement; opposite for wall placement.\n        return hitMatrix.elements[5] > 0.75 !== this.placeOnWall ?\n            hitPosition.setFromMatrixPosition(hitMatrix) :\n            null;\n    }\n    /**\n     * This sets the initial model placement based on the input hit point. The\n     * bottom of the model will be placed on the floor (the shadow will rest on\n     * the input's y-coordinate). The XZ placement is found by first putting the\n     * scene's target at the hit point, drawing a ray from the camera to the\n     * target, and finding the XZ-intersection of this ray with the model's\n     * bounding box. The scene is then translated on the XZ plane to position this\n     * intersection point at the input hit point. If the ray does not intersect,\n     * the target is left at the hit point.\n     *\n     * This ensures the model is placed according to the chosen target, is not\n     * reoriented, and does not intersect the camera even when the model\n     * is large (unless the target is chosen outside of the model's bounding box).\n     *\n     * Only a public method to make it testable.\n     */\n    placeModel(hit) {\n        const scene = this.presentedScene;\n        this.placementBox.show = true;\n        const goal = this.goalPosition;\n        goal.copy(hit);\n        if (this.placeOnWall === false) {\n            const floor = hit.y;\n            const origin = this.camera.position.clone();\n            const direction = hit.clone().sub(origin).normalize();\n            // Pull camera back enough to be outside of large models.\n            origin.sub(direction.multiplyScalar(scene.idealCameraDistance));\n            const ray = new Ray(origin, direction.normalize());\n            const modelToWorld = this.initialModelToWorld;\n            const modelPosition = new Vector3().setFromMatrixPosition(modelToWorld).add(hit);\n            modelToWorld.setPosition(modelPosition);\n            ray.applyMatrix4(modelToWorld.invert());\n            // Make the box tall so that we don't intersect the top face.\n            const { max } = scene.boundingBox;\n            max.y += 10;\n            ray.intersectBox(scene.boundingBox, modelPosition);\n            max.y -= 10;\n            if (modelPosition != null) {\n                modelPosition.applyMatrix4(modelToWorld);\n                goal.add(hit).sub(modelPosition);\n            }\n            // Ignore the y-coordinate and set on the floor instead.\n            goal.y = floor;\n        }\n        this.updateTarget();\n        this.dispatchEvent({ type: 'status', status: ARStatus.OBJECT_PLACED });\n    }\n    fingerSeparation(fingers) {\n        const fingerOne = fingers[0].inputSource.gamepad.axes;\n        const fingerTwo = fingers[1].inputSource.gamepad.axes;\n        const deltaX = fingerTwo[0] - fingerOne[0];\n        const deltaY = fingerTwo[1] - fingerOne[1];\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    }\n    processInput(frame) {\n        const hitSource = this.transientHitTestSource;\n        if (hitSource == null) {\n            return;\n        }\n        if (!this.isTranslating && !this.isScaling && !this.isRotating) {\n            return;\n        }\n        const fingers = frame.getHitTestResultsForTransientInput(hitSource);\n        const scene = this.presentedScene;\n        const scale = scene.scale.x;\n        // Rotating, translating and scaling are mutually exclusive operations; only\n        // one can happen at a time, but we can switch during a gesture.\n        if (this.isScaling) {\n            if (fingers.length < 2) {\n                // If we lose the second finger, stop scaling (in fact, stop processing\n                // input altogether until a new gesture starts).\n                this.isScaling = false;\n            }\n            else {\n                const separation = this.fingerSeparation(fingers);\n                const scale = separation / this.lastScalar;\n                this.goalScale =\n                    (scale < SCALE_SNAP_HIGH && scale > SCALE_SNAP_LOW) ? 1 : scale;\n            }\n            return;\n        }\n        else if (fingers.length === 2 && scene.canScale) {\n            // If we were rotating or translating and we get a second finger, switch\n            // to scaling instead.\n            this.isTranslating = false;\n            this.isRotating = false;\n            this.isScaling = true;\n            this.lastScalar = this.fingerSeparation(fingers) / scale;\n            return;\n        }\n        if (this.isRotating) {\n            const thisDragX = this.inputSource.gamepad.axes[0];\n            this.goalYaw += (thisDragX - this.lastScalar) * ROTATION_RATE;\n            this.lastScalar = thisDragX;\n        }\n        else if (this.isTranslating) {\n            fingers.forEach(finger => {\n                if (finger.inputSource !== this.inputSource ||\n                    finger.results.length < 1) {\n                    return;\n                }\n                const hit = this.getHitPoint(finger.results[0]);\n                if (hit == null) {\n                    return;\n                }\n                this.goalPosition.sub(this.lastDragPosition);\n                if (this.placeOnWall === false) {\n                    const offset = hit.y - this.lastDragPosition.y;\n                    // When a lower floor is found, keep the model at the same height, but\n                    // drop the placement box to the floor. The model falls on select end.\n                    if (offset < 0) {\n                        this.placementBox.offsetHeight = offset / scale;\n                        this.presentedScene.setShadowScaleAndOffset(scale, offset);\n                        // Interpolate hit ray up to drag plane\n                        const cameraPosition = vector3.copy(this.camera.position);\n                        const alpha = -offset / (cameraPosition.y - hit.y);\n                        cameraPosition.multiplyScalar(alpha);\n                        hit.multiplyScalar(1 - alpha).add(cameraPosition);\n                    }\n                }\n                this.goalPosition.add(hit);\n                this.lastDragPosition.copy(hit);\n            });\n        }\n    }\n    moveScene(delta) {\n        const scene = this.presentedScene;\n        const { position, yaw, idealCameraDistance: radius } = scene;\n        const goal = this.goalPosition;\n        const oldScale = scene.scale.x;\n        const box = this.placementBox;\n        if (this.initialHitSource == null &&\n            (!goal.equals(position) || this.goalScale !== oldScale)) {\n            let { x, y, z } = position;\n            delta *= this.damperRate;\n            x = this.xDamper.update(x, goal.x, delta, radius);\n            y = this.yDamper.update(y, goal.y, delta, radius);\n            z = this.zDamper.update(z, goal.z, delta, radius);\n            position.set(x, y, z);\n            const newScale = this.scaleDamper.update(oldScale, this.goalScale, delta, 1);\n            scene.scale.set(newScale, newScale, newScale);\n            if (!this.isTranslating) {\n                const offset = goal.y - y;\n                if (this.placementComplete && this.placeOnWall === false) {\n                    box.offsetHeight = offset / newScale;\n                    scene.setShadowScaleAndOffset(newScale, offset);\n                }\n                else if (offset === 0) {\n                    this.placementComplete = true;\n                    box.show = false;\n                    scene.setShadowIntensity(AR_SHADOW_INTENSITY);\n                    this.damperRate = 1;\n                }\n            }\n        }\n        box.updateOpacity(delta);\n        scene.updateTarget(delta);\n        // yaw must be updated last, since this also updates the shadow position.\n        scene.yaw = this.yawDamper.update(yaw, this.goalYaw, delta, Math.PI);\n    }\n    tick() {\n        this.rafId = this.currentSession.requestAnimationFrame((time, frame) => this.onWebXRFrame(time, frame));\n    }\n    /**\n     * Only public to make it testable.\n     */\n    onWebXRFrame(time, frame) {\n        this.frame = frame;\n        const pose = frame.getViewerPose(this.refSpace);\n        // TODO: Notify external observers of tick\n        this.tick();\n        const scene = this.presentedScene;\n        if (pose == null || scene == null) {\n            return;\n        }\n        // WebXR may return multiple views, i.e. for headset AR. This\n        // isn't really supported at this point, but make a best-effort\n        // attempt to render other views also, using the first view\n        // as the main viewpoint.\n        let isFirstView = true;\n        for (const view of pose.views) {\n            this.updateCamera(view);\n            if (isFirstView) {\n                this.placeInitially(frame);\n                this.processInput(frame);\n                const delta = time - this.lastTick;\n                this.moveScene(delta);\n                this.renderer.preRender(scene, time, delta);\n                this.lastTick = time;\n            }\n            // TODO: This is a workaround for a Chrome bug, which should be fixed\n            // soon: https://bugs.chromium.org/p/chromium/issues/detail?id=1184085\n            const gl = this.threeRenderer.context;\n            gl.depthMask(false);\n            gl.clear(gl.DEPTH_BUFFER_BIT);\n            gl.depthMask(true);\n            this.threeRenderer.render(scene, this.camera);\n            isFirstView = false;\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * This Debugger exposes internal details of the <model-viewer> rendering\n * substructure so that external tools can more easily inspect and operate on\n * them.\n *\n * It also activates shader debugging on the associated GL context. Shader\n * debugging trades performance for useful error information, so it is not\n * recommended to activate this unless needed.\n */\nclass Debugger {\n    constructor(renderer) {\n        // Force WebGL shader debugging on:\n        renderer.threeRenderer.debug = { checkShaderErrors: true };\n        // Announce debug details at microtask timing to give the `Renderer`\n        // constructor time to complete its initialization, just to be on the safe\n        // side:\n        Promise.resolve().then(() => {\n            self.dispatchEvent(new CustomEvent('model-viewer-renderer-debug', {\n                detail: {\n                    renderer,\n                    THREE: {\n                        ShaderMaterial,\n                        Texture: Texture$1,\n                        Mesh,\n                        Scene,\n                        PlaneBufferGeometry: PlaneGeometry,\n                        OrthographicCamera,\n                        WebGLRenderTarget\n                    }\n                }\n            }));\n        });\n    }\n    addScene(scene) {\n        self.dispatchEvent(new CustomEvent('model-viewer-scene-added-debug', { detail: { scene } }));\n    }\n    removeScene(scene) {\n        self.dispatchEvent(new CustomEvent('model-viewer-scene-removed-debug', { detail: { scene } }));\n    }\n}\n\nvar SkeletonUtils = {\n\n\tretarget: function () {\n\n\t\tvar pos = new Vector3(),\n\t\t\tquat = new Quaternion(),\n\t\t\tscale = new Vector3(),\n\t\t\tbindBoneMatrix = new Matrix4(),\n\t\t\trelativeMatrix = new Matrix4(),\n\t\t\tglobalMatrix = new Matrix4();\n\n\t\treturn function ( target, source, options ) {\n\n\t\t\toptions = options || {};\n\t\t\toptions.preserveMatrix = options.preserveMatrix !== undefined ? options.preserveMatrix : true;\n\t\t\toptions.preservePosition = options.preservePosition !== undefined ? options.preservePosition : true;\n\t\t\toptions.preserveHipPosition = options.preserveHipPosition !== undefined ? options.preserveHipPosition : false;\n\t\t\toptions.useTargetMatrix = options.useTargetMatrix !== undefined ? options.useTargetMatrix : false;\n\t\t\toptions.hip = options.hip !== undefined ? options.hip : 'hip';\n\t\t\toptions.names = options.names || {};\n\n\t\t\tvar sourceBones = source.isObject3D ? source.skeleton.bones : this.getBones( source ),\n\t\t\t\tbones = target.isObject3D ? target.skeleton.bones : this.getBones( target ),\n\t\t\t\tbindBones,\n\t\t\t\tbone, name, boneTo,\n\t\t\t\tbonesPosition, i;\n\n\t\t\t// reset bones\n\n\t\t\tif ( target.isObject3D ) {\n\n\t\t\t\ttarget.skeleton.pose();\n\n\t\t\t} else {\n\n\t\t\t\toptions.useTargetMatrix = true;\n\t\t\t\toptions.preserveMatrix = false;\n\n\t\t\t}\n\n\t\t\tif ( options.preservePosition ) {\n\n\t\t\t\tbonesPosition = [];\n\n\t\t\t\tfor ( i = 0; i < bones.length; i ++ ) {\n\n\t\t\t\t\tbonesPosition.push( bones[ i ].position.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.preserveMatrix ) {\n\n\t\t\t\t// reset matrix\n\n\t\t\t\ttarget.updateMatrixWorld();\n\n\t\t\t\ttarget.matrixWorld.identity();\n\n\t\t\t\t// reset children matrix\n\n\t\t\t\tfor ( i = 0; i < target.children.length; ++ i ) {\n\n\t\t\t\t\ttarget.children[ i ].updateMatrixWorld( true );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.offsets ) {\n\n\t\t\t\tbindBones = [];\n\n\t\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\t\tbone = bones[ i ];\n\t\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\t\tif ( options.offsets && options.offsets[ name ] ) {\n\n\t\t\t\t\t\tbone.matrix.multiply( options.offsets[ name ] );\n\n\t\t\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindBones.push( bone.matrixWorld.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\tbone = bones[ i ];\n\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, sourceBones );\n\n\t\t\t\tglobalMatrix.copy( bone.matrixWorld );\n\n\t\t\t\tif ( boneTo ) {\n\n\t\t\t\t\tboneTo.updateMatrixWorld();\n\n\t\t\t\t\tif ( options.useTargetMatrix ) {\n\n\t\t\t\t\t\trelativeMatrix.copy( boneTo.matrixWorld );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\trelativeMatrix.copy( target.matrixWorld ).invert();\n\t\t\t\t\t\trelativeMatrix.multiply( boneTo.matrixWorld );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// ignore scale to extract rotation\n\n\t\t\t\t\tscale.setFromMatrixScale( relativeMatrix );\n\t\t\t\t\trelativeMatrix.scale( scale.set( 1 / scale.x, 1 / scale.y, 1 / scale.z ) );\n\n\t\t\t\t\t// apply to global matrix\n\n\t\t\t\t\tglobalMatrix.makeRotationFromQuaternion( quat.setFromRotationMatrix( relativeMatrix ) );\n\n\t\t\t\t\tif ( target.isObject3D ) {\n\n\t\t\t\t\t\tvar boneIndex = bones.indexOf( bone ),\n\t\t\t\t\t\t\twBindMatrix = bindBones ? bindBones[ boneIndex ] : bindBoneMatrix.copy( target.skeleton.boneInverses[ boneIndex ] ).invert();\n\n\t\t\t\t\t\tglobalMatrix.multiply( wBindMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tglobalMatrix.copyPosition( relativeMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\t\t\tbone.matrix.multiply( globalMatrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( globalMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( options.preserveHipPosition && name === options.hip ) {\n\n\t\t\t\t\tbone.matrix.setPosition( pos.set( 0, bone.position.y, 0 ) );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t}\n\n\t\t\tif ( options.preservePosition ) {\n\n\t\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\t\tbone = bones[ i ];\n\t\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\t\tif ( name !== options.hip ) {\n\n\t\t\t\t\t\tbone.position.copy( bonesPosition[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.preserveMatrix ) {\n\n\t\t\t\t// restore matrix\n\n\t\t\t\ttarget.updateMatrixWorld( true );\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tretargetClip: function ( target, source, clip, options ) {\n\n\t\toptions = options || {};\n\t\toptions.useFirstFramePosition = options.useFirstFramePosition !== undefined ? options.useFirstFramePosition : false;\n\t\toptions.fps = options.fps !== undefined ? options.fps : 30;\n\t\toptions.names = options.names || [];\n\n\t\tif ( ! source.isObject3D ) {\n\n\t\t\tsource = this.getHelperFromSkeleton( source );\n\n\t\t}\n\n\t\tvar numFrames = Math.round( clip.duration * ( options.fps / 1000 ) * 1000 ),\n\t\t\tdelta = 1 / options.fps,\n\t\t\tconvertedTracks = [],\n\t\t\tmixer = new AnimationMixer( source ),\n\t\t\tbones = this.getBones( target.skeleton ),\n\t\t\tboneDatas = [],\n\t\t\tpositionOffset,\n\t\t\tbone, boneTo, boneData,\n\t\t\tname, i, j;\n\n\t\tmixer.clipAction( clip ).play();\n\t\tmixer.update( 0 );\n\n\t\tsource.updateMatrixWorld();\n\n\t\tfor ( i = 0; i < numFrames; ++ i ) {\n\n\t\t\tvar time = i * delta;\n\n\t\t\tthis.retarget( target, source, options );\n\n\t\t\tfor ( j = 0; j < bones.length; ++ j ) {\n\n\t\t\t\tname = options.names[ bones[ j ].name ] || bones[ j ].name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, source.skeleton );\n\n\t\t\t\tif ( boneTo ) {\n\n\t\t\t\t\tbone = bones[ j ];\n\t\t\t\t\tboneData = boneDatas[ j ] = boneDatas[ j ] || { bone: bone };\n\n\t\t\t\t\tif ( options.hip === name ) {\n\n\t\t\t\t\t\tif ( ! boneData.pos ) {\n\n\t\t\t\t\t\t\tboneData.pos = {\n\t\t\t\t\t\t\t\ttimes: new Float32Array( numFrames ),\n\t\t\t\t\t\t\t\tvalues: new Float32Array( numFrames * 3 )\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( options.useFirstFramePosition ) {\n\n\t\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\t\tpositionOffset = bone.position.clone();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbone.position.sub( positionOffset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneData.pos.times[ i ] = time;\n\n\t\t\t\t\t\tbone.position.toArray( boneData.pos.values, i * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! boneData.quat ) {\n\n\t\t\t\t\t\tboneData.quat = {\n\t\t\t\t\t\t\ttimes: new Float32Array( numFrames ),\n\t\t\t\t\t\t\tvalues: new Float32Array( numFrames * 4 )\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneData.quat.times[ i ] = time;\n\n\t\t\t\t\tbone.quaternion.toArray( boneData.quat.values, i * 4 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmixer.update( delta );\n\n\t\t\tsource.updateMatrixWorld();\n\n\t\t}\n\n\t\tfor ( i = 0; i < boneDatas.length; ++ i ) {\n\n\t\t\tboneData = boneDatas[ i ];\n\n\t\t\tif ( boneData ) {\n\n\t\t\t\tif ( boneData.pos ) {\n\n\t\t\t\t\tconvertedTracks.push( new VectorKeyframeTrack(\n\t\t\t\t\t\t'.bones[' + boneData.bone.name + '].position',\n\t\t\t\t\t\tboneData.pos.times,\n\t\t\t\t\t\tboneData.pos.values\n\t\t\t\t\t) );\n\n\t\t\t\t}\n\n\t\t\t\tconvertedTracks.push( new QuaternionKeyframeTrack(\n\t\t\t\t\t'.bones[' + boneData.bone.name + '].quaternion',\n\t\t\t\t\tboneData.quat.times,\n\t\t\t\t\tboneData.quat.values\n\t\t\t\t) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tmixer.uncacheAction( clip );\n\n\t\treturn new AnimationClip( clip.name, - 1, convertedTracks );\n\n\t},\n\n\tgetHelperFromSkeleton: function ( skeleton ) {\n\n\t\tvar source = new SkeletonHelper( skeleton.bones[ 0 ] );\n\t\tsource.skeleton = skeleton;\n\n\t\treturn source;\n\n\t},\n\n\tgetSkeletonOffsets: function () {\n\n\t\tvar targetParentPos = new Vector3(),\n\t\t\ttargetPos = new Vector3(),\n\t\t\tsourceParentPos = new Vector3(),\n\t\t\tsourcePos = new Vector3(),\n\t\t\ttargetDir = new Vector2(),\n\t\t\tsourceDir = new Vector2();\n\n\t\treturn function ( target, source, options ) {\n\n\t\t\toptions = options || {};\n\t\t\toptions.hip = options.hip !== undefined ? options.hip : 'hip';\n\t\t\toptions.names = options.names || {};\n\n\t\t\tif ( ! source.isObject3D ) {\n\n\t\t\t\tsource = this.getHelperFromSkeleton( source );\n\n\t\t\t}\n\n\t\t\tvar nameKeys = Object.keys( options.names ),\n\t\t\t\tnameValues = Object.values( options.names ),\n\t\t\t\tsourceBones = source.isObject3D ? source.skeleton.bones : this.getBones( source ),\n\t\t\t\tbones = target.isObject3D ? target.skeleton.bones : this.getBones( target ),\n\t\t\t\toffsets = [],\n\t\t\t\tbone, boneTo,\n\t\t\t\tname, i;\n\n\t\t\ttarget.skeleton.pose();\n\n\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\tbone = bones[ i ];\n\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, sourceBones );\n\n\t\t\t\tif ( boneTo && name !== options.hip ) {\n\n\t\t\t\t\tvar boneParent = this.getNearestBone( bone.parent, nameKeys ),\n\t\t\t\t\t\tboneToParent = this.getNearestBone( boneTo.parent, nameValues );\n\n\t\t\t\t\tboneParent.updateMatrixWorld();\n\t\t\t\t\tboneToParent.updateMatrixWorld();\n\n\t\t\t\t\ttargetParentPos.setFromMatrixPosition( boneParent.matrixWorld );\n\t\t\t\t\ttargetPos.setFromMatrixPosition( bone.matrixWorld );\n\n\t\t\t\t\tsourceParentPos.setFromMatrixPosition( boneToParent.matrixWorld );\n\t\t\t\t\tsourcePos.setFromMatrixPosition( boneTo.matrixWorld );\n\n\t\t\t\t\ttargetDir.subVectors(\n\t\t\t\t\t\tnew Vector2( targetPos.x, targetPos.y ),\n\t\t\t\t\t\tnew Vector2( targetParentPos.x, targetParentPos.y )\n\t\t\t\t\t).normalize();\n\n\t\t\t\t\tsourceDir.subVectors(\n\t\t\t\t\t\tnew Vector2( sourcePos.x, sourcePos.y ),\n\t\t\t\t\t\tnew Vector2( sourceParentPos.x, sourceParentPos.y )\n\t\t\t\t\t).normalize();\n\n\t\t\t\t\tvar laterialAngle = targetDir.angle() - sourceDir.angle();\n\n\t\t\t\t\tvar offset = new Matrix4().makeRotationFromEuler(\n\t\t\t\t\t\tnew Euler(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tlaterialAngle\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tbone.matrix.multiply( offset );\n\n\t\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t\t\toffsets[ name ] = offset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn offsets;\n\n\t\t};\n\n\t}(),\n\n\trenameBones: function ( skeleton, names ) {\n\n\t\tvar bones = this.getBones( skeleton );\n\n\t\tfor ( var i = 0; i < bones.length; ++ i ) {\n\n\t\t\tvar bone = bones[ i ];\n\n\t\t\tif ( names[ bone.name ] ) {\n\n\t\t\t\tbone.name = names[ bone.name ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetBones: function ( skeleton ) {\n\n\t\treturn Array.isArray( skeleton ) ? skeleton : skeleton.bones;\n\n\t},\n\n\tgetBoneByName: function ( name, skeleton ) {\n\n\t\tfor ( var i = 0, bones = this.getBones( skeleton ); i < bones.length; i ++ ) {\n\n\t\t\tif ( name === bones[ i ].name )\n\n\t\t\t\treturn bones[ i ];\n\n\t\t}\n\n\t},\n\n\tgetNearestBone: function ( bone, names ) {\n\n\t\twhile ( bone.isBone ) {\n\n\t\t\tif ( names.indexOf( bone.name ) !== - 1 ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t\tbone = bone.parent;\n\n\t\t}\n\n\t},\n\n\tfindBoneTrackData: function ( name, tracks ) {\n\n\t\tvar regexp = /\\[(.*)\\]\\.(.*)/,\n\t\t\tresult = { name: name };\n\n\t\tfor ( var i = 0; i < tracks.length; ++ i ) {\n\n\t\t\t// 1 is track name\n\t\t\t// 2 is track type\n\t\t\tvar trackData = regexp.exec( tracks[ i ].name );\n\n\t\t\tif ( trackData && name === trackData[ 1 ] ) {\n\n\t\t\t\tresult[ trackData[ 2 ] ] = i;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetEqualsBonesNames: function ( skeleton, targetSkeleton ) {\n\n\t\tvar sourceBones = this.getBones( skeleton ),\n\t\t\ttargetBones = this.getBones( targetSkeleton ),\n\t\t\tbones = [];\n\n\t\tsearch : for ( var i = 0; i < sourceBones.length; i ++ ) {\n\n\t\t\tvar boneName = sourceBones[ i ].name;\n\n\t\t\tfor ( var j = 0; j < targetBones.length; j ++ ) {\n\n\t\t\t\tif ( boneName === targetBones[ j ].name ) {\n\n\t\t\t\t\tbones.push( boneName );\n\n\t\t\t\t\tcontinue search;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bones;\n\n\t},\n\n\tclone: function ( source ) {\n\n\t\tvar sourceLookup = new Map();\n\t\tvar cloneLookup = new Map();\n\n\t\tvar clone = source.clone();\n\n\t\tparallelTraverse( source, clone, function ( sourceNode, clonedNode ) {\n\n\t\t\tsourceLookup.set( clonedNode, sourceNode );\n\t\t\tcloneLookup.set( sourceNode, clonedNode );\n\n\t\t} );\n\n\t\tclone.traverse( function ( node ) {\n\n\t\t\tif ( ! node.isSkinnedMesh ) return;\n\n\t\t\tvar clonedMesh = node;\n\t\t\tvar sourceMesh = sourceLookup.get( node );\n\t\t\tvar sourceBones = sourceMesh.skeleton.bones;\n\n\t\t\tclonedMesh.skeleton = sourceMesh.skeleton.clone();\n\t\t\tclonedMesh.bindMatrix.copy( sourceMesh.bindMatrix );\n\n\t\t\tclonedMesh.skeleton.bones = sourceBones.map( function ( bone ) {\n\n\t\t\t\treturn cloneLookup.get( bone );\n\n\t\t\t} );\n\n\t\t\tclonedMesh.bind( clonedMesh.skeleton, clonedMesh.bindMatrix );\n\n\t\t} );\n\n\t\treturn clone;\n\n\t}\n\n};\n\n\nfunction parallelTraverse( a, b, callback ) {\n\n\tcallback( a, b );\n\n\tfor ( var i = 0; i < a.children.length; i ++ ) {\n\n\t\tparallelTraverse( a.children[ i ], b.children[ i ], callback );\n\n\t}\n\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $prepared = Symbol('prepared');\nconst $prepare = Symbol('prepare');\nconst $preparedGLTF = Symbol('preparedGLTF');\nconst $clone = Symbol('clone');\n/**\n * Represents the preparation and enhancement of the output of a Three.js\n * GLTFLoader (a Three.js-flavor \"GLTF\"), to make it suitable for optimal,\n * correct viewing in a given presentation context and also make the cloning\n * process more explicit and legible.\n *\n * A GLTFInstance is API-compatible with a Three.js-flavor \"GLTF\", so it should\n * be considered to be interchangeable with the loaded result of a GLTFLoader.\n *\n * This basic implementation only implements trivial preparation and enhancement\n * of a GLTF. These operations are intended to be enhanced by inheriting\n * classes.\n */\nclass GLTFInstance {\n    constructor(preparedGLTF) {\n        this[$preparedGLTF] = preparedGLTF;\n    }\n    /**\n     * Prepares a given GLTF for presentation and future cloning. A GLTF that is\n     * prepared can safely have this method invoked on it multiple times; it will\n     * only be prepared once, including after being cloned.\n     */\n    static prepare(source) {\n        if (source.scene == null) {\n            throw new Error('Model does not have a scene');\n        }\n        if (source[$prepared]) {\n            return source;\n        }\n        const prepared = this[$prepare](source);\n        // NOTE: ES5 Symbol polyfill is not compatible with spread operator\n        // so {...prepared, [$prepared]: true} does not work\n        prepared[$prepared] = true;\n        return prepared;\n    }\n    /**\n     * Override in an inheriting class to apply specialty one-time preparations\n     * for a given input GLTF.\n     */\n    static [$prepare](source) {\n        // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n        // bother preparing extra scenes for now:\n        const { scene } = source;\n        const scenes = [scene];\n        return Object.assign(Object.assign({}, source), { scene, scenes });\n    }\n    get parser() {\n        return this[$preparedGLTF].parser;\n    }\n    get animations() {\n        return this[$preparedGLTF].animations;\n    }\n    get scene() {\n        return this[$preparedGLTF].scene;\n    }\n    get scenes() {\n        return this[$preparedGLTF].scenes;\n    }\n    get cameras() {\n        return this[$preparedGLTF].cameras;\n    }\n    get asset() {\n        return this[$preparedGLTF].asset;\n    }\n    get userData() {\n        return this[$preparedGLTF].userData;\n    }\n    /**\n     * Creates and returns a copy of this instance.\n     */\n    clone() {\n        const GLTFInstanceConstructor = this.constructor;\n        const clonedGLTF = this[$clone]();\n        return new GLTFInstanceConstructor(clonedGLTF);\n    }\n    /**\n     * Cleans up any retained memory that might not otherwise be released when\n     * this instance is done being used.\n     */\n    dispose() {\n        this.scenes.forEach((scene) => {\n            scene.traverse((object) => {\n                if (!object.isMesh) {\n                    return;\n                }\n                const mesh = object;\n                const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n                materials.forEach(material => {\n                    material.dispose();\n                });\n                mesh.geometry.dispose();\n            });\n        });\n    }\n    /**\n     * Override in an inheriting class to implement specialized cloning strategies\n     */\n    [$clone]() {\n        const source = this[$preparedGLTF];\n        // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n        // bother cloning extra scenes for now:\n        const scene = SkeletonUtils.clone(this.scene);\n        const scenes = [scene];\n        const userData = source.userData ? Object.assign({}, source.userData) : {};\n        return Object.assign(Object.assign({}, source), { scene, scenes, userData });\n    }\n}\n\n/**\n * @license MIT\n * @see https://github.com/mrdoob/three.js/blob/dev/LICENSE\n */\nconst alphaChunk = /* glsl */ `\n#ifdef ALPHATEST\n\n    if ( diffuseColor.a < ALPHATEST ) discard;\n    diffuseColor.a = 1.0;\n\n#endif\n`;\n\nconst $threeGLTF = Symbol('threeGLTF');\nconst $gltf = Symbol('gltf');\nconst $gltfElementMap = Symbol('gltfElementMap');\nconst $threeObjectMap = Symbol('threeObjectMap');\nconst $parallelTraverseThreeScene = Symbol('parallelTraverseThreeScene');\nconst $correlateOriginalThreeGLTF = Symbol('correlateOriginalThreeGLTF');\nconst $correlateCloneThreeGLTF = Symbol('correlateCloneThreeGLTF');\n/**\n * The Three.js GLTFLoader provides us with an in-memory representation\n * of a glTF in terms of Three.js constructs. It also provides us with a copy\n * of the deserialized glTF without any Three.js decoration, and a mapping of\n * glTF elements to their corresponding Three.js constructs.\n *\n * A CorrelatedSceneGraph exposes a synchronously available mapping of glTF\n * element references to their corresponding Three.js constructs.\n */\nclass CorrelatedSceneGraph {\n    constructor(threeGLTF, gltf, threeObjectMap, gltfElementMap) {\n        this[$threeGLTF] = threeGLTF;\n        this[$gltf] = gltf;\n        this[$gltfElementMap] = gltfElementMap;\n        this[$threeObjectMap] = threeObjectMap;\n    }\n    /**\n     * Produce a CorrelatedSceneGraph from a naturally generated Three.js GLTF.\n     * Such GLTFs are produced by Three.js' GLTFLoader, and contain cached\n     * details that expedite the correlation step.\n     *\n     * If a CorrelatedSceneGraph is provided as the second argument, re-correlates\n     * a cloned Three.js GLTF with a clone of the glTF hierarchy used to produce\n     * the upstream Three.js GLTF that the clone was created from. The result\n     * CorrelatedSceneGraph is representative of the cloned hierarchy.\n     */\n    static from(threeGLTF, upstreamCorrelatedSceneGraph) {\n        if (upstreamCorrelatedSceneGraph != null) {\n            return this[$correlateCloneThreeGLTF](threeGLTF, upstreamCorrelatedSceneGraph);\n        }\n        else {\n            return this[$correlateOriginalThreeGLTF](threeGLTF);\n        }\n    }\n    static [$correlateOriginalThreeGLTF](threeGLTF) {\n        const gltf = threeGLTF.parser.json;\n        const { associations } = threeGLTF.parser;\n        const gltfElementMap = new Map();\n        const defaultMaterial = { name: 'Default' };\n        const defaultReference = { type: 'materials', index: -1 };\n        // NOTE: IE11 does not have Map iterator methods\n        associations.forEach((gltfElementReference, threeObject) => {\n            // Note: GLTFLoader creates a \"default\" material that has no corresponding\n            // glTF element in the case that no materials are specified in the source\n            // glTF. In this case we append a default material to allow this to be\n            // operated upon.\n            if (gltfElementReference == null) {\n                if (defaultReference.index < 0) {\n                    if (gltf.materials == null) {\n                        gltf.materials = [];\n                    }\n                    defaultReference.index = gltf.materials.length;\n                    gltf.materials.push(defaultMaterial);\n                }\n                gltfElementReference = defaultReference;\n            }\n            const { type, index } = gltfElementReference;\n            const elementArray = gltf[type] || [];\n            const gltfElement = elementArray[index];\n            if (gltfElement == null) {\n                // TODO: Maybe throw here...\n                return;\n            }\n            let threeObjects = gltfElementMap.get(gltfElement);\n            if (threeObjects == null) {\n                threeObjects = new Set();\n                gltfElementMap.set(gltfElement, threeObjects);\n            }\n            threeObjects.add(threeObject);\n        });\n        return new CorrelatedSceneGraph(threeGLTF, gltf, associations, gltfElementMap);\n    }\n    /**\n     * Transfers the association between a raw glTF and a Three.js scene graph\n     * to a clone of the Three.js scene graph, resolved as a new\n     * CorrelatedsceneGraph instance.\n     */\n    static [$correlateCloneThreeGLTF](cloneThreeGLTF, upstreamCorrelatedSceneGraph) {\n        const originalThreeGLTF = upstreamCorrelatedSceneGraph.threeGLTF;\n        const originalGLTF = upstreamCorrelatedSceneGraph.gltf;\n        const cloneGLTF = JSON.parse(JSON.stringify(originalGLTF));\n        const cloneThreeObjectMap = new Map();\n        const cloneGLTFELementMap = new Map();\n        for (let i = 0; i < originalThreeGLTF.scenes.length; i++) {\n            this[$parallelTraverseThreeScene](originalThreeGLTF.scenes[i], cloneThreeGLTF.scenes[i], (object, cloneObject) => {\n                const elementReference = upstreamCorrelatedSceneGraph.threeObjectMap.get(object);\n                if (elementReference != null) {\n                    const { type, index } = elementReference;\n                    const cloneElement = cloneGLTF[type][index];\n                    cloneThreeObjectMap.set(cloneObject, { type, index });\n                    const cloneObjects = cloneGLTFELementMap.get(cloneElement) || new Set();\n                    cloneObjects.add(cloneObject);\n                    cloneGLTFELementMap.set(cloneElement, cloneObjects);\n                }\n            });\n        }\n        return new CorrelatedSceneGraph(cloneThreeGLTF, cloneGLTF, cloneThreeObjectMap, cloneGLTFELementMap);\n    }\n    /**\n     * Traverses two presumably identical Three.js scenes, and invokes a callback\n     * for each Object3D or Material encountered, including the initial scene.\n     * Adapted from\n     * https://github.com/mrdoob/three.js/blob/7c1424c5819ab622a346dd630ee4e6431388021e/examples/jsm/utils/SkeletonUtils.js#L586-L596\n     */\n    static [$parallelTraverseThreeScene](sceneOne, sceneTwo, callback) {\n        const isMesh = (object) => {\n            return object.isMesh;\n        };\n        const traverse = (a, b) => {\n            callback(a, b);\n            if (a.isObject3D) {\n                if (isMesh(a)) {\n                    if (Array.isArray(a.material)) {\n                        for (let i = 0; i < a.material.length; ++i) {\n                            traverse(a.material[i], b.material[i]);\n                        }\n                    }\n                    else {\n                        traverse(a.material, b.material);\n                    }\n                }\n                for (let i = 0; i < a.children.length; ++i) {\n                    traverse(a.children[i], b.children[i]);\n                }\n            }\n        };\n        traverse(sceneOne, sceneTwo);\n    }\n    /**\n     * The source Three.js GLTF result given to us by a Three.js GLTFLoader.\n     */\n    get threeGLTF() {\n        return this[$threeGLTF];\n    }\n    /**\n     * The in-memory deserialized source glTF.\n     */\n    get gltf() {\n        return this[$gltf];\n    }\n    /**\n     * A Map of glTF element references to arrays of corresponding Three.js\n     * object references. Three.js objects are kept in arrays to account for\n     * cases where more than one Three.js object corresponds to a single glTF\n     * element.\n     */\n    get gltfElementMap() {\n        return this[$gltfElementMap];\n    }\n    /**\n     * A map of individual Three.js objects to corresponding elements in the\n     * source glTF.\n     */\n    get threeObjectMap() {\n        return this[$threeObjectMap];\n    }\n    loadVariant(variantIndex, onUpdate = () => { }) {\n        const updatedMaterials = new Set();\n        this.threeGLTF.scene.traverse(async (object) => {\n            const { gltfExtensions } = object.userData;\n            if (!object.isMesh || gltfExtensions == null) {\n                return;\n            }\n            const meshVariantData = gltfExtensions['KHR_materials_variants'];\n            if (meshVariantData == null) {\n                return;\n            }\n            let materialIndex = -1;\n            for (const mapping of meshVariantData.mappings) {\n                if (mapping.variants.indexOf(variantIndex) >= 0) {\n                    materialIndex = mapping.material;\n                    break;\n                }\n            }\n            if (materialIndex < 0) {\n                return;\n            }\n            const material = await this.threeGLTF.parser.getDependency('material', materialIndex);\n            updatedMaterials.add(materialIndex);\n            object.material = material;\n            this.threeGLTF.parser.assignFinalMaterial(object);\n            onUpdate();\n            const gltfElement = this.gltf.materials[materialIndex];\n            let threeObjects = this.gltfElementMap.get(gltfElement);\n            if (threeObjects == null) {\n                threeObjects = new Set();\n                this.gltfElementMap.set(gltfElement, threeObjects);\n            }\n            threeObjects.add(object.material);\n        });\n        return updatedMaterials;\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $cloneAndPatchMaterial = Symbol('cloneAndPatchMaterial');\nconst $correlatedSceneGraph = Symbol('correlatedSceneGraph');\n/**\n * This specialization of GLTFInstance collects all of the processing needed\n * to prepare a model and to clone it making special considerations for\n * <model-viewer> use cases.\n */\nclass ModelViewerGLTFInstance extends GLTFInstance {\n    /**\n     * @override\n     */\n    static [$prepare](source) {\n        const prepared = super[$prepare](source);\n        if (prepared[$correlatedSceneGraph] == null) {\n            prepared[$correlatedSceneGraph] = CorrelatedSceneGraph.from(prepared);\n        }\n        const { scene } = prepared;\n        const meshesToDuplicate = [];\n        scene.traverse((node) => {\n            // Set a high renderOrder while we're here to ensure the model\n            // always renders on top of the skysphere\n            node.renderOrder = 1000;\n            // Three.js seems to cull some animated models incorrectly. Since we\n            // expect to view our whole scene anyway, we turn off the frustum\n            // culling optimization here.\n            node.frustumCulled = false;\n            // Animations for objects without names target their UUID instead. When\n            // objects are cloned, they get new UUIDs which the animation can't\n            // find. To fix this, we assign their UUID as their name.\n            if (!node.name) {\n                node.name = node.uuid;\n            }\n            if (!node.isMesh) {\n                return;\n            }\n            node.castShadow = true;\n            const mesh = node;\n            let transparent = false;\n            const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n            materials.forEach(material => {\n                if (material.isMeshStandardMaterial) {\n                    if (material.transparent && material.side === DoubleSide) {\n                        transparent = true;\n                        material.side = FrontSide;\n                    }\n                    Renderer.singleton.roughnessMipmapper.generateMipmaps(material);\n                }\n            });\n            if (transparent) {\n                meshesToDuplicate.push(mesh);\n            }\n        });\n        // We duplicate transparent, double-sided meshes and render the back face\n        // before the front face. This creates perfect triangle sorting for all\n        // convex meshes. Sorting artifacts can still appear when you can see\n        // through more than two layers of a given mesh, but this can usually be\n        // mitigated by the author splitting the mesh into mostly convex regions.\n        // The performance cost is not too great as the same shader is reused and\n        // the same number of fragments are processed; only the vertex shader is run\n        // twice. @see https://threejs.org/examples/webgl_materials_physical_transparency.html\n        for (const mesh of meshesToDuplicate) {\n            const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n            const duplicateMaterials = materials.map((material) => {\n                const backMaterial = material.clone();\n                backMaterial.side = BackSide;\n                return backMaterial;\n            });\n            const duplicateMaterial = Array.isArray(mesh.material) ?\n                duplicateMaterials :\n                duplicateMaterials[0];\n            const meshBack = new Mesh(mesh.geometry, duplicateMaterial);\n            meshBack.renderOrder = -1;\n            mesh.add(meshBack);\n        }\n        return prepared;\n    }\n    get correlatedSceneGraph() {\n        return this[$preparedGLTF][$correlatedSceneGraph];\n    }\n    /**\n     * @override\n     */\n    [$clone]() {\n        const clone = super[$clone]();\n        const sourceUUIDToClonedMaterial = new Map();\n        clone.scene.traverse((node) => {\n            // Materials aren't cloned when cloning meshes; geometry\n            // and materials are copied by reference. This is necessary\n            // for the same model to be used twice with different\n            // environment maps.\n            if (node.isMesh) {\n                const mesh = node;\n                if (Array.isArray(mesh.material)) {\n                    mesh.material = mesh.material.map((material) => this[$cloneAndPatchMaterial](material, sourceUUIDToClonedMaterial));\n                }\n                else if (mesh.material != null) {\n                    mesh.material = this[$cloneAndPatchMaterial](mesh.material, sourceUUIDToClonedMaterial);\n                }\n            }\n        });\n        // Cross-correlate the scene graph by relying on information in the\n        // current scene graph; without this step, relationships between the\n        // Three.js object graph and the glTF scene graph will be lost.\n        clone[$correlatedSceneGraph] =\n            CorrelatedSceneGraph.from(clone, this.correlatedSceneGraph);\n        return clone;\n    }\n    /**\n     * Creates a clone of the given material, and applies a patch to the\n     * shader program.\n     */\n    [$cloneAndPatchMaterial](material, sourceUUIDToClonedMaterial) {\n        var _a, _b;\n        // If we already cloned this material (determined by tracking the UUID of\n        // source materials that have been cloned), then return that previously\n        // cloned instance:\n        if (sourceUUIDToClonedMaterial.has(material.uuid)) {\n            return sourceUUIDToClonedMaterial.get(material.uuid);\n        }\n        const clone = material.clone();\n        // Clone the textures manually since material cloning is shallow. The\n        // underlying images are still shared.\n        if (material.map != null) {\n            clone.map = material.map.clone();\n            clone.map.needsUpdate = true;\n        }\n        if (material.normalMap != null) {\n            clone.normalMap = material.normalMap.clone();\n            clone.normalMap.needsUpdate = true;\n        }\n        if (material.emissiveMap != null) {\n            clone.emissiveMap = material.emissiveMap.clone();\n            clone.emissiveMap.needsUpdate = true;\n        }\n        if (material.isGLTFSpecularGlossinessMaterial) {\n            if (material.specularMap != null) {\n                clone.specularMap = (_a = material.specularMap) === null || _a === void 0 ? void 0 : _a.clone();\n                clone.specularMap.needsUpdate = true;\n            }\n            if (material.glossinessMap != null) {\n                clone.glossinessMap = (_b = material.glossinessMap) === null || _b === void 0 ? void 0 : _b.clone();\n                clone.glossinessMap.needsUpdate = true;\n            }\n        }\n        else {\n            // ao, roughness and metalness sometimes share a texture.\n            if (material.metalnessMap === material.aoMap) {\n                clone.metalnessMap = clone.aoMap;\n            }\n            else if (material.metalnessMap != null) {\n                clone.metalnessMap = material.metalnessMap.clone();\n                clone.metalnessMap.needsUpdate = true;\n            }\n            if (material.roughnessMap === material.aoMap) {\n                clone.roughnessMap = clone.aoMap;\n            }\n            else if (material.roughnessMap === material.metalnessMap) {\n                clone.roughnessMap = clone.metalnessMap;\n            }\n            else if (material.roughnessMap != null) {\n                clone.roughnessMap = material.roughnessMap.clone();\n                clone.roughnessMap.needsUpdate = true;\n            }\n        }\n        // This allows us to patch three's materials, on top of patches already\n        // made, for instance GLTFLoader patches SpecularGlossiness materials.\n        // Unfortunately, three's program cache differentiates SpecGloss materials\n        // via onBeforeCompile.toString(), so these two functions do the same\n        // thing but look different in order to force a proper recompile.\n        const oldOnBeforeCompile = material.onBeforeCompile;\n        clone.onBeforeCompile = material.isGLTFSpecularGlossinessMaterial ?\n            (shader) => {\n                oldOnBeforeCompile(shader, undefined);\n                shader.fragmentShader = shader.fragmentShader.replace('#include <alphatest_fragment>', alphaChunk);\n            } :\n            (shader) => {\n                shader.fragmentShader = shader.fragmentShader.replace('#include <alphatest_fragment>', alphaChunk);\n                oldOnBeforeCompile(shader, undefined);\n            };\n        // This makes shadows better for non-manifold meshes\n        clone.shadowSide = FrontSide;\n        // This improves transparent rendering and can be removed whenever\n        // https://github.com/mrdoob/three.js/pull/18235 finally lands.\n        if (clone.transparent) {\n            clone.depthWrite = false;\n        }\n        // This little hack ignores alpha for opaque materials, in order to comply\n        // with the glTF spec.\n        if (!clone.alphaTest && !clone.transparent) {\n            clone.alphaTest = -0.5;\n        }\n        sourceUUIDToClonedMaterial.set(material.uuid, clone);\n        return clone;\n    }\n}\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nvar RGBELoader = function ( manager ) {\n\n\tDataTextureLoader.call( this, manager );\n\n\tthis.type = UnsignedByteType;\n\n};\n\nRGBELoader.prototype = Object.assign( Object.create( DataTextureLoader.prototype ), {\n\n\tconstructor: RGBELoader,\n\n\t// adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\tparse: function ( buffer ) {\n\n\t\tvar\n\t\t\t/* return codes for rgbe routines */\n\t\t\t//RGBE_RETURN_SUCCESS = 0,\n\t\t\tRGBE_RETURN_FAILURE = - 1,\n\n\t\t\t/* default error routine.  change this to change error handling */\n\t\t\trgbe_read_error = 1,\n\t\t\trgbe_write_error = 2,\n\t\t\trgbe_format_error = 3,\n\t\t\trgbe_memory_error = 4,\n\t\t\trgbe_error = function ( rgbe_error_code, msg ) {\n\n\t\t\t\tswitch ( rgbe_error_code ) {\n\n\t\t\t\t\tcase rgbe_read_error: console.error( 'THREE.RGBELoader Read Error: ' + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_write_error: console.error( 'THREE.RGBELoader Write Error: ' + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_format_error: console.error( 'THREE.RGBELoader Bad File Format: ' + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase rgbe_memory_error: console.error( 'THREE.RGBELoader: Error: ' + ( msg || '' ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn RGBE_RETURN_FAILURE;\n\n\t\t\t},\n\n\t\t\t/* offsets to red, green, and blue components in a data (float) pixel */\n\t\t\t//RGBE_DATA_RED = 0,\n\t\t\t//RGBE_DATA_GREEN = 1,\n\t\t\t//RGBE_DATA_BLUE = 2,\n\n\t\t\t/* number of floats per pixel, use 4 since stored in rgba image format */\n\t\t\t//RGBE_DATA_SIZE = 4,\n\n\t\t\t/* flags indicating which fields in an rgbe_header_info are valid */\n\t\t\tRGBE_VALID_PROGRAMTYPE = 1,\n\t\t\tRGBE_VALID_FORMAT = 2,\n\t\t\tRGBE_VALID_DIMENSIONS = 4,\n\n\t\t\tNEWLINE = '\\n',\n\n\t\t\tfgets = function ( buffer, lineLimit, consume ) {\n\n\t\t\t\tlineLimit = ! lineLimit ? 1024 : lineLimit;\n\t\t\t\tvar p = buffer.pos,\n\t\t\t\t\ti = - 1, len = 0, s = '', chunkSize = 128,\n\t\t\t\t\tchunk = String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) )\n\t\t\t\t;\n\t\t\t\twhile ( ( 0 > ( i = chunk.indexOf( NEWLINE ) ) ) && ( len < lineLimit ) && ( p < buffer.byteLength ) ) {\n\n\t\t\t\t\ts += chunk; len += chunk.length;\n\t\t\t\t\tp += chunkSize;\n\t\t\t\t\tchunk += String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( - 1 < i ) {\n\n\t\t\t\t\t/*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t}*/\n\t\t\t\t\tif ( false !== consume ) buffer.pos += len + i + 1;\n\t\t\t\t\treturn s + chunk.slice( 0, i );\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\t/* minimal header reading.  modify if you want to parse more information */\n\t\t\tRGBE_ReadHeader = function ( buffer ) {\n\n\t\t\t\tvar line, match,\n\n\t\t\t\t\t// regexes to parse header info fields\n\t\t\t\t\tmagic_token_re = /^#\\?(\\S+)/,\n\t\t\t\t\tgamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\texposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\tformat_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n\t\t\t\t\tdimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n\n\t\t\t\t\t// RGBE format header struct\n\t\t\t\t\theader = {\n\n\t\t\t\t\t\tvalid: 0, /* indicate which fields are valid */\n\n\t\t\t\t\t\tstring: '', /* the actual header string */\n\n\t\t\t\t\t\tcomments: '', /* comments found in header */\n\n\t\t\t\t\t\tprogramtype: 'RGBE', /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n\n\t\t\t\t\t\tformat: '', /* RGBE format, default 32-bit_rle_rgbe */\n\n\t\t\t\t\t\tgamma: 1.0, /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n\n\t\t\t\t\t\texposure: 1.0, /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n\n\t\t\t\t\t\twidth: 0, height: 0 /* image dimensions, width/height */\n\n\t\t\t\t\t};\n\n\t\t\t\tif ( buffer.pos >= buffer.byteLength || ! ( line = fgets( buffer ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_read_error, 'no header found' );\n\n\t\t\t\t}\n\n\t\t\t\t/* if you want to require the magic token then uncomment the next line */\n\t\t\t\tif ( ! ( match = line.match( magic_token_re ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, 'bad initial token' );\n\n\t\t\t\t}\n\n\t\t\t\theader.valid |= RGBE_VALID_PROGRAMTYPE;\n\t\t\t\theader.programtype = match[ 1 ];\n\t\t\t\theader.string += line + '\\n';\n\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tline = fgets( buffer );\n\t\t\t\t\tif ( false === line ) break;\n\t\t\t\t\theader.string += line + '\\n';\n\n\t\t\t\t\tif ( '#' === line.charAt( 0 ) ) {\n\n\t\t\t\t\t\theader.comments += line + '\\n';\n\t\t\t\t\t\tcontinue; // comment line\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( gamma_re ) ) {\n\n\t\t\t\t\t\theader.gamma = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( exposure_re ) ) {\n\n\t\t\t\t\t\theader.exposure = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( format_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_FORMAT;\n\t\t\t\t\t\theader.format = match[ 1 ];//'32-bit_rle_rgbe';\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( dimensions_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_DIMENSIONS;\n\t\t\t\t\t\theader.height = parseInt( match[ 1 ], 10 );\n\t\t\t\t\t\theader.width = parseInt( match[ 2 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( header.valid & RGBE_VALID_FORMAT ) && ( header.valid & RGBE_VALID_DIMENSIONS ) ) break;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_FORMAT ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, 'missing format specifier' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_DIMENSIONS ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, 'missing image size specifier' );\n\n\t\t\t\t}\n\n\t\t\t\treturn header;\n\n\t\t\t},\n\n\t\t\tRGBE_ReadPixels_RLE = function ( buffer, w, h ) {\n\n\t\t\t\tvar data_rgba, offset, pos, count, byteValue,\n\t\t\t\t\tscanline_buffer, ptr, ptr_end, i, l, off, isEncodedRun,\n\t\t\t\t\tscanline_width = w, num_scanlines = h, rgbeStart\n\t\t\t\t;\n\n\t\t\t\tif (\n\t\t\t\t\t// run length encoding is not allowed so read flat\n\t\t\t\t\t( ( scanline_width < 8 ) || ( scanline_width > 0x7fff ) ) ||\n\t\t\t\t\t// this file is not run length encoded\n\t\t\t\t\t( ( 2 !== buffer[ 0 ] ) || ( 2 !== buffer[ 1 ] ) || ( buffer[ 2 ] & 0x80 ) )\n\t\t\t\t) {\n\n\t\t\t\t\t// return the flat buffer\n\t\t\t\t\treturn new Uint8Array( buffer );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scanline_width !== ( ( buffer[ 2 ] << 8 ) | buffer[ 3 ] ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, 'wrong scanline width' );\n\n\t\t\t\t}\n\n\t\t\t\tdata_rgba = new Uint8Array( 4 * w * h );\n\n\t\t\t\tif ( ! data_rgba.length ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_memory_error, 'unable to allocate buffer space' );\n\n\t\t\t\t}\n\n\t\t\t\toffset = 0; pos = 0; ptr_end = 4 * scanline_width;\n\t\t\t\trgbeStart = new Uint8Array( 4 );\n\t\t\t\tscanline_buffer = new Uint8Array( ptr_end );\n\n\t\t\t\t// read in each successive scanline\n\t\t\t\twhile ( ( num_scanlines > 0 ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\tif ( pos + 4 > buffer.byteLength ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_read_error );\n\n\t\t\t\t\t}\n\n\t\t\t\t\trgbeStart[ 0 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 1 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 2 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 3 ] = buffer[ pos ++ ];\n\n\t\t\t\t\tif ( ( 2 != rgbeStart[ 0 ] ) || ( 2 != rgbeStart[ 1 ] ) || ( ( ( rgbeStart[ 2 ] << 8 ) | rgbeStart[ 3 ] ) != scanline_width ) ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, 'bad rgbe scanline format' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// read each of the four channels for the scanline into the buffer\n\t\t\t\t\t// first red, then green, then blue, then exponent\n\t\t\t\t\tptr = 0;\n\t\t\t\t\twhile ( ( ptr < ptr_end ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\t\tcount = buffer[ pos ++ ];\n\t\t\t\t\t\tisEncodedRun = count > 128;\n\t\t\t\t\t\tif ( isEncodedRun ) count -= 128;\n\n\t\t\t\t\t\tif ( ( 0 === count ) || ( ptr + count > ptr_end ) ) {\n\n\t\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, 'bad scanline data' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isEncodedRun ) {\n\n\t\t\t\t\t\t\t// a (encoded) run of the same value\n\t\t\t\t\t\t\tbyteValue = buffer[ pos ++ ];\n\t\t\t\t\t\t\tfor ( i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\t\t\tscanline_buffer[ ptr ++ ] = byteValue;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//ptr += count;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// a literal-run\n\t\t\t\t\t\t\tscanline_buffer.set( buffer.subarray( pos, pos + count ), ptr );\n\t\t\t\t\t\t\tptr += count; pos += count;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// now convert data from buffer into rgba\n\t\t\t\t\t// first red, then green, then blue, then exponent (alpha)\n\t\t\t\t\tl = scanline_width; //scanline_buffer.byteLength;\n\t\t\t\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\t\t\t\toff = 0;\n\t\t\t\t\t\tdata_rgba[ offset ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 1 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 2 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 3 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnum_scanlines --;\n\n\t\t\t\t}\n\n\t\t\t\treturn data_rgba;\n\n\t\t\t};\n\n\t\tvar RGBEByteToRGBFloat = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\tdestArray[ destOffset + 0 ] = sourceArray[ sourceOffset + 0 ] * scale;\n\t\t\tdestArray[ destOffset + 1 ] = sourceArray[ sourceOffset + 1 ] * scale;\n\t\t\tdestArray[ destOffset + 2 ] = sourceArray[ sourceOffset + 2 ] * scale;\n\n\t\t};\n\n\t\tvar RGBEByteToRGBHalf = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\tdestArray[ destOffset + 0 ] = DataUtils.toHalfFloat( sourceArray[ sourceOffset + 0 ] * scale );\n\t\t\tdestArray[ destOffset + 1 ] = DataUtils.toHalfFloat( sourceArray[ sourceOffset + 1 ] * scale );\n\t\t\tdestArray[ destOffset + 2 ] = DataUtils.toHalfFloat( sourceArray[ sourceOffset + 2 ] * scale );\n\n\t\t};\n\n\t\tvar byteArray = new Uint8Array( buffer );\n\t\tbyteArray.pos = 0;\n\t\tvar rgbe_header_info = RGBE_ReadHeader( byteArray );\n\n\t\tif ( RGBE_RETURN_FAILURE !== rgbe_header_info ) {\n\n\t\t\tvar w = rgbe_header_info.width,\n\t\t\t\th = rgbe_header_info.height,\n\t\t\t\timage_rgba_data = RGBE_ReadPixels_RLE( byteArray.subarray( byteArray.pos ), w, h );\n\n\t\t\tif ( RGBE_RETURN_FAILURE !== image_rgba_data ) {\n\n\t\t\t\tswitch ( this.type ) {\n\n\t\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\t\tvar data = image_rgba_data;\n\t\t\t\t\t\tvar format = RGBEFormat; // handled as THREE.RGBAFormat in shaders\n\t\t\t\t\t\tvar type = UnsignedByteType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase FloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar floatArray = new Float32Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBFloat( image_rgba_data, j * 4, floatArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = floatArray;\n\t\t\t\t\t\tvar format = RGBFormat;\n\t\t\t\t\t\tvar type = FloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar halfArray = new Uint16Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBHalf( image_rgba_data, j * 4, halfArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = halfArray;\n\t\t\t\t\t\tvar format = RGBFormat;\n\t\t\t\t\t\tvar type = HalfFloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.error( 'THREE.RGBELoader: unsupported type: ', this.type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: w, height: h,\n\t\t\t\t\tdata: data,\n\t\t\t\t\theader: rgbe_header_info.string,\n\t\t\t\t\tgamma: rgbe_header_info.gamma,\n\t\t\t\t\texposure: rgbe_header_info.exposure,\n\t\t\t\t\tformat: format,\n\t\t\t\t\ttype: type\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tsetDataType: function ( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\tswitch ( texture.type ) {\n\n\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\ttexture.encoding = RGBEEncoding;\n\t\t\t\t\ttexture.minFilter = NearestFilter;\n\t\t\t\t\ttexture.magFilter = NearestFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase FloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn DataTextureLoader.prototype.load.call( this, url, onLoadCallback, onProgress, onError );\n\n\t}\n\n} );\n\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass EnvironmentScene extends Scene {\n    constructor() {\n        super();\n        this.position.y = -3.5;\n        const geometry = new BoxGeometry();\n        geometry.deleteAttribute('uv');\n        const roomMaterial = new MeshStandardMaterial({ metalness: 0, side: BackSide });\n        const boxMaterial = new MeshStandardMaterial({ metalness: 0 });\n        const mainLight = new PointLight(0xffffff, 500.0, 28, 2);\n        mainLight.position.set(0.418, 16.199, 0.300);\n        this.add(mainLight);\n        const room = new Mesh(geometry, roomMaterial);\n        room.position.set(-0.757, 13.219, 0.717);\n        room.scale.set(31.713, 28.305, 28.591);\n        this.add(room);\n        const box1 = new Mesh(geometry, boxMaterial);\n        box1.position.set(-10.906, 2.009, 1.846);\n        box1.rotation.set(0, -0.195, 0);\n        box1.scale.set(2.328, 7.905, 4.651);\n        this.add(box1);\n        const box2 = new Mesh(geometry, boxMaterial);\n        box2.position.set(-5.607, -0.754, -0.758);\n        box2.rotation.set(0, 0.994, 0);\n        box2.scale.set(1.970, 1.534, 3.955);\n        this.add(box2);\n        const box3 = new Mesh(geometry, boxMaterial);\n        box3.position.set(6.167, 0.857, 7.803);\n        box3.rotation.set(0, 0.561, 0);\n        box3.scale.set(3.927, 6.285, 3.687);\n        this.add(box3);\n        const box4 = new Mesh(geometry, boxMaterial);\n        box4.position.set(-2.017, 0.018, 6.124);\n        box4.rotation.set(0, 0.333, 0);\n        box4.scale.set(2.002, 4.566, 2.064);\n        this.add(box4);\n        const box5 = new Mesh(geometry, boxMaterial);\n        box5.position.set(2.291, -0.756, -2.621);\n        box5.rotation.set(0, -0.286, 0);\n        box5.scale.set(1.546, 1.552, 1.496);\n        this.add(box5);\n        const box6 = new Mesh(geometry, boxMaterial);\n        box6.position.set(-2.193, -0.369, -5.547);\n        box6.rotation.set(0, 0.516, 0);\n        box6.scale.set(3.875, 3.487, 2.986);\n        this.add(box6);\n        // -x right\n        const light1 = new Mesh(geometry, this.createAreaLightMaterial(50));\n        light1.position.set(-16.116, 14.37, 8.208);\n        light1.scale.set(0.1, 2.428, 2.739);\n        this.add(light1);\n        // -x left\n        const light2 = new Mesh(geometry, this.createAreaLightMaterial(50));\n        light2.position.set(-16.109, 18.021, -8.207);\n        light2.scale.set(0.1, 2.425, 2.751);\n        this.add(light2);\n        // +x\n        const light3 = new Mesh(geometry, this.createAreaLightMaterial(17));\n        light3.position.set(14.904, 12.198, -1.832);\n        light3.scale.set(0.15, 4.265, 6.331);\n        this.add(light3);\n        // +z\n        const light4 = new Mesh(geometry, this.createAreaLightMaterial(43));\n        light4.position.set(-0.462, 8.89, 14.520);\n        light4.scale.set(4.38, 5.441, 0.088);\n        this.add(light4);\n        // -z\n        const light5 = new Mesh(geometry, this.createAreaLightMaterial(20));\n        light5.position.set(3.235, 11.486, -12.541);\n        light5.scale.set(2.5, 2.0, 0.1);\n        this.add(light5);\n        // +y\n        const light6 = new Mesh(geometry, this.createAreaLightMaterial(100));\n        light6.position.set(0.0, 20.0, 0.0);\n        light6.scale.set(1.0, 0.1, 1.0);\n        this.add(light6);\n    }\n    createAreaLightMaterial(intensity) {\n        const material = new MeshBasicMaterial();\n        material.color.setScalar(intensity);\n        return material;\n    }\n}\n\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass EnvironmentSceneAlt extends Scene {\n    constructor() {\n        super();\n        this.position.y = -3.5;\n        const geometry = new BoxGeometry();\n        geometry.deleteAttribute('uv');\n        const roomMaterial = new MeshStandardMaterial({ metalness: 0, side: BackSide });\n        const boxMaterial = new MeshStandardMaterial({ metalness: 0 });\n        const mainLight = new PointLight(0xffffff, 500.0, 28, 2);\n        mainLight.position.set(0.5, 16.5, 0.5);\n        this.add(mainLight);\n        const room = new Mesh(geometry, roomMaterial);\n        room.position.set(0.0, 13.2, 0.0);\n        room.scale.set(31.5, 28.5, 31.5);\n        this.add(room);\n        const box1 = new Mesh(geometry, boxMaterial);\n        box1.position.set(-10.906, -1.0, 1.846);\n        box1.rotation.set(0, -0.195, 0);\n        box1.scale.set(2.328, 7.905, 4.651);\n        this.add(box1);\n        const box2 = new Mesh(geometry, boxMaterial);\n        box2.position.set(-5.607, -0.754, -0.758);\n        box2.rotation.set(0, 0.994, 0);\n        box2.scale.set(1.970, 1.534, 3.955);\n        this.add(box2);\n        const box3 = new Mesh(geometry, boxMaterial);\n        box3.position.set(6.167, -0.16, 7.803);\n        box3.rotation.set(0, 0.561, 0);\n        box3.scale.set(3.927, 6.285, 3.687);\n        this.add(box3);\n        const box4 = new Mesh(geometry, boxMaterial);\n        box4.position.set(-2.017, 0.018, 6.124);\n        box4.rotation.set(0, 0.333, 0);\n        box4.scale.set(2.002, 4.566, 2.064);\n        this.add(box4);\n        const box5 = new Mesh(geometry, boxMaterial);\n        box5.position.set(2.291, -0.756, -2.621);\n        box5.rotation.set(0, -0.286, 0);\n        box5.scale.set(1.546, 1.552, 1.496);\n        this.add(box5);\n        const box6 = new Mesh(geometry, boxMaterial);\n        box6.position.set(-2.193, -0.369, -5.547);\n        box6.rotation.set(0, 0.516, 0);\n        box6.scale.set(3.875, 3.487, 2.986);\n        this.add(box6);\n        // -x\n        const light1 = new Mesh(geometry, this.createAreaLightMaterial(18));\n        light1.position.set(-14.0, 9.0, 0.1);\n        light1.scale.set(0.1, 5.0, 5.0);\n        this.add(light1);\n        // +x\n        const light3 = new Mesh(geometry, this.createAreaLightMaterial(18));\n        light3.position.set(14.0, 9.0, 0.1);\n        light3.scale.set(0.1, 5.0, 5.0);\n        this.add(light3);\n        // +z\n        const light4 = new Mesh(geometry, this.createAreaLightMaterial(18));\n        light4.position.set(0.0, 9.0, 14.0);\n        light4.scale.set(5.0, 5.0, 0.1);\n        this.add(light4);\n        // -z\n        const light5 = new Mesh(geometry, this.createAreaLightMaterial(18));\n        light5.position.set(0, 9.0, -14.0);\n        light5.scale.set(5.0, 5.0, 0.1);\n        this.add(light5);\n        // +y\n        const light6 = new Mesh(geometry, this.createAreaLightMaterial(18));\n        light6.position.set(0.0, 20.0, 0.0);\n        light6.scale.set(1.5, 0.1, 1.5);\n        this.add(light6);\n    }\n    createAreaLightMaterial(intensity) {\n        const material = new MeshBasicMaterial();\n        material.color.setScalar(intensity);\n        return material;\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst GENERATED_SIGMA = 0.04;\nconst HDR_FILE_RE = /\\.hdr(\\.js)?$/;\nconst ldrLoader = new TextureLoader();\nconst hdrLoader = new RGBELoader();\n// Attach a `userData` object for arbitrary data on textures that\n// originate from TextureUtils, similar to Object3D's userData,\n// for help debugging, providing metadata for tests, and semantically\n// describe the type of texture within the context of this application.\nconst userData = {\n    url: null,\n};\nclass TextureUtils extends EventDispatcher {\n    constructor(threeRenderer) {\n        super();\n        this.generatedEnvironmentMap = null;\n        this.generatedEnvironmentMapAlt = null;\n        this.skyboxCache = new Map();\n        this.environmentMapCache = new Map();\n        this.PMREMGenerator = new PMREMGenerator(threeRenderer);\n    }\n    async load(url, progressCallback = () => { }) {\n        try {\n            const isHDR = HDR_FILE_RE.test(url);\n            const loader = isHDR ? hdrLoader : ldrLoader;\n            const texture = await new Promise((resolve, reject) => loader.load(url, resolve, (event) => {\n                progressCallback(event.loaded / event.total * 0.9);\n            }, reject));\n            progressCallback(1.0);\n            this.addMetadata(texture, url);\n            texture.mapping = EquirectangularReflectionMapping;\n            if (isHDR) {\n                texture.encoding = RGBEEncoding;\n                texture.minFilter = NearestFilter;\n                texture.magFilter = NearestFilter;\n                texture.flipY = true;\n            }\n            else {\n                texture.encoding = GammaEncoding;\n            }\n            return texture;\n        }\n        finally {\n            if (progressCallback) {\n                progressCallback(1);\n            }\n        }\n    }\n    /**\n     * Returns a { skybox, environmentMap } object with the targets/textures\n     * accordingly. `skybox` is a WebGLRenderCubeTarget, and `environmentMap`\n     * is a Texture from a WebGLRenderCubeTarget.\n     */\n    async generateEnvironmentMapAndSkybox(skyboxUrl = null, environmentMap = null, options = {}) {\n        const { progressTracker } = options;\n        const updateGenerationProgress = progressTracker != null ? progressTracker.beginActivity() : () => { };\n        const useAltEnvironment = environmentMap === 'neutral';\n        if (useAltEnvironment === true) {\n            environmentMap = null;\n        }\n        const environmentMapUrl = deserializeUrl(environmentMap);\n        try {\n            let skyboxLoads = Promise.resolve(null);\n            let environmentMapLoads;\n            // If we have a skybox URL, attempt to load it as a cubemap\n            if (!!skyboxUrl) {\n                skyboxLoads = this.loadSkyboxFromUrl(skyboxUrl, progressTracker);\n            }\n            if (!!environmentMapUrl) {\n                // We have an available environment map URL\n                environmentMapLoads =\n                    this.loadEnvironmentMapFromUrl(environmentMapUrl, progressTracker);\n            }\n            else if (!!skyboxUrl) {\n                // Fallback to deriving the environment map from an available skybox\n                environmentMapLoads =\n                    this.loadEnvironmentMapFromUrl(skyboxUrl, progressTracker);\n            }\n            else {\n                // Fallback to generating the environment map\n                environmentMapLoads = useAltEnvironment === true ?\n                    this.loadGeneratedEnvironmentMapAlt() :\n                    this.loadGeneratedEnvironmentMap();\n            }\n            let [environmentMap, skybox] = await Promise.all([environmentMapLoads, skyboxLoads]);\n            if (environmentMap == null) {\n                throw new Error('Failed to load environment map.');\n            }\n            return { environmentMap, skybox };\n        }\n        finally {\n            updateGenerationProgress(1.0);\n        }\n    }\n    addMetadata(texture, url) {\n        if (texture == null) {\n            return;\n        }\n        texture.userData = Object.assign(Object.assign({}, userData), ({\n            url: url,\n        }));\n    }\n    /**\n     * Loads an equirect Texture from a given URL, for use as a skybox.\n     */\n    loadSkyboxFromUrl(url, progressTracker) {\n        if (!this.skyboxCache.has(url)) {\n            const progressCallback = progressTracker ? progressTracker.beginActivity() : () => { };\n            const skyboxMapLoads = this.load(url, progressCallback);\n            this.skyboxCache.set(url, skyboxMapLoads);\n        }\n        return this.skyboxCache.get(url);\n    }\n    /**\n     * Loads a WebGLRenderTarget from a given URL. The render target in this\n     * case will be assumed to be used as an environment map.\n     */\n    loadEnvironmentMapFromUrl(url, progressTracker) {\n        if (!this.environmentMapCache.has(url)) {\n            const environmentMapLoads = this.loadSkyboxFromUrl(url, progressTracker).then((equirect) => {\n                const cubeUV = this.PMREMGenerator.fromEquirectangular(equirect);\n                this.addMetadata(cubeUV.texture, url);\n                return cubeUV;\n            });\n            this.PMREMGenerator.compileEquirectangularShader();\n            this.environmentMapCache.set(url, environmentMapLoads);\n        }\n        return this.environmentMapCache.get(url);\n    }\n    /**\n     * Loads a dynamically generated environment map.\n     */\n    loadGeneratedEnvironmentMap() {\n        if (this.generatedEnvironmentMap == null) {\n            const defaultScene = new EnvironmentScene;\n            this.generatedEnvironmentMap =\n                this.PMREMGenerator.fromScene(defaultScene, GENERATED_SIGMA);\n            this.addMetadata(this.generatedEnvironmentMap.texture, null);\n        }\n        return Promise.resolve(this.generatedEnvironmentMap);\n    }\n    /**\n     * Loads a dynamically generated environment map, designed to be neutral and\n     * color-preserving. Shows less contrast around the different sides of the\n     * object.\n     */\n    loadGeneratedEnvironmentMapAlt() {\n        if (this.generatedEnvironmentMapAlt == null) {\n            const defaultScene = new EnvironmentSceneAlt;\n            this.generatedEnvironmentMapAlt =\n                this.PMREMGenerator.fromScene(defaultScene, GENERATED_SIGMA);\n            this.addMetadata(this.generatedEnvironmentMapAlt.texture, null);\n        }\n        return Promise.resolve(this.generatedEnvironmentMapAlt);\n    }\n    async dispose() {\n        const allTargetsLoad = [];\n        // NOTE(cdata): We would use for-of iteration on the maps here, but\n        // IE11 doesn't have the necessary iterator-returning methods. So,\n        // disposal of these render targets is kind of convoluted as a result.\n        this.environmentMapCache.forEach((targetLoads) => {\n            allTargetsLoad.push(targetLoads);\n        });\n        this.environmentMapCache.clear();\n        for (const targetLoads of allTargetsLoad) {\n            try {\n                const target = await targetLoads;\n                target.dispose();\n            }\n            catch (e) {\n                // Suppress errors, so that all render targets will be disposed\n            }\n        }\n        if (this.generatedEnvironmentMap != null) {\n            this.generatedEnvironmentMap.dispose();\n            this.generatedEnvironmentMap = null;\n        }\n        if (this.generatedEnvironmentMapAlt != null) {\n            this.generatedEnvironmentMapAlt.dispose();\n            this.generatedEnvironmentMapAlt = null;\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Between 0 and 1: larger means the average responds faster and is less smooth.\nconst DURATION_DECAY = 0.2;\nconst LOW_FRAME_DURATION_MS = 18;\nconst HIGH_FRAME_DURATION_MS = 26;\nconst MAX_AVG_CHANGE_MS = 2;\nconst SCALE_STEPS = [1, 0.79, 0.62, 0.5, 0.4, 0.31, 0.25];\nconst DEFAULT_LAST_STEP = 3;\n/**\n * Registers canvases with Canvas2DRenderingContexts and renders them\n * all in the same WebGLRenderingContext, spitting out textures to apply\n * to the canvases. Creates a fullscreen WebGL canvas that is not added\n * to the DOM, and on each frame, renders each registered canvas on a portion\n * of the WebGL canvas, and applies the texture on the registered canvas.\n *\n * In the future, can use ImageBitmapRenderingContext instead of\n * Canvas2DRenderingContext if supported for cheaper transfering of\n * the texture.\n */\nclass Renderer extends EventDispatcher {\n    constructor(options) {\n        super();\n        this.loader = new CachingGLTFLoader(ModelViewerGLTFInstance);\n        this.width = 0;\n        this.height = 0;\n        this.dpr = 1;\n        this.debugger = null;\n        this.scenes = new Set();\n        this.multipleScenesVisible = false;\n        this.scaleStep = 0;\n        this.lastStep = DEFAULT_LAST_STEP;\n        this.avgFrameDuration = (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n        this.onWebGLContextLost = (event) => {\n            this.dispatchEvent({ type: 'contextlost', sourceEvent: event });\n        };\n        this.dpr = resolveDpr();\n        this.canvasElement = document.createElement('canvas');\n        this.canvasElement.id = 'webgl-canvas';\n        this.canvas3D = this.canvasElement;\n        this.canvas3D.addEventListener('webglcontextlost', this.onWebGLContextLost);\n        try {\n            this.threeRenderer = new WebGL1Renderer({\n                canvas: this.canvas3D,\n                alpha: true,\n                antialias: true,\n                powerPreference: 'high-performance',\n                preserveDrawingBuffer: true\n            });\n            this.threeRenderer.autoClear = true;\n            this.threeRenderer.outputEncoding = GammaEncoding;\n            this.threeRenderer.physicallyCorrectLights = true;\n            this.threeRenderer.setPixelRatio(1); // handle pixel ratio externally\n            this.threeRenderer.shadowMap.enabled = true;\n            this.threeRenderer.shadowMap.type = PCFSoftShadowMap;\n            this.threeRenderer.shadowMap.autoUpdate = false;\n            this.debugger =\n                options != null && !!options.debug ? new Debugger(this) : null;\n            this.threeRenderer.debug = { checkShaderErrors: !!this.debugger };\n            // ACESFilmicToneMapping appears to be the most \"saturated\",\n            // and similar to Filament's gltf-viewer.\n            this.threeRenderer.toneMapping = ACESFilmicToneMapping;\n        }\n        catch (error) {\n            console.warn(error);\n        }\n        this.arRenderer = new ARRenderer(this);\n        this.textureUtils =\n            this.canRender ? new TextureUtils(this.threeRenderer) : null;\n        this.roughnessMipmapper = new RoughnessMipmapper(this.threeRenderer);\n        CachingGLTFLoader.initializeKTX2Loader(this.threeRenderer);\n        this.updateRendererSize();\n        this.lastTick = performance.now();\n        this.avgFrameDuration = 0;\n    }\n    static get singleton() {\n        return this._singleton;\n    }\n    static resetSingleton() {\n        this._singleton.dispose();\n        this._singleton = new Renderer({ debug: isDebugMode() });\n    }\n    get canRender() {\n        return this.threeRenderer != null;\n    }\n    get scaleFactor() {\n        return SCALE_STEPS[this.scaleStep];\n    }\n    set minScale(scale) {\n        let i = 1;\n        while (i < SCALE_STEPS.length) {\n            if (SCALE_STEPS[i] < scale) {\n                break;\n            }\n            ++i;\n        }\n        this.lastStep = i - 1;\n    }\n    /**\n     * Updates the renderer's size based on the largest scene and any changes to\n     * device pixel ratio.\n     */\n    updateRendererSize() {\n        const dpr = resolveDpr();\n        if (dpr !== this.dpr) {\n            // If the device pixel ratio has changed due to page zoom, elements\n            // specified by % width do not fire a resize event even though their CSS\n            // pixel dimensions change, so we force them to update their size here.\n            for (const scene of this.scenes) {\n                const { element } = scene;\n                element[$updateSize](element.getBoundingClientRect());\n            }\n        }\n        // Make the renderer the size of the largest scene\n        let width = 0;\n        let height = 0;\n        for (const scene of this.scenes) {\n            width = Math.max(width, scene.width);\n            height = Math.max(height, scene.height);\n        }\n        if (width === this.width && height === this.height && dpr === this.dpr) {\n            return;\n        }\n        this.width = width;\n        this.height = height;\n        this.dpr = dpr;\n        if (this.canRender) {\n            this.threeRenderer.setSize(width * dpr, height * dpr, false);\n        }\n        // Expand the canvas size to make up for shrinking the viewport.\n        const scale = this.scaleFactor;\n        const widthCSS = width / scale;\n        const heightCSS = height / scale;\n        // The canvas element must by styled outside of three due to the offscreen\n        // canvas not being directly stylable.\n        this.canvasElement.style.width = `${widthCSS}px`;\n        this.canvasElement.style.height = `${heightCSS}px`;\n        // Each scene's canvas must match the renderer size. In general they can be\n        // larger than the element that contains them, but the overflow is hidden\n        // and only the portion that is shown is copied over.\n        for (const scene of this.scenes) {\n            const { canvas } = scene;\n            canvas.width = Math.round(width * dpr);\n            canvas.height = Math.round(height * dpr);\n            canvas.style.width = `${widthCSS}px`;\n            canvas.style.height = `${heightCSS}px`;\n            scene.isDirty = true;\n        }\n    }\n    updateRendererScale() {\n        const scaleStep = this.scaleStep;\n        if (this.avgFrameDuration > HIGH_FRAME_DURATION_MS &&\n            this.scaleStep < this.lastStep) {\n            ++this.scaleStep;\n        }\n        else if (this.avgFrameDuration < LOW_FRAME_DURATION_MS && this.scaleStep > 0) {\n            --this.scaleStep;\n        }\n        if (scaleStep == this.scaleStep) {\n            return;\n        }\n        const scale = this.scaleFactor;\n        this.avgFrameDuration =\n            (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n        const width = this.width / scale;\n        const height = this.height / scale;\n        this.canvasElement.style.width = `${width}px`;\n        this.canvasElement.style.height = `${height}px`;\n        for (const scene of this.scenes) {\n            const { style } = scene.canvas;\n            style.width = `${width}px`;\n            style.height = `${height}px`;\n            scene.isDirty = true;\n        }\n    }\n    registerScene(scene) {\n        this.scenes.add(scene);\n        const { canvas } = scene;\n        const scale = this.scaleFactor;\n        canvas.width = Math.round(this.width * this.dpr);\n        canvas.height = Math.round(this.height * this.dpr);\n        canvas.style.width = `${this.width / scale}px`;\n        canvas.style.height = `${this.height / scale}px`;\n        if (this.multipleScenesVisible) {\n            canvas.classList.add('show');\n        }\n        scene.isDirty = true;\n        if (this.canRender && this.scenes.size > 0) {\n            this.threeRenderer.setAnimationLoop((time) => this.render(time));\n        }\n        if (this.debugger != null) {\n            this.debugger.addScene(scene);\n        }\n    }\n    unregisterScene(scene) {\n        this.scenes.delete(scene);\n        if (this.canRender && this.scenes.size === 0) {\n            this.threeRenderer.setAnimationLoop(null);\n        }\n        if (this.debugger != null) {\n            this.debugger.removeScene(scene);\n        }\n    }\n    displayCanvas(scene) {\n        return this.multipleScenesVisible ? scene.element[$canvas] :\n            this.canvasElement;\n    }\n    /**\n     * The function enables an optimization, where when there is only a single\n     * <model-viewer> element, we can use the renderer's 3D canvas directly for\n     * display. Otherwise we need to use the element's 2D canvas and copy the\n     * renderer's result into it.\n     */\n    selectCanvas() {\n        let visibleScenes = 0;\n        let visibleInput = null;\n        for (const scene of this.scenes) {\n            const { element } = scene;\n            if (element.modelIsVisible) {\n                ++visibleScenes;\n                visibleInput = element[$userInputElement];\n            }\n        }\n        const multipleScenesVisible = visibleScenes > 1 || USE_OFFSCREEN_CANVAS;\n        const { canvasElement } = this;\n        if (multipleScenesVisible === this.multipleScenesVisible &&\n            (multipleScenesVisible ||\n                canvasElement.parentElement === visibleInput)) {\n            return;\n        }\n        this.multipleScenesVisible = multipleScenesVisible;\n        if (multipleScenesVisible) {\n            canvasElement.classList.remove('show');\n        }\n        for (const scene of this.scenes) {\n            const userInputElement = scene.element[$userInputElement];\n            const canvas = scene.element[$canvas];\n            if (multipleScenesVisible) {\n                canvas.classList.add('show');\n                scene.isDirty = true;\n            }\n            else if (userInputElement === visibleInput) {\n                userInputElement.appendChild(canvasElement);\n                canvasElement.classList.add('show');\n                canvas.classList.remove('show');\n                scene.isDirty = true;\n            }\n        }\n    }\n    /**\n     * Returns an array version of this.scenes where the non-visible ones are\n     * first. This allows eager scenes to be rendered before they are visible,\n     * without needing the multi-canvas render path.\n     */\n    orderedScenes() {\n        const scenes = [];\n        for (const visible of [false, true]) {\n            for (const scene of this.scenes) {\n                if (scene.element.modelIsVisible === visible) {\n                    scenes.push(scene);\n                }\n            }\n        }\n        return scenes;\n    }\n    get isPresenting() {\n        return this.arRenderer.isPresenting;\n    }\n    /**\n     * This method takes care of updating the element and renderer state based on\n     * the time that has passed since the last rendered frame.\n     */\n    preRender(scene, t, delta) {\n        const { element, exposure } = scene;\n        element[$tick](t, delta);\n        const exposureIsNumber = typeof exposure === 'number' && !self.isNaN(exposure);\n        this.threeRenderer.toneMappingExposure = exposureIsNumber ? exposure : 1.0;\n        if (scene.isShadowDirty()) {\n            this.threeRenderer.shadowMap.needsUpdate = true;\n        }\n    }\n    render(t) {\n        const delta = t - this.lastTick;\n        this.lastTick = t;\n        if (!this.canRender || this.isPresenting) {\n            return;\n        }\n        this.avgFrameDuration += clamp(DURATION_DECAY * (delta - this.avgFrameDuration), -MAX_AVG_CHANGE_MS, MAX_AVG_CHANGE_MS);\n        this.selectCanvas();\n        this.updateRendererSize();\n        this.updateRendererScale();\n        const { dpr, scaleFactor } = this;\n        for (const scene of this.orderedScenes()) {\n            if (!scene.element[$sceneIsReady]()) {\n                continue;\n            }\n            this.preRender(scene, t, delta);\n            if (!scene.isDirty) {\n                continue;\n            }\n            scene.isDirty = false;\n            ++scene.renderCount;\n            if (!scene.element.modelIsVisible && !this.multipleScenesVisible) {\n                // Here we are pre-rendering on the visible canvas, so we must mark the\n                // visible scene dirty to ensure it overwrites us.\n                for (const scene of this.scenes) {\n                    if (scene.element.modelIsVisible) {\n                        scene.isDirty = true;\n                    }\n                }\n            }\n            // We avoid using the Three.js PixelRatio and handle it ourselves here so\n            // that we can do proper rounding and avoid white boundary pixels.\n            const width = Math.min(Math.ceil(scene.width * scaleFactor * dpr), this.canvas3D.width);\n            const height = Math.min(Math.ceil(scene.height * scaleFactor * dpr), this.canvas3D.height);\n            // Need to set the render target in order to prevent\n            // clearing the depth from a different buffer\n            this.threeRenderer.setRenderTarget(null);\n            this.threeRenderer.setViewport(0, Math.floor(this.height * dpr) - height, width, height);\n            this.threeRenderer.render(scene, scene.getCamera());\n            if (this.multipleScenesVisible) {\n                if (scene.context == null) {\n                    scene.createContext();\n                }\n                {\n                    const context2D = scene.context;\n                    context2D.clearRect(0, 0, width, height);\n                    context2D.drawImage(this.canvas3D, 0, 0, width, height, 0, 0, width, height);\n                }\n            }\n        }\n    }\n    dispose() {\n        if (this.textureUtils != null) {\n            this.textureUtils.dispose();\n        }\n        if (this.threeRenderer != null) {\n            this.threeRenderer.dispose();\n        }\n        this.textureUtils = null;\n        this.threeRenderer = null;\n        this.scenes.clear();\n        this.canvas3D.removeEventListener('webglcontextlost', this.onWebGLContextLost);\n    }\n}\nRenderer._singleton = new Renderer({ debug: isDebugMode() });\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Converts a base64 string which represents a data url\n * into a Blob of the same contents.\n */\nconst dataUrlToBlob = async (base64DataUrl) => {\n    return new Promise((resolve, reject) => {\n        const sliceSize = 512;\n        const typeMatch = base64DataUrl.match(/data:(.*);/);\n        if (!typeMatch) {\n            return reject(new Error(`${base64DataUrl} is not a valid data Url`));\n        }\n        const type = typeMatch[1];\n        const base64 = base64DataUrl.replace(/data:image\\/\\w+;base64,/, '');\n        const byteCharacters = atob(base64);\n        const byteArrays = [];\n        for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            const slice = byteCharacters.slice(offset, offset + sliceSize);\n            const byteNumbers = new Array(slice.length);\n            for (let i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            const byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        resolve(new Blob(byteArrays, { type }));\n    });\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$8, _b$7;\nconst $ongoingActivities = Symbol('ongoingActivities');\nconst $announceTotalProgress = Symbol('announceTotalProgress');\nconst $eventDelegate = Symbol('eventDelegate');\nconst ACTIVITY_PROGRESS_WEIGHT = 0.5;\n/**\n * ProgressTracker is an event emitter that helps to track the ongoing progress\n * of many simultaneous actions.\n *\n * ProgressTracker reports progress activity in the form of a progress event.\n * The event.detail.totalProgress value indicates the elapsed progress of all\n * activities being tracked by the ProgressTracker.\n *\n * The value of totalProgress is a number that progresses from 0 to 1. The\n * ProgressTracker allows for the lazy accumulation of tracked actions, so the\n * total progress represents a abstract, non-absolute progress towards the\n * completion of all currently tracked events.\n *\n * When all currently tracked activities are finished, the ProgressTracker\n * emits one final progress event and then resets the list of its currently\n * tracked activities. This means that from an observer's perspective,\n * ongoing activities will accumulate and collectively contribute to the notion\n * of total progress until all currently tracked ongoing activities have\n * completed.\n */\nclass ProgressTracker {\n    constructor() {\n        // NOTE(cdata): This eventDelegate hack is a quick trick to let us get the\n        // EventTarget interface without implementing or requiring a full polyfill. We\n        // should remove this once EventTarget is inheritable everywhere.\n        this[_a$8] = document.createDocumentFragment();\n        // NOTE(cdata): We declare each of these methods independently here so that we\n        // can inherit the correct types from EventTarget's interface. Maybe there is\n        // a better way to do this dynamically so that we don't repeat ourselves?\n        this.addEventListener = (...args) => this[$eventDelegate].addEventListener(...args);\n        this.removeEventListener = (...args) => this[$eventDelegate].removeEventListener(...args);\n        this.dispatchEvent = (...args) => this[$eventDelegate].dispatchEvent(...args);\n        this[_b$7] = new Set();\n    }\n    /**\n     * The total number of activities currently being tracked.\n     */\n    get ongoingActivityCount() {\n        return this[$ongoingActivities].size;\n    }\n    /**\n     * Registers a new activity to be tracked by the progress tracker. The method\n     * returns a special callback that should be invoked whenever new progress is\n     * ready to be reported. The progress should be reported as a value between 0\n     * and 1, where 0 would represent the beginning of the action and 1 would\n     * represent its completion.\n     *\n     * There is no built-in notion of a time-out for ongoing activities, so once\n     * an ongoing activity is begun, it is up to the consumer of this API to\n     * update the progress until that activity is no longer ongoing.\n     *\n     * Progress is only allowed to move forward for any given activity. If a lower\n     * progress is reported than the previously reported progress, it will be\n     * ignored.\n     */\n    beginActivity() {\n        const activity = { progress: 0 };\n        this[$ongoingActivities].add(activity);\n        if (this.ongoingActivityCount === 1) {\n            // Announce the first progress event (which should always be 0 / 1\n            // total progress):\n            this[$announceTotalProgress]();\n        }\n        return (progress) => {\n            let nextProgress;\n            nextProgress = Math.max(clamp(progress, 0, 1), activity.progress);\n            if (nextProgress !== activity.progress) {\n                activity.progress = nextProgress;\n                this[$announceTotalProgress]();\n            }\n            return activity.progress;\n        };\n    }\n    [(_a$8 = $eventDelegate, _b$7 = $ongoingActivities, $announceTotalProgress)]() {\n        let totalProgress = 0;\n        let statusCount = 0;\n        let completedActivities = 0;\n        for (const activity of this[$ongoingActivities]) {\n            const { progress } = activity;\n            const compoundWeight = ACTIVITY_PROGRESS_WEIGHT / Math.pow(2, statusCount++);\n            totalProgress += progress * compoundWeight;\n            if (progress === 1.0) {\n                completedActivities++;\n            }\n        }\n        if (completedActivities === this.ongoingActivityCount) {\n            totalProgress = 1.0;\n            this[$ongoingActivities].clear();\n        }\n        this.dispatchEvent(new CustomEvent('progress', { detail: { totalProgress } }));\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar _a$7, _b$6, _c$3, _d$1, _e, _f, _g, _h, _j, _k;\nconst CLEAR_MODEL_TIMEOUT_MS = 1000;\nconst FALLBACK_SIZE_UPDATE_THRESHOLD_MS = 50;\nconst ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD = 0;\nconst UNSIZED_MEDIA_WIDTH = 300;\nconst UNSIZED_MEDIA_HEIGHT = 150;\nconst blobCanvas = document.createElement('canvas');\nlet blobContext = null;\nconst $template = Symbol('template');\nconst $fallbackResizeHandler = Symbol('fallbackResizeHandler');\nconst $defaultAriaLabel = Symbol('defaultAriaLabel');\nconst $resizeObserver = Symbol('resizeObserver');\nconst $intersectionObserver = Symbol('intersectionObserver');\nconst $clearModelTimeout = Symbol('clearModelTimeout');\nconst $onContextLost = Symbol('onContextLost');\nconst $loaded = Symbol('loaded');\nconst $updateSize = Symbol('updateSize');\nconst $isElementInViewport = Symbol('isElementInViewport');\nconst $announceModelVisibility = Symbol('announceModelVisibility');\nconst $ariaLabel = Symbol('ariaLabel');\nconst $loadedTime = Symbol('loadedTime');\nconst $updateSource = Symbol('updateSource');\nconst $markLoaded = Symbol('markLoaded');\nconst $container = Symbol('container');\nconst $userInputElement = Symbol('input');\nconst $canvas = Symbol('canvas');\nconst $scene = Symbol('scene');\nconst $needsRender = Symbol('needsRender');\nconst $tick = Symbol('tick');\nconst $onModelLoad = Symbol('onModelLoad');\nconst $onResize = Symbol('onResize');\nconst $renderer = Symbol('renderer');\nconst $progressTracker = Symbol('progressTracker');\nconst $getLoaded = Symbol('getLoaded');\nconst $getModelIsVisible = Symbol('getModelIsVisible');\nconst $shouldAttemptPreload = Symbol('shouldAttemptPreload');\nconst $sceneIsReady = Symbol('sceneIsReady');\nconst $hasTransitioned = Symbol('hasTransitioned');\nconst toVector3D = (v) => {\n    return {\n        x: v.x,\n        y: v.y,\n        z: v.z,\n        toString() {\n            return `${this.x}m ${this.y}m ${this.z}m`;\n        }\n    };\n};\n/**\n * Definition for a basic <model-viewer> element.\n */\nclass ModelViewerElementBase extends UpdatingElement {\n    /**\n     * Creates a new ModelViewerElement.\n     */\n    constructor() {\n        super();\n        this.alt = null;\n        this.src = null;\n        this[_a$7] = false;\n        this[_b$6] = false;\n        this[_c$3] = 0;\n        this[_d$1] = null;\n        this[_e] = debounce(() => {\n            const boundingRect = this.getBoundingClientRect();\n            this[$updateSize](boundingRect);\n        }, FALLBACK_SIZE_UPDATE_THRESHOLD_MS);\n        this[_f] = debounce((oldVisibility) => {\n            const newVisibility = this.modelIsVisible;\n            if (newVisibility !== oldVisibility) {\n                this.dispatchEvent(new CustomEvent('model-visibility', { detail: { visible: newVisibility } }));\n            }\n        }, ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD);\n        this[_g] = null;\n        this[_h] = null;\n        this[_j] = new ProgressTracker();\n        this[_k] = (event) => {\n            this.dispatchEvent(new CustomEvent('error', { detail: { type: 'webglcontextlost', sourceError: event.sourceEvent } }));\n        };\n        // NOTE(cdata): It is *very important* to access this template first so that\n        // the ShadyCSS template preparation steps happen before element styling in\n        // IE11:\n        const template = this.constructor.template;\n        if (window.ShadyCSS) {\n            window.ShadyCSS.styleElement(this, {});\n        }\n        // NOTE(cdata): The canonical ShadyCSS examples suggest that the Shadow Root\n        // should be created after the invocation of ShadyCSS.styleElement\n        this.attachShadow({ mode: 'open' });\n        const shadowRoot = this.shadowRoot;\n        shadowRoot.appendChild(template.content.cloneNode(true));\n        this[$container] = shadowRoot.querySelector('.container');\n        this[$userInputElement] =\n            shadowRoot.querySelector('.userInput');\n        this[$canvas] = shadowRoot.querySelector('canvas');\n        this[$defaultAriaLabel] =\n            this[$userInputElement].getAttribute('aria-label');\n        // Because of potential race conditions related to invoking the constructor\n        // we only use the bounding rect to set the initial size if the element is\n        // already connected to the document:\n        let width, height;\n        if (this.isConnected) {\n            const rect = this.getBoundingClientRect();\n            width = rect.width;\n            height = rect.height;\n        }\n        else {\n            width = UNSIZED_MEDIA_WIDTH;\n            height = UNSIZED_MEDIA_HEIGHT;\n        }\n        // Create the underlying ModelScene.\n        this[$scene] =\n            new ModelScene({ canvas: this[$canvas], element: this, width, height });\n        this[$scene].addEventListener('model-load', async (event) => {\n            this[$markLoaded]();\n            this[$onModelLoad]();\n            // Give loading async tasks a chance to complete.\n            await timePasses();\n            this.dispatchEvent(new CustomEvent('load', { detail: { url: event.url } }));\n        });\n        // Update initial size on microtask timing so that subclasses have a\n        // chance to initialize\n        Promise.resolve().then(() => {\n            this[$updateSize](this.getBoundingClientRect());\n        });\n        if (HAS_RESIZE_OBSERVER) {\n            // Set up a resize observer so we can scale our canvas\n            // if our <model-viewer> changes\n            this[$resizeObserver] = new ResizeObserver((entries) => {\n                // Don't resize anything if in AR mode; otherwise the canvas\n                // scaling to fullscreen on entering AR will clobber the flat/2d\n                // dimensions of the element.\n                if (this[$renderer].isPresenting) {\n                    return;\n                }\n                for (let entry of entries) {\n                    if (entry.target === this) {\n                        this[$updateSize](entry.contentRect);\n                    }\n                }\n            });\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver] = new IntersectionObserver(entries => {\n                for (let entry of entries) {\n                    if (entry.target === this) {\n                        const oldVisibility = this.modelIsVisible;\n                        this[$isElementInViewport] = entry.isIntersecting;\n                        this[$announceModelVisibility](oldVisibility);\n                        if (this[$isElementInViewport] && !this[$sceneIsReady]()) {\n                            this[$updateSource]();\n                        }\n                    }\n                }\n            }, {\n                root: null,\n                // We used to have margin here, but it was causing animated models below\n                // the fold to steal the frame budget. Weirder still, it would also\n                // cause input events to be swallowed, sometimes for seconds on the\n                // model above the fold, but only when the animated model was completely\n                // below. Setting this margin to zero fixed it.\n                rootMargin: '0px',\n                threshold: 0,\n            });\n        }\n        else {\n            // If there is no intersection obsever, then all models should be visible\n            // at all times:\n            this[$isElementInViewport] = true;\n        }\n    }\n    static get is() {\n        return 'model-viewer';\n    }\n    /** @nocollapse */\n    static get template() {\n        if (!this.hasOwnProperty($template)) {\n            this[$template] = makeTemplate(this.is);\n        }\n        return this[$template];\n    }\n    /** @export */\n    static set modelCacheSize(value) {\n        CachingGLTFLoader[$evictionPolicy].evictionThreshold = value;\n    }\n    /** @export */\n    static get modelCacheSize() {\n        return CachingGLTFLoader[$evictionPolicy].evictionThreshold;\n    }\n    /** @export */\n    static set minimumRenderScale(value) {\n        if (value > 1) {\n            console.warn('<model-viewer> minimumRenderScale has been clamped to a maximum value of 1.');\n        }\n        if (value <= 0) {\n            console.warn('<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25.');\n        }\n        Renderer.singleton.minScale = value;\n    }\n    /** @export */\n    static get minimumRenderScale() {\n        return Renderer.singleton.minScale;\n    }\n    /** @export */\n    get loaded() {\n        return this[$getLoaded]();\n    }\n    get [(_a$7 = $isElementInViewport, _b$6 = $loaded, _c$3 = $loadedTime, _d$1 = $clearModelTimeout, _e = $fallbackResizeHandler, _f = $announceModelVisibility, _g = $resizeObserver, _h = $intersectionObserver, _j = $progressTracker, $renderer)]() {\n        return Renderer.singleton;\n    }\n    /** @export */\n    get modelIsVisible() {\n        return this[$getModelIsVisible]();\n    }\n    connectedCallback() {\n        super.connectedCallback && super.connectedCallback();\n        if (HAS_RESIZE_OBSERVER) {\n            this[$resizeObserver].observe(this);\n        }\n        else {\n            self.addEventListener('resize', this[$fallbackResizeHandler]);\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver].observe(this);\n        }\n        const renderer = this[$renderer];\n        renderer.addEventListener('contextlost', this[$onContextLost]);\n        renderer.registerScene(this[$scene]);\n        if (this[$clearModelTimeout] != null) {\n            self.clearTimeout(this[$clearModelTimeout]);\n            this[$clearModelTimeout] = null;\n            // Force an update in case the model has been evicted from our GLTF cache\n            // @see https://lit-element.polymer-project.org/guide/lifecycle#requestupdate\n            this.requestUpdate('src', null);\n        }\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback && super.disconnectedCallback();\n        if (HAS_RESIZE_OBSERVER) {\n            this[$resizeObserver].unobserve(this);\n        }\n        else {\n            self.removeEventListener('resize', this[$fallbackResizeHandler]);\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver].unobserve(this);\n        }\n        const renderer = this[$renderer];\n        renderer.removeEventListener('contextlost', this[$onContextLost]);\n        renderer.unregisterScene(this[$scene]);\n        this[$clearModelTimeout] = self.setTimeout(() => {\n            this[$scene].reset();\n        }, CLEAR_MODEL_TIMEOUT_MS);\n    }\n    updated(changedProperties) {\n        super.updated(changedProperties);\n        // NOTE(cdata): If a property changes from values A -> B -> A in the space\n        // of a microtask, LitElement/UpdatingElement will notify of a change even\n        // though the value has effectively not changed, so we need to check to make\n        // sure that the value has actually changed before changing the loaded flag.\n        if (changedProperties.has('src')) {\n            if (this.src == null) {\n                this[$loaded] = false;\n                this[$loadedTime] = 0;\n                this[$scene].reset();\n            }\n            else if (this.src !== this[$scene].url) {\n                this[$loaded] = false;\n                this[$loadedTime] = 0;\n                this[$updateSource]();\n            }\n        }\n        if (changedProperties.has('alt')) {\n            const ariaLabel = this.alt == null ? this[$defaultAriaLabel] : this.alt;\n            this[$userInputElement].setAttribute('aria-label', ariaLabel);\n        }\n    }\n    /** @export */\n    toDataURL(type, encoderOptions) {\n        return this[$renderer]\n            .displayCanvas(this[$scene])\n            .toDataURL(type, encoderOptions);\n    }\n    /** @export */\n    async toBlob(options) {\n        const mimeType = options ? options.mimeType : undefined;\n        const qualityArgument = options ? options.qualityArgument : undefined;\n        const idealAspect = options ? options.idealAspect : undefined;\n        const { width, height, fieldOfViewAspect, aspect } = this[$scene];\n        const { dpr, scaleFactor } = this[$renderer];\n        let outputWidth = width * scaleFactor * dpr;\n        let outputHeight = height * scaleFactor * dpr;\n        let offsetX = 0;\n        let offsetY = 0;\n        if (idealAspect === true) {\n            if (fieldOfViewAspect > aspect) {\n                const oldHeight = outputHeight;\n                outputHeight = Math.round(outputWidth / fieldOfViewAspect);\n                offsetY = (oldHeight - outputHeight) / 2;\n            }\n            else {\n                const oldWidth = outputWidth;\n                outputWidth = Math.round(outputHeight * fieldOfViewAspect);\n                offsetX = (oldWidth - outputWidth) / 2;\n            }\n        }\n        blobCanvas.width = outputWidth;\n        blobCanvas.height = outputHeight;\n        try {\n            return new Promise(async (resolve, reject) => {\n                if (blobContext == null) {\n                    blobContext = blobCanvas.getContext('2d');\n                }\n                blobContext.drawImage(this[$renderer].displayCanvas(this[$scene]), offsetX, offsetY, outputWidth, outputHeight, 0, 0, outputWidth, outputHeight);\n                if (blobCanvas.msToBlob) {\n                    // NOTE: msToBlob only returns image/png\n                    // so ensure mimeType is not specified (defaults to image/png)\n                    // or is image/png, otherwise fallback to using toDataURL on IE.\n                    if (!mimeType || mimeType === 'image/png') {\n                        return resolve(blobCanvas.msToBlob());\n                    }\n                }\n                if (!blobCanvas.toBlob) {\n                    return resolve(await dataUrlToBlob(blobCanvas.toDataURL(mimeType, qualityArgument)));\n                }\n                blobCanvas.toBlob((blob) => {\n                    if (!blob) {\n                        return reject(new Error('Unable to retrieve canvas blob'));\n                    }\n                    resolve(blob);\n                }, mimeType, qualityArgument);\n            });\n        }\n        finally {\n            this[$updateSize]({ width, height });\n        }\n    }\n    get [$ariaLabel]() {\n        return (this.alt == null || this.alt === 'null') ? this[$defaultAriaLabel] :\n            this.alt;\n    }\n    // NOTE(cdata): Although this may seem extremely redundant, it is required in\n    // order to support overloading when TypeScript is compiled to ES5\n    // @see https://github.com/Polymer/lit-element/pull/745\n    // @see https://github.com/microsoft/TypeScript/issues/338\n    [$getLoaded]() {\n        return this[$loaded];\n    }\n    // @see [$getLoaded]\n    [$getModelIsVisible]() {\n        return this.loaded && this[$isElementInViewport];\n    }\n    [$hasTransitioned]() {\n        return this.modelIsVisible;\n    }\n    [$shouldAttemptPreload]() {\n        return !!this.src && this[$isElementInViewport];\n    }\n    [$sceneIsReady]() {\n        return this[$loaded];\n    }\n    /**\n     * Called on initialization and when the resize observer fires.\n     */\n    [$updateSize]({ width, height }) {\n        this[$container].style.width = `${width}px`;\n        this[$container].style.height = `${height}px`;\n        this[$onResize]({ width: parseFloat(width), height: parseFloat(height) });\n    }\n    [$tick](_time, _delta) {\n    }\n    [$markLoaded]() {\n        if (this[$loaded]) {\n            return;\n        }\n        this[$loaded] = true;\n        this[$loadedTime] = performance.now();\n    }\n    [$needsRender]() {\n        this[$scene].isDirty = true;\n    }\n    [$onModelLoad]() {\n    }\n    [$onResize](e) {\n        this[$scene].setSize(e.width, e.height);\n    }\n    /**\n     * Parses the element for an appropriate source URL and\n     * sets the views to use the new model based off of the `preload`\n     * attribute.\n     */\n    async [(_k = $onContextLost, $updateSource)]() {\n        if (this.loaded || !this[$shouldAttemptPreload]()) {\n            return;\n        }\n        const updateSourceProgress = this[$progressTracker].beginActivity();\n        const source = this.src;\n        try {\n            await this[$scene].setSource(source, (progress) => updateSourceProgress(progress * 0.8));\n            const detail = { url: source };\n            this.dispatchEvent(new CustomEvent('preload', { detail }));\n        }\n        catch (error) {\n            this.dispatchEvent(new CustomEvent('error', { detail: error }));\n        }\n        finally {\n            updateSourceProgress(0.9);\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    updateSourceProgress(1.0);\n                });\n            });\n        }\n    }\n}\n__decorate$7([\n    property({ type: String })\n], ModelViewerElementBase.prototype, \"alt\", void 0);\n__decorate$7([\n    property({ type: String })\n], ModelViewerElementBase.prototype, \"src\", void 0);\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst MILLISECONDS_PER_SECOND = 1000.0;\nconst $changeAnimation = Symbol('changeAnimation');\nconst $paused = Symbol('paused');\nconst AnimationMixin = (ModelViewerElement) => {\n    var _a;\n    class AnimationModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.autoplay = false;\n            this.animationName = undefined;\n            this.animationCrossfadeDuration = 300;\n            this[_a] = true;\n        }\n        /**\n         * Returns an array\n         */\n        get availableAnimations() {\n            if (this.loaded) {\n                return this[$scene].animationNames;\n            }\n            return [];\n        }\n        get duration() {\n            return this[$scene].duration;\n        }\n        get paused() {\n            return this[$paused];\n        }\n        get currentTime() {\n            return this[$scene].animationTime;\n        }\n        set currentTime(value) {\n            this[$scene].animationTime = value;\n            this[$renderer].threeRenderer.shadowMap.needsUpdate = true;\n            this[$needsRender]();\n        }\n        pause() {\n            if (this[$paused]) {\n                return;\n            }\n            this[$paused] = true;\n            this[$renderer].threeRenderer.shadowMap.autoUpdate = false;\n            this.dispatchEvent(new CustomEvent('pause'));\n        }\n        play() {\n            if (this[$paused] && this.availableAnimations.length > 0) {\n                this[$paused] = false;\n                this[$renderer].threeRenderer.shadowMap.autoUpdate = true;\n                if (!this[$scene].hasActiveAnimation) {\n                    this[$changeAnimation]();\n                }\n                this.dispatchEvent(new CustomEvent('play'));\n            }\n        }\n        [(_a = $paused, $onModelLoad)]() {\n            super[$onModelLoad]();\n            this[$paused] = true;\n            if (this.autoplay) {\n                this[$changeAnimation]();\n                this.play();\n            }\n        }\n        [$tick](_time, delta) {\n            super[$tick](_time, delta);\n            if (this[$paused] || !this[$hasTransitioned]()) {\n                return;\n            }\n            this[$scene].updateAnimation(delta / MILLISECONDS_PER_SECOND);\n            this[$needsRender]();\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('autoplay') && this.autoplay) {\n                this.play();\n            }\n            if (changedProperties.has('animationName')) {\n                this[$changeAnimation]();\n            }\n        }\n        async [$updateSource]() {\n            // If we are loading a new model, we need to stop the animation of\n            // the current one (if any is playing). Otherwise, we might lose\n            // the reference to the scene root and running actions start to\n            // throw exceptions and/or behave in unexpected ways:\n            this[$scene].stopAnimation();\n            return super[$updateSource]();\n        }\n        [$changeAnimation]() {\n            this[$scene].playAnimation(this.animationName, this.animationCrossfadeDuration / MILLISECONDS_PER_SECOND);\n            // If we are currently paused, we need to force a render so that\n            // the scene updates to the first frame of the new animation\n            if (this[$paused]) {\n                this[$scene].updateAnimation(0);\n                this[$needsRender]();\n            }\n        }\n    }\n    __decorate$6([\n        property({ type: Boolean })\n    ], AnimationModelViewerElement.prototype, \"autoplay\", void 0);\n    __decorate$6([\n        property({ type: String, attribute: 'animation-name' })\n    ], AnimationModelViewerElement.prototype, \"animationName\", void 0);\n    __decorate$6([\n        property({ type: Number, attribute: 'animation-crossfade-duration' })\n    ], AnimationModelViewerElement.prototype, \"animationCrossfadeDuration\", void 0);\n    return AnimationModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $annotationRenderer = Symbol('annotationRenderer');\nconst $hotspotMap = Symbol('hotspotMap');\nconst $mutationCallback = Symbol('mutationCallback');\nconst $observer = Symbol('observer');\nconst $addHotspot = Symbol('addHotspot');\nconst $removeHotspot = Symbol('removeHotspot');\n// Used internally by positionAndNormalFromPoint()\nconst pixelPosition = new Vector2();\nconst worldToModel = new Matrix4();\nconst worldToModelNormal = new Matrix3();\n/**\n * AnnotationMixin implements a declarative API to add hotspots and annotations.\n * Child elements of the <model-viewer> element that have a slot name that\n * begins with \"hotspot\" and data-position and data-normal attributes in\n * the format of the camera-target attribute will be added to the scene and\n * track the specified model coordinates.\n */\nconst AnnotationMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d;\n    class AnnotationModelViewerElement extends ModelViewerElement {\n        constructor(...args) {\n            super(...args);\n            this[_a] = new CSS2DRenderer();\n            this[_b] = new Map();\n            this[_c] = (mutations) => {\n                mutations.forEach((mutation) => {\n                    // NOTE: Be wary that in ShadyDOM cases, the MutationRecord\n                    // only has addedNodes and removedNodes (and no other details).\n                    if (!(mutation instanceof MutationRecord) ||\n                        mutation.type === 'childList') {\n                        mutation.addedNodes.forEach((node) => {\n                            this[$addHotspot](node);\n                        });\n                        mutation.removedNodes.forEach((node) => {\n                            this[$removeHotspot](node);\n                        });\n                        this[$needsRender]();\n                    }\n                });\n            };\n            this[_d] = new MutationObserver(this[$mutationCallback]);\n            const { domElement } = this[$annotationRenderer];\n            const { style } = domElement;\n            style.display = 'none';\n            style.pointerEvents = 'none';\n            style.position = 'absolute';\n            style.top = '0';\n            this.shadowRoot.querySelector('.default').appendChild(domElement);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            for (let i = 0; i < this.children.length; ++i) {\n                this[$addHotspot](this.children[i]);\n            }\n            const { ShadyDOM } = self;\n            if (ShadyDOM == null) {\n                this[$observer].observe(this, { childList: true });\n            }\n            else {\n                this[$observer] =\n                    ShadyDOM.observeChildren(this, this[$mutationCallback]);\n            }\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            const { ShadyDOM } = self;\n            if (ShadyDOM == null) {\n                this[$observer].disconnect();\n            }\n            else {\n                ShadyDOM.unobserveChildren(this[$observer]);\n            }\n        }\n        /**\n         * Since the data-position and data-normal attributes are not observed, use\n         * this method to move a hotspot. Keep in mind that all hotspots with the\n         * same slot name use a single location and the first definition takes\n         * precedence, until updated with this method.\n         */\n        updateHotspot(config) {\n            const hotspot = this[$hotspotMap].get(config.name);\n            if (hotspot == null) {\n                return;\n            }\n            hotspot.updatePosition(config.position);\n            hotspot.updateNormal(config.normal);\n            this[$needsRender]();\n        }\n        /**\n         * This method returns the model position and normal of the point on the\n         * mesh corresponding to the input pixel coordinates given relative to the\n         * model-viewer element. The position and normal are returned as strings in\n         * the format suitable for putting in a hotspot's data-position and\n         * data-normal attributes. If the mesh is not hit, the result is null.\n         */\n        positionAndNormalFromPoint(pixelX, pixelY) {\n            const scene = this[$scene];\n            const { width, height, target } = scene;\n            pixelPosition.set(pixelX / width, pixelY / height)\n                .multiplyScalar(2)\n                .subScalar(1);\n            pixelPosition.y *= -1;\n            const hit = scene.positionAndNormalFromPoint(pixelPosition);\n            if (hit == null) {\n                return null;\n            }\n            worldToModel.copy(target.matrixWorld).invert();\n            const position = toVector3D(hit.position.applyMatrix4(worldToModel));\n            worldToModelNormal.getNormalMatrix(worldToModel);\n            const normal = toVector3D(hit.normal.applyNormalMatrix(worldToModelNormal));\n            return { position: position, normal: normal };\n        }\n        [(_a = $annotationRenderer, _b = $hotspotMap, _c = $mutationCallback, _d = $observer, $tick)](time, delta) {\n            super[$tick](time, delta);\n            const scene = this[$scene];\n            const camera = scene.getCamera();\n            if (scene.isDirty) {\n                scene.updateHotspots(camera.position);\n                this[$annotationRenderer].domElement.style.display = '';\n                this[$annotationRenderer].render(scene, camera);\n            }\n        }\n        [$onResize](e) {\n            super[$onResize](e);\n            this[$annotationRenderer].setSize(e.width, e.height);\n        }\n        [$addHotspot](node) {\n            if (!(node instanceof HTMLElement &&\n                node.slot.indexOf('hotspot') === 0)) {\n                return;\n            }\n            let hotspot = this[$hotspotMap].get(node.slot);\n            if (hotspot != null) {\n                hotspot.increment();\n            }\n            else {\n                hotspot = new Hotspot({\n                    name: node.slot,\n                    position: node.dataset.position,\n                    normal: node.dataset.normal,\n                });\n                this[$hotspotMap].set(node.slot, hotspot);\n                this[$scene].addHotspot(hotspot);\n                // This happens automatically in render(), but we do it early so that\n                // the slots appear in the shadow DOM and the elements get attached,\n                // allowing us to dispatch events on them.\n                this[$annotationRenderer].domElement.appendChild(hotspot.element);\n            }\n            this[$scene].isDirty = true;\n        }\n        [$removeHotspot](node) {\n            if (!(node instanceof HTMLElement)) {\n                return;\n            }\n            const hotspot = this[$hotspotMap].get(node.slot);\n            if (!hotspot) {\n                return;\n            }\n            if (hotspot.decrement()) {\n                this[$scene].removeHotspot(hotspot);\n                this[$hotspotMap].delete(node.slot);\n            }\n            this[$scene].isDirty = true;\n        }\n    }\n    return AnnotationModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * For our purposes, an enumeration is a fixed set of CSS-expression-compatible\n * names. When serialized, a selected subset of the members may be specified as\n * whitespace-separated strings. An enumeration deserializer is a function that\n * parses a serialized subset of an enumeration and returns any members that are\n * found as a Set.\n *\n * The following example will produce a deserializer for the days of the\n * week:\n *\n * const deserializeDaysOfTheWeek = enumerationDeserializer([\n *   'Monday',\n *   'Tuesday',\n *   'Wednesday',\n *   'Thursday',\n *   'Friday',\n *   'Saturday',\n *   'Sunday'\n * ]);\n */\nconst enumerationDeserializer = (allowedNames) => (valueString) => {\n    try {\n        const expressions = parseExpressions(valueString);\n        const names = (expressions.length ? expressions[0].terms : [])\n            .filter((valueNode) => valueNode && valueNode.type === 'ident')\n            .map(valueNode => valueNode.value)\n            .filter(name => allowedNames.indexOf(name) > -1);\n        // NOTE(cdata): IE11 does not support constructing a Set directly from\n        // an iterable, so we need to manually add all the items:\n        const result = new Set();\n        for (const name of names) {\n            result.add(name);\n        }\n        return result;\n    }\n    catch (_error) {\n    }\n    return new Set();\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nlet isWebXRBlocked = false;\nlet isSceneViewerBlocked = false;\nconst noArViewerSigil = '#model-viewer-no-ar-fallback';\nconst deserializeARModes = enumerationDeserializer(['quick-look', 'scene-viewer', 'webxr', 'none']);\nconst DEFAULT_AR_MODES = 'webxr scene-viewer quick-look';\nconst ARMode = {\n    QUICK_LOOK: 'quick-look',\n    SCENE_VIEWER: 'scene-viewer',\n    WEBXR: 'webxr',\n    NONE: 'none'\n};\nconst $arButtonContainer = Symbol('arButtonContainer');\nconst $enterARWithWebXR = Symbol('enterARWithWebXR');\nconst $openSceneViewer = Symbol('openSceneViewer');\nconst $openIOSARQuickLook = Symbol('openIOSARQuickLook');\nconst $canActivateAR = Symbol('canActivateAR');\nconst $arMode = Symbol('arMode');\nconst $arModes = Symbol('arModes');\nconst $arAnchor = Symbol('arAnchor');\nconst $preload = Symbol('preload');\nconst $onARButtonContainerClick = Symbol('onARButtonContainerClick');\nconst $onARStatus = Symbol('onARStatus');\nconst $onARTap = Symbol('onARTap');\nconst $selectARMode = Symbol('selectARMode');\nconst ARMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    class ARModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.ar = false;\n            this.arScale = 'auto';\n            this.arPlacement = 'floor';\n            this.arModes = DEFAULT_AR_MODES;\n            this.iosSrc = null;\n            this[_a] = false;\n            // TODO: Add this to the shadow root as part of this mixin's\n            // implementation:\n            this[_b] = this.shadowRoot.querySelector('.ar-button');\n            this[_c] = document.createElement('a');\n            this[_d] = new Set();\n            this[_e] = ARMode.NONE;\n            this[_f] = false;\n            this[_g] = (event) => {\n                event.preventDefault();\n                this.activateAR();\n            };\n            this[_h] = ({ status }) => {\n                if (status === ARStatus.NOT_PRESENTING ||\n                    this[$renderer].arRenderer.presentedScene === this[$scene]) {\n                    this.setAttribute('ar-status', status);\n                    this.dispatchEvent(new CustomEvent('ar-status', { detail: { status } }));\n                }\n            };\n            this[_j] = (event) => {\n                if (event.data == '_apple_ar_quicklook_button_tapped') {\n                    this.dispatchEvent(new CustomEvent('quick-look-button-tapped'));\n                }\n            };\n        }\n        get canActivateAR() {\n            return this[$arMode] !== ARMode.NONE;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$renderer].arRenderer.addEventListener('status', this[$onARStatus]);\n            this.setAttribute('ar-status', ARStatus.NOT_PRESENTING);\n            this[$arAnchor].addEventListener('message', this[$onARTap]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$renderer].arRenderer.removeEventListener('status', this[$onARStatus]);\n            this[$arAnchor].removeEventListener('message', this[$onARTap]);\n        }\n        async update(changedProperties) {\n            super.update(changedProperties);\n            if (changedProperties.has('arScale')) {\n                this[$scene].canScale = this.arScale !== 'fixed';\n            }\n            if (changedProperties.has('arPlacement')) {\n                this[$scene].setShadowIntensity(this[$scene].shadowIntensity);\n                this[$needsRender]();\n            }\n            if (!changedProperties.has('ar') && !changedProperties.has('arModes') &&\n                !changedProperties.has('iosSrc')) {\n                return;\n            }\n            if (changedProperties.has('arModes')) {\n                this[$arModes] = deserializeARModes(this.arModes);\n            }\n            this[$selectARMode]();\n        }\n        /**\n         * Activates AR. Note that for any mode that is not WebXR-based, this\n         * method most likely has to be called synchronous from a user\n         * interaction handler. Otherwise, attempts to activate modes that\n         * require user interaction will most likely be ignored.\n         */\n        async activateAR() {\n            switch (this[$arMode]) {\n                case ARMode.QUICK_LOOK:\n                    this[$openIOSARQuickLook]();\n                    break;\n                case ARMode.WEBXR:\n                    await this[$enterARWithWebXR]();\n                    break;\n                case ARMode.SCENE_VIEWER:\n                    this[$openSceneViewer]();\n                    break;\n                default:\n                    console.warn('No AR Mode can be activated. This is probably due to missing \\\nconfiguration or device capabilities');\n                    break;\n            }\n        }\n        async [(_a = $canActivateAR, _b = $arButtonContainer, _c = $arAnchor, _d = $arModes, _e = $arMode, _f = $preload, _g = $onARButtonContainerClick, _h = $onARStatus, _j = $onARTap, $selectARMode)]() {\n            this[$arMode] = ARMode.NONE;\n            if (this.ar) {\n                const arModes = [];\n                this[$arModes].forEach((value) => {\n                    arModes.push(value);\n                });\n                for (const value of arModes) {\n                    if (value === 'webxr' && IS_WEBXR_AR_CANDIDATE && !isWebXRBlocked &&\n                        await this[$renderer].arRenderer.supportsPresentation()) {\n                        this[$arMode] = ARMode.WEBXR;\n                        break;\n                    }\n                    else if (value === 'scene-viewer' && IS_SCENEVIEWER_CANDIDATE &&\n                        !isSceneViewerBlocked) {\n                        this[$arMode] = ARMode.SCENE_VIEWER;\n                        break;\n                    }\n                    else if (value === 'quick-look' && !!this.iosSrc &&\n                        IS_AR_QUICKLOOK_CANDIDATE) {\n                        this[$arMode] = ARMode.QUICK_LOOK;\n                        break;\n                    }\n                }\n            }\n            if (this.canActivateAR) {\n                this[$arButtonContainer].classList.add('enabled');\n                this[$arButtonContainer].addEventListener('click', this[$onARButtonContainerClick]);\n            }\n            else if (this[$arButtonContainer].classList.contains('enabled')) {\n                this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                this[$arButtonContainer].classList.remove('enabled');\n                // If AR went from working to not, notify the element.\n                const status = ARStatus.FAILED;\n                this.setAttribute('ar-status', status);\n                this.dispatchEvent(new CustomEvent('ar-status', { detail: { status } }));\n            }\n        }\n        async [$enterARWithWebXR]() {\n            console.log('Attempting to present in AR...');\n            if (!this[$loaded]) {\n                this[$preload] = true;\n                this[$updateSource]();\n                await waitForEvent(this, 'load');\n                this[$preload] = false;\n            }\n            try {\n                this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                const { arRenderer } = this[$renderer];\n                arRenderer.placeOnWall = this.arPlacement === 'wall';\n                await arRenderer.present(this[$scene]);\n            }\n            catch (error) {\n                console.warn('Error while trying to present to AR');\n                console.error(error);\n                await this[$renderer].arRenderer.stopPresenting();\n                isWebXRBlocked = true;\n                await this[$selectARMode]();\n                this.activateAR();\n            }\n            finally {\n                this[$selectARMode]();\n            }\n        }\n        [$shouldAttemptPreload]() {\n            return super[$shouldAttemptPreload]() || this[$preload];\n        }\n        /**\n         * Takes a URL and a title string, and attempts to launch Scene Viewer on\n         * the current device.\n         */\n        [$openSceneViewer]() {\n            const location = self.location.toString();\n            const locationUrl = new URL(location);\n            const modelUrl = new URL(this.src, location);\n            const params = new URLSearchParams(modelUrl.search);\n            locationUrl.hash = noArViewerSigil;\n            // modelUrl can contain title/link/sound etc.\n            params.set('mode', 'ar_only');\n            if (!params.has('disable_occlusion')) {\n                params.set('disable_occlusion', 'true');\n            }\n            if (this.arScale === 'fixed') {\n                params.set('resizable', 'false');\n            }\n            if (this.arPlacement === 'wall') {\n                params.set('enable_vertical_placement', 'true');\n            }\n            if (params.has('sound')) {\n                const soundUrl = new URL(params.get('sound'), location);\n                params.set('sound', soundUrl.toString());\n            }\n            if (params.has('link')) {\n                const linkUrl = new URL(params.get('link'), location);\n                params.set('link', linkUrl.toString());\n            }\n            const intent = `intent://arvr.google.com/scene-viewer/1.0?${params\n                .toString() + '&file=' + encodeURIComponent(modelUrl.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(locationUrl.toString())};end;`;\n            const undoHashChange = () => {\n                if (self.location.hash === noArViewerSigil) {\n                    isSceneViewerBlocked = true;\n                    // The new history will be the current URL with a new hash.\n                    // Go back one step so that we reset to the expected URL.\n                    // NOTE(cdata): this should not invoke any browser-level navigation\n                    // because hash-only changes modify the URL in-place without\n                    // navigating:\n                    self.history.back();\n                    this[$selectARMode]();\n                    // Would be nice to activateAR() here, but webXR fails due to not\n                    // seeing a user activation.\n                }\n            };\n            self.addEventListener('hashchange', undoHashChange, { once: true });\n            this[$arAnchor].setAttribute('href', intent);\n            this[$arAnchor].click();\n        }\n        /**\n         * Takes a URL to a USDZ file and sets the appropriate fields so that Safari\n         * iOS can intent to their AR Quick Look.\n         */\n        [$openIOSARQuickLook]() {\n            const modelUrl = new URL(this.iosSrc, self.location.toString());\n            if (this.arScale === 'fixed') {\n                if (modelUrl.hash) {\n                    modelUrl.hash += '&';\n                }\n                modelUrl.hash += 'allowsContentScaling=0';\n            }\n            const anchor = this[$arAnchor];\n            anchor.setAttribute('rel', 'ar');\n            const img = document.createElement('img');\n            anchor.appendChild(img);\n            anchor.setAttribute('href', modelUrl.toString());\n            anchor.click();\n            anchor.removeChild(img);\n        }\n    }\n    __decorate$5([\n        property({ type: Boolean, attribute: 'ar' })\n    ], ARModelViewerElement.prototype, \"ar\", void 0);\n    __decorate$5([\n        property({ type: String, attribute: 'ar-scale' })\n    ], ARModelViewerElement.prototype, \"arScale\", void 0);\n    __decorate$5([\n        property({ type: String, attribute: 'ar-placement' })\n    ], ARModelViewerElement.prototype, \"arPlacement\", void 0);\n    __decorate$5([\n        property({ type: String, attribute: 'ar-modes' })\n    ], ARModelViewerElement.prototype, \"arModes\", void 0);\n    __decorate$5([\n        property({ type: String, attribute: 'ios-src' })\n    ], ARModelViewerElement.prototype, \"iosSrc\", void 0);\n    return ARModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$6, _b$5, _c$2;\nconst $evaluate = Symbol('evaluate');\nconst $lastValue = Symbol('lastValue');\n/**\n * An Evaluator is used to derive a computed style from part (or all) of a CSS\n * expression AST. This construct is particularly useful for complex ASTs\n * containing function calls such as calc, var and env. Such styles could be\n * costly to re-evaluate on every frame (and in some cases we may try to do\n * that). The Evaluator construct allows us to mark sub-trees of the AST as\n * constant, so that only the dynamic parts are re-evaluated. It also separates\n * one-time AST preparation work from work that necessarily has to happen upon\n * each evaluation.\n */\nclass Evaluator {\n    constructor() {\n        this[_a$6] = null;\n    }\n    /**\n     * An Evaluatable is a NumberNode or an Evaluator that evaluates a NumberNode\n     * as the result of invoking its evaluate method. This is mainly used to\n     * ensure that CSS function nodes are cast to the corresponding Evaluators\n     * that will resolve the result of the function, but is also used to ensure\n     * that a percentage nested at arbitrary depth in the expression will always\n     * be evaluated against the correct basis.\n     */\n    static evaluatableFor(node, basis = ZERO) {\n        if (node instanceof Evaluator) {\n            return node;\n        }\n        if (node.type === 'number') {\n            if (node.unit === '%') {\n                return new PercentageEvaluator(node, basis);\n            }\n            return node;\n        }\n        switch (node.name.value) {\n            case 'calc':\n                return new CalcEvaluator(node, basis);\n            case 'env':\n                return new EnvEvaluator(node);\n        }\n        return ZERO;\n    }\n    /**\n     * If the input is an Evaluator, returns the result of evaluating it.\n     * Otherwise, returns the input.\n     *\n     * This is a helper to aide in resolving a NumberNode without conditionally\n     * checking if the Evaluatable is an Evaluator everywhere.\n     */\n    static evaluate(evaluatable) {\n        if (evaluatable instanceof Evaluator) {\n            return evaluatable.evaluate();\n        }\n        return evaluatable;\n    }\n    /**\n     * If the input is an Evaluator, returns the value of its isConstant property.\n     * Returns true for all other input values.\n     */\n    static isConstant(evaluatable) {\n        if (evaluatable instanceof Evaluator) {\n            return evaluatable.isConstant;\n        }\n        return true;\n    }\n    /**\n     * This method applies a set of structured intrinsic metadata to an evaluated\n     * result from a parsed CSS-like string of expressions. Intrinsics provide\n     * sufficient metadata (e.g., basis values, analogs for keywords) such that\n     * omitted values in the input string can be backfilled, and keywords can be\n     * converted to concrete numbers.\n     *\n     * The result of applying intrinsics is a tuple of NumberNode values whose\n     * units match the units used by the basis of the intrinsics.\n     *\n     * The following is a high-level description of how intrinsics are applied:\n     *\n     *  1. Determine the value of 'auto' for the current term\n     *  2. If there is no corresponding input value for this term, substitute the\n     *     'auto' value.\n     *  3. If the term is an IdentNode, treat it as a keyword and perform the\n     *     appropriate substitution.\n     *  4. If the term is still null, fallback to the 'auto' value\n     *  5. If the term is a percentage, apply it to the basis and return that\n     *     value\n     *  6. Normalize the unit of the term\n     *  7. If the term's unit does not match the basis unit, return the basis\n     *     value\n     *  8. Return the term as is\n     */\n    static applyIntrinsics(evaluated, intrinsics) {\n        const { basis, keywords } = intrinsics;\n        const { auto } = keywords;\n        return basis.map((basisNode, index) => {\n            // Use an auto value if we have it, otherwise the auto value is the basis:\n            const autoSubstituteNode = auto[index] == null ? basisNode : auto[index];\n            // If the evaluated nodes do not have a node at the current\n            // index, fallback to the \"auto\" substitute right away:\n            let evaluatedNode = evaluated[index] ? evaluated[index] : autoSubstituteNode;\n            // Any ident node is considered a keyword:\n            if (evaluatedNode.type === 'ident') {\n                const keyword = evaluatedNode.value;\n                // Substitute any keywords for concrete values first:\n                if (keyword in keywords) {\n                    evaluatedNode = keywords[keyword][index];\n                }\n            }\n            // If we don't have a NumberNode at this point, fall back to whatever\n            // is specified for auto:\n            if (evaluatedNode == null || evaluatedNode.type === 'ident') {\n                evaluatedNode = autoSubstituteNode;\n            }\n            // For percentages, we always apply the percentage to the basis value:\n            if (evaluatedNode.unit === '%') {\n                return numberNode(evaluatedNode.number / 100 * basisNode.number, basisNode.unit);\n            }\n            // Otherwise, normalize whatever we have:\n            evaluatedNode = normalizeUnit(evaluatedNode, basisNode);\n            // If the normalized units do not match, return the basis as a fallback:\n            if (evaluatedNode.unit !== basisNode.unit) {\n                return basisNode;\n            }\n            // Finally, return the evaluated node with intrinsics applied:\n            return evaluatedNode;\n        });\n    }\n    /**\n     * If true, the Evaluator will only evaluate its AST one time. If false, the\n     * Evaluator will re-evaluate the AST each time that the public evaluate\n     * method is invoked.\n     */\n    get isConstant() {\n        return false;\n    }\n    /**\n     * Evaluate the Evaluator and return the result. If the Evaluator is constant,\n     * the corresponding AST will only be evaluated once, and the result of\n     * evaluating it the first time will be returned on all subsequent\n     * evaluations.\n     */\n    evaluate() {\n        if (!this.isConstant || this[$lastValue] == null) {\n            this[$lastValue] = this[$evaluate]();\n        }\n        return this[$lastValue];\n    }\n}\n_a$6 = $lastValue;\nconst $percentage = Symbol('percentage');\nconst $basis = Symbol('basis');\n/**\n * A PercentageEvaluator scales a given basis value by a given percentage value.\n * The evaluated result is always considered to be constant.\n */\nclass PercentageEvaluator extends Evaluator {\n    constructor(percentage, basis) {\n        super();\n        this[$percentage] = percentage;\n        this[$basis] = basis;\n    }\n    get isConstant() {\n        return true;\n    }\n    [$evaluate]() {\n        return numberNode(this[$percentage].number / 100 * this[$basis].number, this[$basis].unit);\n    }\n}\nconst $identNode = Symbol('identNode');\n/**\n * Evaluator for CSS-like env() functions. Currently, only one environment\n * variable is accepted as an argument for such functions: window-scroll-y.\n *\n * The env() Evaluator is explicitly dynamic because it always refers to\n * external state that changes as the user scrolls, so it should always be\n * re-evaluated to ensure we get the most recent value.\n *\n * Some important notes about this feature include:\n *\n *  - There is no such thing as a \"window-scroll-y\" CSS environment variable in\n *    any stable browser at the time that this comment is being written.\n *  - The actual CSS env() function accepts a second argument as a fallback for\n *    the case that the specified first argument isn't set; our syntax does not\n *    support this second argument.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/env\n */\nclass EnvEvaluator extends Evaluator {\n    constructor(envFunction) {\n        super();\n        this[_b$5] = null;\n        const identNode = envFunction.arguments.length ? envFunction.arguments[0].terms[0] : null;\n        if (identNode != null && identNode.type === 'ident') {\n            this[$identNode] = identNode;\n        }\n    }\n    get isConstant() {\n        return false;\n    }\n    ;\n    [(_b$5 = $identNode, $evaluate)]() {\n        if (this[$identNode] != null) {\n            switch (this[$identNode].value) {\n                case 'window-scroll-y':\n                    const verticalScrollPosition = window.pageYOffset;\n                    const verticalScrollMax = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);\n                    const scrollY = verticalScrollPosition /\n                        (verticalScrollMax - window.innerHeight) ||\n                        0;\n                    return { type: 'number', number: scrollY, unit: null };\n            }\n        }\n        return ZERO;\n    }\n}\nconst IS_MULTIPLICATION_RE = /[\\*\\/]/;\nconst $evaluator = Symbol('evalutor');\n/**\n * Evaluator for CSS-like calc() functions. Our implementation of calc()\n * evaluation currently support nested function calls, an unlimited number of\n * terms, and all four algebraic operators (+, -, * and /).\n *\n * The Evaluator is marked as constant unless the calc expression contains an\n * internal env expression at any depth, in which case it will be marked as\n * dynamic.\n *\n * @see https://www.w3.org/TR/css-values-3/#calc-syntax\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\nclass CalcEvaluator extends Evaluator {\n    constructor(calcFunction, basis = ZERO) {\n        super();\n        this[_c$2] = null;\n        if (calcFunction.arguments.length !== 1) {\n            return;\n        }\n        const terms = calcFunction.arguments[0].terms.slice();\n        const secondOrderTerms = [];\n        while (terms.length) {\n            const term = terms.shift();\n            if (secondOrderTerms.length > 0) {\n                const previousTerm = secondOrderTerms[secondOrderTerms.length - 1];\n                if (previousTerm.type === 'operator' &&\n                    IS_MULTIPLICATION_RE.test(previousTerm.value)) {\n                    const operator = secondOrderTerms.pop();\n                    const leftValue = secondOrderTerms.pop();\n                    if (leftValue == null) {\n                        return;\n                    }\n                    secondOrderTerms.push(new OperatorEvaluator(operator, Evaluator.evaluatableFor(leftValue, basis), Evaluator.evaluatableFor(term, basis)));\n                    continue;\n                }\n            }\n            secondOrderTerms.push(term.type === 'operator' ? term :\n                Evaluator.evaluatableFor(term, basis));\n        }\n        while (secondOrderTerms.length > 2) {\n            const [left, operator, right] = secondOrderTerms.splice(0, 3);\n            if (operator.type !== 'operator') {\n                return;\n            }\n            secondOrderTerms.unshift(new OperatorEvaluator(operator, Evaluator.evaluatableFor(left, basis), Evaluator.evaluatableFor(right, basis)));\n        }\n        // There should only be one combined evaluator at this point:\n        if (secondOrderTerms.length === 1) {\n            this[$evaluator] = secondOrderTerms[0];\n        }\n    }\n    get isConstant() {\n        return this[$evaluator] == null || Evaluator.isConstant(this[$evaluator]);\n    }\n    [(_c$2 = $evaluator, $evaluate)]() {\n        return this[$evaluator] != null ? Evaluator.evaluate(this[$evaluator]) :\n            ZERO;\n    }\n}\nconst $operator = Symbol('operator');\nconst $left = Symbol('left');\nconst $right = Symbol('right');\n/**\n * An Evaluator for the operators found inside CSS calc() functions.\n * The evaluator accepts an operator and left/right operands. The operands can\n * be any valid expression term typically allowed inside a CSS calc function.\n *\n * As detail of this implementation, the only supported unit types are angles\n * expressed as radians or degrees, and lengths expressed as meters, centimeters\n * or millimeters.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\nclass OperatorEvaluator extends Evaluator {\n    constructor(operator, left, right) {\n        super();\n        this[$operator] = operator;\n        this[$left] = left;\n        this[$right] = right;\n    }\n    get isConstant() {\n        return Evaluator.isConstant(this[$left]) &&\n            Evaluator.isConstant(this[$right]);\n    }\n    [$evaluate]() {\n        const leftNode = normalizeUnit(Evaluator.evaluate(this[$left]));\n        const rightNode = normalizeUnit(Evaluator.evaluate(this[$right]));\n        const { number: leftValue, unit: leftUnit } = leftNode;\n        const { number: rightValue, unit: rightUnit } = rightNode;\n        // Disallow operations for mismatched normalized units e.g., m and rad:\n        if (rightUnit != null && leftUnit != null && rightUnit != leftUnit) {\n            return ZERO;\n        }\n        // NOTE(cdata): rules for calc type checking are defined here\n        // https://drafts.csswg.org/css-values-3/#calc-type-checking\n        // This is a simplification and may not hold up once we begin to support\n        // additional unit types:\n        const unit = leftUnit || rightUnit;\n        let value;\n        switch (this[$operator].value) {\n            case '+':\n                value = leftValue + rightValue;\n                break;\n            case '-':\n                value = leftValue - rightValue;\n                break;\n            case '/':\n                value = leftValue / rightValue;\n                break;\n            case '*':\n                value = leftValue * rightValue;\n                break;\n            default:\n                return ZERO;\n        }\n        return { type: 'number', number: value, unit };\n    }\n}\nconst $evaluatables = Symbol('evaluatables');\nconst $intrinsics = Symbol('intrinsics');\n/**\n * A VectorEvaluator evaluates a series of numeric terms that usually represent\n * a data structure such as a multi-dimensional vector or a spherical\n *\n * The form of the evaluator's result is determined by the Intrinsics that are\n * given to it when it is constructed. For example, spherical intrinsics would\n * establish two angle terms and a length term, so the result of evaluating the\n * evaluator that is configured with spherical intrinsics is a three element\n * array where the first two elements represent angles in radians and the third\n * element representing a length in meters.\n */\nclass StyleEvaluator extends Evaluator {\n    constructor(expressions, intrinsics) {\n        super();\n        this[$intrinsics] = intrinsics;\n        const firstExpression = expressions[0];\n        const terms = firstExpression != null ? firstExpression.terms : [];\n        this[$evaluatables] =\n            intrinsics.basis.map((basisNode, index) => {\n                const term = terms[index];\n                if (term == null) {\n                    return { type: 'ident', value: 'auto' };\n                }\n                if (term.type === 'ident') {\n                    return term;\n                }\n                return Evaluator.evaluatableFor(term, basisNode);\n            });\n    }\n    get isConstant() {\n        for (const evaluatable of this[$evaluatables]) {\n            if (!Evaluator.isConstant(evaluatable)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    [$evaluate]() {\n        const evaluated = this[$evaluatables].map(evaluatable => Evaluator.evaluate(evaluatable));\n        return Evaluator.applyIntrinsics(evaluated, this[$intrinsics])\n            .map(numberNode => numberNode.number);\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$5, _b$4, _c$1, _d;\nconst $instances = Symbol('instances');\nconst $activateListener = Symbol('activateListener');\nconst $deactivateListener = Symbol('deactivateListener');\nconst $notifyInstances = Symbol('notifyInstances');\nconst $notify = Symbol('notify');\nconst $scrollCallback = Symbol('callback');\n/**\n * This internal helper is intended to work as a reference-counting manager of\n * scroll event listeners. Only one scroll listener is ever registered for all\n * instances of the class, and when the last ScrollObserver \"disconnects\", that\n * event listener is removed. This spares us from thrashing\n * the {add,remove}EventListener API (the binding cost of these methods has been\n * known to show up in performance anlyses) as well as potential memory leaks.\n */\nclass ScrollObserver {\n    constructor(callback) {\n        this[$scrollCallback] = callback;\n    }\n    static [$notifyInstances]() {\n        for (const instance of ScrollObserver[$instances]) {\n            instance[$notify]();\n        }\n    }\n    static [(_a$5 = $instances, $activateListener)]() {\n        window.addEventListener('scroll', this[$notifyInstances], { passive: true });\n    }\n    static [$deactivateListener]() {\n        window.removeEventListener('scroll', this[$notifyInstances]);\n    }\n    /**\n     * Listen for scroll events. The configured callback (passed to the\n     * constructor) will be invoked for subsequent global scroll events.\n     */\n    observe() {\n        if (ScrollObserver[$instances].size === 0) {\n            ScrollObserver[$activateListener]();\n        }\n        ScrollObserver[$instances].add(this);\n    }\n    /**\n     * Stop listening for scroll events.\n     */\n    disconnect() {\n        ScrollObserver[$instances].delete(this);\n        if (ScrollObserver[$instances].size === 0) {\n            ScrollObserver[$deactivateListener]();\n        }\n    }\n    [$notify]() {\n        this[$scrollCallback]();\n    }\n    ;\n}\nScrollObserver[_a$5] = new Set();\nconst $computeStyleCallback = Symbol('computeStyleCallback');\nconst $astWalker = Symbol('astWalker');\nconst $dependencies = Symbol('dependencies');\nconst $onScroll = Symbol('onScroll');\n/**\n * The StyleEffector is configured with a callback that will be invoked at the\n * optimal time that some array of CSS expression ASTs ought to be evaluated.\n *\n * For example, our CSS-like expression syntax supports usage of the env()\n * function to incorporate the current top-level scroll position into a CSS\n * expression: env(window-scroll-y).\n *\n * This \"environment variable\" will change dynamically as the user scrolls the\n * page. If an AST contains such a usage of env(), we would have to evaluate the\n * AST on every frame in order to be sure that the computed style stays up to\n * date.\n *\n * The StyleEffector spares us from evaluating the expressions on every frame by\n * correlating specific parts of an AST with observers of the external effects\n * that they refer to (if any). So, if the AST contains env(window-scroll-y),\n * the StyleEffector manages the lifetime of a global scroll event listener and\n * notifies the user at the optimal time to evaluate the computed style.\n */\nclass StyleEffector {\n    constructor(callback) {\n        this[_b$4] = {};\n        this[_c$1] = new ASTWalker(['function']);\n        this[_d] = () => {\n            this[$computeStyleCallback]({ relatedState: 'window-scroll' });\n        };\n        this[$computeStyleCallback] = callback;\n    }\n    /**\n     * Sets the expressions that govern when the StyleEffector callback will be\n     * invoked.\n     */\n    observeEffectsFor(ast) {\n        const newDependencies = {};\n        const oldDependencies = this[$dependencies];\n        this[$astWalker].walk(ast, functionNode => {\n            const { name } = functionNode;\n            const firstArgument = functionNode.arguments[0];\n            const firstTerm = firstArgument.terms[0];\n            if (name.value !== 'env' || firstTerm == null ||\n                firstTerm.type !== 'ident') {\n                return;\n            }\n            switch (firstTerm.value) {\n                case 'window-scroll-y':\n                    if (newDependencies['window-scroll'] == null) {\n                        const observer = 'window-scroll' in oldDependencies ?\n                            oldDependencies['window-scroll'] :\n                            new ScrollObserver(this[$onScroll]);\n                        observer.observe();\n                        delete oldDependencies['window-scroll'];\n                        newDependencies['window-scroll'] = observer;\n                    }\n                    break;\n            }\n        });\n        for (const environmentState in oldDependencies) {\n            const observer = oldDependencies[environmentState];\n            observer.disconnect();\n        }\n        this[$dependencies] = newDependencies;\n    }\n    /**\n     * Disposes of the StyleEffector by disconnecting all observers of external\n     * effects.\n     */\n    dispose() {\n        for (const environmentState in this[$dependencies]) {\n            const observer = this[$dependencies][environmentState];\n            observer.disconnect();\n        }\n    }\n}\n_b$4 = $dependencies, _c$1 = $astWalker, _d = $onScroll;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The @style decorator is responsible for coordinating the conversion of a\n * CSS-like string property value into numbers that can be applied to\n * lower-level constructs. It also can optionally manage the lifecycle of a\n * StyleEffector which allows automatic updates for styles that use env() or\n * var() functions.\n *\n * The decorator is configured with Intrinsics and the property key for a\n * method that handles updates. The named update handler is invoked with the\n * result of parsing and evaluating the raw property string value. The format of\n * the evaluated result is derived from the basis of the configured Intrinsics,\n * and is always an array of numbers of fixed length.\n *\n * NOTE: This decorator depends on the property updating mechanism defined by\n * UpdatingElement as exported by the lit-element module. That means it *must*\n * be used in conjunction with the @property decorator, or equivalent\n * JavaScript.\n *\n * Supported configurations are:\n *\n *  - `intrinsics`: An Intrinsics struct that describes how to interpret a\n * serialized style attribute. For more detail on intrinsics see\n * ./styles/evaluators.ts\n *  - `updateHandler`: A string or Symbol that is the key of a method to be\n * invoked with the result of parsing and evaluating a serialized style string.\n *  - `observeEffects`: Optional, if set to true then styles that use env() will\n * cause their update handlers to be invoked every time the corresponding\n * environment variable changes (even if the style attribute itself remains\n * static).\n */\nconst style = (config) => {\n    const observeEffects = config.observeEffects || false;\n    const getIntrinsics = config.intrinsics instanceof Function ?\n        config.intrinsics :\n        (() => config.intrinsics);\n    return (proto, propertyName) => {\n        const originalUpdated = proto.updated;\n        const originalConnectedCallback = proto.connectedCallback;\n        const originalDisconnectedCallback = proto.disconnectedCallback;\n        const $styleEffector = Symbol(`${propertyName}StyleEffector`);\n        const $styleEvaluator = Symbol(`${propertyName}StyleEvaluator`);\n        const $updateEvaluator = Symbol(`${propertyName}UpdateEvaluator`);\n        const $evaluateAndSync = Symbol(`${propertyName}EvaluateAndSync`);\n        Object.defineProperties(proto, {\n            [$styleEffector]: { value: null, writable: true },\n            [$styleEvaluator]: { value: null, writable: true },\n            [$updateEvaluator]: {\n                value: function () {\n                    const ast = parseExpressions(this[propertyName]);\n                    this[$styleEvaluator] =\n                        new StyleEvaluator(ast, getIntrinsics(this));\n                    if (this[$styleEffector] == null && observeEffects) {\n                        this[$styleEffector] =\n                            new StyleEffector(() => this[$evaluateAndSync]());\n                    }\n                    if (this[$styleEffector] != null) {\n                        this[$styleEffector].observeEffectsFor(ast);\n                    }\n                }\n            },\n            [$evaluateAndSync]: {\n                value: function () {\n                    if (this[$styleEvaluator] == null) {\n                        return;\n                    }\n                    const result = this[$styleEvaluator].evaluate();\n                    // @see https://github.com/microsoft/TypeScript/pull/30769\n                    // @see https://github.com/Microsoft/TypeScript/issues/1863\n                    this[config.updateHandler](result);\n                }\n            },\n            updated: {\n                value: function (changedProperties) {\n                    // Always invoke updates to styles first. This gives a class that\n                    // uses this decorator the opportunity to override the effect, or\n                    // respond to it, in its own implementation of `updated`.\n                    if (changedProperties.has(propertyName)) {\n                        this[$updateEvaluator]();\n                        this[$evaluateAndSync]();\n                    }\n                    originalUpdated.call(this, changedProperties);\n                }\n            },\n            connectedCallback: {\n                value: function () {\n                    originalConnectedCallback.call(this);\n                    this.requestUpdate(propertyName, this[propertyName]);\n                }\n            },\n            disconnectedCallback: {\n                value: function () {\n                    originalDisconnectedCallback.call(this);\n                    if (this[$styleEffector] != null) {\n                        this[$styleEffector].dispose();\n                        this[$styleEffector] = null;\n                    }\n                }\n            }\n        });\n    };\n};\n\n/* @license\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_OPTIONS = Object.freeze({\n    minimumRadius: 0,\n    maximumRadius: Infinity,\n    minimumPolarAngle: Math.PI / 8,\n    maximumPolarAngle: Math.PI - Math.PI / 8,\n    minimumAzimuthalAngle: -Infinity,\n    maximumAzimuthalAngle: Infinity,\n    minimumFieldOfView: 10,\n    maximumFieldOfView: 45,\n    interactionPolicy: 'always-allow',\n    touchAction: 'pan-y'\n});\n// Constants\nconst TOUCH_EVENT_RE = /^touch(start|end|move)$/;\nconst KEYBOARD_ORBIT_INCREMENT = Math.PI / 8;\nconst ZOOM_SENSITIVITY = 0.04;\nconst KeyCode = {\n    PAGE_UP: 33,\n    PAGE_DOWN: 34,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40\n};\nconst ChangeSource = {\n    USER_INTERACTION: 'user-interaction',\n    NONE: 'none'\n};\n/**\n * SmoothControls is a Three.js helper for adding delightful pointer and\n * keyboard-based input to a staged Three.js scene. Its API is very similar to\n * OrbitControls, but it offers more opinionated (subjectively more delightful)\n * defaults, easy extensibility and subjectively better out-of-the-box keyboard\n * support.\n *\n * One important change compared to OrbitControls is that the `update` method\n * of SmoothControls must be invoked on every frame, otherwise the controls\n * will not have an effect.\n *\n * Another notable difference compared to OrbitControls is that SmoothControls\n * does not currently support panning (but probably will in a future revision).\n *\n * Like OrbitControls, SmoothControls assumes that the orientation of the camera\n * has been set in terms of position, rotation and scale, so it is important to\n * ensure that the camera's matrixWorld is in sync before using SmoothControls.\n */\nclass SmoothControls extends EventDispatcher {\n    constructor(camera, element) {\n        super();\n        this.camera = camera;\n        this.element = element;\n        this.sensitivity = 1;\n        this._interactionEnabled = false;\n        this._disableZoom = false;\n        this.isUserChange = false;\n        this.isUserPointing = false;\n        // Internal orbital position state\n        this.spherical = new Spherical();\n        this.goalSpherical = new Spherical();\n        this.thetaDamper = new Damper();\n        this.phiDamper = new Damper();\n        this.radiusDamper = new Damper();\n        this.logFov = Math.log(DEFAULT_OPTIONS.maximumFieldOfView);\n        this.goalLogFov = this.logFov;\n        this.fovDamper = new Damper();\n        // Pointer state\n        this.pointerIsDown = false;\n        this.lastPointerPosition = {\n            clientX: 0,\n            clientY: 0,\n        };\n        this.touchMode = 'rotate';\n        this.touchDecided = false;\n        this.onPointerMove = (event) => {\n            if (!this.pointerIsDown || !this.canInteract) {\n                return;\n            }\n            // NOTE(cdata): We test event.type as some browsers do not have a global\n            // TouchEvent contructor.\n            if (TOUCH_EVENT_RE.test(event.type)) {\n                const { touches } = event;\n                switch (this.touchMode) {\n                    case 'zoom':\n                        if (this.lastTouches.length > 1 && touches.length > 1) {\n                            const lastTouchDistance = this.twoTouchDistance(this.lastTouches[0], this.lastTouches[1]);\n                            const touchDistance = this.twoTouchDistance(touches[0], touches[1]);\n                            const deltaZoom = ZOOM_SENSITIVITY * (lastTouchDistance - touchDistance) / 10.0;\n                            this.userAdjustOrbit(0, 0, deltaZoom);\n                        }\n                        break;\n                    case 'rotate':\n                        const { touchAction } = this._options;\n                        if (!this.touchDecided && touchAction !== 'none') {\n                            this.touchDecided = true;\n                            const { clientX, clientY } = touches[0];\n                            const dx = Math.abs(clientX - this.lastPointerPosition.clientX);\n                            const dy = Math.abs(clientY - this.lastPointerPosition.clientY);\n                            // If motion is mostly vertical, assume scrolling is the intent.\n                            if ((touchAction === 'pan-y' && dy > dx) ||\n                                (touchAction === 'pan-x' && dx > dy)) {\n                                this.touchMode = 'scroll';\n                                return;\n                            }\n                        }\n                        this.handleSinglePointerMove(touches[0]);\n                        break;\n                    case 'scroll':\n                        return;\n                }\n                this.lastTouches = touches;\n            }\n            else {\n                this.handleSinglePointerMove(event);\n            }\n            if (event.cancelable) {\n                event.preventDefault();\n            }\n        };\n        this.onPointerDown = (event) => {\n            this.pointerIsDown = true;\n            this.isUserPointing = false;\n            if (TOUCH_EVENT_RE.test(event.type)) {\n                const { touches } = event;\n                this.touchDecided = false;\n                switch (touches.length) {\n                    default:\n                    case 1:\n                        this.touchMode = 'rotate';\n                        this.handleSinglePointerDown(touches[0]);\n                        break;\n                    case 2:\n                        this.touchMode = this._disableZoom ? 'scroll' : 'zoom';\n                        break;\n                }\n                this.lastTouches = touches;\n            }\n            else {\n                this.handleSinglePointerDown(event);\n            }\n        };\n        this.onPointerUp = (_event) => {\n            this.element.style.cursor = 'grab';\n            this.pointerIsDown = false;\n            if (this.isUserPointing) {\n                this.dispatchEvent({ type: 'pointer-change-end', pointer: Object.assign({}, this.lastPointerPosition) });\n            }\n        };\n        this.onWheel = (event) => {\n            if (!this.canInteract) {\n                return;\n            }\n            const deltaZoom = event.deltaY *\n                (event.deltaMode == 1 ? 18 : 1) * ZOOM_SENSITIVITY / 30;\n            this.userAdjustOrbit(0, 0, deltaZoom);\n            if (event.cancelable) {\n                event.preventDefault();\n            }\n        };\n        this.onKeyDown = (event) => {\n            // We track if the key is actually one we respond to, so as not to\n            // accidentally clober unrelated key inputs when the <model-viewer> has\n            // focus.\n            let relevantKey = false;\n            switch (event.keyCode) {\n                case KeyCode.PAGE_UP:\n                    relevantKey = true;\n                    this.userAdjustOrbit(0, 0, ZOOM_SENSITIVITY);\n                    break;\n                case KeyCode.PAGE_DOWN:\n                    relevantKey = true;\n                    this.userAdjustOrbit(0, 0, -1 * ZOOM_SENSITIVITY);\n                    break;\n                case KeyCode.UP:\n                    relevantKey = true;\n                    this.userAdjustOrbit(0, -KEYBOARD_ORBIT_INCREMENT, 0);\n                    break;\n                case KeyCode.DOWN:\n                    relevantKey = true;\n                    this.userAdjustOrbit(0, KEYBOARD_ORBIT_INCREMENT, 0);\n                    break;\n                case KeyCode.LEFT:\n                    relevantKey = true;\n                    this.userAdjustOrbit(-KEYBOARD_ORBIT_INCREMENT, 0, 0);\n                    break;\n                case KeyCode.RIGHT:\n                    relevantKey = true;\n                    this.userAdjustOrbit(KEYBOARD_ORBIT_INCREMENT, 0, 0);\n                    break;\n            }\n            if (relevantKey && event.cancelable) {\n                event.preventDefault();\n            }\n        };\n        this._options = Object.assign({}, DEFAULT_OPTIONS);\n        this.setOrbit(0, Math.PI / 2, 1);\n        this.setFieldOfView(100);\n        this.jumpToGoal();\n    }\n    get interactionEnabled() {\n        return this._interactionEnabled;\n    }\n    enableInteraction() {\n        if (this._interactionEnabled === false) {\n            const { element } = this;\n            element.addEventListener('mousemove', this.onPointerMove);\n            element.addEventListener('mousedown', this.onPointerDown);\n            if (!this._disableZoom) {\n                element.addEventListener('wheel', this.onWheel);\n            }\n            element.addEventListener('keydown', this.onKeyDown);\n            element.addEventListener('touchstart', this.onPointerDown, { passive: true });\n            element.addEventListener('touchmove', this.onPointerMove);\n            self.addEventListener('mouseup', this.onPointerUp);\n            self.addEventListener('touchend', this.onPointerUp);\n            this.element.style.cursor = 'grab';\n            this._interactionEnabled = true;\n        }\n    }\n    disableInteraction() {\n        if (this._interactionEnabled === true) {\n            const { element } = this;\n            element.removeEventListener('mousemove', this.onPointerMove);\n            element.removeEventListener('mousedown', this.onPointerDown);\n            if (!this._disableZoom) {\n                element.removeEventListener('wheel', this.onWheel);\n            }\n            element.removeEventListener('keydown', this.onKeyDown);\n            element.removeEventListener('touchstart', this.onPointerDown);\n            element.removeEventListener('touchmove', this.onPointerMove);\n            self.removeEventListener('mouseup', this.onPointerUp);\n            self.removeEventListener('touchend', this.onPointerUp);\n            element.style.cursor = '';\n            this._interactionEnabled = false;\n        }\n    }\n    /**\n     * The options that are currently configured for the controls instance.\n     */\n    get options() {\n        return this._options;\n    }\n    set disableZoom(disable) {\n        if (this._disableZoom != disable) {\n            this._disableZoom = disable;\n            if (disable === true) {\n                this.element.removeEventListener('wheel', this.onWheel);\n            }\n            else {\n                this.element.addEventListener('wheel', this.onWheel);\n            }\n        }\n    }\n    /**\n     * Copy the spherical values that represent the current camera orbital\n     * position relative to the configured target into a provided Spherical\n     * instance. If no Spherical is provided, a new Spherical will be allocated\n     * to copy the values into. The Spherical that values are copied into is\n     * returned.\n     */\n    getCameraSpherical(target = new Spherical()) {\n        return target.copy(this.spherical);\n    }\n    /**\n     * Returns the camera's current vertical field of view in degrees.\n     */\n    getFieldOfView() {\n        return this.camera.fov;\n    }\n    /**\n     * Configure the _options of the controls. Configured _options will be\n     * merged with whatever _options have already been configured for this\n     * controls instance.\n     */\n    applyOptions(_options) {\n        Object.assign(this._options, _options);\n        // Re-evaluates clamping based on potentially new values for min/max\n        // polar, azimuth and radius:\n        this.setOrbit();\n        this.setFieldOfView(Math.exp(this.goalLogFov));\n    }\n    /**\n     * Sets the near and far planes of the camera.\n     */\n    updateNearFar(nearPlane, farPlane) {\n        this.camera.near = Math.max(nearPlane, farPlane / 1000);\n        this.camera.far = farPlane;\n        this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Sets the aspect ratio of the camera\n     */\n    updateAspect(aspect) {\n        this.camera.aspect = aspect;\n        this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Set the absolute orbital goal of the camera. The change will be\n     * applied over a number of frames depending on configured acceleration and\n     * dampening _options.\n     *\n     * Returns true if invoking the method will result in the camera changing\n     * position and/or rotation, otherwise false.\n     */\n    setOrbit(goalTheta = this.goalSpherical.theta, goalPhi = this.goalSpherical.phi, goalRadius = this.goalSpherical.radius) {\n        const { minimumAzimuthalAngle, maximumAzimuthalAngle, minimumPolarAngle, maximumPolarAngle, minimumRadius, maximumRadius } = this._options;\n        const { theta, phi, radius } = this.goalSpherical;\n        const nextTheta = clamp(goalTheta, minimumAzimuthalAngle, maximumAzimuthalAngle);\n        if (!isFinite(minimumAzimuthalAngle) &&\n            !isFinite(maximumAzimuthalAngle)) {\n            this.spherical.theta =\n                this.wrapAngle(this.spherical.theta - nextTheta) + nextTheta;\n        }\n        const nextPhi = clamp(goalPhi, minimumPolarAngle, maximumPolarAngle);\n        const nextRadius = clamp(goalRadius, minimumRadius, maximumRadius);\n        if (nextTheta === theta && nextPhi === phi && nextRadius === radius) {\n            return false;\n        }\n        this.goalSpherical.theta = nextTheta;\n        this.goalSpherical.phi = nextPhi;\n        this.goalSpherical.radius = nextRadius;\n        this.goalSpherical.makeSafe();\n        this.isUserChange = false;\n        return true;\n    }\n    /**\n     * Subset of setOrbit() above, which only sets the camera's radius.\n     */\n    setRadius(radius) {\n        this.goalSpherical.radius = radius;\n        this.setOrbit();\n    }\n    /**\n     * Sets the goal field of view for the camera\n     */\n    setFieldOfView(fov) {\n        const { minimumFieldOfView, maximumFieldOfView } = this._options;\n        fov = clamp(fov, minimumFieldOfView, maximumFieldOfView);\n        this.goalLogFov = Math.log(fov);\n    }\n    /**\n     * Adjust the orbital position of the camera relative to its current orbital\n     * position. Does not let the theta goal get more than pi ahead of the current\n     * theta, which ensures interpolation continues in the direction of the delta.\n     * The deltaZoom parameter adjusts both the field of view and the orbit radius\n     * such that they progress across their allowed ranges in sync.\n     */\n    adjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n        const { theta, phi, radius } = this.goalSpherical;\n        const { minimumRadius, maximumRadius, minimumFieldOfView, maximumFieldOfView } = this._options;\n        const dTheta = this.spherical.theta - theta;\n        const dThetaLimit = Math.PI - 0.001;\n        const goalTheta = theta - clamp(deltaTheta, -dThetaLimit - dTheta, dThetaLimit - dTheta);\n        const goalPhi = phi - deltaPhi;\n        const deltaRatio = deltaZoom === 0 ?\n            0 :\n            deltaZoom > 0 ? (maximumRadius - radius) /\n                (Math.log(maximumFieldOfView) - this.goalLogFov) :\n                (radius - minimumRadius) /\n                    (this.goalLogFov - Math.log(minimumFieldOfView));\n        const goalRadius = radius +\n            deltaZoom *\n                Math.min(isFinite(deltaRatio) ? deltaRatio : Infinity, maximumRadius - minimumRadius);\n        this.setOrbit(goalTheta, goalPhi, goalRadius);\n        if (deltaZoom !== 0) {\n            const goalLogFov = this.goalLogFov + deltaZoom;\n            this.setFieldOfView(Math.exp(goalLogFov));\n        }\n    }\n    /**\n     * Move the camera instantly instead of accelerating toward the goal\n     * parameters.\n     */\n    jumpToGoal() {\n        this.update(0, SETTLING_TIME);\n    }\n    /**\n     * Update controls. In most cases, this will result in the camera\n     * interpolating its position and rotation until it lines up with the\n     * designated goal orbital position.\n     *\n     * Time and delta are measured in milliseconds.\n     */\n    update(_time, delta) {\n        if (this.isStationary()) {\n            return;\n        }\n        const { maximumPolarAngle, maximumRadius } = this._options;\n        const dTheta = this.spherical.theta - this.goalSpherical.theta;\n        if (Math.abs(dTheta) > Math.PI &&\n            !isFinite(this._options.minimumAzimuthalAngle) &&\n            !isFinite(this._options.maximumAzimuthalAngle)) {\n            this.spherical.theta -= Math.sign(dTheta) * 2 * Math.PI;\n        }\n        this.spherical.theta = this.thetaDamper.update(this.spherical.theta, this.goalSpherical.theta, delta, Math.PI);\n        this.spherical.phi = this.phiDamper.update(this.spherical.phi, this.goalSpherical.phi, delta, maximumPolarAngle);\n        this.spherical.radius = this.radiusDamper.update(this.spherical.radius, this.goalSpherical.radius, delta, maximumRadius);\n        this.logFov = this.fovDamper.update(this.logFov, this.goalLogFov, delta, 1);\n        this.moveCamera();\n    }\n    isStationary() {\n        return this.goalSpherical.theta === this.spherical.theta &&\n            this.goalSpherical.phi === this.spherical.phi &&\n            this.goalSpherical.radius === this.spherical.radius &&\n            this.goalLogFov === this.logFov;\n    }\n    moveCamera() {\n        // Derive the new camera position from the updated spherical:\n        this.spherical.makeSafe();\n        this.camera.position.setFromSpherical(this.spherical);\n        this.camera.setRotationFromEuler(new Euler(this.spherical.phi - Math.PI / 2, this.spherical.theta, 0, 'YXZ'));\n        if (this.camera.fov !== Math.exp(this.logFov)) {\n            this.camera.fov = Math.exp(this.logFov);\n            this.camera.updateProjectionMatrix();\n        }\n        const source = this.isUserChange ? ChangeSource.USER_INTERACTION : ChangeSource.NONE;\n        this.dispatchEvent({ type: 'change', source });\n    }\n    get canInteract() {\n        if (this._options.interactionPolicy == 'allow-when-focused') {\n            const rootNode = this.element.getRootNode();\n            return rootNode.activeElement === this.element;\n        }\n        return this._options.interactionPolicy === 'always-allow';\n    }\n    userAdjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n        this.adjustOrbit(deltaTheta * this.sensitivity, deltaPhi * this.sensitivity, deltaZoom);\n        this.isUserChange = true;\n        // Always make sure that an initial event is triggered in case there is\n        // contention between user interaction and imperative changes. This initial\n        // event will give external observers that chance to observe that\n        // interaction occurred at all:\n        this.dispatchEvent({ type: 'change', source: ChangeSource.USER_INTERACTION });\n    }\n    // Wraps to bewteen -pi and pi\n    wrapAngle(radians) {\n        const normalized = (radians + Math.PI) / (2 * Math.PI);\n        const wrapped = normalized - Math.floor(normalized);\n        return wrapped * 2 * Math.PI - Math.PI;\n    }\n    pixelLengthToSphericalAngle(pixelLength) {\n        return 2 * Math.PI * pixelLength / this.element.clientHeight;\n    }\n    twoTouchDistance(touchOne, touchTwo) {\n        const { clientX: xOne, clientY: yOne } = touchOne;\n        const { clientX: xTwo, clientY: yTwo } = touchTwo;\n        const xDelta = xTwo - xOne;\n        const yDelta = yTwo - yOne;\n        return Math.sqrt(xDelta * xDelta + yDelta * yDelta);\n    }\n    handleSinglePointerMove(pointer) {\n        const { clientX, clientY } = pointer;\n        const deltaTheta = this.pixelLengthToSphericalAngle(clientX - this.lastPointerPosition.clientX);\n        const deltaPhi = this.pixelLengthToSphericalAngle(clientY - this.lastPointerPosition.clientY);\n        this.lastPointerPosition.clientX = clientX;\n        this.lastPointerPosition.clientY = clientY;\n        if (this.isUserPointing === false) {\n            this.isUserPointing = true;\n            this.dispatchEvent({ type: 'pointer-change-start', pointer: Object.assign({}, pointer) });\n        }\n        this.userAdjustOrbit(deltaTheta, deltaPhi, 0);\n    }\n    handleSinglePointerDown(pointer) {\n        this.lastPointerPosition.clientX = pointer.clientX;\n        this.lastPointerPosition.clientY = pointer.clientY;\n        this.element.style.cursor = 'grabbing';\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Adapted from https://gist.github.com/gre/1650294\nconst easeInOutQuad = (t) => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n/**\n * Creates a TimingFunction that uses a given ease to interpolate between\n * two configured number values.\n */\nconst interpolate = (start, end, ease = easeInOutQuad) => (time) => start + (end - start) * ease(time);\n/**\n * Creates a TimingFunction that interpolates through a weighted list\n * of other TimingFunctions (\"tracks\"). Tracks are interpolated in order, and\n * allocated a percentage of the total time based on their relative weight.\n */\nconst sequence = (tracks, weights) => {\n    const totalWeight = weights.reduce((total, weight) => total + weight, 0);\n    const ratios = weights.map(weight => weight / totalWeight);\n    return (time) => {\n        let start = 0;\n        let ratio = Infinity;\n        let track = () => 0;\n        for (let i = 0; i < ratios.length; ++i) {\n            ratio = ratios[i];\n            track = tracks[i];\n            if (time <= (start + ratio)) {\n                break;\n            }\n            start += ratio;\n        }\n        return track((time - start) / ratio);\n    };\n};\n/**\n * Creates a \"timeline\" TimingFunction out of an initial value and a series of\n * Keyframes. The timeline function accepts value from 0-1 and returns the\n * current value based on keyframe interpolation across the total number of\n * frames. Frames are only used to indicate the relative length of each keyframe\n * transition, so interpolated values will be computed for fractional frames.\n */\nconst timeline = (initialValue, keyframes) => {\n    const tracks = [];\n    const weights = [];\n    let lastValue = initialValue;\n    for (let i = 0; i < keyframes.length; ++i) {\n        const keyframe = keyframes[i];\n        const { value, frames } = keyframe;\n        const ease = keyframe.ease || easeInOutQuad;\n        const track = interpolate(lastValue, value, ease);\n        tracks.push(track);\n        weights.push(frames);\n        lastValue = value;\n    }\n    return sequence(tracks, weights);\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// NOTE(cdata): The following \"animation\" timing functions are deliberately\n// being used in favor of CSS animations. In Safari 12.1 and 13, CSS animations\n// would cause the interaction prompt to glitch unexpectedly\n// @see https://github.com/google/model-viewer/issues/839\nconst PROMPT_ANIMATION_TIME = 5000;\n// For timing purposes, a \"frame\" is a timing agnostic relative unit of time\n// and a \"value\" is a target value for the keyframe.\nconst wiggle = timeline(0, [\n    { frames: 5, value: -1 },\n    { frames: 1, value: -1 },\n    { frames: 8, value: 1 },\n    { frames: 1, value: 1 },\n    { frames: 5, value: 0 },\n    { frames: 18, value: 0 }\n]);\nconst fade = timeline(0, [\n    { frames: 1, value: 1 },\n    { frames: 5, value: 1 },\n    { frames: 1, value: 0 },\n    { frames: 6, value: 0 }\n]);\nconst DEFAULT_CAMERA_ORBIT = '0deg 75deg 105%';\nconst DEFAULT_CAMERA_TARGET = 'auto auto auto';\nconst DEFAULT_FIELD_OF_VIEW = 'auto';\nconst MINIMUM_RADIUS_RATIO = 1.1 * SAFE_RADIUS_RATIO;\nconst AZIMUTHAL_QUADRANT_LABELS = ['front', 'right', 'back', 'left'];\nconst POLAR_TRIENT_LABELS = ['upper-', '', 'lower-'];\nconst DEFAULT_INTERACTION_PROMPT_THRESHOLD = 3000;\nconst INTERACTION_PROMPT = 'Use mouse, touch or arrow keys to control the camera!';\nconst InteractionPromptStrategy = {\n    AUTO: 'auto',\n    WHEN_FOCUSED: 'when-focused',\n    NONE: 'none'\n};\nconst InteractionPromptStyle = {\n    BASIC: 'basic',\n    WIGGLE: 'wiggle'\n};\nconst InteractionPolicy = {\n    ALWAYS_ALLOW: 'always-allow',\n    WHEN_FOCUSED: 'allow-when-focused'\n};\nconst TouchAction = {\n    PAN_Y: 'pan-y',\n    PAN_X: 'pan-x',\n    NONE: 'none'\n};\nconst fieldOfViewIntrinsics = (element) => {\n    return {\n        basis: [numberNode(element[$zoomAdjustedFieldOfView] * Math.PI / 180, 'rad')],\n        keywords: { auto: [null] }\n    };\n};\nconst minFieldOfViewIntrinsics = {\n    basis: [degreesToRadians(numberNode(25, 'deg'))],\n    keywords: { auto: [null] }\n};\nconst maxFieldOfViewIntrinsics = (element) => {\n    const scene = element[$scene];\n    return {\n        basis: [degreesToRadians(numberNode(45, 'deg'))],\n        keywords: { auto: [numberNode(scene.framedFieldOfView, 'deg')] }\n    };\n};\nconst cameraOrbitIntrinsics = (() => {\n    const defaultTerms = parseExpressions(DEFAULT_CAMERA_ORBIT)[0]\n        .terms;\n    const theta = normalizeUnit(defaultTerms[0]);\n    const phi = normalizeUnit(defaultTerms[1]);\n    return (element) => {\n        const radius = element[$scene].idealCameraDistance;\n        return {\n            basis: [theta, phi, numberNode(radius, 'm')],\n            keywords: { auto: [null, null, numberNode(105, '%')] }\n        };\n    };\n})();\nconst minCameraOrbitIntrinsics = (element) => {\n    const radius = MINIMUM_RADIUS_RATIO * element[$scene].idealCameraDistance;\n    return {\n        basis: [\n            numberNode(-Infinity, 'rad'),\n            numberNode(Math.PI / 8, 'rad'),\n            numberNode(radius, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst maxCameraOrbitIntrinsics = (element) => {\n    const orbitIntrinsics = cameraOrbitIntrinsics(element);\n    const evaluator = new StyleEvaluator([], orbitIntrinsics);\n    const defaultRadius = evaluator.evaluate()[2];\n    return {\n        basis: [\n            numberNode(Infinity, 'rad'),\n            numberNode(Math.PI - Math.PI / 8, 'rad'),\n            numberNode(defaultRadius, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst cameraTargetIntrinsics = (element) => {\n    const center = element[$scene].boundingBox.getCenter(new Vector3);\n    return {\n        basis: [\n            numberNode(center.x, 'm'),\n            numberNode(center.y, 'm'),\n            numberNode(center.z, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst HALF_PI = Math.PI / 2.0;\nconst THIRD_PI = Math.PI / 3.0;\nconst QUARTER_PI = HALF_PI / 2.0;\nconst TAU = 2.0 * Math.PI;\nconst $controls = Symbol('controls');\nconst $promptElement = Symbol('promptElement');\nconst $promptAnimatedContainer = Symbol('promptAnimatedContainer');\nconst $deferInteractionPrompt = Symbol('deferInteractionPrompt');\nconst $updateAria = Symbol('updateAria');\nconst $updateCameraForRadius = Symbol('updateCameraForRadius');\nconst $onBlur = Symbol('onBlur');\nconst $onFocus = Symbol('onFocus');\nconst $onChange = Symbol('onChange');\nconst $onPointerChange = Symbol('onPointerChange');\nconst $waitingToPromptUser = Symbol('waitingToPromptUser');\nconst $userHasInteracted = Symbol('userHasInteracted');\nconst $promptElementVisibleTime = Symbol('promptElementVisibleTime');\nconst $lastPromptOffset = Symbol('lastPromptOffset');\nconst $focusedTime = Symbol('focusedTime');\nconst $zoomAdjustedFieldOfView = Symbol('zoomAdjustedFieldOfView');\nconst $lastSpherical = Symbol('lastSpherical');\nconst $jumpCamera = Symbol('jumpCamera');\nconst $initialized = Symbol('initialized');\nconst $maintainThetaPhi = Symbol('maintainThetaPhi');\nconst $syncCameraOrbit = Symbol('syncCameraOrbit');\nconst $syncFieldOfView = Symbol('syncFieldOfView');\nconst $syncCameraTarget = Symbol('syncCameraTarget');\nconst $syncMinCameraOrbit = Symbol('syncMinCameraOrbit');\nconst $syncMaxCameraOrbit = Symbol('syncMaxCameraOrbit');\nconst $syncMinFieldOfView = Symbol('syncMinFieldOfView');\nconst $syncMaxFieldOfView = Symbol('syncMaxFieldOfView');\nconst ControlsMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;\n    class ControlsModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.cameraControls = false;\n            this.cameraOrbit = DEFAULT_CAMERA_ORBIT;\n            this.cameraTarget = DEFAULT_CAMERA_TARGET;\n            this.fieldOfView = DEFAULT_FIELD_OF_VIEW;\n            this.minCameraOrbit = 'auto';\n            this.maxCameraOrbit = 'auto';\n            this.minFieldOfView = 'auto';\n            this.maxFieldOfView = 'auto';\n            this.interactionPromptThreshold = DEFAULT_INTERACTION_PROMPT_THRESHOLD;\n            this.interactionPromptStyle = InteractionPromptStyle.WIGGLE;\n            this.interactionPrompt = InteractionPromptStrategy.AUTO;\n            this.interactionPolicy = InteractionPolicy.ALWAYS_ALLOW;\n            this.orbitSensitivity = 1;\n            this.touchAction = TouchAction.PAN_Y;\n            this.disableZoom = false;\n            this.bounds = 'legacy';\n            this[_a] = this.shadowRoot.querySelector('.interaction-prompt');\n            this[_b] = this.shadowRoot.querySelector('.interaction-prompt > .animated-container');\n            this[_c] = Infinity;\n            this[_d] = 0;\n            this[_e] = Infinity;\n            this[_f] = false;\n            this[_g] = false;\n            this[_h] = new SmoothControls(this[$scene].camera, this[$userInputElement]);\n            this[_j] = 0;\n            this[_k] = new Spherical();\n            this[_l] = false;\n            this[_m] = false;\n            this[_o] = false;\n            this[_p] = () => {\n                const input = this[$userInputElement];\n                if (!isFinite(this[$focusedTime])) {\n                    this[$focusedTime] = performance.now();\n                }\n                // NOTE(cdata): On every re-focus, we switch the aria-label back to\n                // the original, non-prompt label if appropriate. If the user has\n                // already interacted, they no longer need to hear the prompt.\n                // Otherwise, they will hear it again after the idle prompt threshold\n                // has been crossed.\n                const ariaLabel = this[$ariaLabel];\n                if (input.getAttribute('aria-label') !== ariaLabel) {\n                    input.setAttribute('aria-label', ariaLabel);\n                }\n                if (this.interactionPrompt === InteractionPromptStrategy.WHEN_FOCUSED &&\n                    !this[$userHasInteracted]) {\n                    this[$waitingToPromptUser] = true;\n                }\n            };\n            this[_q] = () => {\n                if (this.interactionPrompt !== InteractionPromptStrategy.WHEN_FOCUSED) {\n                    return;\n                }\n                this[$waitingToPromptUser] = false;\n                this[$promptElement].classList.remove('visible');\n                this[$promptElementVisibleTime] = Infinity;\n                this[$focusedTime] = Infinity;\n            };\n            this[_r] = ({ source }) => {\n                this[$updateAria]();\n                this[$needsRender]();\n                if (source === ChangeSource.USER_INTERACTION) {\n                    this[$userHasInteracted] = true;\n                    this[$deferInteractionPrompt]();\n                }\n                this.dispatchEvent(new CustomEvent('camera-change', { detail: { source } }));\n            };\n            this[_s] = (event) => {\n                if (event.type === 'pointer-change-start') {\n                    this[$container].classList.add('pointer-tumbling');\n                }\n                else {\n                    this[$container].classList.remove('pointer-tumbling');\n                }\n            };\n        }\n        getCameraOrbit() {\n            const { theta, phi, radius } = this[$lastSpherical];\n            return {\n                theta,\n                phi,\n                radius,\n                toString() {\n                    return `${this.theta}rad ${this.phi}rad ${this.radius}m`;\n                }\n            };\n        }\n        getCameraTarget() {\n            return toVector3D(this[$renderer].isPresenting ? this[$renderer].arRenderer.target :\n                this[$scene].getTarget());\n        }\n        getFieldOfView() {\n            return this[$controls].getFieldOfView();\n        }\n        // Provided so user code does not have to parse these from attributes.\n        getMinimumFieldOfView() {\n            return this[$controls].options.minimumFieldOfView;\n        }\n        getMaximumFieldOfView() {\n            return this[$controls].options.maximumFieldOfView;\n        }\n        jumpCameraToGoal() {\n            this[$jumpCamera] = true;\n            this.requestUpdate($jumpCamera, false);\n        }\n        resetInteractionPrompt() {\n            this[$lastPromptOffset] = 0;\n            this[$promptElementVisibleTime] = Infinity;\n            this[$userHasInteracted] = false;\n            this[$waitingToPromptUser] =\n                this.interactionPrompt === InteractionPromptStrategy.AUTO &&\n                    this.cameraControls;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$controls].addEventListener('change', this[$onChange]);\n            this[$controls].addEventListener('pointer-change-start', this[$onPointerChange]);\n            this[$controls].addEventListener('pointer-change-end', this[$onPointerChange]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$controls].removeEventListener('change', this[$onChange]);\n            this[$controls].removeEventListener('pointer-change-start', this[$onPointerChange]);\n            this[$controls].removeEventListener('pointer-change-end', this[$onPointerChange]);\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            const controls = this[$controls];\n            const input = this[$userInputElement];\n            if (changedProperties.has('cameraControls')) {\n                if (this.cameraControls) {\n                    controls.enableInteraction();\n                    if (this.interactionPrompt === InteractionPromptStrategy.AUTO) {\n                        this[$waitingToPromptUser] = true;\n                    }\n                    input.addEventListener('focus', this[$onFocus]);\n                    input.addEventListener('blur', this[$onBlur]);\n                }\n                else {\n                    input.removeEventListener('focus', this[$onFocus]);\n                    input.removeEventListener('blur', this[$onBlur]);\n                    controls.disableInteraction();\n                    this[$deferInteractionPrompt]();\n                }\n            }\n            if (changedProperties.has('disableZoom')) {\n                controls.disableZoom = this.disableZoom;\n            }\n            if (changedProperties.has('bounds')) {\n                this[$scene].tightBounds = this.bounds === 'tight';\n            }\n            if (changedProperties.has('interactionPrompt') ||\n                changedProperties.has('cameraControls') ||\n                changedProperties.has('src')) {\n                if (this.interactionPrompt === InteractionPromptStrategy.AUTO &&\n                    this.cameraControls && !this[$userHasInteracted]) {\n                    this[$waitingToPromptUser] = true;\n                }\n                else {\n                    this[$deferInteractionPrompt]();\n                }\n            }\n            if (changedProperties.has('interactionPromptStyle')) {\n                this[$promptElement].classList.toggle('wiggle', this.interactionPromptStyle === InteractionPromptStyle.WIGGLE);\n            }\n            if (changedProperties.has('interactionPolicy')) {\n                const interactionPolicy = this.interactionPolicy;\n                controls.applyOptions({ interactionPolicy });\n            }\n            if (changedProperties.has('touchAction')) {\n                const touchAction = this.touchAction;\n                controls.applyOptions({ touchAction });\n            }\n            if (changedProperties.has('orbitSensitivity')) {\n                controls.sensitivity = this.orbitSensitivity;\n            }\n            if (this[$jumpCamera] === true) {\n                Promise.resolve().then(() => {\n                    controls.jumpToGoal();\n                    this[$scene].jumpToGoal();\n                    this[$jumpCamera] = false;\n                });\n            }\n        }\n        async updateFraming() {\n            const scene = this[$scene];\n            const oldFramedFieldOfView = scene.framedFieldOfView;\n            await this.requestUpdate('cameraTarget');\n            scene.updateFraming(this.bounds === 'tight' ? scene.getTarget() : undefined);\n            scene.frameModel();\n            const newFramedFieldOfView = scene.framedFieldOfView;\n            const zoom = this[$controls].getFieldOfView() / oldFramedFieldOfView;\n            this[$zoomAdjustedFieldOfView] = newFramedFieldOfView * zoom;\n            this[$maintainThetaPhi] = true;\n            this.requestUpdate('maxFieldOfView');\n            this.requestUpdate('fieldOfView');\n            this.requestUpdate('minCameraOrbit');\n            this.requestUpdate('maxCameraOrbit');\n            await this.requestUpdate('cameraOrbit');\n        }\n        [(_a = $promptElement, _b = $promptAnimatedContainer, _c = $focusedTime, _d = $lastPromptOffset, _e = $promptElementVisibleTime, _f = $userHasInteracted, _g = $waitingToPromptUser, _h = $controls, _j = $zoomAdjustedFieldOfView, _k = $lastSpherical, _l = $jumpCamera, _m = $initialized, _o = $maintainThetaPhi, $syncFieldOfView)](style) {\n            this[$controls].setFieldOfView(style[0] * 180 / Math.PI);\n        }\n        [$syncCameraOrbit](style) {\n            if (this[$maintainThetaPhi]) {\n                const { theta, phi } = this.getCameraOrbit();\n                style[0] = theta;\n                style[1] = phi;\n                this[$maintainThetaPhi] = false;\n            }\n            this[$controls].setOrbit(style[0], style[1], style[2]);\n        }\n        [$syncMinCameraOrbit](style) {\n            this[$controls].applyOptions({\n                minimumAzimuthalAngle: style[0],\n                minimumPolarAngle: style[1],\n                minimumRadius: style[2]\n            });\n            this.jumpCameraToGoal();\n        }\n        [$syncMaxCameraOrbit](style) {\n            this[$controls].applyOptions({\n                maximumAzimuthalAngle: style[0],\n                maximumPolarAngle: style[1],\n                maximumRadius: style[2]\n            });\n            this[$updateCameraForRadius](style[2]);\n            this.jumpCameraToGoal();\n        }\n        [$syncMinFieldOfView](style) {\n            this[$controls].applyOptions({ minimumFieldOfView: style[0] * 180 / Math.PI });\n            this.jumpCameraToGoal();\n        }\n        [$syncMaxFieldOfView](style) {\n            this[$controls].applyOptions({ maximumFieldOfView: style[0] * 180 / Math.PI });\n            this.jumpCameraToGoal();\n        }\n        [$syncCameraTarget](style) {\n            const [x, y, z] = style;\n            this[$scene].setTarget(x, y, z);\n            this[$renderer].arRenderer.updateTarget();\n        }\n        [$tick](time, delta) {\n            super[$tick](time, delta);\n            if (this[$renderer].isPresenting || !this[$hasTransitioned]()) {\n                return;\n            }\n            const now = performance.now();\n            if (this[$waitingToPromptUser]) {\n                const thresholdTime = this.interactionPrompt === InteractionPromptStrategy.AUTO ?\n                    this[$loadedTime] :\n                    this[$focusedTime];\n                if (this.loaded &&\n                    now > thresholdTime + this.interactionPromptThreshold) {\n                    this[$userInputElement].setAttribute('aria-label', INTERACTION_PROMPT);\n                    this[$waitingToPromptUser] = false;\n                    this[$promptElementVisibleTime] = now;\n                    this[$promptElement].classList.add('visible');\n                }\n            }\n            if (isFinite(this[$promptElementVisibleTime]) &&\n                this.interactionPromptStyle === InteractionPromptStyle.WIGGLE) {\n                const scene = this[$scene];\n                const animationTime = ((now - this[$promptElementVisibleTime]) / PROMPT_ANIMATION_TIME) %\n                    1;\n                const offset = wiggle(animationTime);\n                const opacity = fade(animationTime);\n                this[$promptAnimatedContainer].style.opacity = `${opacity}`;\n                if (offset !== this[$lastPromptOffset]) {\n                    const xOffset = offset * scene.width * 0.05;\n                    const deltaTheta = (offset - this[$lastPromptOffset]) * Math.PI / 16;\n                    this[$promptAnimatedContainer].style.transform =\n                        `translateX(${xOffset}px)`;\n                    this[$controls].adjustOrbit(deltaTheta, 0, 0);\n                    this[$lastPromptOffset] = offset;\n                }\n            }\n            this[$controls].update(time, delta);\n            this[$scene].updateTarget(delta);\n        }\n        [$deferInteractionPrompt]() {\n            // Effectively cancel the timer waiting for user interaction:\n            this[$waitingToPromptUser] = false;\n            this[$promptElement].classList.remove('visible');\n            this[$promptElementVisibleTime] = Infinity;\n        }\n        /**\n         * Updates the camera's near and far planes to enclose the scene when\n         * orbiting at the supplied radius.\n         */\n        [$updateCameraForRadius](radius) {\n            const { idealCameraDistance } = this[$scene];\n            const maximumRadius = Math.max(idealCameraDistance, radius);\n            const near = 0;\n            const far = 2 * maximumRadius;\n            this[$controls].updateNearFar(near, far);\n        }\n        [$updateAria]() {\n            // NOTE(cdata): It is possible that we might want to record the\n            // last spherical when the label actually changed. Right now, the\n            // side-effect the current implementation is that we will only\n            // announce the first view change that occurs after the element\n            // becomes focused.\n            const { theta: lastTheta, phi: lastPhi } = this[$lastSpherical];\n            const { theta, phi } = this[$controls].getCameraSpherical(this[$lastSpherical]);\n            const rootNode = this.getRootNode();\n            // Only change the aria-label if <model-viewer> is currently focused:\n            if (rootNode != null && rootNode.activeElement === this) {\n                const lastAzimuthalQuadrant = (4 + Math.floor(((lastTheta % TAU) + QUARTER_PI) / HALF_PI)) % 4;\n                const azimuthalQuadrant = (4 + Math.floor(((theta % TAU) + QUARTER_PI) / HALF_PI)) % 4;\n                const lastPolarTrient = Math.floor(lastPhi / THIRD_PI);\n                const polarTrient = Math.floor(phi / THIRD_PI);\n                if (azimuthalQuadrant !== lastAzimuthalQuadrant ||\n                    polarTrient !== lastPolarTrient) {\n                    const azimuthalQuadrantLabel = AZIMUTHAL_QUADRANT_LABELS[azimuthalQuadrant];\n                    const polarTrientLabel = POLAR_TRIENT_LABELS[polarTrient];\n                    const ariaLabel = `View from stage ${polarTrientLabel}${azimuthalQuadrantLabel}`;\n                    this[$userInputElement].setAttribute('aria-label', ariaLabel);\n                }\n            }\n        }\n        [$onResize](event) {\n            const controls = this[$controls];\n            const oldFramedFieldOfView = this[$scene].framedFieldOfView;\n            // The super of $onResize will update the scene's framedFieldOfView, so we\n            // compare the before and after to calculate the proper zoom.\n            super[$onResize](event);\n            const newFramedFieldOfView = this[$scene].framedFieldOfView;\n            const zoom = controls.getFieldOfView() / oldFramedFieldOfView;\n            this[$zoomAdjustedFieldOfView] = newFramedFieldOfView * zoom;\n            controls.updateAspect(this[$scene].aspect);\n            this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n            this.requestUpdate('fieldOfView', this.fieldOfView);\n            this.jumpCameraToGoal();\n        }\n        [$onModelLoad]() {\n            super[$onModelLoad]();\n            const { framedFieldOfView } = this[$scene];\n            this[$zoomAdjustedFieldOfView] = framedFieldOfView;\n            if (this[$initialized]) {\n                this[$maintainThetaPhi] = true;\n            }\n            else {\n                this[$initialized] = true;\n            }\n            this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n            this.requestUpdate('fieldOfView', this.fieldOfView);\n            this.requestUpdate('minCameraOrbit', this.minCameraOrbit);\n            this.requestUpdate('maxCameraOrbit', this.maxCameraOrbit);\n            this.requestUpdate('cameraOrbit', this.cameraOrbit);\n            this.requestUpdate('cameraTarget', this.cameraTarget);\n            this.jumpCameraToGoal();\n        }\n    }\n    _p = $onFocus, _q = $onBlur, _r = $onChange, _s = $onPointerChange;\n    __decorate$4([\n        property({ type: Boolean, attribute: 'camera-controls' })\n    ], ControlsModelViewerElement.prototype, \"cameraControls\", void 0);\n    __decorate$4([\n        style({\n            intrinsics: cameraOrbitIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncCameraOrbit\n        }),\n        property({ type: String, attribute: 'camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"cameraOrbit\", void 0);\n    __decorate$4([\n        style({\n            intrinsics: cameraTargetIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncCameraTarget\n        }),\n        property({ type: String, attribute: 'camera-target', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"cameraTarget\", void 0);\n    __decorate$4([\n        style({\n            intrinsics: fieldOfViewIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncFieldOfView\n        }),\n        property({ type: String, attribute: 'field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"fieldOfView\", void 0);\n    __decorate$4([\n        style({\n            intrinsics: minCameraOrbitIntrinsics,\n            updateHandler: $syncMinCameraOrbit\n        }),\n        property({ type: String, attribute: 'min-camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"minCameraOrbit\", void 0);\n    __decorate$4([\n        style({\n            intrinsics: maxCameraOrbitIntrinsics,\n            updateHandler: $syncMaxCameraOrbit\n        }),\n        property({ type: String, attribute: 'max-camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"maxCameraOrbit\", void 0);\n    __decorate$4([\n        style({\n            intrinsics: minFieldOfViewIntrinsics,\n            updateHandler: $syncMinFieldOfView\n        }),\n        property({ type: String, attribute: 'min-field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"minFieldOfView\", void 0);\n    __decorate$4([\n        style({\n            intrinsics: maxFieldOfViewIntrinsics,\n            updateHandler: $syncMaxFieldOfView\n        }),\n        property({ type: String, attribute: 'max-field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"maxFieldOfView\", void 0);\n    __decorate$4([\n        property({ type: Number, attribute: 'interaction-prompt-threshold' })\n    ], ControlsModelViewerElement.prototype, \"interactionPromptThreshold\", void 0);\n    __decorate$4([\n        property({ type: String, attribute: 'interaction-prompt-style' })\n    ], ControlsModelViewerElement.prototype, \"interactionPromptStyle\", void 0);\n    __decorate$4([\n        property({ type: String, attribute: 'interaction-prompt' })\n    ], ControlsModelViewerElement.prototype, \"interactionPrompt\", void 0);\n    __decorate$4([\n        property({ type: String, attribute: 'interaction-policy' })\n    ], ControlsModelViewerElement.prototype, \"interactionPolicy\", void 0);\n    __decorate$4([\n        property({ type: Number, attribute: 'orbit-sensitivity' })\n    ], ControlsModelViewerElement.prototype, \"orbitSensitivity\", void 0);\n    __decorate$4([\n        property({ type: String, attribute: 'touch-action' })\n    ], ControlsModelViewerElement.prototype, \"touchAction\", void 0);\n    __decorate$4([\n        property({ type: Boolean, attribute: 'disable-zoom' })\n    ], ControlsModelViewerElement.prototype, \"disableZoom\", void 0);\n    __decorate$4([\n        property({ type: String, attribute: 'bounds' })\n    ], ControlsModelViewerElement.prototype, \"bounds\", void 0);\n    return ControlsModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst BASE_OPACITY = 0.1;\nconst DEFAULT_SHADOW_INTENSITY = 0.0;\nconst DEFAULT_SHADOW_SOFTNESS = 1.0;\nconst DEFAULT_EXPOSURE = 1.0;\nconst $currentEnvironmentMap = Symbol('currentEnvironmentMap');\nconst $applyEnvironmentMap = Symbol('applyEnvironmentMap');\nconst $updateEnvironment = Symbol('updateEnvironment');\nconst $cancelEnvironmentUpdate = Symbol('cancelEnvironmentUpdate');\nconst $onPreload = Symbol('onPreload');\nconst EnvironmentMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class EnvironmentModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.environmentImage = null;\n            this.skyboxImage = null;\n            this.shadowIntensity = DEFAULT_SHADOW_INTENSITY;\n            this.shadowSoftness = DEFAULT_SHADOW_SOFTNESS;\n            this.exposure = DEFAULT_EXPOSURE;\n            this[_a] = null;\n            this[_b] = null;\n            this[_c] = (event) => {\n                if (event.element === this) {\n                    this[$updateEnvironment]();\n                }\n            };\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$renderer].loader.addEventListener('preload', this[$onPreload]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$renderer].loader.removeEventListener('preload', this[$onPreload]);\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('shadowIntensity')) {\n                this[$scene].setShadowIntensity(this.shadowIntensity * BASE_OPACITY);\n                this[$needsRender]();\n            }\n            if (changedProperties.has('shadowSoftness')) {\n                this[$scene].setShadowSoftness(this.shadowSoftness);\n                this[$needsRender]();\n            }\n            if (changedProperties.has('exposure')) {\n                this[$scene].exposure = this.exposure;\n                this[$needsRender]();\n            }\n            if ((changedProperties.has('environmentImage') ||\n                changedProperties.has('skyboxImage')) &&\n                this[$shouldAttemptPreload]()) {\n                this[$updateEnvironment]();\n            }\n        }\n        [(_a = $currentEnvironmentMap, _b = $cancelEnvironmentUpdate, _c = $onPreload, $onModelLoad)]() {\n            super[$onModelLoad]();\n            if (this[$currentEnvironmentMap] != null) {\n                this[$applyEnvironmentMap](this[$currentEnvironmentMap]);\n            }\n        }\n        async [$updateEnvironment]() {\n            const { skyboxImage, environmentImage } = this;\n            if (this[$cancelEnvironmentUpdate] != null) {\n                this[$cancelEnvironmentUpdate]();\n                this[$cancelEnvironmentUpdate] = null;\n            }\n            const { textureUtils } = this[$renderer];\n            if (textureUtils == null) {\n                return;\n            }\n            try {\n                const { environmentMap, skybox } = await new Promise(async (resolve, reject) => {\n                    const texturesLoad = textureUtils.generateEnvironmentMapAndSkybox(deserializeUrl(skyboxImage), environmentImage, { progressTracker: this[$progressTracker] });\n                    this[$cancelEnvironmentUpdate] = () => reject(texturesLoad);\n                    resolve(await texturesLoad);\n                });\n                const environment = environmentMap.texture;\n                if (skybox != null) {\n                    // When using the same environment and skybox, use the environment as\n                    // it gives HDR filtering.\n                    this[$scene].background = skybox.userData.url ===\n                        environment.userData.url ?\n                        environment :\n                        skybox;\n                }\n                else {\n                    this[$scene].background = null;\n                }\n                this[$applyEnvironmentMap](environmentMap.texture);\n                this[$scene].dispatchEvent({ type: 'envmap-update' });\n            }\n            catch (errorOrPromise) {\n                if (errorOrPromise instanceof Error) {\n                    this[$applyEnvironmentMap](null);\n                    throw errorOrPromise;\n                }\n            }\n        }\n        /**\n         * Sets the Model to use the provided environment map,\n         * or `null` if the Model should remove its' environment map.\n         */\n        [$applyEnvironmentMap](environmentMap) {\n            this[$currentEnvironmentMap] = environmentMap;\n            this[$scene].environment = this[$currentEnvironmentMap];\n            this.dispatchEvent(new CustomEvent('environment-change'));\n            this[$needsRender]();\n        }\n    }\n    __decorate$3([\n        property({ type: String, attribute: 'environment-image' })\n    ], EnvironmentModelViewerElement.prototype, \"environmentImage\", void 0);\n    __decorate$3([\n        property({ type: String, attribute: 'skybox-image' })\n    ], EnvironmentModelViewerElement.prototype, \"skyboxImage\", void 0);\n    __decorate$3([\n        property({ type: Number, attribute: 'shadow-intensity' })\n    ], EnvironmentModelViewerElement.prototype, \"shadowIntensity\", void 0);\n    __decorate$3([\n        property({ type: Number, attribute: 'shadow-softness' })\n    ], EnvironmentModelViewerElement.prototype, \"shadowSoftness\", void 0);\n    __decorate$3([\n        property({\n            type: Number,\n        })\n    ], EnvironmentModelViewerElement.prototype, \"exposure\", void 0);\n    return EnvironmentModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$4, _b$3;\nconst INITIAL_STATUS_ANNOUNCEMENT = 'This page includes one or more 3D models that are loading';\nconst FINISHED_LOADING_ANNOUNCEMENT = 'All 3D models in the page have loaded';\nconst UPDATE_STATUS_DEBOUNCE_MS = 100;\nconst $modelViewerStatusInstance = Symbol('modelViewerStatusInstance');\nconst $updateStatus = Symbol('updateStatus');\n/**\n * The LoadingStatusAnnouncer manages announcements of loading status across\n * all <model-viewer> elements in the document at any given time. As new\n * <model-viewer> elements are connected to the document, they are registered\n * with a LoadingStatusAnnouncer singleton. As they are disconnected, the are\n * also unregistered. Announcements are made to indicate the following\n * conditions:\n *\n *  1. There are <model-viewer> elements that have yet to finish loading\n *  2. All <model-viewer> elements in the page have finished attempting to load\n */\nclass LoadingStatusAnnouncer extends EventDispatcher {\n    constructor() {\n        super();\n        /**\n         * The \"status\" instance is the <model-viewer> instance currently designated\n         * to announce the loading status of all <model-viewer> elements in the\n         * document at any given time. It might change as <model-viewer> elements are\n         * attached or detached over time.\n         */\n        this[_a$4] = null;\n        this.registeredInstanceStatuses = new Map();\n        this.loadingPromises = [];\n        /**\n         * This element is a node that floats around the document as the status\n         * instance changes (see above). It is a singleton that represents the loading\n         * status for all <model-viewer> elements currently in the page. It has its\n         * role attribute set to \"status\", which causes screen readers to announce\n         * any changes to its text content.\n         *\n         * @see https://www.w3.org/TR/wai-aria-1.1/#status\n         */\n        this.statusElement = document.createElement('p');\n        this.statusUpdateInProgress = false;\n        this[_b$3] = debounce(() => this.updateStatus(), UPDATE_STATUS_DEBOUNCE_MS);\n        const { statusElement } = this;\n        const { style } = statusElement;\n        statusElement.setAttribute('role', 'status');\n        statusElement.classList.add('screen-reader-only');\n        style.top = style.left = '0';\n        style.pointerEvents = 'none';\n    }\n    /**\n     * Register a <model-viewer> element with the announcer. If it is not yet\n     * loaded, its loading status will be tracked by the announcer.\n     */\n    registerInstance(modelViewer) {\n        if (this.registeredInstanceStatuses.has(modelViewer)) {\n            return;\n        }\n        let onUnregistered = () => { };\n        const loadShouldBeMeasured = modelViewer.loaded === false && !!modelViewer.src;\n        const loadAttemptCompletes = new Promise((resolve) => {\n            if (!loadShouldBeMeasured) {\n                resolve();\n                return;\n            }\n            const resolveHandler = () => {\n                resolve();\n                modelViewer.removeEventListener('load', resolveHandler);\n                modelViewer.removeEventListener('error', resolveHandler);\n            };\n            modelViewer.addEventListener('load', resolveHandler);\n            modelViewer.addEventListener('error', resolveHandler);\n            onUnregistered = resolveHandler;\n        });\n        this.registeredInstanceStatuses.set(modelViewer, { onUnregistered });\n        this.loadingPromises.push(loadAttemptCompletes);\n        if (this.modelViewerStatusInstance == null) {\n            this.modelViewerStatusInstance = modelViewer;\n        }\n    }\n    /**\n     * Unregister a <model-viewer> element with the announcer. Its loading status\n     * will no longer be tracked by the announcer.\n     */\n    unregisterInstance(modelViewer) {\n        if (!this.registeredInstanceStatuses.has(modelViewer)) {\n            return;\n        }\n        const statuses = this.registeredInstanceStatuses;\n        const instanceStatus = statuses.get(modelViewer);\n        statuses.delete(modelViewer);\n        instanceStatus.onUnregistered();\n        if (this.modelViewerStatusInstance === modelViewer) {\n            this.modelViewerStatusInstance = statuses.size > 0 ?\n                getFirstMapKey(statuses) :\n                null;\n        }\n    }\n    get modelViewerStatusInstance() {\n        return this[$modelViewerStatusInstance];\n    }\n    set modelViewerStatusInstance(value) {\n        const currentInstance = this[$modelViewerStatusInstance];\n        if (currentInstance === value) {\n            return;\n        }\n        const { statusElement } = this;\n        if (value != null && value.shadowRoot != null) {\n            value.shadowRoot.appendChild(statusElement);\n        }\n        else if (statusElement.parentNode != null) {\n            statusElement.parentNode.removeChild(statusElement);\n        }\n        this[$modelViewerStatusInstance] = value;\n        this[$updateStatus]();\n    }\n    async updateStatus() {\n        if (this.statusUpdateInProgress || this.loadingPromises.length === 0) {\n            return;\n        }\n        this.statusElement.textContent = INITIAL_STATUS_ANNOUNCEMENT;\n        this.statusUpdateInProgress = true;\n        this.dispatchEvent({ type: 'initial-status-announced' });\n        while (this.loadingPromises.length) {\n            const { loadingPromises } = this;\n            this.loadingPromises = [];\n            await Promise.all(loadingPromises);\n        }\n        this.statusElement.textContent = FINISHED_LOADING_ANNOUNCEMENT;\n        this.statusUpdateInProgress = false;\n        this.dispatchEvent({ type: 'finished-loading-announced' });\n    }\n}\n_a$4 = $modelViewerStatusInstance, _b$3 = $updateStatus;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst PROGRESS_BAR_UPDATE_THRESHOLD = 100;\nconst PROGRESS_MASK_BASE_OPACITY = 0.2;\nconst DEFAULT_DRACO_DECODER_LOCATION = 'https://www.gstatic.com/draco/versioned/decoders/1.3.6/';\nconst DEFAULT_KTX2_TRANSCODER_LOCATION = 'https://www.gstatic.com/basis-universal/versioned/2020-12-21-ef70ddd/';\nconst SPACE_KEY = 32;\nconst ENTER_KEY = 13;\nconst RevealStrategy = {\n    AUTO: 'auto',\n    INTERACTION: 'interaction',\n    MANUAL: 'manual'\n};\nconst LoadingStrategy = {\n    AUTO: 'auto',\n    LAZY: 'lazy',\n    EAGER: 'eager'\n};\nconst PosterDismissalSource = {\n    INTERACTION: 'interaction'\n};\nconst loadingStatusAnnouncer = new LoadingStatusAnnouncer();\nconst $defaultProgressBarElement = Symbol('defaultProgressBarElement');\nconst $defaultProgressMaskElement = Symbol('defaultProgressMaskElement');\nconst $posterContainerElement = Symbol('posterContainerElement');\nconst $defaultPosterElement = Symbol('defaultPosterElement');\nconst $posterDismissalSource = Symbol('posterDismissalSource');\nconst $hidePoster = Symbol('hidePoster');\nconst $modelIsRevealed = Symbol('modelIsRevealed');\nconst $updateProgressBar = Symbol('updateProgressBar');\nconst $lastReportedProgress = Symbol('lastReportedProgress');\nconst $transitioned = Symbol('transitioned');\nconst $ariaLabelCallToAction = Symbol('ariaLabelCallToAction');\nconst $onClick = Symbol('onClick');\nconst $onKeydown = Symbol('onKeydown');\nconst $onProgress = Symbol('onProgress');\n/**\n * LoadingMixin implements features related to lazy loading, as well as\n * presentation details related to the pre-load / pre-render presentation of a\n * <model-viewer>\n *\n * This mixin implements support for models with DRACO-compressed meshes.\n * The DRACO decoder will be loaded on-demand if a glTF that uses the DRACO mesh\n * compression extension is encountered.\n *\n * By default, the DRACO decoder will be loaded from a Google CDN. It is\n * possible to customize where the decoder is loaded from by defining a global\n * configuration option for `<model-viewer>` like so:\n *\n * ```html\n * <script>\n * ModelViewerElement = self.ModelViewerElement || {};\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration strategy must be performed *before* the\n * first `<model-viewer>` element is created in the browser. The configuration\n * can be done anywhere, but the easiest way to ensure it is done at the right\n * time is to do it in the `<head>` of the HTML document. This is the\n * recommended way to set the location because it is most compatible with\n * scenarios where the `<model-viewer>` library is lazily loaded.\n *\n * If you absolutely have to set the DRACO decoder location *after* the first\n * `<model-viewer>` element is created, you can do it this way:\n *\n * ```html\n * <script>\n * const ModelViewerElement = customElements.get('model-viewer');\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration approach will not work until *after*\n * `<model-viewer>` is defined in the browser. Also note that this configuration\n * *must* be set *before* the first DRACO model is fully loaded.\n *\n * It is recommended that users who intend to take advantage of DRACO mesh\n * compression consider whether or not it is acceptable for their use case to\n * have code side-loaded from a Google CDN. If it is not acceptable, then the\n * location must be customized before loading any DRACO models in order to cause\n * the decoder to be loaded from an alternative, acceptable location.\n */\nconst LoadingMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n    class LoadingModelViewerElement extends ModelViewerElement {\n        constructor(...args) {\n            super(...args);\n            /**\n             * A URL pointing to the image to use as a poster in scenarios where the\n             * <model-viewer> is not ready to reveal a rendered model to the viewer.\n             */\n            this.poster = null;\n            /**\n             * An enumerable attribute describing under what conditions the\n             * <model-viewer> should reveal a model to the viewer.\n             *\n             * The default value is \"auto\". The only supported alternative values are\n             * \"interaction\" and \"manual\".\n             */\n            this.reveal = RevealStrategy.AUTO;\n            /**\n             * An enumerable attribute describing under what conditions the\n             * <model-viewer> should preload a model.\n             *\n             * The default value is \"auto\". The only supported alternative values are\n             * \"lazy\" and \"eager\". Auto is equivalent to lazy, which loads the model\n             * when it is near the viewport for reveal = \"auto\", and when interacted\n             * with for reveal = \"interaction\". Eager loads the model immediately.\n             */\n            this.loading = LoadingStrategy.AUTO;\n            this[_a] = false;\n            this[_b] = false;\n            this[_c] = 0;\n            this[_d] = null;\n            // TODO: Add this to the shadow root as part of this mixin's\n            // implementation:\n            this[_e] = this.shadowRoot.querySelector('.slot.poster');\n            this[_f] = this.shadowRoot.querySelector('#default-poster');\n            this[_g] = this.shadowRoot.querySelector('#default-progress-bar > .bar');\n            this[_h] = this.shadowRoot.querySelector('#default-progress-bar > .mask');\n            this[_j] = this[$defaultPosterElement].getAttribute('aria-label');\n            this[_k] = throttle((progress) => {\n                const parentNode = this[$defaultProgressBarElement].parentNode;\n                requestAnimationFrame(() => {\n                    this[$defaultProgressMaskElement].style.opacity =\n                        `${(1.0 - progress) * PROGRESS_MASK_BASE_OPACITY}`;\n                    this[$defaultProgressBarElement].style.transform =\n                        `scaleX(${progress})`;\n                    if (progress === 0) {\n                        // NOTE(cdata): We remove and re-append the progress bar in this\n                        // condition so that the progress bar does not appear to\n                        // transition backwards from the right when we reset to 0 (or\n                        // otherwise <1) progress after having already reached 1 progress\n                        // previously.\n                        parentNode.removeChild(this[$defaultProgressBarElement]);\n                        parentNode.appendChild(this[$defaultProgressBarElement]);\n                    }\n                    // NOTE(cdata): IE11 does not properly respect the second parameter\n                    // of classList.toggle, which this implementation originally used.\n                    // @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11865865/\n                    if (progress === 1.0) {\n                        this[$defaultProgressBarElement].classList.add('hide');\n                    }\n                    else {\n                        this[$defaultProgressBarElement].classList.remove('hide');\n                    }\n                });\n            }, PROGRESS_BAR_UPDATE_THRESHOLD);\n            this[_l] = () => {\n                if (this.reveal === RevealStrategy.MANUAL) {\n                    return;\n                }\n                this.dismissPoster();\n            };\n            this[_m] = (event) => {\n                if (this.reveal === RevealStrategy.MANUAL) {\n                    return;\n                }\n                switch (event.keyCode) {\n                    // NOTE(cdata): Links and buttons can typically be activated with\n                    // both spacebar and enter to produce a synthetic click action\n                    case SPACE_KEY:\n                    case ENTER_KEY:\n                        this.dismissPoster();\n                        break;\n                }\n            };\n            this[_o] = (event) => {\n                const progress = event.detail.totalProgress;\n                this[$lastReportedProgress] =\n                    Math.max(progress, this[$lastReportedProgress]);\n                if (progress === 1.0) {\n                    this[$updateProgressBar].flush();\n                    if (this[$sceneIsReady]() &&\n                        (this[$posterDismissalSource] != null ||\n                            this.reveal === RevealStrategy.AUTO)) {\n                        this[$hidePoster]();\n                    }\n                }\n                this[$updateProgressBar](progress);\n                this.dispatchEvent(new CustomEvent('progress', { detail: { totalProgress: progress } }));\n            };\n            const ModelViewerElement = self.ModelViewerElement || {};\n            const dracoDecoderLocation = ModelViewerElement.dracoDecoderLocation ||\n                DEFAULT_DRACO_DECODER_LOCATION;\n            CachingGLTFLoader.setDRACODecoderLocation(dracoDecoderLocation);\n            const ktx2TranscoderLocation = ModelViewerElement.ktx2TranscoderLocation ||\n                DEFAULT_KTX2_TRANSCODER_LOCATION;\n            CachingGLTFLoader.setKTX2TranscoderLocation(ktx2TranscoderLocation);\n        }\n        static set dracoDecoderLocation(value) {\n            CachingGLTFLoader.setDRACODecoderLocation(value);\n        }\n        static get dracoDecoderLocation() {\n            return CachingGLTFLoader.getDRACODecoderLocation();\n        }\n        static set ktx2TranscoderLocation(value) {\n            CachingGLTFLoader.setKTX2TranscoderLocation(value);\n        }\n        static get ktx2TranscoderLocation() {\n            return CachingGLTFLoader.getKTX2TranscoderLocation();\n        }\n        /**\n         * If provided, the callback will be passed each resource URL before a\n         * request is sent. The callback may return the original URL, or a new URL\n         * to override loading behavior. This behavior can be used to load assets\n         * from .ZIP files, drag-and-drop APIs, and Data URIs.\n         */\n        static mapURLs(callback) {\n            Renderer.singleton.loader[$loader].manager.setURLModifier(callback);\n        }\n        /**\n         * Dismisses the poster, causing the model to load and render if\n         * necessary. This is currently effectively the same as interacting with\n         * the poster via user input.\n         */\n        dismissPoster() {\n            if (this[$sceneIsReady]()) {\n                this[$hidePoster]();\n            }\n            else {\n                this[$posterDismissalSource] = PosterDismissalSource.INTERACTION;\n                this[$updateSource]();\n            }\n        }\n        /**\n         * Displays the poster, hiding the 3D model. If this is called after the 3D\n         * model has been revealed, then it will behave as though\n         * reveal='interaction', being dismissed either by a user click or a call to\n         * dismissPoster().\n         */\n        showPoster() {\n            const posterContainerElement = this[$posterContainerElement];\n            const defaultPosterElement = this[$defaultPosterElement];\n            defaultPosterElement.removeAttribute('tabindex');\n            defaultPosterElement.removeAttribute('aria-hidden');\n            posterContainerElement.classList.add('show');\n            const oldVisibility = this.modelIsVisible;\n            this[$modelIsRevealed] = false;\n            this[$announceModelVisibility](oldVisibility);\n            this[$transitioned] = false;\n        }\n        /**\n         * Returns the model's bounding box dimensions in meters, independent of\n         * turntable rotation.\n         */\n        getDimensions() {\n            return toVector3D(this[$scene].size);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            // Fired when a user first clicks the model element. Used to\n            // change the visibility of a poster image, or start loading\n            // a model.\n            this[$posterContainerElement].addEventListener('click', this[$onClick]);\n            this[$posterContainerElement].addEventListener('keydown', this[$onKeydown]);\n            this[$progressTracker].addEventListener('progress', this[$onProgress]);\n            loadingStatusAnnouncer.registerInstance(this);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$posterContainerElement].removeEventListener('click', this[$onClick]);\n            this[$posterContainerElement].removeEventListener('keydown', this[$onKeydown]);\n            this[$progressTracker].removeEventListener('progress', this[$onProgress]);\n            loadingStatusAnnouncer.unregisterInstance(this);\n        }\n        async updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('poster') && this.poster != null) {\n                this[$defaultPosterElement].style.backgroundImage =\n                    `url(${this.poster})`;\n            }\n            if (changedProperties.has('alt')) {\n                this[$defaultPosterElement].setAttribute('aria-label', `${this[$ariaLabel]}. ${this[$ariaLabelCallToAction]}`);\n            }\n            if (changedProperties.has('reveal') || changedProperties.has('loaded')) {\n                if (!this[$sceneIsReady]()) {\n                    this[$updateSource]();\n                }\n            }\n        }\n        [(_a = $modelIsRevealed, _b = $transitioned, _c = $lastReportedProgress, _d = $posterDismissalSource, _e = $posterContainerElement, _f = $defaultPosterElement, _g = $defaultProgressBarElement, _h = $defaultProgressMaskElement, _j = $ariaLabelCallToAction, _k = $updateProgressBar, _l = $onClick, _m = $onKeydown, _o = $onProgress, $shouldAttemptPreload)]() {\n            return !!this.src &&\n                (this[$posterDismissalSource] != null ||\n                    this.loading === LoadingStrategy.EAGER ||\n                    (this.reveal === RevealStrategy.AUTO && this[$isElementInViewport]));\n        }\n        [$sceneIsReady]() {\n            const { src } = this;\n            return !!src && super[$sceneIsReady]() &&\n                this[$lastReportedProgress] === 1.0;\n        }\n        [$hidePoster]() {\n            this[$posterDismissalSource] = null;\n            const posterContainerElement = this[$posterContainerElement];\n            const defaultPosterElement = this[$defaultPosterElement];\n            if (posterContainerElement.classList.contains('show')) {\n                posterContainerElement.classList.remove('show');\n                const oldVisibility = this.modelIsVisible;\n                this[$modelIsRevealed] = true;\n                this[$announceModelVisibility](oldVisibility);\n                // We might need to forward focus to our internal canvas, but that\n                // cannot happen until the poster has completely transitioned away\n                posterContainerElement.addEventListener('transitionend', () => {\n                    requestAnimationFrame(() => {\n                        this[$transitioned] = true;\n                        const root = this.getRootNode();\n                        // If the <model-viewer> is still focused, forward the focus to\n                        // the canvas that has just been revealed\n                        if (root &&\n                            root.activeElement === this) {\n                            this[$userInputElement].focus();\n                        }\n                        // Ensure that the poster is no longer focusable or visible to\n                        // screen readers\n                        defaultPosterElement.setAttribute('aria-hidden', 'true');\n                        defaultPosterElement.tabIndex = -1;\n                        this.dispatchEvent(new CustomEvent('poster-dismissed'));\n                    });\n                }, { once: true });\n            }\n        }\n        [$getModelIsVisible]() {\n            return super[$getModelIsVisible]() && this[$modelIsRevealed];\n        }\n        [$hasTransitioned]() {\n            return super[$hasTransitioned]() && this[$transitioned];\n        }\n        async [$updateSource]() {\n            this[$lastReportedProgress] = 0;\n            if (this[$scene].currentGLTF == null || this.src == null ||\n                !this[$shouldAttemptPreload]()) {\n                // Don't show the poster when switching models.\n                this.showPoster();\n            }\n            await super[$updateSource]();\n        }\n    }\n    __decorate$2([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"poster\", void 0);\n    __decorate$2([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"reveal\", void 0);\n    __decorate$2([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"loading\", void 0);\n    return LoadingModelViewerElement;\n};\n\nvar GLTFExporter = ( function () {\n\n\tfunction GLTFExporter() {\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFLightExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsUnlitExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsPBRSpecularGlossiness( writer );\n\n\t\t} );\n\n\t}\n\n\tGLTFExporter.prototype = {\n\n\t\tconstructor: GLTFExporter,\n\n\t\tregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\t/**\n\t\t * Parse scenes and generate GLTF output\n\t\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t\t * @param  {Function} onDone  Callback on completed\n\t\t * @param  {Object} options options\n\t\t */\n\t\tparse: function ( input, onDone, options ) {\n\n\t\t\tvar writer = new GLTFWriter();\n\t\t\tvar plugins = [];\n\n\t\t\tfor ( var i = 0, il = this.pluginCallbacks.length; i < il; i ++ ) {\n\n\t\t\t\tplugins.push( this.pluginCallbacks[ i ]( writer ) );\n\n\t\t\t}\n\n\t\t\twriter.setPlugins( plugins );\n\t\t\twriter.write( input, onDone, options );\n\n\t\t}\n\n\t};\n\n\t//------------------------------------------------------------------------------\n\t// Constants\n\t//------------------------------------------------------------------------------\n\n\tvar WEBGL_CONSTANTS = {\n\t\tPOINTS: 0x0000,\n\t\tLINES: 0x0001,\n\t\tLINE_LOOP: 0x0002,\n\t\tLINE_STRIP: 0x0003,\n\t\tTRIANGLES: 0x0004,\n\t\tTRIANGLE_STRIP: 0x0005,\n\t\tTRIANGLE_FAN: 0x0006,\n\n\t\tUNSIGNED_BYTE: 0x1401,\n\t\tUNSIGNED_SHORT: 0x1403,\n\t\tFLOAT: 0x1406,\n\t\tUNSIGNED_INT: 0x1405,\n\t\tARRAY_BUFFER: 0x8892,\n\t\tELEMENT_ARRAY_BUFFER: 0x8893,\n\n\t\tNEAREST: 0x2600,\n\t\tLINEAR: 0x2601,\n\t\tNEAREST_MIPMAP_NEAREST: 0x2700,\n\t\tLINEAR_MIPMAP_NEAREST: 0x2701,\n\t\tNEAREST_MIPMAP_LINEAR: 0x2702,\n\t\tLINEAR_MIPMAP_LINEAR: 0x2703,\n\n\t\tCLAMP_TO_EDGE: 33071,\n\t\tMIRRORED_REPEAT: 33648,\n\t\tREPEAT: 10497\n\t};\n\n\tvar THREE_TO_WEBGL = {};\n\n\tTHREE_TO_WEBGL[ NearestFilter ] = WEBGL_CONSTANTS.NEAREST;\n\tTHREE_TO_WEBGL[ NearestMipmapNearestFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;\n\tTHREE_TO_WEBGL[ NearestMipmapLinearFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;\n\tTHREE_TO_WEBGL[ LinearFilter ] = WEBGL_CONSTANTS.LINEAR;\n\tTHREE_TO_WEBGL[ LinearMipmapNearestFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;\n\tTHREE_TO_WEBGL[ LinearMipmapLinearFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;\n\n\tTHREE_TO_WEBGL[ ClampToEdgeWrapping ] = WEBGL_CONSTANTS.CLAMP_TO_EDGE;\n\tTHREE_TO_WEBGL[ RepeatWrapping ] = WEBGL_CONSTANTS.REPEAT;\n\tTHREE_TO_WEBGL[ MirroredRepeatWrapping ] = WEBGL_CONSTANTS.MIRRORED_REPEAT;\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\tposition: 'translation',\n\t\tquaternion: 'rotation',\n\t\tmorphTargetInfluences: 'weights'\n\t};\n\n\t// GLB constants\n\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\tvar GLB_HEADER_BYTES = 12;\n\tvar GLB_HEADER_MAGIC = 0x46546C67;\n\tvar GLB_VERSION = 2;\n\n\tvar GLB_CHUNK_PREFIX_BYTES = 8;\n\tvar GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\n\tvar GLB_CHUNK_TYPE_BIN = 0x004E4942;\n\n\t//------------------------------------------------------------------------------\n\t// Utility functions\n\t//------------------------------------------------------------------------------\n\n\t/**\n\t * Compare two arrays\n\t * @param  {Array} array1 Array 1 to compare\n\t * @param  {Array} array2 Array 2 to compare\n\t * @return {Boolean}        Returns true if both arrays are equal\n\t */\n\tfunction equalArray( array1, array2 ) {\n\n\t\treturn ( array1.length === array2.length ) && array1.every( function ( element, index ) {\n\n\t\t\treturn element === array2[ index ];\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Converts a string to an ArrayBuffer.\n\t * @param  {string} text\n\t * @return {ArrayBuffer}\n\t */\n\tfunction stringToArrayBuffer( text ) {\n\n\t\tif ( window.TextEncoder !== undefined ) {\n\n\t\t\treturn new TextEncoder().encode( text ).buffer;\n\n\t\t}\n\n\t\tvar array = new Uint8Array( new ArrayBuffer( text.length ) );\n\n\t\tfor ( var i = 0, il = text.length; i < il; i ++ ) {\n\n\t\t\tvar value = text.charCodeAt( i );\n\n\t\t\t// Replacing multi-byte character with space(0x20).\n\t\t\tarray[ i ] = value > 0xFF ? 0x20 : value;\n\n\t\t}\n\n\t\treturn array.buffer;\n\n\t}\n\n\t/**\n\t * Is identity matrix\n\t *\n\t * @param {Matrix4} matrix\n\t * @returns {Boolean} Returns true, if parameter is identity matrix\n\t */\n\tfunction isIdentityMatrix( matrix ) {\n\n\t\treturn equalArray( matrix.elements, [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ] );\n\n\t}\n\n\t/**\n\t * Get the min and max vectors from the given attribute\n\t * @param  {BufferAttribute} attribute Attribute to find the min/max in range from start to start + count\n\t * @param  {Integer} start\n\t * @param  {Integer} count\n\t * @return {Object} Object containing the `min` and `max` values (As an array of attribute.itemSize components)\n\t */\n\tfunction getMinMax( attribute, start, count ) {\n\n\t\tvar output = {\n\n\t\t\tmin: new Array( attribute.itemSize ).fill( Number.POSITIVE_INFINITY ),\n\t\t\tmax: new Array( attribute.itemSize ).fill( Number.NEGATIVE_INFINITY )\n\n\t\t};\n\n\t\tfor ( var i = start; i < start + count; i ++ ) {\n\n\t\t\tfor ( var a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\tvar value;\n\n\t\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\t}\n\n\t\t\t\toutput.min[ a ] = Math.min( output.min[ a ], value );\n\t\t\t\toutput.max[ a ] = Math.max( output.max[ a ], value );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\t/**\n\t * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n\t * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n\t *\n\t * @param {Integer} bufferSize The size the original buffer.\n\t * @returns {Integer} new buffer size with required padding.\n\t *\n\t */\n\tfunction getPaddedBufferSize( bufferSize ) {\n\n\t\treturn Math.ceil( bufferSize / 4 ) * 4;\n\n\t}\n\n\t/**\n\t * Returns a buffer aligned to 4-byte boundary.\n\t *\n\t * @param {ArrayBuffer} arrayBuffer Buffer to pad\n\t * @param {Integer} paddingByte (Optional)\n\t * @returns {ArrayBuffer} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n\t */\n\tfunction getPaddedArrayBuffer( arrayBuffer, paddingByte ) {\n\n\t\tpaddingByte = paddingByte || 0;\n\n\t\tvar paddedLength = getPaddedBufferSize( arrayBuffer.byteLength );\n\n\t\tif ( paddedLength !== arrayBuffer.byteLength ) {\n\n\t\t\tvar array = new Uint8Array( paddedLength );\n\t\t\tarray.set( new Uint8Array( arrayBuffer ) );\n\n\t\t\tif ( paddingByte !== 0 ) {\n\n\t\t\t\tfor ( var i = arrayBuffer.byteLength; i < paddedLength; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = paddingByte;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn array.buffer;\n\n\t\t}\n\n\t\treturn arrayBuffer;\n\n\t}\n\n\tvar cachedCanvas = null;\n\n\t/**\n\t * Writer\n\t */\n\tfunction GLTFWriter() {\n\n\t\tthis.plugins = [];\n\n\t\tthis.options = {};\n\t\tthis.pending = [];\n\t\tthis.buffers = [];\n\n\t\tthis.byteOffset = 0;\n\t\tthis.buffers = [];\n\t\tthis.nodeMap = new Map();\n\t\tthis.skins = [];\n\t\tthis.extensionsUsed = {};\n\n\t\tthis.uids = new Map();\n\t\tthis.uid = 0;\n\n\t\tthis.json = {\n\t\t\tasset: {\n\t\t\t\tversion: '2.0',\n\t\t\t\tgenerator: 'THREE.GLTFExporter'\n\t\t\t}\n\t\t};\n\n\t\tthis.cache = {\n\t\t\tmeshes: new Map(),\n\t\t\tattributes: new Map(),\n\t\t\tattributesNormalized: new Map(),\n\t\t\tmaterials: new Map(),\n\t\t\ttextures: new Map(),\n\t\t\timages: new Map()\n\t\t};\n\n\t}\n\n\tGLTFWriter.prototype = {\n\n\t\tconstructor: GLTFWriter,\n\n\t\tsetPlugins: function ( plugins ) {\n\n\t\t\tthis.plugins = plugins;\n\n\t\t},\n\n\t\t/**\n\t\t * Parse scenes and generate GLTF output\n\t\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t\t * @param  {Function} onDone  Callback on completed\n\t\t * @param  {Object} options options\n\t\t */\n\t\twrite: function ( input, onDone, options ) {\n\n\t\t\tthis.options = Object.assign( {}, {\n\t\t\t\t// default options\n\t\t\t\tbinary: false,\n\t\t\t\ttrs: false,\n\t\t\t\tonlyVisible: true,\n\t\t\t\ttruncateDrawRange: true,\n\t\t\t\tembedImages: true,\n\t\t\t\tmaxTextureSize: Infinity,\n\t\t\t\tanimations: [],\n\t\t\t\tincludeCustomExtensions: false\n\t\t\t}, options );\n\n\t\t\tif ( this.options.animations.length > 0 ) {\n\n\t\t\t\t// Only TRS properties, and not matrices, may be targeted by animation.\n\t\t\t\tthis.options.trs = true;\n\n\t\t\t}\n\n\t\t\tthis.processInput( input );\n\n\t\t\tvar writer = this;\n\n\t\t\tPromise.all( this.pending ).then( function () {\n\n\t\t\t\tvar buffers = writer.buffers;\n\t\t\t\tvar json = writer.json;\n\t\t\t\tvar options = writer.options;\n\t\t\t\tvar extensionsUsed = writer.extensionsUsed;\n\n\t\t\t\t// Merge buffers.\n\t\t\t\tvar blob = new Blob( buffers, { type: 'application/octet-stream' } );\n\n\t\t\t\t// Declare extensions.\n\t\t\t\tvar extensionsUsedList = Object.keys( extensionsUsed );\n\n\t\t\t\tif ( extensionsUsedList.length > 0 ) json.extensionsUsed = extensionsUsedList;\n\n\t\t\t\t// Update bytelength of the single buffer.\n\t\t\t\tif ( json.buffers && json.buffers.length > 0 ) json.buffers[ 0 ].byteLength = blob.size;\n\n\t\t\t\tif ( options.binary === true ) {\n\n\t\t\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\t\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\t\treader.readAsArrayBuffer( blob );\n\t\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\t\t// Binary chunk.\n\t\t\t\t\t\tvar binaryChunk = getPaddedArrayBuffer( reader.result );\n\t\t\t\t\t\tvar binaryChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\t\t\tbinaryChunkPrefix.setUint32( 0, binaryChunk.byteLength, true );\n\t\t\t\t\t\tbinaryChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_BIN, true );\n\n\t\t\t\t\t\t// JSON chunk.\n\t\t\t\t\t\tvar jsonChunk = getPaddedArrayBuffer( stringToArrayBuffer( JSON.stringify( json ) ), 0x20 );\n\t\t\t\t\t\tvar jsonChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\t\t\tjsonChunkPrefix.setUint32( 0, jsonChunk.byteLength, true );\n\t\t\t\t\t\tjsonChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_JSON, true );\n\n\t\t\t\t\t\t// GLB header.\n\t\t\t\t\t\tvar header = new ArrayBuffer( GLB_HEADER_BYTES );\n\t\t\t\t\t\tvar headerView = new DataView( header );\n\t\t\t\t\t\theaderView.setUint32( 0, GLB_HEADER_MAGIC, true );\n\t\t\t\t\t\theaderView.setUint32( 4, GLB_VERSION, true );\n\t\t\t\t\t\tvar totalByteLength = GLB_HEADER_BYTES\n\t\t\t\t\t\t\t+ jsonChunkPrefix.byteLength + jsonChunk.byteLength\n\t\t\t\t\t\t\t+ binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n\t\t\t\t\t\theaderView.setUint32( 8, totalByteLength, true );\n\n\t\t\t\t\t\tvar glbBlob = new Blob( [\n\t\t\t\t\t\t\theader,\n\t\t\t\t\t\t\tjsonChunkPrefix,\n\t\t\t\t\t\t\tjsonChunk,\n\t\t\t\t\t\t\tbinaryChunkPrefix,\n\t\t\t\t\t\t\tbinaryChunk\n\t\t\t\t\t\t], { type: 'application/octet-stream' } );\n\n\t\t\t\t\t\tvar glbReader = new window.FileReader();\n\t\t\t\t\t\tglbReader.readAsArrayBuffer( glbBlob );\n\t\t\t\t\t\tglbReader.onloadend = function () {\n\n\t\t\t\t\t\t\tonDone( glbReader.result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( json.buffers && json.buffers.length > 0 ) {\n\n\t\t\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\t\t\treader.readAsDataURL( blob );\n\t\t\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\t\t\tvar base64data = reader.result;\n\t\t\t\t\t\t\tjson.buffers[ 0 ].uri = base64data;\n\t\t\t\t\t\t\tonDone( json );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tonDone( json );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * Serializes a userData.\n\t\t *\n\t\t * @param {THREE.Object3D|THREE.Material} object\n\t\t * @param {Object} objectDef\n\t\t */\n\t\tserializeUserData: function ( object, objectDef ) {\n\n\t\t\tif ( Object.keys( object.userData ).length === 0 ) return;\n\n\t\t\tvar options = this.options;\n\t\t\tvar extensionsUsed = this.extensionsUsed;\n\n\t\t\ttry {\n\n\t\t\t\tvar json = JSON.parse( JSON.stringify( object.userData ) );\n\n\t\t\t\tif ( options.includeCustomExtensions && json.gltfExtensions ) {\n\n\t\t\t\t\tif ( objectDef.extensions === undefined ) objectDef.extensions = {};\n\n\t\t\t\t\tfor ( var extensionName in json.gltfExtensions ) {\n\n\t\t\t\t\t\tobjectDef.extensions[ extensionName ] = json.gltfExtensions[ extensionName ];\n\t\t\t\t\t\textensionsUsed[ extensionName ] = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete json.gltfExtensions;\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( json ).length > 0 ) objectDef.extras = json;\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: userData of \\'' + object.name + '\\' ' +\n\t\t\t\t\t'won\\'t be serialized because of JSON.stringify error - ' + error.message );\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Assign and return a temporal unique id for an object\n\t\t * especially which doesn't have .uuid\n\t\t * @param  {Object} object\n\t\t * @return {Integer}\n\t\t */\n\t\tgetUID: function ( object ) {\n\n\t\t\tif ( ! this.uids.has( object ) ) this.uids.set( object, this.uid ++ );\n\n\t\t\treturn this.uids.get( object );\n\n\t\t},\n\n\t\t/**\n\t\t * Checks if normal attribute values are normalized.\n\t\t *\n\t\t * @param {BufferAttribute} normal\n\t\t * @returns {Boolean}\n\t\t */\n\t\tisNormalizedNormalAttribute: function ( normal ) {\n\n\t\t\tvar cache = this.cache;\n\n\t\t\tif ( cache.attributesNormalized.has( normal ) ) return false;\n\n\t\t\tvar v = new Vector3();\n\n\t\t\tfor ( var i = 0, il = normal.count; i < il; i ++ ) {\n\n\t\t\t\t// 0.0005 is from glTF-validator\n\t\t\t\tif ( Math.abs( v.fromBufferAttribute( normal, i ).length() - 1.0 ) > 0.0005 ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\t/**\n\t\t * Creates normalized normal buffer attribute.\n\t\t *\n\t\t * @param {BufferAttribute} normal\n\t\t * @returns {BufferAttribute}\n\t\t *\n\t\t */\n\t\tcreateNormalizedNormalAttribute: function ( normal ) {\n\n\t\t\tvar cache = this.cache;\n\n\t\t\tif ( cache.attributesNormalized.has( normal ) )\treturn cache.attributesNormalized.get( normal );\n\n\t\t\tvar attribute = normal.clone();\n\t\t\tvar v = new Vector3();\n\n\t\t\tfor ( var i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t\tv.fromBufferAttribute( attribute, i );\n\n\t\t\t\tif ( v.x === 0 && v.y === 0 && v.z === 0 ) {\n\n\t\t\t\t\t// if values can't be normalized set (1, 0, 0)\n\t\t\t\t\tv.setX( 1.0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.normalize();\n\n\t\t\t\t}\n\n\t\t\t\tattribute.setXYZ( i, v.x, v.y, v.z );\n\n\t\t\t}\n\n\t\t\tcache.attributesNormalized.set( normal, attribute );\n\n\t\t\treturn attribute;\n\n\t\t},\n\n\t\t/**\n\t\t * Applies a texture transform, if present, to the map definition. Requires\n\t\t * the KHR_texture_transform extension.\n\t\t *\n\t\t * @param {Object} mapDef\n\t\t * @param {THREE.Texture} texture\n\t\t */\n\t\tapplyTextureTransform: function ( mapDef, texture ) {\n\n\t\t\tvar didTransform = false;\n\t\t\tvar transformDef = {};\n\n\t\t\tif ( texture.offset.x !== 0 || texture.offset.y !== 0 ) {\n\n\t\t\t\ttransformDef.offset = texture.offset.toArray();\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( texture.rotation !== 0 ) {\n\n\t\t\t\ttransformDef.rotation = texture.rotation;\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( texture.repeat.x !== 1 || texture.repeat.y !== 1 ) {\n\n\t\t\t\ttransformDef.scale = texture.repeat.toArray();\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( didTransform ) {\n\n\t\t\t\tmapDef.extensions = mapDef.extensions || {};\n\t\t\t\tmapDef.extensions[ 'KHR_texture_transform' ] = transformDef;\n\t\t\t\tthis.extensionsUsed[ 'KHR_texture_transform' ] = true;\n\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Process a buffer to append to the default one.\n\t\t * @param  {ArrayBuffer} buffer\n\t\t * @return {Integer}\n\t\t */\n\t\tprocessBuffer: function ( buffer ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar buffers = this.buffers;\n\n\t\t\tif ( ! json.buffers ) json.buffers = [ { byteLength: 0 } ];\n\n\t\t\t// All buffers are merged before export.\n\t\t\tbuffers.push( buffer );\n\n\t\t\treturn 0;\n\n\t\t},\n\n\t\t/**\n\t\t * Process and generate a BufferView\n\t\t * @param  {BufferAttribute} attribute\n\t\t * @param  {number} componentType\n\t\t * @param  {number} start\n\t\t * @param  {number} count\n\t\t * @param  {number} target (Optional) Target usage of the BufferView\n\t\t * @return {Object}\n\t\t */\n\t\tprocessBufferView: function ( attribute, componentType, start, count, target ) {\n\n\t\t\tvar json = this.json;\n\n\t\t\tif ( ! json.bufferViews ) json.bufferViews = [];\n\n\t\t\t// Create a new dataview and dump the attribute's array into it\n\n\t\t\tvar componentSize;\n\n\t\t\tif ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\t\tcomponentSize = 1;\n\n\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\t\tcomponentSize = 2;\n\n\t\t\t} else {\n\n\t\t\t\tcomponentSize = 4;\n\n\t\t\t}\n\n\t\t\tvar byteLength = getPaddedBufferSize( count * attribute.itemSize * componentSize );\n\t\t\tvar dataView = new DataView( new ArrayBuffer( byteLength ) );\n\t\t\tvar offset = 0;\n\n\t\t\tfor ( var i = start; i < start + count; i ++ ) {\n\n\t\t\t\tfor ( var a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\t\tvar value;\n\n\t\t\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( componentType === WEBGL_CONSTANTS.FLOAT ) {\n\n\t\t\t\t\t\tdataView.setFloat32( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_INT ) {\n\n\t\t\t\t\t\tdataView.setUint32( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\t\t\t\tdataView.setUint16( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\t\t\t\tdataView.setUint8( offset, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t\toffset += componentSize;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar bufferViewDef = {\n\n\t\t\t\tbuffer: this.processBuffer( dataView.buffer ),\n\t\t\t\tbyteOffset: this.byteOffset,\n\t\t\t\tbyteLength: byteLength\n\n\t\t\t};\n\n\t\t\tif ( target !== undefined ) bufferViewDef.target = target;\n\n\t\t\tif ( target === WEBGL_CONSTANTS.ARRAY_BUFFER ) {\n\n\t\t\t\t// Only define byteStride for vertex attributes.\n\t\t\t\tbufferViewDef.byteStride = attribute.itemSize * componentSize;\n\n\t\t\t}\n\n\t\t\tthis.byteOffset += byteLength;\n\n\t\t\tjson.bufferViews.push( bufferViewDef );\n\n\t\t\t// @TODO Merge bufferViews where possible.\n\t\t\tvar output = {\n\n\t\t\t\tid: json.bufferViews.length - 1,\n\t\t\t\tbyteLength: 0\n\n\t\t\t};\n\n\t\t\treturn output;\n\n\t\t},\n\n\t\t/**\n\t\t * Process and generate a BufferView from an image Blob.\n\t\t * @param {Blob} blob\n\t\t * @return {Promise<Integer>}\n\t\t */\n\t\tprocessBufferViewImage: function ( blob ) {\n\n\t\t\tvar writer = this;\n\t\t\tvar json = writer.json;\n\n\t\t\tif ( ! json.bufferViews ) json.bufferViews = [];\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\treader.readAsArrayBuffer( blob );\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\tvar buffer = getPaddedArrayBuffer( reader.result );\n\n\t\t\t\t\tvar bufferViewDef = {\n\t\t\t\t\t\tbuffer: writer.processBuffer( buffer ),\n\t\t\t\t\t\tbyteOffset: writer.byteOffset,\n\t\t\t\t\t\tbyteLength: buffer.byteLength\n\t\t\t\t\t};\n\n\t\t\t\t\twriter.byteOffset += buffer.byteLength;\n\t\t\t\t\tresolve( json.bufferViews.push( bufferViewDef ) - 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t},\n\n\t\t/**\n\t\t * Process attribute to generate an accessor\n\t\t * @param  {BufferAttribute} attribute Attribute to process\n\t\t * @param  {THREE.BufferGeometry} geometry (Optional) Geometry used for truncated draw range\n\t\t * @param  {Integer} start (Optional)\n\t\t * @param  {Integer} count (Optional)\n\t\t * @return {Integer|null} Index of the processed accessor on the \"accessors\" array\n\t\t */\n\t\tprocessAccessor: function ( attribute, geometry, start, count ) {\n\n\t\t\tvar options = this.options;\n\t\t\tvar json = this.json;\n\n\t\t\tvar types = {\n\n\t\t\t\t1: 'SCALAR',\n\t\t\t\t2: 'VEC2',\n\t\t\t\t3: 'VEC3',\n\t\t\t\t4: 'VEC4',\n\t\t\t\t16: 'MAT4'\n\n\t\t\t};\n\n\t\t\tvar componentType;\n\n\t\t\t// Detect the component type of the attribute array (float, uint or ushort)\n\t\t\tif ( attribute.array.constructor === Float32Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.FLOAT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint32Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_INT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint16Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_SHORT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint8Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_BYTE;\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Unsupported bufferAttribute component type.' );\n\n\t\t\t}\n\n\t\t\tif ( start === undefined ) start = 0;\n\t\t\tif ( count === undefined ) count = attribute.count;\n\n\t\t\t// @TODO Indexed buffer geometry with drawRange not supported yet\n\t\t\tif ( options.truncateDrawRange && geometry !== undefined && geometry.index === null ) {\n\n\t\t\t\tvar end = start + count;\n\t\t\t\tvar end2 = geometry.drawRange.count === Infinity\n\t\t\t\t\t? attribute.count\n\t\t\t\t\t: geometry.drawRange.start + geometry.drawRange.count;\n\n\t\t\t\tstart = Math.max( start, geometry.drawRange.start );\n\t\t\t\tcount = Math.min( end, end2 ) - start;\n\n\t\t\t\tif ( count < 0 ) count = 0;\n\n\t\t\t}\n\n\t\t\t// Skip creating an accessor if the attribute doesn't have data to export\n\t\t\tif ( count === 0 ) return null;\n\n\t\t\tvar minMax = getMinMax( attribute, start, count );\n\t\t\tvar bufferViewTarget;\n\n\t\t\t// If geometry isn't provided, don't infer the target usage of the bufferView. For\n\t\t\t// animation samplers, target must not be set.\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tbufferViewTarget = attribute === geometry.index ? WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER : WEBGL_CONSTANTS.ARRAY_BUFFER;\n\n\t\t\t}\n\n\t\t\tvar bufferView = this.processBufferView( attribute, componentType, start, count, bufferViewTarget );\n\n\t\t\tvar accessorDef = {\n\n\t\t\t\tbufferView: bufferView.id,\n\t\t\t\tbyteOffset: bufferView.byteOffset,\n\t\t\t\tcomponentType: componentType,\n\t\t\t\tcount: count,\n\t\t\t\tmax: minMax.max,\n\t\t\t\tmin: minMax.min,\n\t\t\t\ttype: types[ attribute.itemSize ]\n\n\t\t\t};\n\n\t\t\tif ( attribute.normalized === true ) accessorDef.normalized = true;\n\t\t\tif ( ! json.accessors ) json.accessors = [];\n\n\t\t\treturn json.accessors.push( accessorDef ) - 1;\n\n\t\t},\n\n\t\t/**\n\t\t * Process image\n\t\t * @param  {Image} image to process\n\t\t * @param  {Integer} format of the image (e.g. RGBFormat, RGBAFormat etc)\n\t\t * @param  {Boolean} flipY before writing out the image\n\t\t * @return {Integer}     Index of the processed texture in the \"images\" array\n\t\t */\n\t\tprocessImage: function ( image, format, flipY ) {\n\n\t\t\tvar writer = this;\n\t\t\tvar cache = writer.cache;\n\t\t\tvar json = writer.json;\n\t\t\tvar options = writer.options;\n\t\t\tvar pending = writer.pending;\n\n\t\t\tif ( ! cache.images.has( image ) ) cache.images.set( image, {} );\n\n\t\t\tvar cachedImages = cache.images.get( image );\n\t\t\tvar mimeType = format === RGBAFormat ? 'image/png' : 'image/jpeg';\n\t\t\tvar key = mimeType + ':flipY/' + flipY.toString();\n\n\t\t\tif ( cachedImages[ key ] !== undefined ) return cachedImages[ key ];\n\n\t\t\tif ( ! json.images ) json.images = [];\n\n\t\t\tvar imageDef = { mimeType: mimeType };\n\n\t\t\tif ( options.embedImages ) {\n\n\t\t\t\tvar canvas = cachedCanvas = cachedCanvas || document.createElement( 'canvas' );\n\n\t\t\t\tcanvas.width = Math.min( image.width, options.maxTextureSize );\n\t\t\t\tcanvas.height = Math.min( image.height, options.maxTextureSize );\n\n\t\t\t\tvar ctx = canvas.getContext( '2d' );\n\n\t\t\t\tif ( flipY === true ) {\n\n\t\t\t\t\tctx.translate( 0, canvas.height );\n\t\t\t\t\tctx.scale( 1, - 1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t\t( typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas ) ||\n\t\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\t\tctx.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( format !== RGBAFormat && format !== RGBFormat ) {\n\n\t\t\t\t\t\tconsole.error( 'GLTFExporter: Only RGB and RGBA formats are supported.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( image.width > options.maxTextureSize || image.height > options.maxTextureSize ) {\n\n\t\t\t\t\t\tconsole.warn( 'GLTFExporter: Image size is bigger than maxTextureSize', image );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar data = image.data;\n\n\t\t\t\t\tif ( format === RGBFormat ) {\n\n\t\t\t\t\t\tdata = new Uint8ClampedArray( image.height * image.width * 4 );\n\n\t\t\t\t\t\tfor ( var i = 0, j = 0; i < data.length; i += 4, j += 3 ) {\n\n\t\t\t\t\t\t\tdata[ i + 0 ] = image.data[ j + 0 ];\n\t\t\t\t\t\t\tdata[ i + 1 ] = image.data[ j + 1 ];\n\t\t\t\t\t\t\tdata[ i + 2 ] = image.data[ j + 2 ];\n\t\t\t\t\t\t\tdata[ i + 3 ] = 255;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.putImageData( new ImageData( data, image.width, image.height ), 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( options.binary === true ) {\n\n\t\t\t\t\tpending.push( new Promise( function ( resolve ) {\n\n\t\t\t\t\t\tcanvas.toBlob( function ( blob ) {\n\n\t\t\t\t\t\t\twriter.processBufferViewImage( blob ).then( function ( bufferViewIndex ) {\n\n\t\t\t\t\t\t\t\timageDef.bufferView = bufferViewIndex;\n\t\t\t\t\t\t\t\tresolve();\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}, mimeType );\n\n\t\t\t\t\t} ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\timageDef.uri = canvas.toDataURL( mimeType );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\timageDef.uri = image.src;\n\n\t\t\t}\n\n\t\t\tvar index = json.images.push( imageDef ) - 1;\n\t\t\tcachedImages[ key ] = index;\n\t\t\treturn index;\n\n\t\t},\n\n\t\t/**\n\t\t * Process sampler\n\t\t * @param  {Texture} map Texture to process\n\t\t * @return {Integer}     Index of the processed texture in the \"samplers\" array\n\t\t */\n\t\tprocessSampler: function ( map ) {\n\n\t\t\tvar json = this.json;\n\n\t\t\tif ( ! json.samplers ) json.samplers = [];\n\n\t\t\tvar samplerDef = {\n\t\t\t\tmagFilter: THREE_TO_WEBGL[ map.magFilter ],\n\t\t\t\tminFilter: THREE_TO_WEBGL[ map.minFilter ],\n\t\t\t\twrapS: THREE_TO_WEBGL[ map.wrapS ],\n\t\t\t\twrapT: THREE_TO_WEBGL[ map.wrapT ]\n\t\t\t};\n\n\t\t\treturn json.samplers.push( samplerDef ) - 1;\n\n\t\t},\n\n\t\t/**\n\t\t * Process texture\n\t\t * @param  {Texture} map Map to process\n\t\t * @return {Integer} Index of the processed texture in the \"textures\" array\n\t\t */\n\t\tprocessTexture: function ( map ) {\n\n\t\t\tvar cache = this.cache;\n\t\t\tvar json = this.json;\n\n\t\t\tif ( cache.textures.has( map ) ) return cache.textures.get( map );\n\n\t\t\tif ( ! json.textures ) json.textures = [];\n\n\t\t\tvar textureDef = {\n\t\t\t\tsampler: this.processSampler( map ),\n\t\t\t\tsource: this.processImage( map.image, map.format, map.flipY )\n\t\t\t};\n\n\t\t\tif ( map.name ) textureDef.name = map.name;\n\n\t\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\t\text.writeTexture && ext.writeTexture( map, textureDef );\n\n\t\t\t} );\n\n\t\t\tvar index = json.textures.push( textureDef ) - 1;\n\t\t\tcache.textures.set( map, index );\n\t\t\treturn index;\n\n\t\t},\n\n\t\t/**\n\t\t * Process material\n\t\t * @param  {THREE.Material} material Material to process\n\t\t * @return {Integer|null} Index of the processed material in the \"materials\" array\n\t\t */\n\t\tprocessMaterial: function ( material ) {\n\n\t\t\tvar cache = this.cache;\n\t\t\tvar json = this.json;\n\n\t\t\tif ( cache.materials.has( material ) ) return cache.materials.get( material );\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: THREE.ShaderMaterial not supported.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( ! json.materials ) json.materials = [];\n\n\t\t\t// @QUESTION Should we avoid including any attribute that has the default value?\n\t\t\tvar materialDef = {\tpbrMetallicRoughness: {} };\n\n\t\t\tif ( material.isMeshStandardMaterial !== true && material.isMeshBasicMaterial !== true ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.' );\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.baseColorFactor\n\t\t\tvar color = material.color.toArray().concat( [ material.opacity ] );\n\n\t\t\tif ( ! equalArray( color, [ 1, 1, 1, 1 ] ) ) {\n\n\t\t\t\tmaterialDef.pbrMetallicRoughness.baseColorFactor = color;\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshStandardMaterial ) {\n\n\t\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = material.metalness;\n\t\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = material.roughness;\n\n\t\t\t} else {\n\n\t\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = 0.5;\n\t\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = 0.5;\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.metallicRoughnessTexture\n\t\t\tif ( material.metalnessMap || material.roughnessMap ) {\n\n\t\t\t\tif ( material.metalnessMap === material.roughnessMap ) {\n\n\t\t\t\t\tvar metalRoughMapDef = { index: this.processTexture( material.metalnessMap ) };\n\t\t\t\t\tthis.applyTextureTransform( metalRoughMapDef, material.metalnessMap );\n\t\t\t\t\tmaterialDef.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.baseColorTexture or pbrSpecularGlossiness diffuseTexture\n\t\t\tif ( material.map ) {\n\n\t\t\t\tvar baseColorMapDef = { index: this.processTexture( material.map ) };\n\t\t\t\tthis.applyTextureTransform( baseColorMapDef, material.map );\n\t\t\t\tmaterialDef.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\n\n\t\t\t}\n\n\t\t\tif ( material.emissive ) {\n\n\t\t\t\t// emissiveFactor\n\t\t\t\tvar emissive = material.emissive.clone().multiplyScalar( material.emissiveIntensity ).toArray();\n\n\t\t\t\tif ( ! equalArray( emissive, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\t\tmaterialDef.emissiveFactor = emissive;\n\n\t\t\t\t}\n\n\t\t\t\t// emissiveTexture\n\t\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\t\tvar emissiveMapDef = { index: this.processTexture( material.emissiveMap ) };\n\t\t\t\t\tthis.applyTextureTransform( emissiveMapDef, material.emissiveMap );\n\t\t\t\t\tmaterialDef.emissiveTexture = emissiveMapDef;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normalTexture\n\t\t\tif ( material.normalMap ) {\n\n\t\t\t\tvar normalMapDef = { index: this.processTexture( material.normalMap ) };\n\n\t\t\t\tif ( material.normalScale && material.normalScale.x !== - 1 ) {\n\n\t\t\t\t\tif ( material.normalScale.x !== material.normalScale.y ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnormalMapDef.scale = material.normalScale.x;\n\n\t\t\t\t}\n\n\t\t\t\tthis.applyTextureTransform( normalMapDef, material.normalMap );\n\t\t\t\tmaterialDef.normalTexture = normalMapDef;\n\n\t\t\t}\n\n\t\t\t// occlusionTexture\n\t\t\tif ( material.aoMap ) {\n\n\t\t\t\tvar occlusionMapDef = {\n\t\t\t\t\tindex: this.processTexture( material.aoMap ),\n\t\t\t\t\ttexCoord: 1\n\t\t\t\t};\n\n\t\t\t\tif ( material.aoMapIntensity !== 1.0 ) {\n\n\t\t\t\t\tocclusionMapDef.strength = material.aoMapIntensity;\n\n\t\t\t\t}\n\n\t\t\t\tthis.applyTextureTransform( occlusionMapDef, material.aoMap );\n\t\t\t\tmaterialDef.occlusionTexture = occlusionMapDef;\n\n\t\t\t}\n\n\t\t\t// alphaMode\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\tmaterialDef.alphaMode = 'BLEND';\n\n\t\t\t} else {\n\n\t\t\t\tif ( material.alphaTest > 0.0 ) {\n\n\t\t\t\t\tmaterialDef.alphaMode = 'MASK';\n\t\t\t\t\tmaterialDef.alphaCutoff = material.alphaTest;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// doubleSided\n\t\t\tif ( material.side === DoubleSide ) materialDef.doubleSided = true;\n\t\t\tif ( material.name !== '' ) materialDef.name = material.name;\n\n\t\t\tthis.serializeUserData( material, materialDef );\n\n\t\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\t\text.writeMaterial && ext.writeMaterial( material, materialDef );\n\n\t\t\t} );\n\n\t\t\tvar index = json.materials.push( materialDef ) - 1;\n\t\t\tcache.materials.set( material, index );\n\t\t\treturn index;\n\n\t\t},\n\n\t\t/**\n\t\t * Process mesh\n\t\t * @param  {THREE.Mesh} mesh Mesh to process\n\t\t * @return {Integer|null} Index of the processed mesh in the \"meshes\" array\n\t\t */\n\t\tprocessMesh: function ( mesh ) {\n\n\t\t\tvar cache = this.cache;\n\t\t\tvar json = this.json;\n\n\t\t\tvar meshCacheKeyParts = [ mesh.geometry.uuid ];\n\n\t\t\tif ( Array.isArray( mesh.material ) ) {\n\n\t\t\t\tfor ( var i = 0, l = mesh.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tmeshCacheKeyParts.push( mesh.material[ i ].uuid\t);\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmeshCacheKeyParts.push( mesh.material.uuid );\n\n\t\t\t}\n\n\t\t\tvar meshCacheKey = meshCacheKeyParts.join( ':' );\n\n\t\t\tif ( cache.meshes.has( meshCacheKey ) ) return cache.meshes.get( meshCacheKey );\n\n\t\t\tvar geometry = mesh.geometry;\n\t\t\tvar mode;\n\n\t\t\t// Use the correct mode\n\t\t\tif ( mesh.isLineSegments ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINES;\n\n\t\t\t} else if ( mesh.isLineLoop ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINE_LOOP;\n\n\t\t\t} else if ( mesh.isLine ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINE_STRIP;\n\n\t\t\t} else if ( mesh.isPoints ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.POINTS;\n\n\t\t\t} else {\n\n\t\t\t\tmode = mesh.material.wireframe ? WEBGL_CONSTANTS.LINES : WEBGL_CONSTANTS.TRIANGLES;\n\n\t\t\t}\n\n\t\t\tif ( geometry.isBufferGeometry !== true ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.' );\n\n\t\t\t}\n\n\t\t\tvar meshDef = {};\n\t\t\tvar attributes = {};\n\t\t\tvar primitives = [];\n\t\t\tvar targets = [];\n\n\t\t\t// Conversion between attributes names in threejs and gltf spec\n\t\t\tvar nameConversion = {\n\t\t\t\tuv: 'TEXCOORD_0',\n\t\t\t\tuv2: 'TEXCOORD_1',\n\t\t\t\tcolor: 'COLOR_0',\n\t\t\t\tskinWeight: 'WEIGHTS_0',\n\t\t\t\tskinIndex: 'JOINTS_0'\n\t\t\t};\n\n\t\t\tvar originalNormal = geometry.getAttribute( 'normal' );\n\n\t\t\tif ( originalNormal !== undefined && ! this.isNormalizedNormalAttribute( originalNormal ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.' );\n\n\t\t\t\tgeometry.setAttribute( 'normal', this.createNormalizedNormalAttribute( originalNormal ) );\n\n\t\t\t}\n\n\t\t\t// @QUESTION Detect if .vertexColors = true?\n\t\t\t// For every attribute create an accessor\n\t\t\tvar modifiedAttribute = null;\n\n\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t// Ignore morph target attributes, which are exported later.\n\t\t\t\tif ( attributeName.substr( 0, 5 ) === 'morph' ) continue;\n\n\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\tattributeName = nameConversion[ attributeName ] || attributeName.toUpperCase();\n\n\t\t\t\t// Prefix all geometry attributes except the ones specifically\n\t\t\t\t// listed in the spec; non-spec attributes are considered custom.\n\t\t\t\tvar validVertexAttributes =\n\t\t\t\t\t\t/^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\n\n\t\t\t\tif ( ! validVertexAttributes.test( attributeName ) ) attributeName = '_' + attributeName;\n\n\t\t\t\tif ( cache.attributes.has( this.getUID( attribute ) ) ) {\n\n\t\t\t\t\tattributes[ attributeName ] = cache.attributes.get( this.getUID( attribute ) );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// JOINTS_0 must be UNSIGNED_BYTE or UNSIGNED_SHORT.\n\t\t\t\tmodifiedAttribute = null;\n\t\t\t\tvar array = attribute.array;\n\n\t\t\t\tif ( attributeName === 'JOINTS_0' &&\n\t\t\t\t\t! ( array instanceof Uint16Array ) &&\n\t\t\t\t\t! ( array instanceof Uint8Array ) ) {\n\n\t\t\t\t\tconsole.warn( 'GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.' );\n\t\t\t\t\tmodifiedAttribute = new BufferAttribute( new Uint16Array( array ), attribute.itemSize, attribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tvar accessor = this.processAccessor( modifiedAttribute || attribute, geometry );\n\n\t\t\t\tif ( accessor !== null ) {\n\n\t\t\t\t\tattributes[ attributeName ] = accessor;\n\t\t\t\t\tcache.attributes.set( this.getUID( attribute ), accessor );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( originalNormal !== undefined ) geometry.setAttribute( 'normal', originalNormal );\n\n\t\t\t// Skip if no exportable attributes found\n\t\t\tif ( Object.keys( attributes ).length === 0 ) return null;\n\n\t\t\t// Morph targets\n\t\t\tif ( mesh.morphTargetInfluences !== undefined && mesh.morphTargetInfluences.length > 0 ) {\n\n\t\t\t\tvar weights = [];\n\t\t\t\tvar targetNames = [];\n\t\t\t\tvar reverseDictionary = {};\n\n\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) {\n\n\t\t\t\t\tfor ( var key in mesh.morphTargetDictionary ) {\n\n\t\t\t\t\t\treverseDictionary[ mesh.morphTargetDictionary[ key ] ] = key;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0; i < mesh.morphTargetInfluences.length; ++ i ) {\n\n\t\t\t\t\tvar target = {};\n\t\t\t\t\tvar warned = false;\n\n\t\t\t\t\tfor ( var attributeName in geometry.morphAttributes ) {\n\n\t\t\t\t\t\t// glTF 2.0 morph supports only POSITION/NORMAL/TANGENT.\n\t\t\t\t\t\t// Three.js doesn't support TANGENT yet.\n\n\t\t\t\t\t\tif ( attributeName !== 'position' && attributeName !== 'normal' ) {\n\n\t\t\t\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'GLTFExporter: Only POSITION and NORMAL morph are supported.' );\n\t\t\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar attribute = geometry.morphAttributes[ attributeName ][ i ];\n\t\t\t\t\t\tvar gltfAttributeName = attributeName.toUpperCase();\n\n\t\t\t\t\t\t// Three.js morph attribute has absolute values while the one of glTF has relative values.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// glTF 2.0 Specification:\n\t\t\t\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#morph-targets\n\n\t\t\t\t\t\tvar baseAttribute = geometry.attributes[ attributeName ];\n\n\t\t\t\t\t\tif ( cache.attributes.has( this.getUID( attribute ) ) ) {\n\n\t\t\t\t\t\t\ttarget[ gltfAttributeName ] = cache.attributes.get( this.getUID( attribute ) );\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Clones attribute not to override\n\t\t\t\t\t\tvar relativeAttribute = attribute.clone();\n\n\t\t\t\t\t\tif ( ! geometry.morphTargetsRelative ) {\n\n\t\t\t\t\t\t\tfor ( var j = 0, jl = attribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\t\trelativeAttribute.setXYZ(\n\t\t\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\t\t\tattribute.getX( j ) - baseAttribute.getX( j ),\n\t\t\t\t\t\t\t\t\tattribute.getY( j ) - baseAttribute.getY( j ),\n\t\t\t\t\t\t\t\t\tattribute.getZ( j ) - baseAttribute.getZ( j )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget[ gltfAttributeName ] = this.processAccessor( relativeAttribute, geometry );\n\t\t\t\t\t\tcache.attributes.set( this.getUID( baseAttribute ), target[ gltfAttributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargets.push( target );\n\n\t\t\t\t\tweights.push( mesh.morphTargetInfluences[ i ] );\n\n\t\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) targetNames.push( reverseDictionary[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tmeshDef.weights = weights;\n\n\t\t\t\tif ( targetNames.length > 0 ) {\n\n\t\t\t\t\tmeshDef.extras = {};\n\t\t\t\t\tmeshDef.extras.targetNames = targetNames;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar isMultiMaterial = Array.isArray( mesh.material );\n\n\t\t\tif ( isMultiMaterial && geometry.groups.length === 0 ) return null;\n\n\t\t\tvar materials = isMultiMaterial ? mesh.material : [ mesh.material ];\n\t\t\tvar groups = isMultiMaterial ? geometry.groups : [ { materialIndex: 0, start: undefined, count: undefined } ];\n\n\t\t\tfor ( var i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tvar primitive = {\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tattributes: attributes,\n\t\t\t\t};\n\n\t\t\t\tthis.serializeUserData( geometry, primitive );\n\n\t\t\t\tif ( targets.length > 0 ) primitive.targets = targets;\n\n\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\tvar cacheKey = this.getUID( geometry.index );\n\n\t\t\t\t\tif ( groups[ i ].start !== undefined || groups[ i ].count !== undefined ) {\n\n\t\t\t\t\t\tcacheKey += ':' + groups[ i ].start + ':' + groups[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( cache.attributes.has( cacheKey ) ) {\n\n\t\t\t\t\t\tprimitive.indices = cache.attributes.get( cacheKey );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tprimitive.indices = this.processAccessor( geometry.index, geometry, groups[ i ].start, groups[ i ].count );\n\t\t\t\t\t\tcache.attributes.set( cacheKey, primitive.indices );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.indices === null ) delete primitive.indices;\n\n\t\t\t\t}\n\n\t\t\t\tvar material = this.processMaterial( materials[ groups[ i ].materialIndex ] );\n\n\t\t\t\tif ( material !== null ) primitive.material = material;\n\n\t\t\t\tprimitives.push( primitive );\n\n\t\t\t}\n\n\t\t\tmeshDef.primitives = primitives;\n\n\t\t\tif ( ! json.meshes ) json.meshes = [];\n\n\t\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\t\text.writeMesh && ext.writeMesh( mesh, meshDef );\n\n\t\t\t} );\n\n\t\t\tvar index = json.meshes.push( meshDef ) - 1;\n\t\t\tcache.meshes.set( meshCacheKey, index );\n\t\t\treturn index;\n\n\t\t},\n\n\t\t/**\n\t\t * Process camera\n\t\t * @param  {THREE.Camera} camera Camera to process\n\t\t * @return {Integer}      Index of the processed mesh in the \"camera\" array\n\t\t */\n\t\tprocessCamera: function ( camera ) {\n\n\t\t\tvar json = this.json;\n\n\t\t\tif ( ! json.cameras ) json.cameras = [];\n\n\t\t\tvar isOrtho = camera.isOrthographicCamera;\n\n\t\t\tvar cameraDef = {\n\t\t\t\ttype: isOrtho ? 'orthographic' : 'perspective'\n\t\t\t};\n\n\t\t\tif ( isOrtho ) {\n\n\t\t\t\tcameraDef.orthographic = {\n\t\t\t\t\txmag: camera.right * 2,\n\t\t\t\t\tymag: camera.top * 2,\n\t\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tcameraDef.perspective = {\n\t\t\t\t\taspectRatio: camera.aspect,\n\t\t\t\t\tyfov: MathUtils.degToRad( camera.fov ),\n\t\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\t// Question: Is saving \"type\" as name intentional?\n\t\t\tif ( camera.name !== '' ) cameraDef.name = camera.type;\n\n\t\t\treturn json.cameras.push( cameraDef ) - 1;\n\n\t\t},\n\n\t\t/**\n\t\t * Creates glTF animation entry from AnimationClip object.\n\t\t *\n\t\t * Status:\n\t\t * - Only properties listed in PATH_PROPERTIES may be animated.\n\t\t *\n\t\t * @param {THREE.AnimationClip} clip\n\t\t * @param {THREE.Object3D} root\n\t\t * @return {number|null}\n\t\t */\n\t\tprocessAnimation: function ( clip, root ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar nodeMap = this.nodeMap;\n\n\t\t\tif ( ! json.animations ) json.animations = [];\n\n\t\t\tclip = GLTFExporter.Utils.mergeMorphTargetTracks( clip.clone(), root );\n\n\t\t\tvar tracks = clip.tracks;\n\t\t\tvar channels = [];\n\t\t\tvar samplers = [];\n\n\t\t\tfor ( var i = 0; i < tracks.length; ++ i ) {\n\n\t\t\t\tvar track = tracks[ i ];\n\t\t\t\tvar trackBinding = PropertyBinding.parseTrackName( track.name );\n\t\t\t\tvar trackNode = PropertyBinding.findNode( root, trackBinding.nodeName );\n\t\t\t\tvar trackProperty = PATH_PROPERTIES[ trackBinding.propertyName ];\n\n\t\t\t\tif ( trackBinding.objectName === 'bones' ) {\n\n\t\t\t\t\tif ( trackNode.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\ttrackNode = trackNode.skeleton.getBoneByName( trackBinding.objectIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttrackNode = undefined;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! trackNode || ! trackProperty ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Could not export animation track \"%s\".', track.name );\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\tvar inputItemSize = 1;\n\t\t\t\tvar outputItemSize = track.values.length / track.times.length;\n\n\t\t\t\tif ( trackProperty === PATH_PROPERTIES.morphTargetInfluences ) {\n\n\t\t\t\t\toutputItemSize /= trackNode.morphTargetInfluences.length;\n\n\t\t\t\t}\n\n\t\t\t\tvar interpolation;\n\n\t\t\t\t// @TODO export CubicInterpolant(InterpolateSmooth) as CUBICSPLINE\n\n\t\t\t\t// Detecting glTF cubic spline interpolant by checking factory method's special property\n\t\t\t\t// GLTFCubicSplineInterpolant is a custom interpolant and track doesn't return\n\t\t\t\t// valid value from .getInterpolation().\n\t\t\t\tif ( track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true ) {\n\n\t\t\t\t\tinterpolation = 'CUBICSPLINE';\n\n\t\t\t\t\t// itemSize of CUBICSPLINE keyframe is 9\n\t\t\t\t\t// (VEC3 * 3: inTangent, splineVertex, and outTangent)\n\t\t\t\t\t// but needs to be stored as VEC3 so dividing by 3 here.\n\t\t\t\t\toutputItemSize /= 3;\n\n\t\t\t\t} else if ( track.getInterpolation() === InterpolateDiscrete ) {\n\n\t\t\t\t\tinterpolation = 'STEP';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinterpolation = 'LINEAR';\n\n\t\t\t\t}\n\n\t\t\t\tsamplers.push( {\n\t\t\t\t\tinput: this.processAccessor( new BufferAttribute( track.times, inputItemSize ) ),\n\t\t\t\t\toutput: this.processAccessor( new BufferAttribute( track.values, outputItemSize ) ),\n\t\t\t\t\tinterpolation: interpolation\n\t\t\t\t} );\n\n\t\t\t\tchannels.push( {\n\t\t\t\t\tsampler: samplers.length - 1,\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\tnode: nodeMap.get( trackNode ),\n\t\t\t\t\t\tpath: trackProperty\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tjson.animations.push( {\n\t\t\t\tname: clip.name || 'clip_' + json.animations.length,\n\t\t\t\tsamplers: samplers,\n\t\t\t\tchannels: channels\n\t\t\t} );\n\n\t\t\treturn json.animations.length - 1;\n\n\t\t},\n\n\t\t/**\n\t\t * @param {THREE.Object3D} object\n\t\t * @return {number|null}\n\t\t */\n\t\t processSkin: function ( object ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar nodeMap = this.nodeMap;\n\n\t\t\tvar node = json.nodes[ nodeMap.get( object ) ];\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton === undefined ) return null;\n\n\t\t\tvar rootJoint = object.skeleton.bones[ 0 ];\n\n\t\t\tif ( rootJoint === undefined ) return null;\n\n\t\t\tvar joints = [];\n\t\t\tvar inverseBindMatrices = new Float32Array( skeleton.bones.length * 16 );\n\t\t\tvar temporaryBoneInverse = new Matrix4();\n\n\t\t\tfor ( var i = 0; i < skeleton.bones.length; ++ i ) {\n\n\t\t\t\tjoints.push( nodeMap.get( skeleton.bones[ i ] ) );\n\t\t\t\ttemporaryBoneInverse.copy( skeleton.boneInverses[ i ] );\n\t\t\t\ttemporaryBoneInverse.multiply( object.bindMatrix ).toArray( inverseBindMatrices, i * 16 );\n\n\t\t\t}\n\n\t\t\tif ( json.skins === undefined ) json.skins = [];\n\n\t\t\tjson.skins.push( {\n\t\t\t\tinverseBindMatrices: this.processAccessor( new BufferAttribute( inverseBindMatrices, 16 ) ),\n\t\t\t\tjoints: joints,\n\t\t\t\tskeleton: nodeMap.get( rootJoint )\n\t\t\t} );\n\n\t\t\tvar skinIndex = node.skin = json.skins.length - 1;\n\n\t\t\treturn skinIndex;\n\n\t\t},\n\n\t\t/**\n\t\t * Process Object3D node\n\t\t * @param  {THREE.Object3D} node Object3D to processNode\n\t\t * @return {Integer} Index of the node in the nodes list\n\t\t */\n\t\tprocessNode: function ( object ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar options = this.options;\n\t\t\tvar nodeMap = this.nodeMap;\n\n\t\t\tif ( ! json.nodes ) json.nodes = [];\n\n\t\t\tvar nodeDef = {};\n\n\t\t\tif ( options.trs ) {\n\n\t\t\t\tvar rotation = object.quaternion.toArray();\n\t\t\t\tvar position = object.position.toArray();\n\t\t\t\tvar scale = object.scale.toArray();\n\n\t\t\t\tif ( ! equalArray( rotation, [ 0, 0, 0, 1 ] ) ) {\n\n\t\t\t\t\tnodeDef.rotation = rotation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! equalArray( position, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\t\tnodeDef.translation = position;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! equalArray( scale, [ 1, 1, 1 ] ) ) {\n\n\t\t\t\t\tnodeDef.scale = scale;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( object.matrixAutoUpdate ) {\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tif ( isIdentityMatrix( object.matrix ) === false ) {\n\n\t\t\t\t\tnodeDef.matrix = object.matrix.elements;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// We don't export empty strings name because it represents no-name in Three.js.\n\t\t\tif ( object.name !== '' ) nodeDef.name = String( object.name );\n\n\t\t\tthis.serializeUserData( object, nodeDef );\n\n\t\t\tif ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tvar meshIndex = this.processMesh( object );\n\n\t\t\t\tif ( meshIndex !== null ) nodeDef.mesh = meshIndex;\n\n\t\t\t} else if ( object.isCamera ) {\n\n\t\t\t\tnodeDef.camera = this.processCamera( object );\n\n\t\t\t}\n\n\t\t\tif ( object.isSkinnedMesh ) this.skins.push( object );\n\n\t\t\tif ( object.children.length > 0 ) {\n\n\t\t\t\tvar children = [];\n\n\t\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar child = object.children[ i ];\n\n\t\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\t\tvar nodeIndex = this.processNode( child );\n\n\t\t\t\t\t\tif ( nodeIndex !== null ) children.push( nodeIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( children.length > 0 ) nodeDef.children = children;\n\n\t\t\t}\n\n\t\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\t\text.writeNode && ext.writeNode( object, nodeDef );\n\n\t\t\t} );\n\n\t\t\tvar nodeIndex = json.nodes.push( nodeDef ) - 1;\n\t\t\tnodeMap.set( object, nodeIndex );\n\t\t\treturn nodeIndex;\n\n\t\t},\n\n\t\t/**\n\t\t * Process Scene\n\t\t * @param  {Scene} node Scene to process\n\t\t */\n\t\tprocessScene: function ( scene ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar options = this.options;\n\n\t\t\tif ( ! json.scenes ) {\n\n\t\t\t\tjson.scenes = [];\n\t\t\t\tjson.scene = 0;\n\n\t\t\t}\n\n\t\t\tvar sceneDef = {};\n\n\t\t\tif ( scene.name !== '' ) sceneDef.name = scene.name;\n\n\t\t\tjson.scenes.push( sceneDef );\n\n\t\t\tvar nodes = [];\n\n\t\t\tfor ( var i = 0, l = scene.children.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = scene.children[ i ];\n\n\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\tvar nodeIndex = this.processNode( child );\n\n\t\t\t\t\tif ( nodeIndex !== null ) nodes.push( nodeIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodes.length > 0 ) sceneDef.nodes = nodes;\n\n\t\t\tthis.serializeUserData( scene, sceneDef );\n\n\t\t},\n\n\t\t/**\n\t\t * Creates a Scene to hold a list of objects and parse it\n\t\t * @param  {Array} objects List of objects to process\n\t\t */\n\t\tprocessObjects: function ( objects ) {\n\n\t\t\tvar scene = new Scene();\n\t\t\tscene.name = 'AuxScene';\n\n\t\t\tfor ( var i = 0; i < objects.length; i ++ ) {\n\n\t\t\t\t// We push directly to children instead of calling `add` to prevent\n\t\t\t\t// modify the .parent and break its original scene and hierarchy\n\t\t\t\tscene.children.push( objects[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.processScene( scene );\n\n\t\t},\n\n\t\t/**\n\t\t * @param {THREE.Object3D|Array<THREE.Object3D>} input\n\t\t */\n\t\tprocessInput: function ( input ) {\n\n\t\t\tvar options = this.options;\n\n\t\t\tinput = input instanceof Array ? input : [ input ];\n\n\t\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\t\text.beforeParse && ext.beforeParse( input );\n\n\t\t\t} );\n\n\t\t\tvar objectsWithoutScene = [];\n\n\t\t\tfor ( var i = 0; i < input.length; i ++ ) {\n\n\t\t\t\tif ( input[ i ] instanceof Scene ) {\n\n\t\t\t\t\tthis.processScene( input[ i ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tobjectsWithoutScene.push( input[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( objectsWithoutScene.length > 0 ) this.processObjects( objectsWithoutScene );\n\n\t\t\tfor ( var i = 0; i < this.skins.length; ++ i ) {\n\n\t\t\t\tthis.processSkin( this.skins[ i ] );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < options.animations.length; ++ i ) {\n\n\t\t\t\tthis.processAnimation( options.animations[ i ], input[ 0 ] );\n\n\t\t\t}\n\n\t\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\t\text.afterParse && ext.afterParse( input );\n\n\t\t\t} );\n\n\t\t},\n\n\t\t_invokeAll: function ( func ) {\n\n\t\t\tfor ( var i = 0, il = this.plugins.length; i < il; i ++ ) {\n\n\t\t\t\tfunc( this.plugins[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightExtension( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_lights_punctual';\n\n\t}\n\n\tGLTFLightExtension.prototype = {\n\n\t\tconstructor: GLTFLightExtension,\n\n\t\twriteNode: function ( light, nodeDef ) {\n\n\t\t\tif ( ! light.isLight ) return;\n\n\t\t\tif ( ! light.isDirectionalLight && ! light.isPointLight && ! light.isSpotLight ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Only directional, point, and spot lights are supported.', light );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar writer = this.writer;\n\t\t\tvar json = writer.json;\n\t\t\tvar extensionsUsed = writer.extensionsUsed;\n\n\t\t\tvar lightDef = {};\n\n\t\t\tif ( light.name ) lightDef.name = light.name;\n\n\t\t\tlightDef.color = light.color.toArray();\n\n\t\t\tlightDef.intensity = light.intensity;\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tlightDef.type = 'directional';\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tlightDef.type = 'point';\n\n\t\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tlightDef.type = 'spot';\n\n\t\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t\t\tlightDef.spot = {};\n\t\t\t\tlightDef.spot.innerConeAngle = ( light.penumbra - 1.0 ) * light.angle * - 1.0;\n\t\t\t\tlightDef.spot.outerConeAngle = light.angle;\n\n\t\t\t}\n\n\t\t\tif ( light.decay !== undefined && light.decay !== 2 ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, '\n\t\t\t\t\t+ 'and expects light.decay=2.' );\n\n\t\t\t}\n\n\t\t\tif ( light.target\n\t\t\t\t\t&& ( light.target.parent !== light\n\t\t\t\t\t|| light.target.position.x !== 0\n\t\t\t\t\t|| light.target.position.y !== 0\n\t\t\t\t\t|| light.target.position.z !== - 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Light direction may be lost. For best results, '\n\t\t\t\t\t+ 'make light.target a child of the light with position 0,0,-1.' );\n\n\t\t\t}\n\n\t\t\tif ( ! extensionsUsed[ this.name ] ) {\n\n\t\t\t\tjson.extensions = json.extensions || {};\n\t\t\t\tjson.extensions[ this.name ] = { lights: [] };\n\t\t\t\textensionsUsed[ this.name ] = true;\n\n\t\t\t}\n\n\t\t\tvar lights = json.extensions[ this.name ].lights;\n\t\t\tlights.push( lightDef );\n\n\t\t\tnodeDef.extensions = nodeDef.extensions || {};\n\t\t\tnodeDef.extensions[ this.name ] = { light: lights.length - 1 };\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_unlit';\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype = {\n\n\t\tconstructor: GLTFMaterialsUnlitExtension,\n\n\t\twriteMaterial: function ( material, materialDef ) {\n\n\t\t\tif ( ! material.isMeshBasicMaterial ) return;\n\n\t\t\tvar writer = this.writer;\n\t\t\tvar extensionsUsed = writer.extensionsUsed;\n\n\t\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\t\tmaterialDef.extensions[ this.name ] = {};\n\n\t\t\textensionsUsed[ this.name ] = true;\n\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = 0.0;\n\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = 0.9;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\tfunction GLTFMaterialsPBRSpecularGlossiness( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_pbrSpecularGlossiness';\n\n\t}\n\n\tGLTFMaterialsPBRSpecularGlossiness.prototype = {\n\n\t\tconstructor: GLTFMaterialsPBRSpecularGlossiness,\n\n\t\twriteMaterial: function ( material, materialDef ) {\n\n\t\t\tif ( ! material.isGLTFSpecularGlossinessMaterial ) return;\n\n\t\t\tvar writer = this.writer;\n\t\t\tvar extensionsUsed = writer.extensionsUsed;\n\n\t\t\tvar extensionDef = {};\n\n\t\t\tif ( materialDef.pbrMetallicRoughness.baseColorFactor ) {\n\n\t\t\t\textensionDef.diffuseFactor = materialDef.pbrMetallicRoughness.baseColorFactor;\n\n\t\t\t}\n\n\t\t\tvar specularFactor = [ 1, 1, 1 ];\n\t\t\tmaterial.specular.toArray( specularFactor, 0 );\n\t\t\textensionDef.specularFactor = specularFactor;\n\t\t\textensionDef.glossinessFactor = material.glossiness;\n\n\t\t\tif ( materialDef.pbrMetallicRoughness.baseColorTexture ) {\n\n\t\t\t\textensionDef.diffuseTexture = materialDef.pbrMetallicRoughness.baseColorTexture;\n\n\t\t\t}\n\n\t\t\tif ( material.specularMap ) {\n\n\t\t\t\tvar specularMapDef = { index: writer.processTexture( material.specularMap ) };\n\t\t\t\twriter.applyTextureTransform( specularMapDef, material.specularMap );\n\t\t\t\textensionDef.specularGlossinessTexture = specularMapDef;\n\n\t\t\t}\n\n\t\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\t\t\textensionsUsed[ this.name ] = true;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Static utility functions\n\t */\n\tGLTFExporter.Utils = {\n\n\t\tinsertKeyframe: function ( track, time ) {\n\n\t\t\tvar tolerance = 0.001; // 1ms\n\t\t\tvar valueSize = track.getValueSize();\n\n\t\t\tvar times = new track.TimeBufferType( track.times.length + 1 );\n\t\t\tvar values = new track.ValueBufferType( track.values.length + valueSize );\n\t\t\tvar interpolant = track.createInterpolant( new track.ValueBufferType( valueSize ) );\n\n\t\t\tvar index;\n\n\t\t\tif ( track.times.length === 0 ) {\n\n\t\t\t\ttimes[ 0 ] = time;\n\n\t\t\t\tfor ( var i = 0; i < valueSize; i ++ ) {\n\n\t\t\t\t\tvalues[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t\tindex = 0;\n\n\t\t\t} else if ( time < track.times[ 0 ] ) {\n\n\t\t\t\tif ( Math.abs( track.times[ 0 ] - time ) < tolerance ) return 0;\n\n\t\t\t\ttimes[ 0 ] = time;\n\t\t\t\ttimes.set( track.times, 1 );\n\n\t\t\t\tvalues.set( interpolant.evaluate( time ), 0 );\n\t\t\t\tvalues.set( track.values, valueSize );\n\n\t\t\t\tindex = 0;\n\n\t\t\t} else if ( time > track.times[ track.times.length - 1 ] ) {\n\n\t\t\t\tif ( Math.abs( track.times[ track.times.length - 1 ] - time ) < tolerance ) {\n\n\t\t\t\t\treturn track.times.length - 1;\n\n\t\t\t\t}\n\n\t\t\t\ttimes[ times.length - 1 ] = time;\n\t\t\t\ttimes.set( track.times, 0 );\n\n\t\t\t\tvalues.set( track.values, 0 );\n\t\t\t\tvalues.set( interpolant.evaluate( time ), track.values.length );\n\n\t\t\t\tindex = times.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < track.times.length; i ++ ) {\n\n\t\t\t\t\tif ( Math.abs( track.times[ i ] - time ) < tolerance ) return i;\n\n\t\t\t\t\tif ( track.times[ i ] < time && track.times[ i + 1 ] > time ) {\n\n\t\t\t\t\t\ttimes.set( track.times.slice( 0, i + 1 ), 0 );\n\t\t\t\t\t\ttimes[ i + 1 ] = time;\n\t\t\t\t\t\ttimes.set( track.times.slice( i + 1 ), i + 2 );\n\n\t\t\t\t\t\tvalues.set( track.values.slice( 0, ( i + 1 ) * valueSize ), 0 );\n\t\t\t\t\t\tvalues.set( interpolant.evaluate( time ), ( i + 1 ) * valueSize );\n\t\t\t\t\t\tvalues.set( track.values.slice( ( i + 1 ) * valueSize ), ( i + 2 ) * valueSize );\n\n\t\t\t\t\t\tindex = i + 1;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttrack.times = times;\n\t\t\ttrack.values = values;\n\n\t\t\treturn index;\n\n\t\t},\n\n\t\tmergeMorphTargetTracks: function ( clip, root ) {\n\n\t\t\tvar tracks = [];\n\t\t\tvar mergedTracks = {};\n\t\t\tvar sourceTracks = clip.tracks;\n\n\t\t\tfor ( var i = 0; i < sourceTracks.length; ++ i ) {\n\n\t\t\t\tvar sourceTrack = sourceTracks[ i ];\n\t\t\t\tvar sourceTrackBinding = PropertyBinding.parseTrackName( sourceTrack.name );\n\t\t\t\tvar sourceTrackNode = PropertyBinding.findNode( root, sourceTrackBinding.nodeName );\n\n\t\t\t\tif ( sourceTrackBinding.propertyName !== 'morphTargetInfluences' || sourceTrackBinding.propertyIndex === undefined ) {\n\n\t\t\t\t\t// Tracks that don't affect morph targets, or that affect all morph targets together, can be left as-is.\n\t\t\t\t\ttracks.push( sourceTrack );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tif ( sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete\n\t\t\t\t\t&& sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear ) {\n\n\t\t\t\t\tif ( sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\t\t\t// This should never happen, because glTF morph target animations\n\t\t\t\t\t\t// affect all targets already.\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.' );\n\n\t\t\t\t\tsourceTrack = sourceTrack.clone();\n\t\t\t\t\tsourceTrack.setInterpolation( InterpolateLinear );\n\n\t\t\t\t}\n\n\t\t\t\tvar targetCount = sourceTrackNode.morphTargetInfluences.length;\n\t\t\t\tvar targetIndex = sourceTrackNode.morphTargetDictionary[ sourceTrackBinding.propertyIndex ];\n\n\t\t\t\tif ( targetIndex === undefined ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Morph target name not found: ' + sourceTrackBinding.propertyIndex );\n\n\t\t\t\t}\n\n\t\t\t\tvar mergedTrack;\n\n\t\t\t\t// If this is the first time we've seen this object, create a new\n\t\t\t\t// track to store merged keyframe data for each morph target.\n\t\t\t\tif ( mergedTracks[ sourceTrackNode.uuid ] === undefined ) {\n\n\t\t\t\t\tmergedTrack = sourceTrack.clone();\n\n\t\t\t\t\tvar values = new mergedTrack.ValueBufferType( targetCount * mergedTrack.times.length );\n\n\t\t\t\t\tfor ( var j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\t\t\tvalues[ j * targetCount + targetIndex ] = mergedTrack.values[ j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// We need to take into consideration the intended target node\n\t\t\t\t\t// of our original un-merged morphTarget animation.\n\t\t\t\t\tmergedTrack.name = ( sourceTrackBinding.nodeName || '' ) + '.morphTargetInfluences';\n\t\t\t\t\tmergedTrack.values = values;\n\n\t\t\t\t\tmergedTracks[ sourceTrackNode.uuid ] = mergedTrack;\n\t\t\t\t\ttracks.push( mergedTrack );\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tvar sourceInterpolant = sourceTrack.createInterpolant( new sourceTrack.ValueBufferType( 1 ) );\n\n\t\t\t\tmergedTrack = mergedTracks[ sourceTrackNode.uuid ];\n\n\t\t\t\t// For every existing keyframe of the merged track, write a (possibly\n\t\t\t\t// interpolated) value from the source track.\n\t\t\t\tfor ( var j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\t\tmergedTrack.values[ j * targetCount + targetIndex ] = sourceInterpolant.evaluate( mergedTrack.times[ j ] );\n\n\t\t\t\t}\n\n\t\t\t\t// For every existing keyframe of the source track, write a (possibly\n\t\t\t\t// new) keyframe to the merged track. Values from the previous loop may\n\t\t\t\t// be written again, but keyframes are de-duplicated.\n\t\t\t\tfor ( var j = 0; j < sourceTrack.times.length; j ++ ) {\n\n\t\t\t\t\tvar keyframeIndex = this.insertKeyframe( mergedTrack, sourceTrack.times[ j ] );\n\t\t\t\t\tmergedTrack.values[ keyframeIndex * targetCount + targetIndex ] = sourceTrack.values[ j ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tclip.tracks = tracks;\n\n\t\t\treturn clip;\n\n\t\t}\n\n\t};\n\n\treturn GLTFExporter;\n\n} )();\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $correlatedObjects = Symbol('correlatedObjects');\nconst $sourceObject = Symbol('sourceObject');\nconst $onUpdate = Symbol('onUpdate');\n/**\n * A SerializableThreeDOMElement is the common primitive of all scene graph\n * elements that have been facaded in the host execution context. It adds\n * a common interface to these elements in support of convenient\n * serializability.\n */\nclass ThreeDOMElement {\n    constructor(onUpdate, element, correlatedObjects = null) {\n        this[$onUpdate] = onUpdate;\n        this[$sourceObject] = element;\n        this[$correlatedObjects] = correlatedObjects;\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$3, _b$2;\nconst loader = new ImageLoader();\nconst $threeTextures$1 = Symbol('threeTextures');\nconst $uri = Symbol('uri');\nconst $bufferViewImages = Symbol('bufferViewImages');\n/**\n * Image facade implementation for Three.js textures\n */\nclass Image$1 extends ThreeDOMElement {\n    constructor(onUpdate, image, correlatedTextures) {\n        super(onUpdate, image, correlatedTextures);\n        this[_a$3] = undefined;\n        this[_b$2] = new WeakMap();\n        if (image.uri != null) {\n            this[$uri] = image.uri;\n        }\n        if (image.bufferView != null) {\n            for (const texture of correlatedTextures) {\n                this[$bufferViewImages].set(texture, texture.image);\n            }\n        }\n    }\n    get [$threeTextures$1]() {\n        return this[$correlatedObjects];\n    }\n    get name() {\n        return this[$sourceObject].name || '';\n    }\n    get uri() {\n        return this[$uri];\n    }\n    get type() {\n        return this.uri != null ? 'external' : 'embedded';\n    }\n    async setURI(uri) {\n        this[$uri] = uri;\n        const image = await new Promise((resolve, reject) => {\n            loader.load(uri, resolve, undefined, reject);\n        });\n        for (const texture of this[$threeTextures$1]) {\n            // If the URI is set to null but the Image had an associated buffer view\n            // (this would happen if it started out as embedded), then fall back to\n            // the cached object URL created by GLTFLoader:\n            if (image == null &&\n                this[$sourceObject].bufferView != null) {\n                texture.image = this[$bufferViewImages].get(texture);\n            }\n            else {\n                texture.image = image;\n            }\n            texture.needsUpdate = true;\n        }\n        this[$onUpdate]();\n    }\n}\n_a$3 = $uri, _b$2 = $bufferViewImages;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst isMinFilter = (() => {\n    const minFilterValues = [9728, 9729, 9984, 9985, 9986, 9987];\n    return (value) => minFilterValues.indexOf(value) > -1;\n})();\nconst isMagFilter = (() => {\n    const magFilterValues = [9728, 9729];\n    return (value) => magFilterValues.indexOf(value) > -1;\n})();\nconst isWrapMode = (() => {\n    const wrapModes = [33071, 33648, 10497];\n    return (value) => wrapModes.indexOf(value) > -1;\n})();\nconst isValidSamplerValue = (property, value) => {\n    switch (property) {\n        case 'minFilter':\n            return isMinFilter(value);\n        case 'magFilter':\n            return isMagFilter(value);\n        case 'wrapS':\n        case 'wrapT':\n            return isWrapMode(value);\n        default:\n            throw new Error(`Cannot configure property \"${property}\" on Sampler`);\n    }\n};\nconst $threeTextures = Symbol('threeTextures');\nconst $setProperty = Symbol('setProperty');\n/**\n * Sampler facade implementation for Three.js textures\n */\nclass Sampler extends ThreeDOMElement {\n    get [$threeTextures]() {\n        return this[$correlatedObjects];\n    }\n    constructor(onUpdate, sampler, correlatedTextures) {\n        // These defaults represent a convergence of glTF defaults for wrap mode and\n        // Three.js defaults for filters. Per glTF 2.0 spec, a renderer may choose\n        // its own defaults for filters.\n        // @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#reference-sampler\n        // @see https://threejs.org/docs/#api/en/textures/Texture\n        if (sampler.minFilter == null) {\n            sampler.minFilter = 9987;\n        }\n        if (sampler.magFilter == null) {\n            sampler.magFilter = 9729;\n        }\n        if (sampler.wrapS == null) {\n            sampler.wrapS = 10497;\n        }\n        if (sampler.wrapT == null) {\n            sampler.wrapT = 10497;\n        }\n        super(onUpdate, sampler, correlatedTextures);\n    }\n    get name() {\n        return this[$sourceObject].name || '';\n    }\n    get minFilter() {\n        return this[$sourceObject].minFilter;\n    }\n    get magFilter() {\n        return this[$sourceObject].magFilter;\n    }\n    get wrapS() {\n        return this[$sourceObject].wrapS;\n    }\n    get wrapT() {\n        return this[$sourceObject].wrapT;\n    }\n    setMinFilter(filter) {\n        this[$setProperty]('minFilter', filter);\n    }\n    setMagFilter(filter) {\n        this[$setProperty]('magFilter', filter);\n    }\n    setWrapS(mode) {\n        this[$setProperty]('wrapS', mode);\n    }\n    setWrapT(mode) {\n        this[$setProperty]('wrapT', mode);\n    }\n    [$setProperty](property, value) {\n        const sampler = this[$sourceObject];\n        if (isValidSamplerValue(property, value)) {\n            sampler[property] = value;\n            for (const texture of this[$threeTextures]) {\n                texture[property] = value;\n                texture.needsUpdate = true;\n            }\n        }\n        this[$onUpdate]();\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $source = Symbol('source');\nconst $sampler = Symbol('sampler');\n/**\n * Material facade implementation for Three.js materials\n */\nclass Texture extends ThreeDOMElement {\n    constructor(onUpdate, gltf, texture, correlatedTextures) {\n        super(onUpdate, texture, correlatedTextures);\n        const { sampler: samplerIndex, source: imageIndex } = texture;\n        const sampler = (gltf.samplers != null && samplerIndex != null) ?\n            gltf.samplers[samplerIndex] :\n            {};\n        this[$sampler] = new Sampler(onUpdate, sampler, correlatedTextures);\n        if (gltf.images != null && imageIndex != null) {\n            const image = gltf.images[imageIndex];\n            if (image != null) {\n                this[$source] = new Image$1(onUpdate, image, correlatedTextures);\n            }\n        }\n    }\n    get name() {\n        return this[$sourceObject].name || '';\n    }\n    get sampler() {\n        return this[$sampler];\n    }\n    get source() {\n        return this[$source];\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $texture = Symbol('texture');\n/**\n * TextureInfo facade implementation for Three.js materials\n */\nclass TextureInfo extends ThreeDOMElement {\n    constructor(onUpdate, gltf, textureInfo, correlatedTextures) {\n        super(onUpdate, textureInfo, correlatedTextures);\n        const { index: textureIndex } = textureInfo;\n        const texture = gltf.textures[textureIndex];\n        if (texture != null) {\n            this[$texture] = new Texture(onUpdate, gltf, texture, correlatedTextures);\n        }\n    }\n    get texture() {\n        return this[$texture];\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$2, _b$1;\nconst $threeMaterials = Symbol('threeMaterials');\nconst $baseColorTexture = Symbol('baseColorTexture');\nconst $metallicRoughnessTexture = Symbol('metallicRoughnessTexture');\n/**\n * PBR material properties facade implementation for Three.js materials\n */\nclass PBRMetallicRoughness extends ThreeDOMElement {\n    constructor(onUpdate, gltf, pbrMetallicRoughness, correlatedMaterials) {\n        super(onUpdate, pbrMetallicRoughness, correlatedMaterials);\n        this[_a$2] = null;\n        this[_b$1] = null;\n        // Assign glTF default values\n        if (pbrMetallicRoughness.baseColorFactor == null) {\n            pbrMetallicRoughness.baseColorFactor = [1, 1, 1, 1];\n        }\n        if (pbrMetallicRoughness.roughnessFactor == null) {\n            pbrMetallicRoughness.roughnessFactor = 0;\n        }\n        if (pbrMetallicRoughness.metallicFactor == null) {\n            pbrMetallicRoughness.metallicFactor = 0;\n        }\n        const { baseColorTexture, metallicRoughnessTexture } = pbrMetallicRoughness;\n        const baseColorTextures = new Set();\n        const metallicRoughnessTextures = new Set();\n        for (const material of correlatedMaterials) {\n            if (baseColorTexture != null && material.map != null) {\n                baseColorTextures.add(material.map);\n            }\n            // NOTE: GLTFLoader users the same texture for metalnessMap and\n            // roughnessMap in this case\n            // @see https://github.com/mrdoob/three.js/blob/b4473c25816df4a09405c7d887d5c418ef47ee76/examples/js/loaders/GLTFLoader.js#L2173-L2174\n            if (metallicRoughnessTexture != null && material.metalnessMap != null) {\n                metallicRoughnessTextures.add(material.metalnessMap);\n            }\n        }\n        if (baseColorTextures.size > 0) {\n            this[$baseColorTexture] =\n                new TextureInfo(onUpdate, gltf, baseColorTexture, baseColorTextures);\n        }\n        if (metallicRoughnessTextures.size > 0) {\n            this[$metallicRoughnessTexture] = new TextureInfo(onUpdate, gltf, metallicRoughnessTexture, metallicRoughnessTextures);\n        }\n    }\n    get [(_a$2 = $baseColorTexture, _b$1 = $metallicRoughnessTexture, $threeMaterials)]() {\n        return this[$correlatedObjects];\n    }\n    get baseColorFactor() {\n        return this[$sourceObject].baseColorFactor;\n    }\n    get metallicFactor() {\n        return this[$sourceObject].metallicFactor;\n    }\n    get roughnessFactor() {\n        return this[$sourceObject].roughnessFactor;\n    }\n    get baseColorTexture() {\n        return this[$baseColorTexture];\n    }\n    get metallicRoughnessTexture() {\n        return this[$metallicRoughnessTexture];\n    }\n    setBaseColorFactor(rgba) {\n        for (const material of this[$threeMaterials]) {\n            material.color.fromArray(rgba);\n            material.opacity = (rgba)[3];\n        }\n        const pbrMetallicRoughness = this[$sourceObject];\n        pbrMetallicRoughness.baseColorFactor = rgba;\n        this[$onUpdate]();\n    }\n    setMetallicFactor(value) {\n        for (const material of this[$threeMaterials]) {\n            material.metalness = value;\n        }\n        const pbrMetallicRoughness = this[$sourceObject];\n        pbrMetallicRoughness.metallicFactor = value;\n        this[$onUpdate]();\n    }\n    setRoughnessFactor(value) {\n        for (const material of this[$threeMaterials]) {\n            material.roughness = value;\n        }\n        const pbrMetallicRoughness = this[$sourceObject];\n        pbrMetallicRoughness.roughnessFactor = value;\n        this[$onUpdate]();\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$1, _b, _c;\nconst $pbrMetallicRoughness = Symbol('pbrMetallicRoughness');\nconst $normalTexture = Symbol('normalTexture');\nconst $occlusionTexture = Symbol('occlusionTexture');\nconst $emissiveTexture = Symbol('emissiveTexture');\n/**\n * Material facade implementation for Three.js materials\n */\nclass Material extends ThreeDOMElement {\n    constructor(onUpdate, gltf, material, correlatedMaterials) {\n        super(onUpdate, material, correlatedMaterials);\n        this[_a$1] = null;\n        this[_b] = null;\n        this[_c] = null;\n        if (correlatedMaterials == null) {\n            return;\n        }\n        if (material.pbrMetallicRoughness == null) {\n            material.pbrMetallicRoughness = {};\n        }\n        this[$pbrMetallicRoughness] = new PBRMetallicRoughness(onUpdate, gltf, material.pbrMetallicRoughness, correlatedMaterials);\n        const { normalTexture, occlusionTexture, emissiveTexture } = material;\n        const normalTextures = new Set();\n        const occlusionTextures = new Set();\n        const emissiveTextures = new Set();\n        for (const material of correlatedMaterials) {\n            const { normalMap, aoMap, emissiveMap } = material;\n            if (normalTexture != null && normalMap != null) {\n                normalTextures.add(normalMap);\n            }\n            if (occlusionTexture != null && aoMap != null) {\n                occlusionTextures.add(aoMap);\n            }\n            if (emissiveTexture != null && emissiveMap != null) {\n                emissiveTextures.add(emissiveMap);\n            }\n        }\n        if (normalTextures.size > 0) {\n            this[$normalTexture] =\n                new TextureInfo(onUpdate, gltf, normalTexture, normalTextures);\n        }\n        if (occlusionTextures.size > 0) {\n            this[$occlusionTexture] =\n                new TextureInfo(onUpdate, gltf, occlusionTexture, occlusionTextures);\n        }\n        if (emissiveTextures.size > 0) {\n            this[$emissiveTexture] =\n                new TextureInfo(onUpdate, gltf, emissiveTexture, emissiveTextures);\n        }\n    }\n    get name() {\n        return this[$sourceObject].name || '';\n    }\n    get pbrMetallicRoughness() {\n        return this[$pbrMetallicRoughness];\n    }\n    get normalTexture() {\n        return this[$normalTexture];\n    }\n    get occlusionTexture() {\n        return this[$occlusionTexture];\n    }\n    get emissiveTexture() {\n        return this[$emissiveTexture];\n    }\n    get emissiveFactor() {\n        return this[$sourceObject].emissiveFactor;\n    }\n    setEmissiveFactor(rgb) {\n        for (const material of this[$correlatedObjects]) {\n            material.emissive.fromArray(rgb);\n        }\n        this[$sourceObject].emissiveFactor = rgb;\n        this[$onUpdate]();\n    }\n}\n_a$1 = $normalTexture, _b = $occlusionTexture, _c = $emissiveTexture;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nconst $materials = Symbol('materials');\n/**\n * A Model facades the top-level GLTF object returned by Three.js' GLTFLoader.\n * Currently, the model only bothers itself with the materials in the Three.js\n * scene graph.\n */\nclass Model {\n    constructor(correlatedSceneGraph, onUpdate = () => { }) {\n        this[_a] = [];\n        const { gltf, gltfElementMap } = correlatedSceneGraph;\n        gltf.materials.forEach(material => {\n            this[$materials].push(new Material(onUpdate, gltf, material, gltfElementMap.get(material)));\n        });\n    }\n    /**\n     * Materials are listed in the order of the GLTF materials array, plus a\n     * default material at the end if one is used.\n     *\n     * TODO(#1003): How do we handle non-active scenes?\n     */\n    get materials() {\n        return this[$materials];\n    }\n}\n_a = $materials;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst $currentGLTF = Symbol('currentGLTF');\nconst $model = Symbol('model');\nconst $variants = Symbol('variants');\n/**\n * SceneGraphMixin manages exposes a model API in order to support operations on\n * the <model-viewer> scene graph.\n */\nconst SceneGraphMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class SceneGraphModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this[_a] = undefined;\n            this[_b] = null;\n            this[_c] = [];\n            this.variantName = undefined;\n            this.orientation = '0 0 0';\n            this.scale = '1 1 1';\n        }\n        // Scene-graph API:\n        /** @export */\n        get model() {\n            return this[$model];\n        }\n        get availableVariants() {\n            return this[$variants];\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('variantName')) {\n                const variants = this[$variants];\n                const threeGLTF = this[$currentGLTF];\n                const { variantName } = this;\n                const variantIndex = variants.findIndex((v) => v === variantName);\n                if (threeGLTF == null || variantIndex < 0) {\n                    return;\n                }\n                const onUpdate = () => {\n                    this[$needsRender]();\n                };\n                const updatedMaterials = threeGLTF.correlatedSceneGraph.loadVariant(variantIndex, onUpdate);\n                const { gltf, gltfElementMap } = threeGLTF.correlatedSceneGraph;\n                for (const index of updatedMaterials) {\n                    const material = gltf.materials[index];\n                    this[$model].materials[index] = new Material(onUpdate, gltf, material, gltfElementMap.get(material));\n                }\n            }\n            if (changedProperties.has('orientation') ||\n                changedProperties.has('scale')) {\n                const { modelContainer } = this[$scene];\n                const orientation = parseExpressions(this.orientation)[0]\n                    .terms;\n                const roll = normalizeUnit(orientation[0]).number;\n                const pitch = normalizeUnit(orientation[1]).number;\n                const yaw = normalizeUnit(orientation[2]).number;\n                modelContainer.quaternion.setFromEuler(new Euler(pitch, yaw, roll, 'YXZ'));\n                const scale = parseExpressions(this.scale)[0]\n                    .terms;\n                modelContainer.scale.set(scale[0].number, scale[1].number, scale[2].number);\n                this[$scene].updateBoundingBox();\n                this[$scene].updateShadow();\n                this[$renderer].arRenderer.onUpdateScene();\n                this[$needsRender]();\n            }\n        }\n        [(_a = $model, _b = $currentGLTF, _c = $variants, $onModelLoad)]() {\n            super[$onModelLoad]();\n            this[$variants] = [];\n            const { currentGLTF } = this[$scene];\n            if (currentGLTF != null) {\n                const { correlatedSceneGraph } = currentGLTF;\n                if (correlatedSceneGraph != null &&\n                    currentGLTF !== this[$currentGLTF]) {\n                    this[$model] = new Model(correlatedSceneGraph, () => {\n                        this[$needsRender]();\n                    });\n                }\n                // KHR_materials_variants extension spec:\n                // https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_variants\n                const { gltfExtensions } = currentGLTF.userData;\n                if (gltfExtensions != null) {\n                    const extension = gltfExtensions['KHR_materials_variants'];\n                    if (extension != null) {\n                        this[$variants] =\n                            extension.variants.map(variant => variant.name);\n                        this.requestUpdate('variantName');\n                    }\n                }\n            }\n            this[$currentGLTF] = currentGLTF;\n            // TODO: remove this event, as it is synonymous with the load event.\n            this.dispatchEvent(new CustomEvent('scene-graph-ready'));\n        }\n        /** @export */\n        async exportScene(options) {\n            const scene = this[$scene];\n            return new Promise(async (resolve) => {\n                // Defaults\n                const opts = {\n                    binary: true,\n                    onlyVisible: true,\n                    maxTextureSize: Infinity,\n                    forcePowerOfTwoTextures: false,\n                    includeCustomExtensions: false,\n                    embedImages: true\n                };\n                Object.assign(opts, options);\n                // Not configurable\n                opts.animations = scene.animations;\n                opts.truncateDrawRange = true;\n                const shadow = scene.shadow;\n                let visible = false;\n                // Remove shadow from export\n                if (shadow != null) {\n                    visible = shadow.visible;\n                    shadow.visible = false;\n                }\n                const exporter = new GLTFExporter();\n                exporter.parse(scene.modelContainer, (gltf) => {\n                    return resolve(new Blob([opts.binary ? gltf : JSON.stringify(gltf)], {\n                        type: opts.binary ? 'application/octet-stream' :\n                            'application/json'\n                    }));\n                }, opts);\n                if (shadow != null) {\n                    shadow.visible = visible;\n                }\n            });\n        }\n    }\n    __decorate$1([\n        property({ type: String, attribute: 'variant-name' })\n    ], SceneGraphModelViewerElement.prototype, \"variantName\", void 0);\n    __decorate$1([\n        property({ type: String, attribute: 'orientation' })\n    ], SceneGraphModelViewerElement.prototype, \"orientation\", void 0);\n    __decorate$1([\n        property({ type: String, attribute: 'scale' })\n    ], SceneGraphModelViewerElement.prototype, \"scale\", void 0);\n    return SceneGraphModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// How much the model will rotate per\n// second in radians:\nconst DEFAULT_ROTATION_SPEED = Math.PI / 32;\nconst AUTO_ROTATE_DELAY_DEFAULT = 3000;\nconst rotationRateIntrinsics = {\n    basis: [degreesToRadians(numberNode(DEFAULT_ROTATION_SPEED, 'rad'))],\n    keywords: { auto: [null] }\n};\nconst $autoRotateStartTime = Symbol('autoRotateStartTime');\nconst $radiansPerSecond = Symbol('radiansPerSecond');\nconst $syncRotationRate = Symbol('syncRotationRate');\nconst $onCameraChange = Symbol('onCameraChange');\nconst StagingMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class StagingModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.autoRotate = false;\n            this.autoRotateDelay = AUTO_ROTATE_DELAY_DEFAULT;\n            this.rotationPerSecond = 'auto';\n            this[_a] = performance.now();\n            this[_b] = 0;\n            this[_c] = (event) => {\n                if (!this.autoRotate) {\n                    return;\n                }\n                if (event.detail.source === 'user-interaction') {\n                    this[$autoRotateStartTime] = performance.now();\n                }\n            };\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this.addEventListener('camera-change', this[$onCameraChange]);\n            this[$autoRotateStartTime] = performance.now();\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this.removeEventListener('camera-change', this[$onCameraChange]);\n            this[$autoRotateStartTime] = performance.now();\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('autoRotate')) {\n                this[$autoRotateStartTime] = performance.now();\n            }\n        }\n        [(_a = $autoRotateStartTime, _b = $radiansPerSecond, $syncRotationRate)](style) {\n            this[$radiansPerSecond] = style[0];\n        }\n        [$tick](time, delta) {\n            super[$tick](time, delta);\n            if (!this.autoRotate || !this[$hasTransitioned]() ||\n                this[$renderer].isPresenting) {\n                return;\n            }\n            const rotationDelta = Math.min(delta, time - this[$autoRotateStartTime] - this.autoRotateDelay);\n            if (rotationDelta > 0) {\n                this[$scene].yaw = this.turntableRotation +\n                    this[$radiansPerSecond] * rotationDelta * 0.001;\n            }\n        }\n        get turntableRotation() {\n            return this[$scene].yaw;\n        }\n        resetTurntableRotation(theta = 0) {\n            this[$scene].yaw = theta;\n        }\n    }\n    _c = $onCameraChange;\n    __decorate([\n        property({ type: Boolean, attribute: 'auto-rotate' })\n    ], StagingModelViewerElement.prototype, \"autoRotate\", void 0);\n    __decorate([\n        property({ type: Number, attribute: 'auto-rotate-delay' })\n    ], StagingModelViewerElement.prototype, \"autoRotateDelay\", void 0);\n    __decorate([\n        style({ intrinsics: rotationRateIntrinsics, updateHandler: $syncRotationRate }),\n        property({ type: String, attribute: 'rotation-per-second' })\n    ], StagingModelViewerElement.prototype, \"rotationPerSecond\", void 0);\n    return StagingModelViewerElement;\n};\n\n/**\n * This mixin function is designed to be applied to a class that inherits\n * from HTMLElement. It makes it easy for a custom element to coordinate with\n * the :focus-visible polyfill.\n *\n * NOTE(cdata): The code here was adapted from an example proposed with the\n * introduction of ShadowDOM support in the :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196\n * @param {Function} SuperClass The base class implementation to decorate with\n * implementation that coordinates with the :focus-visible polyfill\n */\nconst FocusVisiblePolyfillMixin = (SuperClass) => {\n    var _a;\n    const coordinateWithPolyfill = (instance) => {\n        // If there is no shadow root, there is no need to coordinate with\n        // the polyfill. If we already coordinated with the polyfill, we can\n        // skip subsequent invokcations:\n        if (instance.shadowRoot == null ||\n            instance.hasAttribute('data-js-focus-visible')) {\n            return () => { };\n        }\n        // The polyfill might already be loaded. If so, we can apply it to\n        // the shadow root immediately:\n        if (self.applyFocusVisiblePolyfill) {\n            self.applyFocusVisiblePolyfill(instance.shadowRoot);\n        }\n        else {\n            const coordinationHandler = () => {\n                self.applyFocusVisiblePolyfill(instance.shadowRoot);\n            };\n            // Otherwise, wait for the polyfill to be loaded lazily. It might\n            // never be loaded, but if it is then we can apply it to the\n            // shadow root at the appropriate time by waiting for the ready\n            // event:\n            self.addEventListener('focus-visible-polyfill-ready', coordinationHandler, { once: true });\n            return () => {\n                self.removeEventListener('focus-visible-polyfill-ready', coordinationHandler);\n            };\n        }\n        return () => { };\n    };\n    const $endPolyfillCoordination = Symbol('endPolyfillCoordination');\n    // IE11 doesn't natively support custom elements or JavaScript class\n    // syntax The mixin implementation assumes that the user will take the\n    // appropriate steps to support both:\n    class FocusVisibleCoordinator extends SuperClass {\n        constructor() {\n            super(...arguments);\n            this[_a] = null;\n        }\n        // Attempt to coordinate with the polyfill when connected to the\n        // document:\n        connectedCallback() {\n            super.connectedCallback && super.connectedCallback();\n            if (this[$endPolyfillCoordination] == null) {\n                this[$endPolyfillCoordination] = coordinateWithPolyfill(this);\n            }\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback && super.disconnectedCallback();\n            // It's important to remove the polyfill event listener when we\n            // disconnect, otherwise we will leak the whole element via window:\n            if (this[$endPolyfillCoordination] != null) {\n                this[$endPolyfillCoordination]();\n                this[$endPolyfillCoordination] = null;\n            }\n        }\n    }\n    _a = $endPolyfillCoordination;\n    return FocusVisibleCoordinator;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Uncomment these lines to export PMREM textures in Glitch:\n// export {default as TextureUtils} from './three-components/TextureUtils';\n// export * from 'three';\nconst ModelViewerElement = AnnotationMixin(SceneGraphMixin(StagingMixin(EnvironmentMixin(ControlsMixin(ARMixin(LoadingMixin(AnimationMixin(FocusVisiblePolyfillMixin(ModelViewerElementBase)))))))));\ncustomElements.define('model-viewer', ModelViewerElement);\n\nexport { ModelViewerElement };\n//# sourceMappingURL=model-viewer.js.map\n"],"names":["String","Math","random","slice","window","trustedTypes","createPolicy","createHTML","s","eventOptionsSupported","options","capture","addEventListener","removeEventListener","_e","push","ShadyCSS","prepareTemplateDom","console","warn","JSCompiler_renameProperty","prop","_obj","defaultConverter","[object Object]","value","type","Boolean","Object","Array","JSON","stringify","Number","parse","notEqual","old","defaultPropertyDeclaration","attribute","converter","reflect","hasChanged","UpdatingElement","HTMLElement","super","this","initialize","observedAttributes","finalize","attributes","_classProperties","forEach","v","p","attr","_attributeNameForProperty","undefined","_attributeToPropertyMap","set","hasOwnProperty","Map","superProperties","getPrototypeOf","k","name","_ensureClassProperties","noAccessor","prototype","key","Symbol","descriptor","getPropertyDescriptor","defineProperty","oldValue","requestUpdateInternal","configurable","enumerable","get","superCtor","props","properties","propKeys","getOwnPropertyNames","getOwnPropertySymbols","createProperty","toLowerCase","fromAttribute","toAttribute","_updateState","_updatePromise","Promise","res","_enableUpdatingResolver","_changedProperties","_saveInstanceProperties","constructor","_v","_instanceProperties","enableUpdating","_attributeToProperty","ctor","attrValue","_propertyValueToAttribute","removeAttribute","setAttribute","propName","getPropertyOptions","_propertyValueFromAttribute","shouldRequestUpdate","_valueHasChanged","has","_reflectingProperties","_hasRequestedUpdate","_enqueueUpdate","updateComplete","e","result","performUpdate","hasUpdated","_applyInstanceProperties","shouldUpdate","changedProperties","update","_markUpdated","firstUpdated","updated","_getUpdateComplete","size","_propertyToAttribute","standardProperty","element","kind","assign","clazz","placement","initializer","call","property","protoOrDescriptor","proto","legacyProperty","nativeShadow","Document","CSSStyleSheet","HAS_WEBXR_DEVICE_API","navigator","xr","self","XRSession","isSessionSupported","HAS_WEBXR_HIT_TEST_API","requestHitTestSource","HAS_RESIZE_OBSERVER","ResizeObserver","HAS_INTERSECTION_OBSERVER","IntersectionObserver","IS_WEBXR_AR_CANDIDATE","userAgent","vendor","opera","check","test","substr","IS_ANDROID","IS_IOS","MSStream","platform","maxTouchPoints","IS_AR_QUICKLOOK_CANDIDATE","tempAnchor","document","createElement","relList","supports","IS_FIREFOX","IS_OCULUS","IS_SCENEVIEWER_CANDIDATE","template","innerHTML","EventDispatcher","listener","_listeners","listeners","indexOf","hasEventListener","listenerArray","index","splice","dispatchEvent","event","target","array","i","l","length","_lut","toString","_seed","MathUtils","DEG2RAD","PI","RAD2DEG","generateUUID","d0","d1","d2","d3","toUpperCase","clamp","min","max","euclideanModulo","n","m","mapLinear","x","a1","a2","b1","b2","lerp","y","t","damp","lambda","dt","exp","pingpong","abs","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","seededRandom","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","Vector2","width","height","scalar","Error","w","addVectors","subVectors","multiplyScalar","elements","minVal","maxVal","divideScalar","round","sqrt","atan2","distanceToSquared","dx","dy","normalize","alpha","v1","v2","offset","getX","getY","center","angle","isVector2","Matrix3","arguments","error","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","me","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","d","f","g","h","t11","t12","t13","det","detInv","tmp","matrix4","setFromMatrix4","invert","transpose","r","tx","ty","sx","sy","rotation","cx","cy","theta","matrix","fromArray","_canvas","isMatrix3","ImageUtils","getDataURL","image","src","HTMLCanvasElement","canvas","createElementNS","context","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","Texture$1","DEFAULT_IMAGE","mapping","DEFAULT_MAPPING","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","uuid","mipmaps","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","setUvTransform","copy","source","meta","isRootObject","textures","output","metadata","generator","wrap","images","url","isArray","isDataTexture","serializeImage","uv","applyMatrix3","needsUpdate","HTMLImageElement","ImageBitmap","data","isTexture","Vector4","z","acos","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","isVector4","WebGLRenderTarget","depth","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","dispose","clone","isWebGLRenderTarget","Quaternion","_x","_y","_z","_w","qa","qb","qm","slerp","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","EPSILON","len","tDir","_onChangeCallback","quaternion","euler","isEuler","_order","c1","c3","s1","s3","axis","halfAngle","trace","vFrom","vTo","dot","step","angleTo","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","callback","isQuaternion","Vector3","multiplyVectors","applyQuaternion","_quaternion","setFromEuler","setFromAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","camera","applyMatrix4","matrixWorldInverse","projectionMatrix","projectionMatrixInverse","matrixWorld","crossVectors","ax","ay","az","bx","by","bz","denominator","lengthSq","planeNormal","_vector","projectOnVector","sub","normal","dz","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindricalCoords","setFromMatrixColumn","sz","isVector3","Box3","Infinity","minX","minY","minZ","maxX","maxY","maxZ","count","points","makeEmpty","il","expandByPoint","halfSize","_vector$1","add","object","expandByObject","box","isEmpty","point","vector","addScalar","updateWorldMatrix","geometry","boundingBox","computeBoundingBox","_box","union","children","sphere","clampPoint","plane","constant","triangle","getCenter","_center","_extents","_v0","_v1","_v2","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","getSize","_points","setFromPoints","equals","isBox3","_testAxis","v0","extents","j","p0","p1","p2","_box$1","Sphere","optionalCenter","maxRadiusSq","distanceTo","radiusSum","intersectsSphere","distanceToPoint","deltaLengthSq","expandByScalar","getMaxScaleOnAxis","_vector$2","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","direction","ray","at","directionDistance","distanceSqToPoint","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","tca","radius2","thc","t0","t1","distanceToPlane","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","cross","QdN","transformDirection","Matrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1$1","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","compose","_zero","_one","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","position","scale","x2","y2","z2","wx","wy","wz","determinant","_m1","invSX","invSY","invSZ","setFromRotationMatrix","left","right","top","bottom","near","far","isMatrix4","_matrix","_quaternion$1","Euler","DefaultOrder","asin","makeRotationFromQuaternion","newOrder","setFromQuaternion","optionalResult","RotationOrders","Layers","mask","channel","layers","_object3DId","_v1$2","_q1","_m1$1","_target","_position","_scale","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","parent","DefaultUp","_onChange","defineProperties","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","animations","userData","create","isObject3D","onBeforeRender","onAfterRender","updateMatrix","premultiply","decompose","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","multiply","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","worldToLocal","lookAt","setFromMatrixPosition","isCamera","isLight","extractRotation","remove","clear","attach","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","updateMatrixWorld","force","updateParents","updateChildren","toJSON","geometries","materials","shapes","skeletons","serialize","library","toArray","isInstancedMesh","instanceMatrix","isMesh","isLine","isPoints","parameters","shape","isSkinnedMesh","bindMode","bindMatrix","skeleton","material","uuids","animation","extractFromCache","cache","values","recursive","child","_vector1","_vector2","_normalMatrix","Plane","setFromNormalAndCoplanarPoint","inverseNormalLength","negate","line","delta","start","startSign","endSign","end","intersectsPlane","optionalNormalMatrix","getNormalMatrix","referencePoint","coplanarPoint","isPlane","_v0$1","_v1$3","_v2$1","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","targetLengthSq","dot00","dot01","dot02","dot11","dot12","denom","invDenom","u","getBarycoord","p3","uv1","uv2","uv3","addScaledVector","i0","i1","i2","getNormal","setFromCoplanarPoints","getUV","containsPoint","isFrontFacing","intersectsTriangle","d4","vc","d5","d6","vb","va","materialId","Material$1","fog","blending","side","vertexColors","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","isMaterial","onBeforeCompile","customProgramCacheKey","setValues","newValue","flatShading","currentValue","isColor","isRoot","color","getHex","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","map","matcap","alphaMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","envMap","reflectivity","refractionRatio","combine","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphTargets","morphNormals","skinning","srcPlanes","dstPlanes","_colorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","_hslA","_hslB","hue2rgb","SRGBToLinear","LinearToSRGB","Color","setRGB","setHex","setStyle","hex","style","handleAlpha","string","parseFloat","exec","components","parseInt","setHSL","charAt","setColorName","gammaFactor","safeInverse","copyGammaToLinear","copyLinearToGamma","copySRGBToLinear","copyLinearToSRGB","hue","saturation","lightness","getHSL","color1","color2","normalized","NAMES","MeshBasicMaterial","isMeshBasicMaterial","_vector$3","_vector2$1","BufferAttribute","itemSize","TypeError","usage","updateRange","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8Array","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float16BufferAttribute","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","arrayMax","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","fromBufferAttribute","setXY","setXYZ","applyNormalMatrix","setX","setY","setZ","setW","setXYZW","onUpload","isFloat16BufferAttribute","_id","_m1$2","_offset","_box$2","_boxMorphTargets","_vector$4","BufferGeometry","morphAttributes","morphTargetsRelative","groups","boundingSphere","drawRange","isBufferGeometry","getIndex","setIndex","getAttribute","deleteAttribute","hasAttribute","addGroup","materialIndex","clearGroups","setDrawRange","tangent","computeBoundingSphere","makeRotationX","makeRotationY","makeRotationZ","translate","makeTranslation","makeScale","morphAttributesPosition","isGLBufferAttribute","setFromBufferAttribute","morphAttribute","isNaN","jl","computeFaceNormals","computeTangents","indices","positions","normals","uvs","nVertices","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","isFinite","group","tmp2","n2","handleVertex","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","normalizeNormals","merge","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","array2","geometry2","newAttribute","morphArray","keys","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","checkBufferGeometryIntersection","raycaster","morphPosition","morphInfluences","morphTargetInfluences","influence","boneTransform","intersection","intersect","intersectTriangle","checkIntersection","face","morphTargetDictionary","ml","intersects","intersectsBox","groupMaterial","faceIndex","isGeometry","BoxGeometry","widthSegments","heightSegments","depthSegments","scope","vertices","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","mergeUniforms","uniforms","merged","UniformsUtils","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","Camera","PerspectiveCamera","fov","aspect","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","isShaderMaterial","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","enabled","offsetX","offsetY","clearViewOffset","skew","makePerspective","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderer","scene","currentXrEnabled","currentRenderTarget","getRenderTarget","setRenderTarget","render","CubeTexture","_needsFlipEnvMap","isCubeTexture","WebGLCubeRenderTarget","dummy","isInteger","shader","tEquirect","mesh","currentMinFilter","stencil","DataTexture","_sphere$1","_vector$5","Frustum","p4","p5","planes","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","sprite","negRadius","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","requestAnimationFrame","stop","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","isInterleavedBufferAttribute","deleteBuffer","buffer","delete","bufferType","cached","bytesPerElement","elementSize","createBuffer","bindBuffer","bufferData","BYTES_PER_ELEMENT","bufferSubData","subarray","updateBuffer","PlaneGeometry","width_half","height_half","segment_width","segment_height","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmissionmap_fragment","transmissionmap_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","background","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","WebGLBackground","cubemaps","state","objects","clearColor","planeMesh","boxMesh","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","renderList","forceClear","isScene","session","getSession","environmentBlendMode","autoClear","autoClearColor","autoClearDepth","autoClearStencil","copyPosition","toneMapping","unshift","WebGLBindingStates","maxVertexAttributes","getParameter","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","bindVertexArrayObject","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","newAttributes","enabledAttributes","attributeDivisors","program","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","reset","resetDefaultState","setup","updateBuffers","programMap","stateMap","createVertexArray","createVertexArrayOES","getBindingState","cachedAttributes","geometryAttributes","attributesNum","cachedAttribute","geometryAttribute","saveCache","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","instanceColor","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","init","enableLocalClipping","beginShadows","endShadows","setState","useCache","materialProperties","nGlobal","lGlobal","clippingState","WebGLCubeMaps","mapTextureMapping","onTextureDispose","cubemap","fromEquirectangularTexture","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","memory","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","programs","autoReset","instanceCount","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","sort","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","onInstancedMeshDispose","instancedMesh","buffergeometry","physical","transmission","transmissionMap","DataTexture2DArray","wrapR","isDataTexture2DArray","DataTexture3D","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","updateCache","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","setOptional","upload","seqWithValue","programIdCount","getEncodingComponents","getShaderErrors","status","getShaderParameter","getShaderInfoLog","trim","split","join","addLineNumbers","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","WebGLProgram","cacheKey","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","generateEnvMapBlendingDefine","gammaFactorDefine","customExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","generateExtensions","customDefines","chunks","generateDefines","createProgram","prefixVertex","prefixFragment","versionString","isRawShaderMaterial","shaderName","instancing","instancingColor","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","vertexUvs","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","cachedUniforms","deleteShader","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getTextureEncodingFromMap","getParameters","shadows","environment","isMeshStandardMaterial","bones","nVertexUniforms","nVertexMatrices","getMaxBones","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","finish","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","renderCallDepth","list","UniformsCache","light","halfWidth","halfHeight","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","ShadowUniformsCache","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","identity","WebGLRenderState","lightsArray","shadowsArray","setupLights","setupLightsView","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","WebGLShadowMap","_renderer","_objects","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","0","1","2","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizontal","HORIZONTAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","mapPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","renderObject","shadowCamera","intersectsObject","kl","depthMaterial","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","isPointLightShadow","pars","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","enable","disable","depthMask","setFunc","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","equationToGL","100","101","102","MIN_EXT","MAX_EXT","factorToGL","200","201","202","204","210","208","206","203","205","209","207","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","cullFace","setPolygonOffset","factor","activeTexture","webglSlot","useProgram","setMaterial","frontFaceCW","setLineWidth","lineWidth","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","__maxMipLevel","log2","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","textureProperties","__webglInit","deleteTexture","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","deallocateRenderTarget","textureUnits","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","uploadCubeTexture","wrappingToGL","1000","1001","1002","filterToGL","1003","1004","1005","1006","1007","1008","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","textureNeedsPowerOfTwo","isDepthTexture","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","samples","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthRenderbuffer","isCube","webglDepthTexture","setupDepthTexture","createRenderbuffer","isWebGLMultisampleRenderTarget","warnedTexture2D","warnedTextureCube","textureUnit","resetTextureUnits","setupRenderTarget","isRenderTarget3D","createFramebuffer","glTextureType","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","cameras","isArrayCamera","Group","WebXRController","_targetRay","_grip","_hand","WebXRManager","framebufferScaleFactor","referenceSpace","referenceSpaceType","pose","controllers","inputSourcesMap","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controller","inputSource","onSessionEnd","disconnect","setFramebuffer","isPresenting","onInputSourcesChange","inputSources","removed","added","getController","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","async","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","antialias","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","cameraLPos","cameraRPos","updateCamera","getCamera","depthNear","depthFar","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","setProjectionFromUnion","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","transform","WebGLMaterials","refreshUniformsCommon","uvScaleMap","uv2ScaleMap","refreshUniformsStandard","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","WebGLRenderer","display","createCanvasElement","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","renderListStack","renderStateStack","domElement","sortObjects","toneMappingExposure","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","shift","rangeMin","rangeMax","message","initGLContext","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","programInfo","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","setSize","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","isGroup","isLOD","intersectsSprite","isImmediateRenderObject","renderObjects","camera2","renderObjectImmediate","lightsStateVersion","programCacheKey","programChange","needsLights","materialNeedsLights","progUniforms","uniformsList","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isOrthographicCamera","boneTexture","boneMatrices","boneTextureSize","setFromProjectionMatrix","opaqueObjects","transparentObjects","layer","framebufferTextureLayer","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","halfFloatSupportedByExt","checkFramebufferStatus","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","copyTextureToTexture3D","sourceBox","glTarget","unpackRowLen","unpackImageHeight","unpackSkipPixels","unpackSkipRows","unpackSkipImages","texSubImage3D","resetState","__THREE_DEVTOOLS__","CustomEvent","detail","joints","inputState","pinching","inputPose","gripPose","handPose","targetRay","grip","hand","visibilityState","inputjoint","jointPose","getJointPose","jointName","joint","jointRadius","indexTip","thumbTip","distanceToPinch","threshold","handedness","getPose","targetRaySpace","gripSpace","WebGL1Renderer","Scene","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","_vector$6","InterleavedBufferAttribute","interleavedBuffer","interleavedBuffers","_v1$4","_v2$2","_basePosition","_skinIndex","_skinWeight","_vector$7","_matrix$1","SkinnedMesh","bindMatrixInverse","Bone","bind","calculateInverses","normalizeSkinWeights","skinWeight","manhattanLength","skinIndex","weight","getComponent","boneIndex","boneInverses","isBone","_offsetMatrix","_identityMatrix","Skeleton","inverse","bone","json","boneInverse","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh$1","InstancedMesh","getColorAt","getMatrixAt","raycastTimes","instanceId","setColorAt","setMatrixAt","linecap","linejoin","_start","_end","_inverseMatrix$1","_ray$1","_sphere$2","Line","computeLineDistances","lineDistances","params","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distanceSqToSegment","_start$1","_end$1","LineSegments","LineLoop","_inverseMatrix$2","_ray$2","_sphere$3","_position$1","Points","testPoint","rayPointDistanceSq","intersectPoint","closestPointToPoint","distanceToRay","CompressedTexture","CanvasTexture","ParametricGeometry","func","slices","stacks","EPS","pu","pv","sliceCount","isCanvasTexture","RawShaderMaterial","STANDARD","PHYSICAL","ior","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceOffset","referenceValueSize","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","targetOffset","targetValueSize","referenceValue","startIndex","endIndex","interpolant","evaluate","resultBuffer","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","LinearInterpolant","DiscreteInterpolant","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","offset1","offset0","weight1","weight0","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","trackType","getInterpolation","factoryMethod","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","timeOffset","timeScale","startTime","endTime","nKeys","valid","prevTime","currTime","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","slerpFlat","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","duration","jsonTracks","frameTime","parseKeyframeTrack","clipTracks","morphTargetSequence","noLoop","numMorphTargets","objectOrClipArray","clipArray","o","animationToMorphTargets","pattern","morphTarget","parts","animationMorphTargets","clips","CreateFromMorphTargetSequence","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","validate","optimize","typeName","getTrackTypeForValueTypeName","Cache","files","file","DefaultLoadingManager","onLoad","onProgress","onError","urlModifier","isLoading","itemsLoaded","itemsTotal","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","global","Loader","manager","crossOrigin","withCredentials","resourcePath","requestHeader","load","loadAsync","resolve","reject","setCrossOrigin","setWithCredentials","setPath","setResourcePath","setRequestHeader","loading","FileLoader","CompressedTextureLoader","setTimeout","dataUriRegexResult","request","mimeType","isBase64","decodeURIComponent","atob","response","responseType","charCodeAt","Blob","parser","DOMParser","parseFromString","XMLHttpRequest","open","callbacks","overrideMimeType","header","send","setResponseType","setMimeType","loaded","loadTexture","texDatas","mipmapCount","isCubemap","faces","ImageLoader","onImageLoad","onImageError","CubeTextureLoader","urls","DataTextureLoader","TextureLoader","Curve","arcLengthDivisions","texData","isJPEG","search","getPoint","getPointAt","optionalTarget","getUtoTmapping","getPoints","divisions","getSpacedPoints","getLength","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","getTangent","t2","pt1","pt2","getTangentAt","computeFrenetFrames","segments","closed","binormals","vec","mat","MAX_VALUE","tz","makeRotationAxis","fromJSON","Light","_lightPositionWorld","_lookTarget","LightShadow","_frameExtents","_viewportCount","_viewports","shadowMatrix","viewportIndex","SpotLightShadow","isSpotLightShadow","SpotLight","power","_projScreenMatrix$1","_lightPositionWorld$1","_lookTarget$1","PointLightShadow","_cubeDirections","_cubeUps","PointLight","OrthographicCamera","scaleW","scaleH","makeOrthographic","DirectionalLightShadow","isDirectionalLightShadow","DirectionalLight","LoaderUtils","TextDecoder","decode","fromCharCode","escape","lastIndexOf","InstancedBufferGeometry","InstancedBufferAttribute","ImageBitmapLoader","createImageBitmap","fetch","isImageBitmapLoader","setOptions","fetchOptions","credentials","headers","then","blob","colorSpaceConversion","imageBitmap","catch","AudioContext","webkitAudioContext","AudioLoader","bufferCopy","decodeAudioData","audioBuffer","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accuIndex","currentWeight","mix","weightAdditive","originalValueOffset","getValue","targetIndex","workOffset","_reservedRe","RegExp","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","rootNode","node","findNode","nodeName","firstValidIndex","nCachedObjects_","bindings","unbind","root","isAnimationObjectGroup","sanitizeNodeName","matches","results","objectName","objectIndex","propertyIndex","lastDot","substring","getBoneByName","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","resolvedProperty","SetterByBindingTypeAndVersioning","targetObject","dest","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","_isActiveAction","_scheduleFading","fadeOutAction","warp","fadeOut","fadeIn","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","fadeInAction","crossFadeFrom","weightInterpolant","_takeBackControlInterpolant","action","startTimeScale","endTimeScale","now","_lendControlInterpolant","timeScaleInterpolant","_root","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","accumulateAdditive","accumulate","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","_bindAction","knownActions","_addInactiveAction","_lendBinding","saveOriginalState","_lendAction","restoreOriginalState","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","stats","actions","total","inUse","controlInterpolants","actionsByClip","actionByRoot","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","optionalRoot","clipObject","findByName","existingAction","newAction","nActions","_update","nBindings","timeInSeconds","actionsToRemove","_removeInactiveAction","Uniform","InstancedInterleavedBuffer","GLBufferAttribute","Raycaster","LOD","Sprite","PointCloud","ascSort","intersectObject","setBuffer","setType","setItemSize","setCount","setFromCamera","coords","unproject","intersectObjects","Spherical","other","setFromCartesianCoords","ImmediateRenderObject","_vector$a","_boneMatrix","_matrixWorldInv","SkeletonHelper","getBoneList","isSkeletonHelper","boneList","_floatView","_int32View","DataUtils","val","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","LOD_MAX","ENCODINGS","3000","3001","3002","3004","3005","3006","3007","backgroundMaterial","backgroundBox","_flatCamera$1","_lodPlanes","_sizeLods","_sigmas","_createPlanes","_clearColor","_oldTarget","PHI","INV_PHI","_axisDirections","convertLinearToRGBE","maxComponent","fExp","PMREMGenerator","_pingPongRenderTarget","_blurMaterial","weights","poleAxis","latitudinal","dTheta","mipInt","inputEncoding","_getCommonVertexShader","_getEncodings","_getBlurShader","_equirectShader","_cubemapShader","_compileMaterial","sigma","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","equirectangular","_fromTexture","_getCubemapShader","_getEquirectShader","outputTarget","_setViewport","_textureToCubeUV","_isLDR","_createRenderTarget","tmpMesh","cubeCamera","upSign","forwardSign","originalAutoClear","useSolidColor","convertSRGBToLinear","col","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","outputSize","lod","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","fill","construct","extractUrlBase","Handlers","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","getInverse","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","intersectsLine","isIntersectionPlane","area","getArea","barycoordFromPoint","midpoint","getMidpoint","prototypenormal","getPlane","distanceToManhattan","manhattanDistanceTo","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","setFromMatrixScale","getColumnFromMatrix","applyProjection","getChildByName","renderDepth","getWorldRotation","applyMatrix","eulerOrder","useQuaternion","setDrawMode","drawMode","_currentLevel","levels","addLevel","getObjectForDistance","initBones","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","indexOffset","clearDrawCalls","computeOffsets","drawcalls","offsets","maxInstancedCount","linePrecision","wrapAround","overdraw","wrapRGB","shading","metal","transparency","clearTarget","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","gain","createGain","connect","getInput","autoplay","detune","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","audioNode","mediaElement","createMediaElementSource","mediaStream","createMediaStreamSource","play","delay","currentTime","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getOutput","setTargetAtTime","getFilters","setFilters","updateCubeMap","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","revision","__THREE__","DRACOLoader","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","defaultAttributeTypes","setDecoderPath","setDecoderConfig","config","setWorkerLimit","setVerbosity","setSkipDequantization","taskConfig","attributeIDs","attributeTypes","useUniqueIDs","decodeGeometry","decodeDracoFile","worker","taskKey","taskCache","cachedTask","promise","byteLength","taskID","taskCost","geometryPending","_getWorker","_worker","_callbacks","postMessage","_createGeometry","_releaseTask","geometryData","_loadLibrary","preload","_initDecoder","useJS","WebAssembly","librariesPending","all","libraries","jsContent","wasmBinary","fn","DRACOWorker","body","URL","createObjectURL","Worker","_taskCosts","_taskLoad","onmessage","terminate","decodeAttribute","draco","decoder","dracoGeometry","attributeName","attributeType","numComponents","num_components","numValues","num_points","dataType","DT_FLOAT32","DT_INT8","DT_INT16","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","getDracoDataType","ptr","_malloc","GetAttributeDataArrayForAllPoints","HEAPF32","_free","onModuleLoaded","DracoDecoderModule","module","Decoder","decoderBuffer","DecoderBuffer","Init","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","DecodeBufferToMesh","POINT_CLOUD","DecodeBufferToPointCloud","ok","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","numIndices","num_faces","GetTrianglesUInt32Array","decodeIndex","releaseDecoderModule","getDecoderModule","GLTFLoader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsTransmissionExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFRegistry","removeAll","_onError","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","setMeshoptDecoder","unregister","content","plugins","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","GLTFParser","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","refs","uses","isSupported","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","_addNodeRef","_loadLight","lightIndex","dependency","lightNode","lightDef","innerConeAngle","outerConeAngle","createUniqueName","createNodeAttachment","_getNodeRef","getMaterialType","extendParams","materialParams","materialDef","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","extendMaterialParams","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","transmissionFactor","transmissionTexture","textureIndex","textureDef","loadTextureImage","textureLoader","uri","handler","detectSupport","Image","onload","onerror","loadBufferView","bufferView","bufferViews","extensionDef","getDependency","supported","ready","byteOffset","byteStride","decodeGltfBuffer","BINARY_EXTENSION_CHUNK_TYPES","headerView","magic","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","GLTFMeshStandardSGMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","glossiness","glossinessMap","_extraUniforms","uniformName","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","GLTFCubicSplineInterpolant","decodePrimitive","primitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","extendTexture","texCoord","stride2","stride3","td","m0","m1","WEBGL_CONSTANTS","5120","5121","5122","5123","5125","5126","WEBGL_FILTERS","9728","9729","9984","9985","9986","9987","WEBGL_WRAPPINGS","33071","33648","10497","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","INTERPOLATION","CUBICSPLINE","LINEAR","STEP","ALPHA_MODES","createDefaultMaterial","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","meshDef","targetNames","createAttributesKey","attributesKey","associations","primitiveCache","meshCache","cameraCache","lightCache","nodeNamesUsed","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","accessorIndex","accessor","gltfAttributeName","targets","maxDisplacement","expandByVector","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","morphPositions","addMorphTargets","toTrianglesDrawMode","numberOfTriangles","newIndices","newGeometry","_invokeAll","ext","beforeRoot","getDependencies","dependencies","scenes","afterRoot","skinDefs","skins","meshDefs","meshes","skinLength","skin","ref","_invokeOne","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","bufferViewDef","sparse","pendingBufferViews","bufferAttribute","TypedArray","elementBytes","itemBytes","ibSlice","ibCacheKey","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","webkitURL","sourceURI","isObjectURL","hasAlpha","colorType","getUint8","revokeObjectURL","sampler","samplers","mapName","mapDef","gltfReference","assignFinalMaterial","useVertexTangents","useVertexColors","useFlatShading","useMorphTargets","useMorphNormals","pointsMaterial","lineMaterial","materialType","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","alphaMode","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","originalName","sanitizedName","loadGeometries","primitives","createDracoPrimitive","dracoExtension","geometryPromise","meshIndex","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","input","inputAccessors","outputAccessors","inputAccessor","outputAccessor","targetName","outputArray","scaled","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","jointNode","sceneIndex","sceneDef","nodeIds","BasisTextureLoader","transcoderPath","transcoderBinary","transcoderPending","workerConfig","instance","heap","setTranscoderPath","astcSupported","etc1Supported","etc2Supported","dxtSupported","bptcSupported","pvrtcSupported","_createTexture","_texture","parseInternalAsync","Set","lowLevel","texturePending","_allocateWorker","_initTranscoder","jsLoader","binaryLoader","binaryContent","BasisWorker","EngineFormat","TranscoderFormat","BasisFormat","ETC1S","UASTC_4x4","ETC1","ETC2","BC1","BC3","BC4","BC5","BC7_M6_OPAQUE_ONLY","BC7_M5","PVRTC1_4_RGB","PVRTC1_4_RGBA","ASTC_4x4","ATC_RGB","ATC_RGBA_INTERPOLATED_ALPHA","RGBA32","RGB565","BGR565","RGBA4444","RGBAFormat","RGBA_ASTC_4x4_Format","RGBA_BPTC_Format","RGBA_ETC2_EAC_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_S3TC_DXT5_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGB_PVRTC_4BPPV1_Format","RGB_S3TC_DXT1_Format","BasisModule","_EngineFormat","_TranscoderFormat","_BasisFormat","onRuntimeInitialized","BASIS","initializeBasis","basisFormat","transcoderFormat","engineFormat","getTranscoderFormat","blockByteLength","getBytesPerBlockOrPixel","assert","isFormatSupported","transcoder","LowLevelETC1SImageTranscoder","endpointCount","endpointsData","selectorCount","selectorsData","tablesData","globalData","decodePalettes","decodeTables","imageDesc","imageDescs","dstByteLength","getTranscodedImageByteLength","transcodeImage","getWidthInBlocks","getHeightInBlocks","rgbSliceByteOffset","rgbSliceByteLength","alphaSliceByteOffset","alphaSliceByteLength","imageFlags","transcodeUASTCImage","transcodeLowLevel","basisFile","BasisFile","isUASTC","getImageWidth","getImageHeight","getNumLevels","getHasAlpha","cleanup","close","startTranscoding","mip","mipWidth","mipHeight","getImageTranscodedSizeInBytes","transcode","FORMAT_OPTIONS","if","priorityETC1S","priorityUASTC","ETC1S_OPTIONS","UASTC_OPTIONS","opt","includes","getFormatBlockWidth","getFormatBlockHeight","formatIsUncompressed","paddedWidth","paddedHeight","importObject","env","emscripten_notify_memory_growth","exports","ZSTDDecoder","wasm","arrayBuffer","instantiate","uncompressedSize","compressedSize","compressedPtr","malloc","ZSTD_findDecompressedSize","uncompressedPtr","actualSize","ZSTD_decompress","dec","free","NONE","BASISLZ","ZSTD","ZLIB","BASICFORMAT","UNSPECIFIED","UASTC","SRGB","ITU","NTSC","SLOG","SLOG2","ALPHA_STRAIGHT","ALPHA_PREMULTIPLIED","RGB","RRR","GGG","AAA","RGBA","RRRG","U","vkFormat","typeSize","pixelWidth","pixelHeight","pixelDepth","layerCount","faceCount","supercompressionScheme","dataFormatDescriptor","vendorId","descriptorType","versionNumber","descriptorBlockSize","colorModel","colorPrimaries","transferFunction","flags","texelBlockDimension","bytesPlane","keyValue","_dataView","_littleEndian","getUint16","_","Buffer","DFDModel","DFDChannel","SupercompressionScheme","Transfer","_a$b","_b$9","KTX2Utils","createLevels","ktx","zstd","levelIndex","levelWidth","levelHeight","levelData","uncompressedByteLength","getBasicDFD","getAlpha","dfd","channelID","getPremultiplyAlpha","$retainerCount","$recentlyUsed","$evict","$evictionThreshold","$cache","CacheEvictionPolicy","evictionThreshold","recentlyUsedIndex","_a$a","_b$8","preloaded","dracoDecoderLocation","ktx2TranscoderLocation","basisLoader","MSC_TRANSCODER","_nextUint32","_nextUint64","_skip","_nextUint16","_nextUint8","D","bitOffset","bitLength","samplePosition","sampleLower","sampleUpper","_scan","B","A","S","L","I","R","E","T","O","P","C","F","G","extendedData","parseConfig","$loader","$evictionPolicy","$GLTFInstance","CachingGLTFLoader","GLTFInstance","_value","gltfLoads","progressCallback","rawGLTFLoads","fraction","loadWithLoader","progress","gltfInstanceLoads","rawGLTF","prepare","preparedGLTF","retain","originalDispose","disposed","release","_a$9","$velocity","Damper","xGoal","timeStepMilliseconds","xNormalization","deltaX","intermediateVelocity","intermediateX","newVelocity","acceleration","CSS2DObject","Element","parentNode","removeChild","cloneNode","CSS2DRenderer","_widthHalf","_heightHalf","viewProjectionMatrix","overflow","objectData","distanceToCameraSquared","getDistanceToSquared","appendChild","object1","object2","zOrder","sorted","filterAndFlatten","zMax","zIndex","numberNode","number","parseExpressions","inputString","expressions","parseIterations","expressionParseResult","parseExpression","expression","terms","remainingInput","IS_IDENT_RE","IS_OPERATOR_RE","IS_EXPRESSION_END_RE","parseFunctionArguments","identParseResult","parseIdent","identNode","parseHex","parseNumber","NOT_IDENT_RE","VALUE_RE","UNIT_RE","ALLOWED_UNITS","valueMatch","unitMatch","HEX_RE","hexMatch","expressionNodes","$visitedTypes","ASTWalker","visitedTypes","ast","remaining","ZERO","freeze","degreesToRadians","fallbackRadianValue","lengthToBaseMeters","fallbackMeterValue","normalizeUnit","unitNormalizers","rad","deg","mm","cm","fallback","Hotspot","initialized","pivot","classList","updatePosition","updateNormal","facingCamera","contains","updateVisibility","positionNodes","setComponent","normalNodes","show","assignedNodes","nodeType","Node","ELEMENT_NODE","visibilityAttribute","dataset","reduceVertices","model","initialValue","vertex","Shadow","softness","shadowMaterial","isAnimated","setScene","animationNames","maxDimension","subScalar","shadowOffset","setSoftness","setMapSize","maxMapSize","widthPad","heightPad","setScaleAndOffset","radiansY","sizeY","inverseScale","DEFAULT_HALF_FOV","SAFE_RADIUS_RATIO","DEFAULT_TAN_FOV","normalWorld","vector3$1","ModelScene","isDirty","renderCount","modelContainer","idealCameraDistance","fieldOfViewAspect","framedFieldOfView","shadowIntensity","shadowSoftness","exposure","canScale","tightBounds","goalTarget","targetDamperX","targetDamperY","targetDamperZ","_currentGLTF","cancelPendingSourceChange","animationsByName","currentAnimationAction","activeCamera","setupScene","$renderer","updateBoundingBox","requestUpdate","getTarget","updateFraming","frameModel","setShadowIntensity","stopAllAction","uncacheRoot","currentGLTF","bound","setFromObject","framedRadius","radiusXZ","vertical","modelX","modelY","modelZ","updateTarget","goal","setShadowRotation","yaw","worldX","worldZ","animationTime","setTime","getClip","hasActiveAnimation","crossfadeTime","animationClip","lastAnimationAction","clipAction","arPlacement","setIntensity","setRotation","pixelPosition","hits","hit","hotspot","viewerPosition","forHotspots","hide","orient","shaderMaterial","_mipmapMaterial","_mesh","_flatCamera","_tempTarget","RoughnessMipmapper","roughnessUpdated","oldTarget","newRoughnessTarget","deserializeUrl","toFullUrl","assertIsArCandidate","missingApis","partialUrl","location","debounce","ms","timer","args","clearTimeout","lowerLimit","upperLimit","resolveDpr","HAS_META_VIEWPORT_TAG","metas","head","querySelectorAll","devicePixelRatio","isDebugMode","debugQueryParameter","ModelViewerElement","debugMode","DELTA_PHI","vector2","addCorner","cornerX","cornerY","PlacementBox","numVertices","goalOpacity","opacityDamper","hitPlane","shadowHeight","screenX","screenY","hitResult","positionAndNormalFromPoint","offsetHeight","ARStatus","hitPosition","ARRenderer","currentSession","placeOnWall","placementBox","lastTick","turntableRotation","oldShadowIntensity","oldBackground","rafId","refSpace","viewerRefSpace","initialHitSource","transientHitTestSource","_presentedScene","resolveCleanup","exitWebXRButtonContainer","initialModelToWorld","placementComplete","isTranslating","isRotating","isScaling","lastDragPosition","lastScalar","goalPosition","goalYaw","goalScale","xDamper","yDamper","zDamper","yawDamper","scaleDamper","damperRate","onExitWebXRButtonContainerClick","stopPresenting","onUpdateScene","presentedScene","onSelectStart","hitSource","fingers","getHitTestResultsForTransientInput","gamepad","getHit","fingerSeparation","onSelectEnd","threeRenderer","requestSession","requiredFeatures","optionalFeatures","domOverlay","shadowRoot","querySelector","waitForXRAnimationFrame","_reject","$onResize","screen","framebufferWidth","framebufferHeight","exitButton","waitForAnimationFrame","setHotspotsVisibility","resolveARSession","postSessionCleanup","once","setCamera","XRRay","DOMPoint","space","offsetRay","hitTestSource","performance","tick","cleanupPromise","setTarget","setShadowScaleAndOffset","orientHotspots","getBoundingClientRect","cancel","hitSourceInitial","cameraMatrix","requestViewportScale","recommendedViewportScale","hitTestResults","getHitTestResults","hitPoint","getHitPoint","placeModel","requestHitTestSourceForTransientInput","profile","hitMatrix","modelToWorld","modelPosition","setPosition","fingerOne","fingerTwo","deltaY","thisDragX","finger","oldScale","newScale","updateOpacity","onWebXRFrame","isFirstView","placeInitially","processInput","moveScene","preRender","DEPTH_BUFFER_BIT","Debugger","THREE","Texture","PlaneBufferGeometry","pos","quat","bindBoneMatrix","relativeMatrix","globalMatrix","targetParentPos","targetPos","sourceParentPos","sourcePos","targetDir","sourceDir","SkeletonUtils","sourceLookup","cloneLookup","parallelTraverse","sourceNode","clonedNode","clonedMesh","sourceMesh","sourceBones","$prepared","$prepare","$preparedGLTF","$clone","prepared","GLTFInstanceConstructor","alphaChunk","$threeGLTF","$gltf","$gltfElementMap","$threeObjectMap","$parallelTraverseThreeScene","$correlateOriginalThreeGLTF","$correlateCloneThreeGLTF","CorrelatedSceneGraph","threeGLTF","threeObjectMap","gltfElementMap","upstreamCorrelatedSceneGraph","defaultMaterial","defaultReference","gltfElementReference","threeObject","gltfElement","threeObjects","cloneThreeGLTF","originalThreeGLTF","originalGLTF","cloneGLTF","cloneThreeObjectMap","cloneGLTFELementMap","cloneObject","elementReference","cloneElement","cloneObjects","sceneOne","sceneTwo","variantIndex","updatedMaterials","meshVariantData","mappings","variants","$cloneAndPatchMaterial","$correlatedSceneGraph","ModelViewerGLTFInstance","meshesToDuplicate","Renderer","singleton","roughnessMipmapper","duplicateMaterials","backMaterial","duplicateMaterial","meshBack","correlatedSceneGraph","sourceUUIDToClonedMaterial","_a","_b","oldOnBeforeCompile","RGBELoader","rgbe_error","rgbe_error_code","msg","fgets","lineLimit","consume","chunk","RGBEByteToRGBFloat","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","byteArray","rgbe_header_info","gamma_re","exposure_re","format_re","dimensions_re","comments","programtype","gamma","RGBE_ReadHeader","image_rgba_data","data_rgba","byteValue","scanline_buffer","ptr_end","off","isEncodedRun","rgbeStart","scanline_width","num_scanlines","RGBE_ReadPixels_RLE","numElements","floatArray","halfArray","setDataType","EnvironmentScene","roomMaterial","boxMaterial","mainLight","room","box1","box2","box3","box4","box5","box6","light1","createAreaLightMaterial","light2","light3","light4","light5","light6","setScalar","EnvironmentSceneAlt","HDR_FILE_RE","ldrLoader","hdrLoader","TextureUtils","generatedEnvironmentMap","generatedEnvironmentMapAlt","skyboxCache","environmentMapCache","isHDR","addMetadata","skyboxUrl","environmentMap","progressTracker","updateGenerationProgress","beginActivity","useAltEnvironment","environmentMapUrl","environmentMapLoads","skyboxLoads","loadSkyboxFromUrl","loadEnvironmentMapFromUrl","loadGeneratedEnvironmentMapAlt","loadGeneratedEnvironmentMap","skybox","skyboxMapLoads","cubeUV","fromEquirectangular","compileEquirectangularShader","defaultScene","fromScene","allTargetsLoad","targetLoads","SCALE_STEPS","dpr","debugger","multipleScenesVisible","scaleStep","lastStep","avgFrameDuration","onWebGLContextLost","sourceEvent","canvasElement","canvas3D","arRenderer","textureUtils","canRender","initializeKTX2Loader","updateRendererSize","_singleton","scaleFactor","minScale","$updateSize","widthCSS","heightCSS","addScene","removeScene","$canvas","visibleScenes","visibleInput","modelIsVisible","$userInputElement","parentElement","userInputElement","$tick","exposureIsNumber","isShadowDirty","selectCanvas","updateRendererScale","orderedScenes","$sceneIsReady","createContext","context2D","clearRect","_a$8","_b$7","$ongoingActivities","$announceTotalProgress","$eventDelegate","ProgressTracker","createDocumentFragment","ongoingActivityCount","activity","nextProgress","totalProgress","statusCount","completedActivities","_a$7","_b$6","_c$3","_d$1","_f","_g","_h","_j","_k","__decorate$7","decorators","desc","getOwnPropertyDescriptor","blobCanvas","blobContext","$template","$fallbackResizeHandler","$defaultAriaLabel","$resizeObserver","$intersectionObserver","$clearModelTimeout","$onContextLost","$loaded","$isElementInViewport","$announceModelVisibility","$ariaLabel","$loadedTime","$updateSource","$markLoaded","$container","$scene","$needsRender","$onModelLoad","$progressTracker","$getLoaded","$getModelIsVisible","$shouldAttemptPreload","$hasTransitioned","toVector3D","ModelViewerElementBase","alt","boundingRect","oldVisibility","newVisibility","sourceError","styleElement","attachShadow","isConnected","rect","timePasses","entries","entry","contentRect","isIntersecting","rootMargin","is","tagName","prepareTemplate","makeTemplate","modelCacheSize","minimumRenderScale","connectedCallback","observe","registerScene","disconnectedCallback","unobserve","unregisterScene","ariaLabel","encoderOptions","displayCanvas","qualityArgument","idealAspect","outputWidth","outputHeight","oldHeight","oldWidth","msToBlob","toBlob","base64DataUrl","typeMatch","base64","byteCharacters","byteArrays","byteNumbers","dataUrlToBlob","_time","_delta","updateSourceProgress","setSource","__decorate$6","$changeAnimation","$paused","$annotationRenderer","$hotspotMap","$mutationCallback","$observer","$addHotspot","$removeHotspot","worldToModel","worldToModelNormal","__decorate$5","isWebXRBlocked","isSceneViewerBlocked","deserializeARModes","allowedNames","valueString","names","valueNode","_error","ARMode","$arButtonContainer","$enterARWithWebXR","$openSceneViewer","$openIOSARQuickLook","$canActivateAR","$arMode","$arModes","$arAnchor","$preload","$onARButtonContainerClick","$onARStatus","$onARTap","$selectARMode","_a$6","_b$5","_c$2","$evaluate","$lastValue","Evaluator","basis","PercentageEvaluator","CalcEvaluator","EnvEvaluator","evaluatable","isConstant","evaluated","intrinsics","keywords","auto","basisNode","autoSubstituteNode","evaluatedNode","keyword","$percentage","$basis","percentage","$identNode","envFunction","pageYOffset","scrollHeight","documentElement","clientHeight","innerHeight","IS_MULTIPLICATION_RE","$evaluator","calcFunction","secondOrderTerms","term","previousTerm","operator","leftValue","OperatorEvaluator","evaluatableFor","$operator","$left","$right","leftNode","rightNode","leftUnit","rightValue","rightUnit","$evaluatables","$intrinsics","StyleEvaluator","firstExpression","applyIntrinsics","_a$5","_b$4","_c$1","_d","$instances","$activateListener","$deactivateListener","$notifyInstances","$notify","$scrollCallback","ScrollObserver","passive","$computeStyleCallback","$astWalker","$dependencies","$onScroll","StyleEffector","relatedState","newDependencies","oldDependencies","walk","functionNode","firstTerm","observer","environmentState","observeEffects","getIntrinsics","Function","originalUpdated","originalConnectedCallback","originalDisconnectedCallback","$styleEffector","$styleEvaluator","$updateEvaluator","$evaluateAndSync","writable","observeEffectsFor","updateHandler","DEFAULT_OPTIONS","minimumRadius","maximumRadius","minimumPolarAngle","maximumPolarAngle","minimumAzimuthalAngle","maximumAzimuthalAngle","minimumFieldOfView","maximumFieldOfView","interactionPolicy","touchAction","TOUCH_EVENT_RE","KEYBOARD_ORBIT_INCREMENT","KeyCode","ChangeSource","SmoothControls","sensitivity","_interactionEnabled","_disableZoom","isUserChange","isUserPointing","spherical","goalSpherical","thetaDamper","phiDamper","radiusDamper","logFov","goalLogFov","fovDamper","pointerIsDown","lastPointerPosition","clientX","clientY","touchMode","touchDecided","onPointerMove","canInteract","touches","lastTouches","deltaZoom","twoTouchDistance","userAdjustOrbit","_options","handleSinglePointerMove","cancelable","onPointerDown","handleSinglePointerDown","onPointerUp","_event","cursor","pointer","onWheel","deltaMode","onKeyDown","relevantKey","keyCode","setOrbit","setFieldOfView","jumpToGoal","interactionEnabled","disableZoom","nearPlane","farPlane","goalTheta","goalPhi","goalRadius","nextTheta","wrapAngle","nextPhi","nextRadius","makeSafe","deltaTheta","deltaPhi","dThetaLimit","deltaRatio","isStationary","moveCamera","setFromSpherical","getRootNode","activeElement","adjustOrbit","pixelLength","touchOne","touchTwo","xOne","yOne","xTwo","yTwo","xDelta","yDelta","pixelLengthToSphericalAngle","easeInOutQuad","interpolate","ease","timeline","keyframes","lastValue","keyframe","frames","totalWeight","reduce","ratios","ratio","sequence","__decorate$4","wiggle","fade","MINIMUM_RADIUS_RATIO","AZIMUTHAL_QUADRANT_LABELS","POLAR_TRIENT_LABELS","InteractionPromptStrategy","InteractionPromptStyle","InteractionPolicy","TouchAction","fieldOfViewIntrinsics","$zoomAdjustedFieldOfView","minFieldOfViewIntrinsics","maxFieldOfViewIntrinsics","cameraOrbitIntrinsics","defaultTerms","minCameraOrbitIntrinsics","maxCameraOrbitIntrinsics","orbitIntrinsics","defaultRadius","cameraTargetIntrinsics","HALF_PI","THIRD_PI","QUARTER_PI","TAU","$controls","$promptElement","$promptAnimatedContainer","$deferInteractionPrompt","$updateAria","$updateCameraForRadius","$onBlur","$onFocus","$onChange","$onPointerChange","$waitingToPromptUser","$userHasInteracted","$promptElementVisibleTime","$lastPromptOffset","$focusedTime","$lastSpherical","$jumpCamera","$initialized","$maintainThetaPhi","$syncCameraOrbit","$syncFieldOfView","$syncCameraTarget","$syncMinCameraOrbit","$syncMaxCameraOrbit","$syncMinFieldOfView","$syncMaxFieldOfView","__decorate$3","$currentEnvironmentMap","$applyEnvironmentMap","$updateEnvironment","$cancelEnvironmentUpdate","$onPreload","_a$4","_b$3","$modelViewerStatusInstance","$updateStatus","__decorate$2","RevealStrategy","LoadingStrategy","PosterDismissalSource","loadingStatusAnnouncer","registeredInstanceStatuses","loadingPromises","statusElement","statusUpdateInProgress","updateStatus","pointerEvents","modelViewer","onUnregistered","loadShouldBeMeasured","loadAttemptCompletes","resolveHandler","modelViewerStatusInstance","statuses","instanceStatus","firstKey","_map","getFirstMapKey","textContent","$defaultProgressBarElement","$defaultProgressMaskElement","$posterContainerElement","$defaultPosterElement","$posterDismissalSource","$hidePoster","$modelIsRevealed","$updateProgressBar","$lastReportedProgress","$transitioned","$ariaLabelCallToAction","$onClick","$onKeydown","$onProgress","GLTFExporter","writer","GLTFLightExtension","GLTFMaterialsPBRSpecularGlossiness","onDone","GLTFWriter","write","THREE_TO_WEBGL","equalArray","array1","every","getPaddedBufferSize","bufferSize","getPaddedArrayBuffer","paddingByte","paddedLength","cachedCanvas","nodeMap","uids","uid","attributesNormalized","binary","trs","onlyVisible","truncateDrawRange","embedImages","includeCustomExtensions","reader","extensionsUsedList","FileReader","readAsArrayBuffer","onloadend","binaryChunk","binaryChunkPrefix","setUint32","jsonChunk","text","TextEncoder","encode","stringToArrayBuffer","jsonChunkPrefix","totalByteLength","glbBlob","glbReader","readAsDataURL","base64data","serializeUserData","getUID","isNormalizedNormalAttribute","createNormalizedNormalAttribute","applyTextureTransform","didTransform","transformDef","processBuffer","processBufferView","componentSize","dataView","setFloat32","setUint16","setUint8","processBufferViewImage","processAccessor","end2","bufferViewTarget","minMax","POSITIVE_INFINITY","NEGATIVE_INFINITY","getMinMax","3","4","16","processImage","cachedImages","imageDef","ctx","processSampler","samplerDef","processTexture","writeTexture","processMaterial","concat","metalRoughMapDef","baseColorMapDef","emissiveMapDef","normalMapDef","occlusionMapDef","writeMaterial","processMesh","meshCacheKeyParts","meshCacheKey","nameConversion","originalNormal","modifiedAttribute","reverseDictionary","warned","baseAttribute","relativeAttribute","isMultiMaterial","writeMesh","processCamera","isOrtho","orthographic","perspective","processAnimation","Utils","mergeMorphTargetTracks","trackBinding","trackNode","trackProperty","outputItemSize","processSkin","rootJoint","temporaryBoneInverse","processNode","writeNode","processScene","processObjects","beforeParse","objectsWithoutScene","afterParse","specularMapDef","insertKeyframe","tolerance","mergedTracks","sourceTracks","sourceTrack","sourceTrackBinding","sourceTrackNode","mergedTrack","targetCount","sourceInterpolant","keyframeIndex","$correlatedObjects","$sourceObject","$onUpdate","ThreeDOMElement","correlatedObjects","_a$3","_b$2","$threeTextures$1","$uri","$bufferViewImages","Image$1","correlatedTextures","isMinFilter","minFilterValues","isMagFilter","magFilterValues","isWrapMode","wrapModes","$threeTextures","$setProperty","Sampler","isValidSamplerValue","$source","$sampler","samplerIndex","imageIndex","$texture","TextureInfo","textureInfo","_a$2","_b$1","$threeMaterials","$baseColorTexture","$metallicRoughnessTexture","PBRMetallicRoughness","correlatedMaterials","baseColorTextures","metallicRoughnessTextures","rgba","_a$1","_c","$pbrMetallicRoughness","$normalTexture","$occlusionTexture","$emissiveTexture","Material","normalTextures","occlusionTextures","emissiveTextures","rgb","$materials","Model","__decorate$1","$currentGLTF","$model","$variants","__decorate","DEFAULT_ROTATION_SPEED","rotationRateIntrinsics","$autoRotateStartTime","$radiansPerSecond","$syncRotationRate","$onCameraChange","AnnotationModelViewerElement","mutations","mutation","MutationRecord","addedNodes","removedNodes","MutationObserver","ShadyDOM","childList","observeChildren","unobserveChildren","pixelX","pixelY","updateHotspots","increment","addHotspot","decrement","removeHotspot","AnnotationMixin","SceneGraphModelViewerElement","variantName","orientation","availableVariants","findIndex","loadVariant","roll","pitch","updateShadow","variant","opts","forcePowerOfTwoTextures","SceneGraphMixin","StagingModelViewerElement","autoRotate","autoRotateDelay","rotationPerSecond","rotationDelta","StagingMixin","EnvironmentModelViewerElement","environmentImage","skyboxImage","setShadowSoftness","texturesLoad","generateEnvironmentMapAndSkybox","errorOrPromise","EnvironmentMixin","_l","_m","_o","_p","_q","_r","_s","ControlsModelViewerElement","cameraControls","cameraOrbit","cameraTarget","fieldOfView","minCameraOrbit","maxCameraOrbit","minFieldOfView","maxFieldOfView","interactionPromptThreshold","interactionPromptStyle","interactionPrompt","orbitSensitivity","bounds","getFieldOfView","controls","enableInteraction","disableInteraction","toggle","applyOptions","oldFramedFieldOfView","newFramedFieldOfView","getCameraOrbit","jumpCameraToGoal","thresholdTime","updateNearFar","lastTheta","lastPhi","getCameraSpherical","lastAzimuthalQuadrant","azimuthalQuadrant","lastPolarTrient","polarTrient","updateAspect","ControlsMixin","ARModelViewerElement","ar","arScale","arModes","iosSrc","activateAR","canActivateAR","supportsPresentation","eventName","predicate","waitForEvent","present","locationUrl","modelUrl","URLSearchParams","soundUrl","linkUrl","intent","encodeURIComponent","history","back","click","anchor","img","ARMixin","LoadingModelViewerElement","poster","reveal","throttled","flush","throttle","dismissPoster","setDRACODecoderLocation","setKTX2TranscoderLocation","getDRACODecoderLocation","getKTX2TranscoderLocation","posterContainerElement","defaultPosterElement","registerInstance","unregisterInstance","backgroundImage","tabIndex","showPoster","LoadingMixin","AnimationModelViewerElement","animationName","animationCrossfadeDuration","availableAnimations","updateAnimation","stopAnimation","playAnimation","AnimationMixin","SuperClass","$endPolyfillCoordination","applyFocusVisiblePolyfill","coordinationHandler","coordinateWithPolyfill","FocusVisiblePolyfillMixin","customElements","define"],"mappings":"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"}