{"ast":null,"code":"import { useRef, useEffect } from 'react';\nimport { BufferGeometry } from 'three';\nimport { TessellateModifier } from 'three-stdlib';\n\nfunction useTessellation(passes = 3, maxEdgeLength) {\n  const ref = useRef();\n  const original = useRef();\n  const modifier = useRef();\n  useEffect(() => {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new TessellateModifier(parseInt(maxEdgeLength), passes);\n    }\n  }, [maxEdgeLength, passes]);\n  useEffect(() => {\n    modifier.current.maxEdgeLength = maxEdgeLength;\n  }, [maxEdgeLength]);\n  useEffect(() => {\n    if (original.current && ref.current) {\n      let geometry = new BufferGeometry();\n      geometry = original.current.clone();\n      geometry = modifier.current.modify(geometry);\n      ref.current.geometry = geometry;\n    }\n  }, [maxEdgeLength, passes]);\n  return ref;\n}\n\nexport { useTessellation };","map":{"version":3,"sources":["/Users/haiakablan/Documents/לוטוס/קורס/Architecture-web/node_modules/@react-three/drei/core/useTessellation.js"],"names":["useRef","useEffect","BufferGeometry","TessellateModifier","useTessellation","passes","maxEdgeLength","ref","original","modifier","current","geometry","clone","parseInt","modify"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,OAAlC;AACA,SAASC,cAAT,QAA+B,OAA/B;AACA,SAASC,kBAAT,QAAmC,cAAnC;;AAEA,SAASC,eAAT,CAAyBC,MAAM,GAAG,CAAlC,EAAqCC,aAArC,EAAoD;AAClD,QAAMC,GAAG,GAAGP,MAAM,EAAlB;AACA,QAAMQ,QAAQ,GAAGR,MAAM,EAAvB;AACA,QAAMS,QAAQ,GAAGT,MAAM,EAAvB;AACAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACO,QAAQ,CAACE,OAAd,EAAuB;AACrBF,MAAAA,QAAQ,CAACE,OAAT,GAAmBH,GAAG,CAACG,OAAJ,CAAYC,QAAZ,CAAqBC,KAArB,EAAnB;AACAH,MAAAA,QAAQ,CAACC,OAAT,GAAmB,IAAIP,kBAAJ,CAAuBU,QAAQ,CAACP,aAAD,CAA/B,EAAgDD,MAAhD,CAAnB;AACD;AACF,GALQ,EAKN,CAACC,aAAD,EAAgBD,MAAhB,CALM,CAAT;AAMAJ,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,QAAQ,CAACC,OAAT,CAAiBJ,aAAjB,GAAiCA,aAAjC;AACD,GAFQ,EAEN,CAACA,aAAD,CAFM,CAAT;AAGAL,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIO,QAAQ,CAACE,OAAT,IAAoBH,GAAG,CAACG,OAA5B,EAAqC;AACnC,UAAIC,QAAQ,GAAG,IAAIT,cAAJ,EAAf;AACAS,MAAAA,QAAQ,GAAGH,QAAQ,CAACE,OAAT,CAAiBE,KAAjB,EAAX;AACAD,MAAAA,QAAQ,GAAGF,QAAQ,CAACC,OAAT,CAAiBI,MAAjB,CAAwBH,QAAxB,CAAX;AACAJ,MAAAA,GAAG,CAACG,OAAJ,CAAYC,QAAZ,GAAuBA,QAAvB;AACD;AACF,GAPQ,EAON,CAACL,aAAD,EAAgBD,MAAhB,CAPM,CAAT;AAQA,SAAOE,GAAP;AACD;;AAED,SAASH,eAAT","sourcesContent":["import { useRef, useEffect } from 'react';\nimport { BufferGeometry } from 'three';\nimport { TessellateModifier } from 'three-stdlib';\n\nfunction useTessellation(passes = 3, maxEdgeLength) {\n  const ref = useRef();\n  const original = useRef();\n  const modifier = useRef();\n  useEffect(() => {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new TessellateModifier(parseInt(maxEdgeLength), passes);\n    }\n  }, [maxEdgeLength, passes]);\n  useEffect(() => {\n    modifier.current.maxEdgeLength = maxEdgeLength;\n  }, [maxEdgeLength]);\n  useEffect(() => {\n    if (original.current && ref.current) {\n      let geometry = new BufferGeometry();\n      geometry = original.current.clone();\n      geometry = modifier.current.modify(geometry);\n      ref.current.geometry = geometry;\n    }\n  }, [maxEdgeLength, passes]);\n  return ref;\n}\n\nexport { useTessellation };\n"]},"metadata":{},"sourceType":"module"}