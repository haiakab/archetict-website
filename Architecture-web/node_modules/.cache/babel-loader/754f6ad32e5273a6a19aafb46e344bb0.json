{"ast":null,"code":"import _defineProperty from \"/Users/haiakablan/Documents/\\u05DC\\u05D5\\u05D8\\u05D5\\u05E1/\\u05E7\\u05D5\\u05E8\\u05E1/Architecture-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/haiakablan/Documents/\\u05DC\\u05D5\\u05D8\\u05D5\\u05E1/\\u05E7\\u05D5\\u05E8\\u05E1/Architecture-web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { useFrame } from 'react-three-fiber';\nimport { AnimationMixer } from 'three';\n\nfunction useAnimations(clips, root) {\n  var ref = useRef();\n  var actualRef = root ? root : ref;\n\n  var _useState = useState(function () {\n    return new AnimationMixer(undefined);\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      mixer = _useState2[0];\n\n  var api = useMemo(function () {\n    return {\n      ref: actualRef,\n      clips: clips,\n      actions: clips.reduce(function (prev, clip) {\n        return _extends({}, prev, _defineProperty({}, clip.name, null));\n      }, {}),\n      names: clips.map(function (clip) {\n        return clip.name;\n      }),\n      mixer: mixer\n    };\n  }, [clips, mixer, actualRef]);\n  useFrame(function (state, delta) {\n    return mixer.update(delta);\n  });\n  useEffect(function () {\n    var currentRoot = actualRef.current;\n    clips.forEach(function (clip) {\n      return api.actions[clip.name] = mixer.clipAction(clip, currentRoot);\n    });\n    return function () {\n      return Object.values(api.actions).forEach(function (action) {\n        return mixer.uncacheAction(action, currentRoot);\n      });\n    };\n  }, [api, clips, mixer, root, actualRef]);\n  return api;\n}\n\nexport { useAnimations };","map":{"version":3,"sources":["/Users/haiakablan/Documents/לוטוס/קורס/Architecture-web/node_modules/drei/useAnimations.js"],"names":["_extends","useRef","useState","useMemo","useEffect","useFrame","AnimationMixer","useAnimations","clips","root","ref","actualRef","undefined","mixer","api","actions","reduce","prev","clip","name","names","map","state","delta","update","currentRoot","current","forEach","clipAction","Object","values","action","uncacheAction"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,OAA3B,EAAoCC,SAApC,QAAqD,OAArD;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,cAAT,QAA+B,OAA/B;;AAEA,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,IAA9B,EAAoC;AAClC,MAAMC,GAAG,GAAGT,MAAM,EAAlB;AACA,MAAMU,SAAS,GAAGF,IAAI,GAAGA,IAAH,GAAUC,GAAhC;;AAFkC,kBAGlBR,QAAQ,CAAC;AAAA,WAAM,IAAII,cAAJ,CAAmBM,SAAnB,CAAN;AAAA,GAAD,CAHU;AAAA;AAAA,MAG3BC,KAH2B;;AAIlC,MAAMC,GAAG,GAAGX,OAAO,CAAC;AAAA,WAAO;AACzBO,MAAAA,GAAG,EAAEC,SADoB;AAEzBH,MAAAA,KAAK,EAALA,KAFyB;AAGzBO,MAAAA,OAAO,EAAEP,KAAK,CAACQ,MAAN,CAAa,UAACC,IAAD,EAAOC,IAAP;AAAA,eAAgBlB,QAAQ,CAAC,EAAD,EAAKiB,IAAL,sBAC3CC,IAAI,CAACC,IADsC,EAC/B,IAD+B,EAAxB;AAAA,OAAb,EAEL,EAFK,CAHgB;AAMzBC,MAAAA,KAAK,EAAEZ,KAAK,CAACa,GAAN,CAAU,UAAAH,IAAI;AAAA,eAAIA,IAAI,CAACC,IAAT;AAAA,OAAd,CANkB;AAOzBN,MAAAA,KAAK,EAALA;AAPyB,KAAP;AAAA,GAAD,EAQf,CAACL,KAAD,EAAQK,KAAR,EAAeF,SAAf,CARe,CAAnB;AASAN,EAAAA,QAAQ,CAAC,UAACiB,KAAD,EAAQC,KAAR;AAAA,WAAkBV,KAAK,CAACW,MAAN,CAAaD,KAAb,CAAlB;AAAA,GAAD,CAAR;AACAnB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMqB,WAAW,GAAGd,SAAS,CAACe,OAA9B;AACAlB,IAAAA,KAAK,CAACmB,OAAN,CAAc,UAAAT,IAAI;AAAA,aAAIJ,GAAG,CAACC,OAAJ,CAAYG,IAAI,CAACC,IAAjB,IAAyBN,KAAK,CAACe,UAAN,CAAiBV,IAAjB,EAAuBO,WAAvB,CAA7B;AAAA,KAAlB;AACA,WAAO;AAAA,aAAMI,MAAM,CAACC,MAAP,CAAchB,GAAG,CAACC,OAAlB,EAA2BY,OAA3B,CAAmC,UAAAI,MAAM;AAAA,eAAIlB,KAAK,CAACmB,aAAN,CAAoBD,MAApB,EAA4BN,WAA5B,CAAJ;AAAA,OAAzC,CAAN;AAAA,KAAP;AACD,GAJQ,EAIN,CAACX,GAAD,EAAMN,KAAN,EAAaK,KAAb,EAAoBJ,IAApB,EAA0BE,SAA1B,CAJM,CAAT;AAKA,SAAOG,GAAP;AACD;;AAED,SAASP,aAAT","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { useFrame } from 'react-three-fiber';\nimport { AnimationMixer } from 'three';\n\nfunction useAnimations(clips, root) {\n  const ref = useRef();\n  const actualRef = root ? root : ref;\n  const [mixer] = useState(() => new AnimationMixer(undefined));\n  const api = useMemo(() => ({\n    ref: actualRef,\n    clips,\n    actions: clips.reduce((prev, clip) => _extends({}, prev, {\n      [clip.name]: null\n    }), {}),\n    names: clips.map(clip => clip.name),\n    mixer\n  }), [clips, mixer, actualRef]);\n  useFrame((state, delta) => mixer.update(delta));\n  useEffect(() => {\n    const currentRoot = actualRef.current;\n    clips.forEach(clip => api.actions[clip.name] = mixer.clipAction(clip, currentRoot));\n    return () => Object.values(api.actions).forEach(action => mixer.uncacheAction(action, currentRoot));\n  }, [api, clips, mixer, root, actualRef]);\n  return api;\n}\n\nexport { useAnimations };\n"]},"metadata":{},"sourceType":"module"}