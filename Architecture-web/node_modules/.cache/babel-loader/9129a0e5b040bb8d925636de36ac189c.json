{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar proxyCompare = require('proxy-compare');\n\nvar VERSION = Symbol();\nvar LISTENERS = Symbol();\nvar SNAPSHOT = Symbol();\nvar PROMISE_RESULT = Symbol();\nvar PROMISE_ERROR = Symbol();\nvar refSet = new WeakSet();\n\nvar ref = function ref(o) {\n  refSet.add(o);\n  return o;\n};\n\nvar isSupportedObject = function isSupportedObject(x) {\n  return typeof x === 'object' && x !== null && (Array.isArray(x) || !x[Symbol.iterator]) && !(x instanceof WeakMap) && !(x instanceof WeakSet) && !(x instanceof Error) && !(x instanceof Number) && !(x instanceof Date) && !(x instanceof String) && !(x instanceof RegExp) && !(x instanceof ArrayBuffer);\n};\n\nvar proxyCache = new WeakMap();\nvar globalVersion = 1;\nvar snapshotCache = new WeakMap();\n\nvar proxy = function proxy(initialObject) {\n  if (initialObject === void 0) {\n    initialObject = {};\n  }\n\n  if (!isSupportedObject(initialObject)) {\n    throw new Error('unsupported object type');\n  }\n\n  if (proxyCache.has(initialObject)) {\n    return proxyCache.get(initialObject);\n  }\n\n  var version = globalVersion;\n  var listeners = new Set();\n\n  var notifyUpdate = function notifyUpdate(nextVersion) {\n    if (!nextVersion) {\n      nextVersion = ++globalVersion;\n    }\n\n    if (version !== nextVersion) {\n      version = nextVersion;\n      listeners.forEach(function (listener) {\n        return listener(nextVersion);\n      });\n    }\n  };\n\n  var createSnapshot = function createSnapshot(target, receiver) {\n    var cache = snapshotCache.get(receiver);\n\n    if (cache && cache.version === version) {\n      return cache.snapshot;\n    }\n\n    var snapshot = Array.isArray(target) ? [] : Object.create(Object.getPrototypeOf(target));\n    proxyCompare.markToTrack(snapshot, true);\n    snapshotCache.set(receiver, {\n      version: version,\n      snapshot: snapshot\n    });\n    Reflect.ownKeys(target).forEach(function (key) {\n      var value = target[key];\n\n      if (refSet.has(value)) {\n        proxyCompare.markToTrack(value, false);\n        snapshot[key] = value;\n      } else if (!isSupportedObject(value)) {\n        snapshot[key] = value;\n      } else if (value instanceof Promise) {\n        if (PROMISE_RESULT in value) {\n          snapshot[key] = value[PROMISE_RESULT];\n        } else {\n          var errorOrPromise = value[PROMISE_ERROR] || value;\n          Object.defineProperty(snapshot, key, {\n            get: function get() {\n              throw errorOrPromise;\n            }\n          });\n        }\n      } else if (value[VERSION]) {\n        snapshot[key] = value[SNAPSHOT];\n      } else {\n        snapshot[key] = value;\n      }\n    });\n    Object.freeze(snapshot);\n    return snapshot;\n  };\n\n  var baseObject = Array.isArray(initialObject) ? [] : Object.create(Object.getPrototypeOf(initialObject));\n  var proxyObject = new Proxy(baseObject, {\n    get: function get(target, prop, receiver) {\n      if (prop === VERSION) {\n        return version;\n      }\n\n      if (prop === LISTENERS) {\n        return listeners;\n      }\n\n      if (prop === SNAPSHOT) {\n        return createSnapshot(target, receiver);\n      }\n\n      return target[prop];\n    },\n    deleteProperty: function deleteProperty(target, prop) {\n      var prevValue = target[prop];\n      var childListeners = prevValue && prevValue[LISTENERS];\n\n      if (childListeners) {\n        childListeners.delete(notifyUpdate);\n      }\n\n      var deleted = Reflect.deleteProperty(target, prop);\n\n      if (deleted) {\n        notifyUpdate();\n      }\n\n      return deleted;\n    },\n    set: function set(target, prop, value) {\n      var _Object$getOwnPropert;\n\n      var prevValue = target[prop];\n\n      if (Object.is(prevValue, value)) {\n        return true;\n      }\n\n      var childListeners = prevValue && prevValue[LISTENERS];\n\n      if (childListeners) {\n        childListeners.delete(notifyUpdate);\n      }\n\n      if (refSet.has(value) || !isSupportedObject(value) || (_Object$getOwnPropert = Object.getOwnPropertyDescriptor(target, prop)) != null && _Object$getOwnPropert.set) {\n        target[prop] = value;\n      } else if (value instanceof Promise) {\n        target[prop] = value.then(function (v) {\n          target[prop][PROMISE_RESULT] = v;\n          notifyUpdate();\n          return v;\n        }).catch(function (e) {\n          target[prop][PROMISE_ERROR] = e;\n          notifyUpdate();\n        });\n      } else {\n        value = proxyCompare.getUntrackedObject(value) || value;\n\n        if (value[LISTENERS]) {\n          target[prop] = value;\n        } else {\n          target[prop] = proxy(value);\n        }\n\n        target[prop][LISTENERS].add(notifyUpdate);\n      }\n\n      notifyUpdate();\n      return true;\n    }\n  });\n  proxyCache.set(initialObject, proxyObject);\n  Reflect.ownKeys(initialObject).forEach(function (key) {\n    var desc = Object.getOwnPropertyDescriptor(initialObject, key);\n\n    if (desc.get || desc.set) {\n      Object.defineProperty(baseObject, key, desc);\n    } else {\n      proxyObject[key] = initialObject[key];\n    }\n  });\n  return proxyObject;\n};\n\nvar getVersion = function getVersion(proxyObject) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && (!proxyObject || !proxyObject[VERSION])) {\n    throw new Error('Please use proxy object');\n  }\n\n  return proxyObject[VERSION];\n};\n\nvar subscribe = function subscribe(proxyObject, callback, notifyInSync) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && (!proxyObject || !proxyObject[LISTENERS])) {\n    throw new Error('Please use proxy object');\n  }\n\n  var pendingVersion = 0;\n\n  var listener = function listener(nextVersion) {\n    if (notifyInSync) {\n      callback();\n      return;\n    }\n\n    pendingVersion = nextVersion;\n    Promise.resolve().then(function () {\n      if (nextVersion === pendingVersion) {\n        callback();\n      }\n    });\n  };\n\n  proxyObject[LISTENERS].add(listener);\n  return function () {\n    proxyObject[LISTENERS].delete(listener);\n  };\n};\n\nvar snapshot = function snapshot(proxyObject) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && (!proxyObject || !proxyObject[SNAPSHOT])) {\n    throw new Error('Please use proxy object');\n  }\n\n  return proxyObject[SNAPSHOT];\n};\n\nexports.getVersion = getVersion;\nexports.proxy = proxy;\nexports.ref = ref;\nexports.snapshot = snapshot;\nexports.subscribe = subscribe;","map":{"version":3,"sources":["/Users/haiakablan/Documents/לוטוס/קורס/Architecture-web/node_modules/valtio/vanilla.js"],"names":["Object","defineProperty","exports","value","proxyCompare","require","VERSION","Symbol","LISTENERS","SNAPSHOT","PROMISE_RESULT","PROMISE_ERROR","refSet","WeakSet","ref","o","add","isSupportedObject","x","Array","isArray","iterator","WeakMap","Error","Number","Date","String","RegExp","ArrayBuffer","proxyCache","globalVersion","snapshotCache","proxy","initialObject","has","get","version","listeners","Set","notifyUpdate","nextVersion","forEach","listener","createSnapshot","target","receiver","cache","snapshot","create","getPrototypeOf","markToTrack","set","Reflect","ownKeys","key","Promise","errorOrPromise","freeze","baseObject","proxyObject","Proxy","prop","deleteProperty","prevValue","childListeners","delete","deleted","_Object$getOwnPropert","is","getOwnPropertyDescriptor","then","v","catch","e","getUntrackedObject","desc","getVersion","process","env","NODE_ENV","subscribe","callback","notifyInSync","pendingVersion","resolve"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar proxyCompare = require('proxy-compare');\n\nvar VERSION = Symbol();\nvar LISTENERS = Symbol();\nvar SNAPSHOT = Symbol();\nvar PROMISE_RESULT = Symbol();\nvar PROMISE_ERROR = Symbol();\nvar refSet = new WeakSet();\nvar ref = function ref(o) {\n  refSet.add(o);\n  return o;\n};\n\nvar isSupportedObject = function isSupportedObject(x) {\n  return typeof x === 'object' && x !== null && (Array.isArray(x) || !x[Symbol.iterator]) && !(x instanceof WeakMap) && !(x instanceof WeakSet) && !(x instanceof Error) && !(x instanceof Number) && !(x instanceof Date) && !(x instanceof String) && !(x instanceof RegExp) && !(x instanceof ArrayBuffer);\n};\n\nvar proxyCache = new WeakMap();\nvar globalVersion = 1;\nvar snapshotCache = new WeakMap();\nvar proxy = function proxy(initialObject) {\n  if (initialObject === void 0) {\n    initialObject = {};\n  }\n\n  if (!isSupportedObject(initialObject)) {\n    throw new Error('unsupported object type');\n  }\n\n  if (proxyCache.has(initialObject)) {\n    return proxyCache.get(initialObject);\n  }\n\n  var version = globalVersion;\n  var listeners = new Set();\n\n  var notifyUpdate = function notifyUpdate(nextVersion) {\n    if (!nextVersion) {\n      nextVersion = ++globalVersion;\n    }\n\n    if (version !== nextVersion) {\n      version = nextVersion;\n      listeners.forEach(function (listener) {\n        return listener(nextVersion);\n      });\n    }\n  };\n\n  var createSnapshot = function createSnapshot(target, receiver) {\n    var cache = snapshotCache.get(receiver);\n\n    if (cache && cache.version === version) {\n      return cache.snapshot;\n    }\n\n    var snapshot = Array.isArray(target) ? [] : Object.create(Object.getPrototypeOf(target));\n    proxyCompare.markToTrack(snapshot, true);\n    snapshotCache.set(receiver, {\n      version: version,\n      snapshot: snapshot\n    });\n    Reflect.ownKeys(target).forEach(function (key) {\n      var value = target[key];\n\n      if (refSet.has(value)) {\n        proxyCompare.markToTrack(value, false);\n        snapshot[key] = value;\n      } else if (!isSupportedObject(value)) {\n        snapshot[key] = value;\n      } else if (value instanceof Promise) {\n        if (PROMISE_RESULT in value) {\n          snapshot[key] = value[PROMISE_RESULT];\n        } else {\n          var errorOrPromise = value[PROMISE_ERROR] || value;\n          Object.defineProperty(snapshot, key, {\n            get: function get() {\n              throw errorOrPromise;\n            }\n          });\n        }\n      } else if (value[VERSION]) {\n        snapshot[key] = value[SNAPSHOT];\n      } else {\n        snapshot[key] = value;\n      }\n    });\n    Object.freeze(snapshot);\n    return snapshot;\n  };\n\n  var baseObject = Array.isArray(initialObject) ? [] : Object.create(Object.getPrototypeOf(initialObject));\n  var proxyObject = new Proxy(baseObject, {\n    get: function get(target, prop, receiver) {\n      if (prop === VERSION) {\n        return version;\n      }\n\n      if (prop === LISTENERS) {\n        return listeners;\n      }\n\n      if (prop === SNAPSHOT) {\n        return createSnapshot(target, receiver);\n      }\n\n      return target[prop];\n    },\n    deleteProperty: function deleteProperty(target, prop) {\n      var prevValue = target[prop];\n      var childListeners = prevValue && prevValue[LISTENERS];\n\n      if (childListeners) {\n        childListeners.delete(notifyUpdate);\n      }\n\n      var deleted = Reflect.deleteProperty(target, prop);\n\n      if (deleted) {\n        notifyUpdate();\n      }\n\n      return deleted;\n    },\n    set: function set(target, prop, value) {\n      var _Object$getOwnPropert;\n\n      var prevValue = target[prop];\n\n      if (Object.is(prevValue, value)) {\n        return true;\n      }\n\n      var childListeners = prevValue && prevValue[LISTENERS];\n\n      if (childListeners) {\n        childListeners.delete(notifyUpdate);\n      }\n\n      if (refSet.has(value) || !isSupportedObject(value) || (_Object$getOwnPropert = Object.getOwnPropertyDescriptor(target, prop)) != null && _Object$getOwnPropert.set) {\n        target[prop] = value;\n      } else if (value instanceof Promise) {\n        target[prop] = value.then(function (v) {\n          target[prop][PROMISE_RESULT] = v;\n          notifyUpdate();\n          return v;\n        }).catch(function (e) {\n          target[prop][PROMISE_ERROR] = e;\n          notifyUpdate();\n        });\n      } else {\n        value = proxyCompare.getUntrackedObject(value) || value;\n\n        if (value[LISTENERS]) {\n          target[prop] = value;\n        } else {\n          target[prop] = proxy(value);\n        }\n\n        target[prop][LISTENERS].add(notifyUpdate);\n      }\n\n      notifyUpdate();\n      return true;\n    }\n  });\n  proxyCache.set(initialObject, proxyObject);\n  Reflect.ownKeys(initialObject).forEach(function (key) {\n    var desc = Object.getOwnPropertyDescriptor(initialObject, key);\n\n    if (desc.get || desc.set) {\n      Object.defineProperty(baseObject, key, desc);\n    } else {\n      proxyObject[key] = initialObject[key];\n    }\n  });\n  return proxyObject;\n};\nvar getVersion = function getVersion(proxyObject) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && (!proxyObject || !proxyObject[VERSION])) {\n    throw new Error('Please use proxy object');\n  }\n\n  return proxyObject[VERSION];\n};\nvar subscribe = function subscribe(proxyObject, callback, notifyInSync) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && (!proxyObject || !proxyObject[LISTENERS])) {\n    throw new Error('Please use proxy object');\n  }\n\n  var pendingVersion = 0;\n\n  var listener = function listener(nextVersion) {\n    if (notifyInSync) {\n      callback();\n      return;\n    }\n\n    pendingVersion = nextVersion;\n    Promise.resolve().then(function () {\n      if (nextVersion === pendingVersion) {\n        callback();\n      }\n    });\n  };\n\n  proxyObject[LISTENERS].add(listener);\n  return function () {\n    proxyObject[LISTENERS].delete(listener);\n  };\n};\nvar snapshot = function snapshot(proxyObject) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && (!proxyObject || !proxyObject[SNAPSHOT])) {\n    throw new Error('Please use proxy object');\n  }\n\n  return proxyObject[SNAPSHOT];\n};\n\nexports.getVersion = getVersion;\nexports.proxy = proxy;\nexports.ref = ref;\nexports.snapshot = snapshot;\nexports.subscribe = subscribe;\n"]},"metadata":{},"sourceType":"script"}