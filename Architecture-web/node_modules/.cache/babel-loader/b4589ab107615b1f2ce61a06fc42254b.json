{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport React, { forwardRef, useRef, useState, useEffect } from 'react';\nimport { useThree, useLoader } from 'react-three-fiber';\nimport mergeRefs from 'react-merge-refs';\nimport { AudioListener, AudioLoader } from 'three';\nconst PositionalAudio = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    url,\n    distance = 1,\n    loop = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  const sound = useRef();\n  const {\n    camera\n  } = useThree();\n  const [listener] = useState(() => new AudioListener());\n  const buffer = useLoader(AudioLoader, url);\n  useEffect(() => {\n    const _sound = sound.current;\n\n    if (_sound) {\n      _sound.setBuffer(buffer);\n\n      _sound.setRefDistance(distance);\n\n      _sound.setLoop(loop);\n\n      _sound.play();\n    }\n\n    camera.add(listener);\n    return () => {\n      camera.remove(listener);\n\n      if (_sound) {\n        _sound.stop();\n\n        _sound.disconnect();\n      }\n    };\n  }, [buffer, camera, distance, listener, loop]);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\nexport { PositionalAudio };","map":{"version":3,"sources":["/Users/haiakablan/Documents/לוטוס/קורס/Architecture-web/node_modules/drei/PositionalAudio.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","forwardRef","useRef","useState","useEffect","useThree","useLoader","mergeRefs","AudioListener","AudioLoader","PositionalAudio","_ref","ref","url","distance","loop","props","sound","camera","listener","buffer","_sound","current","setBuffer","setRefDistance","setLoop","play","add","remove","stop","disconnect","createElement","args"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,MAA5B,EAAoCC,QAApC,EAA8CC,SAA9C,QAA+D,OAA/D;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,mBAApC;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,SAASC,aAAT,EAAwBC,WAAxB,QAA2C,OAA3C;AAEA,MAAMC,eAAe,GAAG,aAAaT,UAAU,CAAC,CAACU,IAAD,EAAOC,GAAP,KAAe;AAC7D,MAAI;AACFC,IAAAA,GADE;AAEFC,IAAAA,QAAQ,GAAG,CAFT;AAGFC,IAAAA,IAAI,GAAG;AAHL,MAIAJ,IAJJ;AAAA,MAKIK,KAAK,GAAGjB,6BAA6B,CAACY,IAAD,EAAO,CAAC,KAAD,EAAQ,UAAR,EAAoB,MAApB,CAAP,CALzC;;AAOA,QAAMM,KAAK,GAAGf,MAAM,EAApB;AACA,QAAM;AACJgB,IAAAA;AADI,MAEFb,QAAQ,EAFZ;AAGA,QAAM,CAACc,QAAD,IAAahB,QAAQ,CAAC,MAAM,IAAIK,aAAJ,EAAP,CAA3B;AACA,QAAMY,MAAM,GAAGd,SAAS,CAACG,WAAD,EAAcI,GAAd,CAAxB;AACAT,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMiB,MAAM,GAAGJ,KAAK,CAACK,OAArB;;AAEA,QAAID,MAAJ,EAAY;AACVA,MAAAA,MAAM,CAACE,SAAP,CAAiBH,MAAjB;;AAEAC,MAAAA,MAAM,CAACG,cAAP,CAAsBV,QAAtB;;AAEAO,MAAAA,MAAM,CAACI,OAAP,CAAeV,IAAf;;AAEAM,MAAAA,MAAM,CAACK,IAAP;AACD;;AAEDR,IAAAA,MAAM,CAACS,GAAP,CAAWR,QAAX;AACA,WAAO,MAAM;AACXD,MAAAA,MAAM,CAACU,MAAP,CAAcT,QAAd;;AAEA,UAAIE,MAAJ,EAAY;AACVA,QAAAA,MAAM,CAACQ,IAAP;;AAEAR,QAAAA,MAAM,CAACS,UAAP;AACD;AACF,KARD;AASD,GAvBQ,EAuBN,CAACV,MAAD,EAASF,MAAT,EAAiBJ,QAAjB,EAA2BK,QAA3B,EAAqCJ,IAArC,CAvBM,CAAT;AAwBA,SAAO,aAAaf,KAAK,CAAC+B,aAAN,CAAoB,iBAApB,EAAuCjC,QAAQ,CAAC;AAClEc,IAAAA,GAAG,EAAEL,SAAS,CAAC,CAACU,KAAD,EAAQL,GAAR,CAAD,CADoD;AAElEoB,IAAAA,IAAI,EAAE,CAACb,QAAD;AAF4D,GAAD,EAGhEH,KAHgE,CAA/C,CAApB;AAID,CA1C8C,CAA/C;AA4CA,SAASN,eAAT","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport React, { forwardRef, useRef, useState, useEffect } from 'react';\nimport { useThree, useLoader } from 'react-three-fiber';\nimport mergeRefs from 'react-merge-refs';\nimport { AudioListener, AudioLoader } from 'three';\n\nconst PositionalAudio = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    url,\n    distance = 1,\n    loop = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  const sound = useRef();\n  const {\n    camera\n  } = useThree();\n  const [listener] = useState(() => new AudioListener());\n  const buffer = useLoader(AudioLoader, url);\n  useEffect(() => {\n    const _sound = sound.current;\n\n    if (_sound) {\n      _sound.setBuffer(buffer);\n\n      _sound.setRefDistance(distance);\n\n      _sound.setLoop(loop);\n\n      _sound.play();\n    }\n\n    camera.add(listener);\n    return () => {\n      camera.remove(listener);\n\n      if (_sound) {\n        _sound.stop();\n\n        _sound.disconnect();\n      }\n    };\n  }, [buffer, camera, distance, listener, loop]);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\n\nexport { PositionalAudio };\n"]},"metadata":{},"sourceType":"module"}