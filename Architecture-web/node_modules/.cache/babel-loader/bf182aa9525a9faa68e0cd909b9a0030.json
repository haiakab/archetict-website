{"ast":null,"code":"import { useRef, useEffect } from 'react';\nimport { Geometry, BufferGeometry } from 'three';\nimport { TessellateModifier } from 'three/examples/jsm/modifiers/TessellateModifier';\n\nfunction useTessellation() {\n  var passes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n  var maxEdgeLength = arguments.length > 1 ? arguments[1] : undefined;\n  var ref = useRef();\n  var original = useRef();\n  var modifier = useRef();\n  useEffect(function () {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new TessellateModifier(parseInt(maxEdgeLength));\n    }\n  }, [maxEdgeLength]);\n  useEffect(function () {\n    modifier.current.maxEdgeLength = maxEdgeLength;\n  }, [maxEdgeLength]);\n  useEffect(function () {\n    if (original.current && ref.current) {\n      var geometry = new Geometry();\n\n      if (original.current instanceof BufferGeometry) {\n        geometry.fromBufferGeometry(original.current);\n      } else {\n        geometry = original.current.clone();\n      }\n\n      var bufferGeometry = new BufferGeometry();\n\n      for (var i = 0; i < passes; i++) {\n        modifier.current.modify(geometry);\n      }\n\n      var tessellated = bufferGeometry.fromGeometry(geometry);\n      ref.current.geometry = tessellated;\n    }\n  }, [maxEdgeLength, passes]);\n  return ref;\n}\n\nexport { useTessellation };","map":{"version":3,"sources":["/Users/haiakablan/Documents/לוטוס/קורס/Architecture-web/node_modules/drei/useTessellation.js"],"names":["useRef","useEffect","Geometry","BufferGeometry","TessellateModifier","useTessellation","passes","maxEdgeLength","ref","original","modifier","current","geometry","clone","parseInt","fromBufferGeometry","bufferGeometry","i","modify","tessellated","fromGeometry"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,OAAlC;AACA,SAASC,QAAT,EAAmBC,cAAnB,QAAyC,OAAzC;AACA,SAASC,kBAAT,QAAmC,iDAAnC;;AAEA,SAASC,eAAT,GAAoD;AAAA,MAA3BC,MAA2B,uEAAlB,CAAkB;AAAA,MAAfC,aAAe;AAClD,MAAMC,GAAG,GAAGR,MAAM,EAAlB;AACA,MAAMS,QAAQ,GAAGT,MAAM,EAAvB;AACA,MAAMU,QAAQ,GAAGV,MAAM,EAAvB;AACAC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACQ,QAAQ,CAACE,OAAd,EAAuB;AACrBF,MAAAA,QAAQ,CAACE,OAAT,GAAmBH,GAAG,CAACG,OAAJ,CAAYC,QAAZ,CAAqBC,KAArB,EAAnB;AACAH,MAAAA,QAAQ,CAACC,OAAT,GAAmB,IAAIP,kBAAJ,CAAuBU,QAAQ,CAACP,aAAD,CAA/B,CAAnB;AACD;AACF,GALQ,EAKN,CAACA,aAAD,CALM,CAAT;AAMAN,EAAAA,SAAS,CAAC,YAAM;AACdS,IAAAA,QAAQ,CAACC,OAAT,CAAiBJ,aAAjB,GAAiCA,aAAjC;AACD,GAFQ,EAEN,CAACA,aAAD,CAFM,CAAT;AAGAN,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIQ,QAAQ,CAACE,OAAT,IAAoBH,GAAG,CAACG,OAA5B,EAAqC;AACnC,UAAIC,QAAQ,GAAG,IAAIV,QAAJ,EAAf;;AAEA,UAAIO,QAAQ,CAACE,OAAT,YAA4BR,cAAhC,EAAgD;AAC9CS,QAAAA,QAAQ,CAACG,kBAAT,CAA4BN,QAAQ,CAACE,OAArC;AACD,OAFD,MAEO;AACLC,QAAAA,QAAQ,GAAGH,QAAQ,CAACE,OAAT,CAAiBE,KAAjB,EAAX;AACD;;AAED,UAAMG,cAAc,GAAG,IAAIb,cAAJ,EAAvB;;AAEA,WAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,MAApB,EAA4BW,CAAC,EAA7B,EAAiC;AAC/BP,QAAAA,QAAQ,CAACC,OAAT,CAAiBO,MAAjB,CAAwBN,QAAxB;AACD;;AAED,UAAMO,WAAW,GAAGH,cAAc,CAACI,YAAf,CAA4BR,QAA5B,CAApB;AACAJ,MAAAA,GAAG,CAACG,OAAJ,CAAYC,QAAZ,GAAuBO,WAAvB;AACD;AACF,GAnBQ,EAmBN,CAACZ,aAAD,EAAgBD,MAAhB,CAnBM,CAAT;AAoBA,SAAOE,GAAP;AACD;;AAED,SAASH,eAAT","sourcesContent":["import { useRef, useEffect } from 'react';\nimport { Geometry, BufferGeometry } from 'three';\nimport { TessellateModifier } from 'three/examples/jsm/modifiers/TessellateModifier';\n\nfunction useTessellation(passes = 3, maxEdgeLength) {\n  const ref = useRef();\n  const original = useRef();\n  const modifier = useRef();\n  useEffect(() => {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new TessellateModifier(parseInt(maxEdgeLength));\n    }\n  }, [maxEdgeLength]);\n  useEffect(() => {\n    modifier.current.maxEdgeLength = maxEdgeLength;\n  }, [maxEdgeLength]);\n  useEffect(() => {\n    if (original.current && ref.current) {\n      let geometry = new Geometry();\n\n      if (original.current instanceof BufferGeometry) {\n        geometry.fromBufferGeometry(original.current);\n      } else {\n        geometry = original.current.clone();\n      }\n\n      const bufferGeometry = new BufferGeometry();\n\n      for (let i = 0; i < passes; i++) {\n        modifier.current.modify(geometry);\n      }\n\n      const tessellated = bufferGeometry.fromGeometry(geometry);\n      ref.current.geometry = tessellated;\n    }\n  }, [maxEdgeLength, passes]);\n  return ref;\n}\n\nexport { useTessellation };\n"]},"metadata":{},"sourceType":"module"}